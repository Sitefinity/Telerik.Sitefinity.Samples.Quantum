/*! For license information please see forms-forms-module.b1ebdd3e61d20ba98895.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([["forms-forms-module"],{2515:function(e,t,n){"use strict";n.r(t),n.d(t,"SfFormsModule",(function(){return R}));var o=n(324),i=n(261),r=n(415),s=n(2516),a=n(1569),l=n(2524),m=n(2525),p=n(2517),c=n(2526),u=n(2518),f=n(2523),C=n(2520),d=n(2522),_=n(2528),F=n(260),T=n(1216),E=n(1587),g=n(2527),h=n(229),v=[{path:"integrated",children:[{path:"**",component:_.FormsEditIntegratedComponent}]},{path:"rules",component:s.FormRulesListComponent,children:[{path:"confirm/:name",component:T.ModalWindowComponent,outlet:"dialog"}],resolve:{metaStore:E.MetadataStoreResolver}}],R=function(){function SfFormsModule(){}return SfFormsModule.ɵfac=function SfFormsModule_Factory(e){return new(e||SfFormsModule)},SfFormsModule.ɵmod=h["ɵɵdefineNgModule"]({type:SfFormsModule}),SfFormsModule.ɵinj=h["ɵɵdefineInjector"]({providers:[p.FormsService,C.FormFieldTypesParserService],imports:[[F.RouterModule.forChild(v),r.FieldsModule,a.SharedModule,o.FormsModule,i.CommonModule],F.RouterModule]}),SfFormsModule}();h["ɵɵsetNgModuleScope"](R,{declarations:[s.FormRulesListComponent,l.ConditionColumnComponent,m.ActionColumnComponent,u.FormRuleCreateComponent,f.ConditionCreateCompositeComponent,d.ActionCreateCompositeComponent,_.FormsEditIntegratedComponent,l.GetConditionFieldTitlePipe,l.GetConditionOperatorLabelPipe,l.GetConditionFieldValuePipe,l.GetRuleOperatorLabelPipe,c.FormActionColumnDirective,g.TrimTextPipe],imports:[F.RouterModule,r.FieldsModule,a.SharedModule,o.FormsModule,i.CommonModule],exports:[F.RouterModule]})},2516:function(e,t,n){"use strict";n.r(t),n.d(t,"FormRulesListComponent",(function(){return L}));var o=n(259),i=n(229),r=n(1173),s=n(317),a=n(2517),l=n(1534),m=n(246),p=n(1118),c=n(2518),u=n(260),f=n(2519),C=n(269),d=n(372),_=n(256),F=n(264),T=n(245),E=n(1139),g=n(131),h=n(1063),v=n(1138),R=n(1152),S=n(11),I=n(261),D=n(354),O=n(1570),A=n(1571),y=n(2524),P=n(2525),N=["navigationMenuTemplate"];function FormRulesListComponent_ng_template_4_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"h3",7),i["ɵɵtext"](1,"Form rules"),i["ɵɵelementEnd"]())}function FormRulesListComponent_ng_container_6_div_1_p_6_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"p",18),i["ɵɵtext"](1,"No rules have been created yet"),i["ɵɵelementEnd"]())}function FormRulesListComponent_ng_container_6_div_1_p_7_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"p",18),i["ɵɵtext"](1,"You cannot create rules for an empty form"),i["ɵɵelementEnd"]())}function FormRulesListComponent_ng_container_6_div_1_sf_button_9_Template(e,t){if(1&e){var n=i["ɵɵgetCurrentView"]();i["ɵɵelementStart"](0,"sf-button",19),i["ɵɵlistener"]("click",(function FormRulesListComponent_ng_container_6_div_1_sf_button_9_Template_sf_button_click_0_listener(){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"](3).createRule(null)})),i["ɵɵtext"](1,"Create a rule"),i["ɵɵelementEnd"]()}}function FormRulesListComponent_ng_container_6_div_1_Template(e,t){if(1&e&&(i["ɵɵelementStart"](0,"div",10),i["ɵɵelementStart"](1,"div",11),i["ɵɵelementStart"](2,"h1",12),i["ɵɵtext"](3),i["ɵɵelementEnd"](),i["ɵɵelementEnd"](),i["ɵɵelementStart"](4,"div",13),i["ɵɵelement"](5,"sf-icon",14),i["ɵɵtemplate"](6,FormRulesListComponent_ng_container_6_div_1_p_6_Template,2,0,"p",15),i["ɵɵtemplate"](7,FormRulesListComponent_ng_container_6_div_1_p_7_Template,2,0,"p",15),i["ɵɵelementEnd"](),i["ɵɵelementStart"](8,"div",16),i["ɵɵtemplate"](9,FormRulesListComponent_ng_container_6_div_1_sf_button_9_Template,2,0,"sf-button",17),i["ɵɵelementEnd"](),i["ɵɵelementEnd"]()),2&e){var n=i["ɵɵnextContext"](2);i["ɵɵadvance"](3),i["ɵɵtextInterpolate"](n.formDefinition.Title),i["ɵɵadvance"](3),i["ɵɵproperty"]("ngIf",n.hasFields),i["ɵɵadvance"](1),i["ɵɵproperty"]("ngIf",!n.hasFields),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",n.hasFields)}}function FormRulesListComponent_ng_container_6_ng_template_2_ng_template_10_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"b"),i["ɵɵtext"](1,"IF"),i["ɵɵelementEnd"]())}function FormRulesListComponent_ng_container_6_ng_template_2_ng_template_11_Template(e,t){if(1&e&&i["ɵɵelement"](0,"sf-condition-column",30),2&e){var n=t.context,o=i["ɵɵnextContext"](3);i["ɵɵproperty"]("formRuleConditions",n.data.Conditions)("formRuleOperator",n.data.Operator)("formDefinition",o.formDefinition)}}function FormRulesListComponent_ng_container_6_ng_template_2_ng_template_12_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"b"),i["ɵɵtext"](1,"THEN"),i["ɵɵelementEnd"]())}function FormRulesListComponent_ng_container_6_ng_template_2_ng_template_13_Template(e,t){if(1&e&&i["ɵɵelement"](0,"sf-action-column",31),2&e){var n=t.context,o=i["ɵɵnextContext"](3);i["ɵɵproperty"]("formRuleActions",n.data.Actions)("formDefinition",o.formDefinition)}}var _c1=function(e){return{"-sf-disabled":e}};function FormRulesListComponent_ng_container_6_ng_template_2_ng_template_14_Template(e,t){if(1&e){var n=i["ɵɵgetCurrentView"]();i["ɵɵelementStart"](0,"sf-icon",32),i["ɵɵlistener"]("click",(function FormRulesListComponent_ng_container_6_ng_template_2_ng_template_14_Template_sf_icon_click_0_listener(){i["ɵɵrestoreView"](n);var e=t.context;return i["ɵɵnextContext"](3).deleteRule(e)})),i["ɵɵelementEnd"]()}if(2&e){var o=i["ɵɵnextContext"](3);i["ɵɵproperty"]("ngClass",i["ɵɵpureFunction1"](1,_c1,!o.canUpdate))}}function FormRulesListComponent_ng_container_6_ng_template_2_Template(e,t){if(1&e){var n=i["ɵɵgetCurrentView"]();i["ɵɵelementStart"](0,"div",20),i["ɵɵelementStart"](1,"div",11),i["ɵɵelementStart"](2,"h1",12),i["ɵɵtext"](3),i["ɵɵelementEnd"](),i["ɵɵelementEnd"](),i["ɵɵelementStart"](4,"div",21),i["ɵɵelementStart"](5,"sf-button",22),i["ɵɵlistener"]("click",(function FormRulesListComponent_ng_container_6_ng_template_2_Template_sf_button_click_5_listener(){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"](2).createRule(null)})),i["ɵɵtext"](6,"Create a rule"),i["ɵɵelementEnd"](),i["ɵɵelementEnd"](),i["ɵɵelementEnd"](),i["ɵɵelementStart"](7,"sf-notification",23),i["ɵɵtext"](8," Rules will be active on the site after you publish the form. "),i["ɵɵelementEnd"](),i["ɵɵelementStart"](9,"sf-list",24),i["ɵɵlistener"]("itemSelectionChanged",(function FormRulesListComponent_ng_container_6_ng_template_2_Template_sf_list_itemSelectionChanged_9_listener(e){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"](2).createRule(e)})),i["ɵɵtemplate"](10,FormRulesListComponent_ng_container_6_ng_template_2_ng_template_10_Template,2,0,"ng-template",25),i["ɵɵtemplate"](11,FormRulesListComponent_ng_container_6_ng_template_2_ng_template_11_Template,1,3,"ng-template",26),i["ɵɵtemplate"](12,FormRulesListComponent_ng_container_6_ng_template_2_ng_template_12_Template,2,0,"ng-template",27),i["ɵɵtemplate"](13,FormRulesListComponent_ng_container_6_ng_template_2_ng_template_13_Template,1,2,"ng-template",28),i["ɵɵtemplate"](14,FormRulesListComponent_ng_container_6_ng_template_2_ng_template_14_Template,1,3,"ng-template",29),i["ɵɵelementEnd"]()}if(2&e){var o=i["ɵɵnextContext"](2);i["ɵɵadvance"](3),i["ɵɵtextInterpolate"](o.formDefinition.Title),i["ɵɵadvance"](6),i["ɵɵproperty"]("itemsState",o.stateWrapper)("shouldHideHeader",o.shouldHideHeader)("treeConfig",o.treeConfig)("ignoreLoaderDelay",!0)}}function FormRulesListComponent_ng_container_6_Template(e,t){if(1&e&&(i["ɵɵelementContainerStart"](0),i["ɵɵtemplate"](1,FormRulesListComponent_ng_container_6_div_1_Template,10,4,"div",8),i["ɵɵtemplate"](2,FormRulesListComponent_ng_container_6_ng_template_2_Template,15,5,"ng-template",null,9,i["ɵɵtemplateRefExtractor"]),i["ɵɵelementContainerEnd"]()),2&e){var n=i["ɵɵreference"](3),o=i["ɵɵnextContext"]();i["ɵɵadvance"](1),i["ɵɵproperty"]("ngIf",!o.stateWrapper.hasItems)("ngIfElse",n)}}function FormRulesListComponent_ng_template_7_div_1_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"div",35),i["ɵɵelementStart"](1,"div",36),i["ɵɵelement"](2,"sf-loader",37),i["ɵɵelementEnd"](),i["ɵɵelementEnd"]())}var _c2=function(){return[0,0,0,0,0,0,0,0,0,0]};function FormRulesListComponent_ng_template_7_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"div",33),i["ɵɵtemplate"](1,FormRulesListComponent_ng_template_7_div_1_Template,3,0,"div",34),i["ɵɵelementEnd"]()),2&e&&(i["ɵɵadvance"](1),i["ɵɵproperty"]("ngForOf",i["ɵɵpureFunction0"](1,_c2)))}var L=function(e){function FormRulesListComponent(t,n,o,i,s,a,l){var m=e.call(this)||this;return m.formsService=t,m.metadataStore=n,m.modalService=o,m.route=i,m.router=s,m.document=a,m.siteData=l,m.shouldHideHeader=!0,m.stateWrapper=r.StateWrapper.empty(),m.canUpdate=!0,m.isInitialRulesLoadComplete=!1,m.hasFields=!1,m}return Object(o.__extends)(FormRulesListComponent,e),FormRulesListComponent.prototype.ngOnInit=function(){var e=this;this.toggleEditFormControlCssClass(),this.route.queryParamMap.pipe(Object(g.flatMap)((function(t){return e.formId=t.get("id"),e.culture=t.get("culture")||m.stringConstants.EMPTY_STRING,e.siteData.getValue()})),Object(g.flatMap)((function(t){return e.culture=e.culture||t.DefaultContentCulture,e.formsService.getFormDefinition(e.formId,e.culture)})),Object(h.toLoadingState)(),Object(h.delayEmission)(v.MINIMUM_LOADER_TIME)).subscribe((function(t){if(!t.isLoading)try{var n=t.content;e.formDefinition=Object(T.cloneObject)(n.data),e.formDefinition.Rules=e.getFormRules(),e.formDefinition.Culture=e.culture,e.propagateRules(!1),e.hasFields=e.formDefinition.Fields&&e.formDefinition.Fields.length>0,e.isInitialRulesLoadComplete=!0}catch(t){e.handleFormRuleFetchError(t)}}),(function(t){e.handleFormRuleFetchError(t)})),this.navbarConfiguration={mode:l.NavbarModes.OneColumn,leftNavbarButtonData:{show:!0,look:"toggle",icon:"angle-left",iconLook:"size-2xl",mode:l.LeftNavbarButtonMode.Back,title:f.FormsConstants.BACK_TO_FORMS},isScrollEnabled:!1,look:m.stringConstants.EMPTY_STRING,templates:[this.navigationMenuTemplate]},this.treeConfig={noSelection:!0}},FormRulesListComponent.prototype.ngOnDestroy=function(){this.toggleEditFormControlCssClass(!1)},FormRulesListComponent.prototype.createRule=function(e){var t=this,n=e?e.data:null,o=e?this.stateWrapper.dataItems.indexOf(e):-1,i=e?Object(T.cloneObject)(n):null,r={type:c.FormRuleCreateComponent,afterComponentInit:function(n){n.title=e?f.FormsConstants.EDIT_A_RULE:f.FormsConstants.CREATE_A_RULE,n.formDefinition=t.formDefinition,n.formRule=i}},s=[new p.ConfirmButton(f.FormsConstants.CREATE_THIS_RULE,(function(e){return t.saveFormRulehandler(e,o)})),new p.CancelButton(f.FormsConstants.CANCEL)];e&&(s=[new p.ConfirmButton(f.FormsConstants.SAVE_THIS_RULE,(function(e){return t.saveFormRulehandler(e,o)})),new p.CancelButton(f.FormsConstants.CANCEL)]);var a=new p.DialogData(r,(function(e){}),s,null);this.modalService.setMapping(a,f.FormsConstants.ROUTES.CREATE_FORM_RULE_DIALOG),this.modalService.show(f.FormsConstants.ROUTES.CREATE_FORM_RULE_DIALOG,this.route)},FormRulesListComponent.prototype.saveFormRulehandler=function(e,t){var n=this,o=new S.ReplaySubject(1);o.next(new p.ClickResult(!0,!1));var i=e.component.formRule;return i&&(i.Actions.forEach((function(e){e.Action===f.FormsConstants.FORM_ACTION_TYPE.SEND_NOTIFICATION&&(e.Target=e.Target.trim().split("\n").filter((function(e){return e!==m.stringConstants.EMPTY_STRING})).map((function(e){return e.trim()})).join(","))})),t>=0?this.formDefinition.Rules.splice(t,1,i):this.formDefinition.Rules.push(i),this.propagateRules(!1),this.canUpdate=!1,this.formsService.updateRules(this.formDefinition).subscribe((function(e){n.canUpdate=!0,o.next(new p.ClickResult(!0,!0,!1,!1))}))),o},FormRulesListComponent.prototype.getFormRules=function(){var e=this,t=[];return this.formDefinition.Rules.forEach((function(n){var o=[];n.Conditions.forEach((function(t){e.findFormField(t.Id)&&o.push(t)}));var i=[];n.Actions.forEach((function(t){switch(t.Action){case f.FormsConstants.FORM_ACTION_TYPE.SHOW:case f.FormsConstants.FORM_ACTION_TYPE.HIDE:e.findFormField(t.Target)&&i.push(t);break;case f.FormsConstants.FORM_ACTION_TYPE.SKIP:e.findFormStep(t.Target)&&i.push(t);break;default:i.push(t)}})),o.length>0&&i.length>0&&(n.Conditions=o,n.Actions=i,t.push(n))})),t},FormRulesListComponent.prototype.findFormField=function(e){return this.formDefinition.Fields.find((function(t){return t.Id===e}))},FormRulesListComponent.prototype.findFormStep=function(e){return this.formDefinition.Steps.find((function(t){return t.Key===e}))},FormRulesListComponent.prototype.onNavigateBack=function(){this.document.dispatchEvent(new Event(f.FormsConstants.ROUTES.SITEFINITY_OLD_BACKEND_REFRESH_RULES_EVENT_NAME)),this.router.navigate([R.ROUTE_PATHS.CONTENT,R.ROUTE_PATHS_NO_PREFIX.FORMS,f.FormsConstants.ROUTES.INTEGRATED,this.formDefinition.Name])},FormRulesListComponent.prototype.propagateRules=function(e){var t=this,n=this.metadataStore.getEntity(_.ENTITY_SET.FORM_DRAFTS),o=[];this.formDefinition.Rules.forEach((function(e){o.push(s.DataItem.from(e,n,null,null))})),this.stateWrapper=r.StateWrapper.wrap({dataItems:o,totalCount:o.length}),e&&(this.canUpdate=!1,this.formsService.updateRules(this.formDefinition).subscribe((function(e){t.canUpdate=!0})))},FormRulesListComponent.prototype.deleteRule=function(e){var t=this.stateWrapper.dataItems.indexOf(e);t>=0&&this.formDefinition.Rules.splice(t,1),this.propagateRules(!0)},FormRulesListComponent.prototype.toggleEditFormControlCssClass=function(e){void 0===e&&(e=!0),e?(Object(T.toggleIrisIntegratedStyles)(!0),this.document.body.classList.add(f.FormsConstants.ROUTES.ADMIN_APP_CONTROL_CLASS)):(Object(T.toggleIrisIntegratedStyles)(!1),this.document.body.classList.remove(f.FormsConstants.ROUTES.ADMIN_APP_CONTROL_CLASS))},FormRulesListComponent.prototype.handleFormRuleFetchError=function(e){throw new Error("An error occurred during fetching the form rules. "+e)},FormRulesListComponent.ɵfac=function FormRulesListComponent_Factory(e){return new(e||FormRulesListComponent)(i["ɵɵdirectiveInject"](a.FormsService),i["ɵɵdirectiveInject"](C.MetadataStore),i["ɵɵdirectiveInject"](p.ModalWindowService),i["ɵɵdirectiveInject"](u.ActivatedRoute),i["ɵɵdirectiveInject"](u.Router),i["ɵɵdirectiveInject"](d.DOCUMENT_TOKEN),i["ɵɵdirectiveInject"](E.SiteDataStore))},FormRulesListComponent.ɵcmp=i["ɵɵdefineComponent"]({type:FormRulesListComponent,selectors:[["ng-component"]],viewQuery:function FormRulesListComponent_Query(e,t){if(1&e&&i["ɵɵviewQuery"](N,3),2&e){var n;i["ɵɵqueryRefresh"](n=i["ɵɵloadQuery"]())&&(t.navigationMenuTemplate=n.first)}},features:[i["ɵɵInheritDefinitionFeature"]],decls:9,vars:3,consts:[["name","dialog"],[1,"sf-wrapper","-list","sf-router-wrapper"],[1,"sf-main","-list"],[3,"configuration","leftNavButtonClick"],["navigationMenuTemplate",""],[4,"ngIf","ngIfElse"],["loading",""],[1,"-sf-ml-xs"],["class","-align-items-center -sf-mt-6xl -sf-txt-align-center ng-star-inserted",4,"ngIf","ngIfElse"],["itemsList",""],[1,"-align-items-center","-sf-mt-6xl","-sf-txt-align-center","ng-star-inserted"],[1,"sf-row__col","-auto-flex"],[1,"-sf-fade-in"],[1,"-sf-mt-6xl","-sf-mb-6xl"],["name","file-text-o","look","illustrative"],["class","-sf-txt-hint -sf-mt-xs",4,"ngIf"],[1,"sf-row__col","-no-flex","-sf-mb-2xs"],["iconlook","size-xs","look","action large sf-mr-zero","icon-look","size-xs",3,"click",4,"ngIf"],[1,"-sf-txt-hint","-sf-mt-xs"],["iconlook","size-xs","look","action large sf-mr-zero","icon-look","size-xs",3,"click"],[1,"sf-row","-sf-mb-m","sf-main__header"],[1,"sf-row__col","-no-flex"],["iconlook","size-xs","look","action","icon-look","size-xs",3,"click"],["look","small inline sf-mb-m"],[1,"-sf-txt-large",3,"itemsState","shouldHideHeader","treeConfig","ignoreLoaderDelay","itemSelectionChanged"],["sfColumnTemplate","","name","if","class","-fluid","clickable","true"],["sfColumnTemplate","","name","condition","class","-fill","clickable","true"],["sfColumnTemplate","","name","then","clickable","true","class","-fluid"],["sfColumnTemplate","","name","result","class","-fill","clickable","true"],["sfColumnTemplate","","name","delete","class","-col-size-3xs -sf-txt-align-right"],[3,"formRuleConditions","formRuleOperator","formDefinition"],[3,"formRuleActions","formDefinition"],["look","size-3xs sf-clickable","name","times",3,"ngClass","click"],[1,"-sf-mt-6xl"],["class","sf-tree-list__row -loading",4,"ngFor","ngForOf"],[1,"sf-tree-list__row","-loading"],[1,"sf-tree-list__cell"],["look","skeleton list"]],template:function FormRulesListComponent_Template(e,t){if(1&e&&(i["ɵɵelement"](0,"router-outlet",0),i["ɵɵelementStart"](1,"div",1),i["ɵɵelementStart"](2,"main",2),i["ɵɵelementStart"](3,"sf-navigation-menu",3),i["ɵɵlistener"]("leftNavButtonClick",(function FormRulesListComponent_Template_sf_navigation_menu_leftNavButtonClick_3_listener(){return t.onNavigateBack()})),i["ɵɵelementEnd"](),i["ɵɵtemplate"](4,FormRulesListComponent_ng_template_4_Template,2,0,"ng-template",null,4,i["ɵɵtemplateRefExtractor"]),i["ɵɵtemplate"](6,FormRulesListComponent_ng_container_6_Template,4,2,"ng-container",5),i["ɵɵtemplate"](7,FormRulesListComponent_ng_template_7_Template,2,2,"ng-template",null,6,i["ɵɵtemplateRefExtractor"]),i["ɵɵelementEnd"](),i["ɵɵelementEnd"]()),2&e){var n=i["ɵɵreference"](8);i["ɵɵadvance"](3),i["ɵɵproperty"]("configuration",t.navbarConfiguration),i["ɵɵadvance"](3),i["ɵɵproperty"]("ngIf",t.isInitialRulesLoadComplete)("ngIfElse",n)}},directives:[u.RouterOutlet,l.NavigationMenuComponent,I.NgIf,D.SfIconComponent,D.SfButtonComponent,D.SfNotificationComponent,O.ListComponent,A.ListColumnDirective,y.ConditionColumnComponent,P.ActionColumnComponent,I.NgClass,I.NgForOf,D.SfLoaderComponent],encapsulation:2}),FormRulesListComponent}(F.RxBaseComponent)},2517:function(e,t,n){"use strict";n.r(t),n.d(t,"FormsService",(function(){return l}));var o=n(269),i=n(316),r=n(246),s=n(256),a=n(229),l=function(){function FormsService(e,t){this.metadataStore=e,this.dynamicItemsService=t}return FormsService.prototype.getFormDefinition=function(e,t){void 0===t&&(t=r.stringConstants.EMPTY_STRING);var n={itemKey:e,action:"Default.GetTempForm()",entityData:{metadata:this.metadataStore.getEntity(s.ENTITY_SET.FORM_DRAFTS),culture:t}};return this.dynamicItemsService.getItem(n)},FormsService.prototype.updateRules=function(e){var t={metadata:this.metadataStore.getEntity(s.ENTITY_SET.FORM_DRAFTS),provider:r.stringConstants.EMPTY_STRING,culture:e.Culture};return this.dynamicItemsService.executeEntityOperationForDataItemKey(e.Id,t,"Default.SaveTempForm()",{rules:e.Rules})},FormsService.ɵfac=function FormsService_Factory(e){return new(e||FormsService)(a["ɵɵinject"](o.MetadataStore),a["ɵɵinject"](i.DynamicItemService))},FormsService.ɵprov=a["ɵɵdefineInjectable"]({token:FormsService,factory:FormsService.ɵfac}),FormsService}()},2518:function(e,t,n){"use strict";n.r(t),n.d(t,"FormRuleCreateComponent",(function(){return d}));var o=n(229),i=n(1143),r=n(2519),s=n(246),a=n(2520),l=(n(1118),n(2522)),m=n(369),p=n(1175),c=n(1142),u=n(261),f=n(354),C=n(2523),_c0=function(e){return{"-sf-mb-xs":e}};function FormRuleCreateComponent_sf_condition_create_composite_11_Template(e,t){if(1&e){var n=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"sf-condition-create-composite",11),o["ɵɵlistener"]("conditionForDelete",(function FormRuleCreateComponent_sf_condition_create_composite_11_Template_sf_condition_create_composite_conditionForDelete_0_listener(e){return o["ɵɵrestoreView"](n),o["ɵɵnextContext"]().deleteCondition(e)})),o["ɵɵelementEnd"]()}if(2&e){var i=t.$implicit,r=t.last,s=o["ɵɵnextContext"]();o["ɵɵproperty"]("formDefinition",s.formDefinition)("formRuleCondition",i)("canDelete",s.formRule.Conditions.length>1)("ngClass",o["ɵɵpureFunction1"](4,_c0,!r))}}function FormRuleCreateComponent_sf_action_create_composite_17_Template(e,t){if(1&e){var n=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"sf-action-create-composite",12),o["ɵɵlistener"]("actionForDelete",(function FormRuleCreateComponent_sf_action_create_composite_17_Template_sf_action_create_composite_actionForDelete_0_listener(e){return o["ɵɵrestoreView"](n),o["ɵɵnextContext"]().deleteAction(e)})),o["ɵɵelementEnd"]()}if(2&e){var i=t.$implicit,r=t.last,s=o["ɵɵnextContext"]();o["ɵɵproperty"]("formDefinition",s.formDefinition)("formRuleAction",i)("canDelete",s.formRule.Actions.length>1)("ngClass",o["ɵɵpureFunction1"](4,_c0,!r))}}var d=function(){function FormRuleCreateComponent(e,t){this.typeParserService=e,this.scrollService=t}return FormRuleCreateComponent.prototype.ngOnInit=function(){this.formRule||(this.formRule={Operator:r.FormRuleOperatorCRUD.Any,Conditions:[this.generateCondition()],Actions:[this.generateAction()]}),this.operatorDropdownSettings=new i.ChoiceSettings("operatorDropdown",!1),this.operatorDropdownSettings.choices=this.generateChoices(),this.formRule&&(this.operatorDropdownSettings.defaultValue=this.formRule.Operator)},FormRuleCreateComponent.prototype.canCloseCallback=function(e){var t=!0;return e.data&&e.data.data&&this.actionComponents.forEach((function(e){t=e.isValid()&&t})),t},FormRuleCreateComponent.prototype.addCondition=function(){this.formRule.Conditions.push(this.generateCondition())},FormRuleCreateComponent.prototype.deleteCondition=function(e){var t=this.formRule.Conditions.indexOf(e);this.formRule.Conditions.splice(t,1)},FormRuleCreateComponent.prototype.addAction=function(){this.formRule.Actions.push(this.generateAction())},FormRuleCreateComponent.prototype.deleteAction=function(e){var t=this.formRule.Actions.indexOf(e);this.formRule.Actions.splice(t,1)},FormRuleCreateComponent.prototype.formOperatorChanged=function(e){this.formRule.Operator=e},FormRuleCreateComponent.prototype.generateCondition=function(){var e={Id:s.stringConstants.EMPTY_STRING,Operator:s.stringConstants.EMPTY_STRING,Value:s.stringConstants.EMPTY_STRING},t=this.typeParserService.getConditionFields(this.formDefinition)[0];if(t){e.Id=t.Id;var n=t.Operators[0];n&&(e.Operator=n.Key),e.Value=this.getDefaultFieldValue(t)}return e},FormRuleCreateComponent.prototype.generateAction=function(){var e={Action:s.stringConstants.EMPTY_STRING,Target:s.stringConstants.EMPTY_STRING};this.formDefinition.AvailableActions[0]&&(e.Action=this.formDefinition.AvailableActions[0].Key);var t=this.typeParserService.getActionFields(this.formDefinition)[0];return t&&(e.Target=t.Id),e},FormRuleCreateComponent.prototype.generateChoices=function(){var e=[];return Object.keys(r.FormRuleOperatorCRUD).forEach((function(t){e.push({Value:r.FormRuleOperatorCRUD[t],Name:t})})),e},FormRuleCreateComponent.prototype.getDefaultFieldValue=function(e){var t=s.stringConstants.EMPTY_STRING;return e.Values.length>0&&(t=e.Values[0]),t},FormRuleCreateComponent.ɵfac=function FormRuleCreateComponent_Factory(e){return new(e||FormRuleCreateComponent)(o["ɵɵdirectiveInject"](a.FormFieldTypesParserService),o["ɵɵdirectiveInject"](m.ScrollService))},FormRuleCreateComponent.ɵcmp=o["ɵɵdefineComponent"]({type:FormRuleCreateComponent,selectors:[["sf-form-rule-create"]],viewQuery:function FormRuleCreateComponent_Query(e,t){if(1&e&&o["ɵɵviewQuery"](l.ActionCreateCompositeComponent,1),2&e){var n;o["ɵɵqueryRefresh"](n=o["ɵɵloadQuery"]())&&(t.actionComponents=n)}},inputs:{title:"title",formDefinition:"formDefinition",formRule:"formRule"},decls:20,vars:4,consts:[[1,"sf-form","-sf-centered-box"],[3,"heading"],[1,"-sf-txt-align-left"],[1,"sf-field","sf-row","-align-items-center"],[1,"sf-field__label"],[1,"-sf-ml-3xs","-sf-mr-3xs","-sf-txt-large",3,"settings","selectionChange"],[1,"sf-field"],[1,"sf-field__content","-sf-mb-3xs"],["class","-sf-block",3,"formDefinition","formRuleCondition","canDelete","ngClass","conditionForDelete",4,"ngFor","ngForOf"],["look","circle small sf-mb-4xs","icon","plus","iconLook","size-xs",3,"onClick"],["class","-sf-block",3,"formDefinition","formRuleAction","canDelete","ngClass","actionForDelete",4,"ngFor","ngForOf"],[1,"-sf-block",3,"formDefinition","formRuleCondition","canDelete","ngClass","conditionForDelete"],[1,"-sf-block",3,"formDefinition","formRuleAction","canDelete","ngClass","actionForDelete"]],template:function FormRuleCreateComponent_Template(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵelement"](1,"sf-sticky-component",1),o["ɵɵelementStart"](2,"div",2),o["ɵɵelementStart"](3,"div",3),o["ɵɵelementStart"](4,"label",4),o["ɵɵtext"](5,"IF"),o["ɵɵelementEnd"](),o["ɵɵelementStart"](6,"sf-dropdown-choice",5),o["ɵɵlistener"]("selectionChange",(function FormRuleCreateComponent_Template_sf_dropdown_choice_selectionChange_6_listener(e){return t.formOperatorChanged(e)})),o["ɵɵelementEnd"](),o["ɵɵelementStart"](7,"b",4),o["ɵɵtext"](8,"of the following conditions are met"),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵelementStart"](9,"div",6),o["ɵɵelementStart"](10,"div",7),o["ɵɵtemplate"](11,FormRuleCreateComponent_sf_condition_create_composite_11_Template,1,6,"sf-condition-create-composite",8),o["ɵɵelementEnd"](),o["ɵɵelementStart"](12,"sf-button",9),o["ɵɵlistener"]("onClick",(function FormRuleCreateComponent_Template_sf_button_onClick_12_listener(){return t.addCondition()})),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵelementStart"](13,"div",6),o["ɵɵelementStart"](14,"label",4),o["ɵɵtext"](15,"THEN..."),o["ɵɵelementEnd"](),o["ɵɵelementStart"](16,"div",7),o["ɵɵtemplate"](17,FormRuleCreateComponent_sf_action_create_composite_17_Template,1,6,"sf-action-create-composite",10),o["ɵɵelementEnd"](),o["ɵɵelementStart"](18,"sf-button",9),o["ɵɵlistener"]("onClick",(function FormRuleCreateComponent_Template_sf_button_onClick_18_listener(){return t.addAction()})),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵelement"](19,"hr"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵproperty"]("heading",t.title),o["ɵɵadvance"](5),o["ɵɵproperty"]("settings",t.operatorDropdownSettings),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",t.formRule.Conditions),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngForOf",t.formRule.Actions))},directives:[p.StickyComponent,c.ChoiceDropdownComponent,u.NgForOf,f.SfButtonComponent,C.ConditionCreateCompositeComponent,u.NgClass,l.ActionCreateCompositeComponent],encapsulation:2}),FormRuleCreateComponent}()},2519:function(e,t,n){"use strict";var o,i;n.r(t),n.d(t,"FormRuleOperatorList",(function(){return o})),n.d(t,"FormRuleOperatorCRUD",(function(){return i})),n.d(t,"FormsConstants",(function(){return r})),function(e){e.Or="or",e.And="and"}(o||(o={})),function(e){e.Any="Or",e.All="And"}(i||(i={}));var r=function(){function FormsConstants(){}return FormsConstants.CREATE_A_RULE="Create a rule",FormsConstants.EDIT_A_RULE="Edit a rule",FormsConstants.CREATE_THIS_RULE="Create this rule",FormsConstants.SAVE_THIS_RULE="Save this rule",FormsConstants.CANCEL="Cancel",FormsConstants.BACK_TO_FORMS="Back to Forms in Sitefinity",FormsConstants.MESSAGE="message",FormsConstants.EMAIL_ADDRESS="email address",FormsConstants.PAGE="page",FormsConstants.PAGE_DOES_NOT_EXIST="Selected page does not exist",FormsConstants.INPUT_PLACEHOLDER="type field value...",FormsConstants.SELECTED_PAGE_DOES_NOT_EXIST="Selected page doesn't exist anymore.",FormsConstants.SHOW_HIDE_TOOLTIP_TITLE="Show or hide fields",FormsConstants.SHOW_HIDE_TOOLTIP_MESSAGE="You can show a field only if it has already been hidden. If you want a form field to be hidden by default when the page loads, you can configure this from the form edit screen.",FormsConstants.SEND_NOTIFICATION={TEXT_AREA:{INSTRUCTIONAL_TEXT:"Enter email addresses, one per line.",PLACEHOLDER:"email@example.com"}},FormsConstants.ROUTES={RULES:"rules",INTEGRATED:"integrated",CREATE_FORM_RULE_DIALOG:"CreateFormRule",SITEFINITY_OLD_BACKEND_EDIT_FORM_RULE_EVENT_NAME:"edit-form-rule",SITEFINITY_OLD_BACKEND_REFRESH_RULES_EVENT_NAME:"refresh_form_rules",ADMIN_APP_CONTROL_CLASS:"sfAdminAppControl"},FormsConstants.STATIC_FORM_FIELDS=["PageBreak","Captcha","SectionHeader","FormNavigation","Hidden","Submit"],FormsConstants.CONDITION_OPERATORS={Equal:"Equal",NotEqual:"NotEqual",Contains:"Contains",NotContains:"NotContains",IsFilled:"IsFilled",IsNotFilled:"IsNotFilled",IsLessThan:"IsLessThan",IsGreaterThan:"IsGreaterThan",FileSelected:"FileSelected",FileNotSelected:"FileNotSelected"},FormsConstants.FORM_FIELD_TYPE={TEXTBOX:"Textbox",PARAGRAPH:"Paragraph",MULTIPLE_CHOICE:"MultipleChoice",CHECKBOX:"Checkbox",DROPDOWN:"DropDown",FILE_UPLOAD:"FileUpload"},FormsConstants.FORM_ACTION_TYPE={SHOW:"Show",HIDE:"Hide",SKIP:"Skip",GOTO:"GoTo",SHOW_MESSAGE:"ShowMessage",SEND_NOTIFICATION:"SendNotification"},FormsConstants.TEXT_INPUT_TYPE={DATE:"Date",MONTH:"Month",TIME:"Time",DATE_TIME:"DateTime",DATE_TIME_LOCAL:"DateTimeLocal",WEEK:"Week",RANGE:"Range",COLOR:"Color",NUMBER:"Number"},FormsConstants.TIMEZONE_OFFSET=0,FormsConstants}()},2520:function(e,t,n){"use strict";n.r(t),n.d(t,"FormFieldTypesParserService",(function(){return O}));var o=n(354),i=n(1142),r=n(1143),s=n(2519),a=n(1237),l=n(1802),m=n(1402),p=n(1692),c=n(1383),u=n(1725),f=n(1117),C=n(333),d=n(332),_=n(1239),F=n(269),T=n(316),E=n(256),g=n(11),h=n(246),v=n(245),R=n(2521),S=n(324),I=n(338),D=n(229),O=function(){function FormFieldTypesParserService(e,t){this.metadataStore=e,this.dynamicItemsService=t}return FormFieldTypesParserService.prototype.getConditionComponentType=function(e,t){var n=new l.DateTimePickerSettings("dateTimePicker",!1);switch(n.readOnlyMode=!1,e.Type){case s.FormsConstants.FORM_FIELD_TYPE.TEXTBOX:case s.FormsConstants.FORM_FIELD_TYPE.PARAGRAPH:switch(e.InputType){case s.FormsConstants.TEXT_INPUT_TYPE.DATE:return{component:{type:a.DateTimePickerComponent,updatePropertiesOnChange:!0,properties:{timeZoneOffset:s.FormsConstants.TIMEZONE_OFFSET,hideSelectIcon:!0,showTime:!1,settings:n,value:t}}};case s.FormsConstants.TEXT_INPUT_TYPE.MONTH:return{component:{type:a.DateTimePickerComponent,updatePropertiesOnChange:!0,properties:{timeZoneOffset:s.FormsConstants.TIMEZONE_OFFSET,hideSelectIcon:!0,dateBottomView:_.DateTimePickerConstants.VIEW.YEAR,dateTopView:_.DateTimePickerConstants.VIEW.DECADE,dateFormat:_.DateTimePickerConstants.MONTH_FORMAT,showTime:!1,settings:n,value:t}}};case s.FormsConstants.TEXT_INPUT_TYPE.TIME:return{component:{type:a.DateTimePickerComponent,updatePropertiesOnChange:!0,properties:{timeZoneOffset:s.FormsConstants.TIMEZONE_OFFSET,hideSelectIcon:!0,showDate:!1,settings:n,value:t}}};case s.FormsConstants.TEXT_INPUT_TYPE.DATE_TIME:case s.FormsConstants.TEXT_INPUT_TYPE.DATE_TIME_LOCAL:return{component:{type:a.DateTimePickerComponent,updatePropertiesOnChange:!0,properties:{timeZoneOffset:s.FormsConstants.TIMEZONE_OFFSET,hideSelectIcon:!0,showDate:!0,showTime:!0,settings:n,value:t}}};case s.FormsConstants.TEXT_INPUT_TYPE.RANGE:return{component:{type:o.SfInputComponent,updatePropertiesOnChange:!0,properties:{value:t,type:s.FormsConstants.TEXT_INPUT_TYPE.NUMBER,placeholder:s.FormsConstants.INPUT_PLACEHOLDER}},cssClassList:"sf-row__col"};case s.FormsConstants.TEXT_INPUT_TYPE.COLOR:return{component:{type:o.SfInputComponent,updatePropertiesOnChange:!0,properties:{value:t,type:s.FormsConstants.TEXT_INPUT_TYPE.COLOR,placeholder:s.FormsConstants.INPUT_PLACEHOLDER}},cssClassList:"sf-row__col -col-1"};case s.FormsConstants.TEXT_INPUT_TYPE.WEEK:return{component:{type:o.SfInputComponent,updatePropertiesOnChange:!0,properties:{value:t,type:s.FormsConstants.TEXT_INPUT_TYPE.WEEK,placeholder:s.FormsConstants.INPUT_PLACEHOLDER}}};default:return{component:{type:o.SfInputComponent,updatePropertiesOnChange:!0,properties:{value:t,type:e.InputType,placeholder:s.FormsConstants.INPUT_PLACEHOLDER}},cssClassList:"sf-row__col"}}case s.FormsConstants.FORM_FIELD_TYPE.MULTIPLE_CHOICE:case s.FormsConstants.FORM_FIELD_TYPE.CHECKBOX:case s.FormsConstants.FORM_FIELD_TYPE.DROPDOWN:var p=new r.ChoiceSettings("choiceDropdownComponent",!1);return e.Values.forEach((function(e){p.choices.push({Value:e,Name:e})})),t?p.defaultValue=t:e.Values.length>0&&(p.defaultValue=e.Values[0]),{component:{type:i.ChoiceDropdownComponent,updatePropertiesOnChange:!0,properties:{settings:p}},cssClassList:"sf-row__col"};default:var c=new d.SettingsBase("hiddenComponent",!1);return{component:{type:m.HiddenComponent,properties:{settings:c}},cssClassList:"sf-row__col"}}},FormFieldTypesParserService.prototype.getActionComponentType=function(e,t,n){var a,l=this;switch(e){case s.FormsConstants.FORM_ACTION_TYPE.SHOW:case s.FormsConstants.FORM_ACTION_TYPE.HIDE:var m=new r.ChoiceSettings("formTargetDropdown",!1);return this.getActionFields(t).forEach((function(e){m.choices.push({Value:e.Id,Name:e.Title})})),n?m.defaultValue=n:t.Fields.length>0&&(m.defaultValue=t.Fields[0].Id),a={component:{type:i.ChoiceDropdownComponent,updatePropertiesOnChange:!0,properties:{settings:m}},tooltip:{title:s.FormsConstants.SHOW_HIDE_TOOLTIP_TITLE,message:s.FormsConstants.SHOW_HIDE_TOOLTIP_MESSAGE}},Object(g.of)(a);case s.FormsConstants.FORM_ACTION_TYPE.SKIP:var d=new r.ChoiceSettings("formActionsDropdown",!1);return t.Steps.forEach((function(e){d.choices.push({Value:e.Key,Name:e.Value})})),n?d.defaultValue=n:t.Steps.length>0&&(d.defaultValue=t.Steps[0].Key),a={component:{type:i.ChoiceDropdownComponent,updatePropertiesOnChange:!0,properties:{settings:d}}},Object(g.of)(a);case s.FormsConstants.FORM_ACTION_TYPE.SHOW_MESSAGE:var _=void 0,F=new p.TextAreaSettings("editorComponent",!1);F.required=!0,F.friendlyTitle=s.FormsConstants.MESSAGE;var T=[];return T.push(S.Validators.required),F.validators=S.Validators.compose(T),n?_=n:F.defaultValue=h.stringConstants.EMPTY_STRING,a={component:{type:c.TextAreaComponent,updatePropertiesOnChange:!0,properties:{settings:F,value:_}},cssClassList:"sf-row__col"},Object(g.of)(a);case s.FormsConstants.FORM_ACTION_TYPE.SEND_NOTIFICATION:var D=void 0,O=new R.TextAreaMultilineEmailSettings("editorComponent",!1);O.required=!0,O.friendlyTitle=s.FormsConstants.EMAIL_ADDRESS,O.instructionalText=s.FormsConstants.SEND_NOTIFICATION.TEXT_AREA.INSTRUCTIONAL_TEXT,O.placeholder=s.FormsConstants.SEND_NOTIFICATION.TEXT_AREA.PLACEHOLDER;var A=[];return A.push(S.Validators.required),A.push(I.VALIDATORS[I.VALIDATOR_NAMES.MULTILINE_EMAILS]()),O.validators=S.Validators.compose(A),n?D=n.split(",").join("\n"):O.defaultValue=h.stringConstants.EMPTY_STRING,a={component:{type:c.TextAreaComponent,updatePropertiesOnChange:!0,properties:{settings:O,value:D}},cssClassList:"sf-row__col"},Object(g.of)(a);case s.FormsConstants.FORM_ACTION_TYPE.GOTO:var y=new u.RelatedDataSettings("relatedDataComponent",!1);y.type=E.ENTITY_SET.PAGES,y.culture=t.Culture,y.allowMultiple=!1,y.displayMode=C.DISPLAY_MODE.INPUT,y.required=!0,y.title=s.FormsConstants.PAGE;var P=[];if(P.push(S.Validators.required),y.validators=S.Validators.compose(P),n){var N={itemKey:n,entityData:{metadata:this.metadataStore.getEntity(E.ENTITY_SET.PAGES),culture:t.Culture}};return new g.Observable((function(e){l.dynamicItemsService.getItem(N).subscribe((function(t){e.next(a={component:{type:f.RelatedDataComponent,updatePropertiesOnChange:!0,properties:{settings:y,value:[Object(v.cloneObject)(t.data)]}},cssClassList:"sf-row__col"})}),(function(t){e.next(a={component:{type:f.RelatedDataComponent,updatePropertiesOnChange:!0,properties:{settings:y,value:[Object(v.cloneObject)({Title:s.FormsConstants.SELECTED_PAGE_DOES_NOT_EXIST,NotFound:!0,icon:"ban",iconLook:"darker",inactive:!0})]}},cssClassList:"sf-row__col"})}))}))}return a={component:{type:f.RelatedDataComponent,updatePropertiesOnChange:!0,properties:{settings:y,value:[]}},cssClassList:"sf-row__col"},Object(g.of)(a);default:return a={component:{type:o.SfInputComponent}},Object(g.of)(a)}},FormFieldTypesParserService.prototype.getField=function(e,t){return e.Fields.find((function(e){return e.Id===t}))},FormFieldTypesParserService.prototype.getConditionFields=function(e){var t=[];return e.Fields.forEach((function(e){e.Type&&e.Operators&&e.Operators.length>0&&-1===s.FormsConstants.STATIC_FORM_FIELDS.indexOf(e.Type)&&t.push(e)})),t},FormFieldTypesParserService.prototype.getActionFields=function(e){var t=[];return e.Fields.forEach((function(e){e.Hideable&&t.push(e)})),t},FormFieldTypesParserService.ɵfac=function FormFieldTypesParserService_Factory(e){return new(e||FormFieldTypesParserService)(D["ɵɵinject"](F.MetadataStore),D["ɵɵinject"](T.DynamicItemService))},FormFieldTypesParserService.ɵprov=D["ɵɵdefineInjectable"]({token:FormFieldTypesParserService,factory:FormFieldTypesParserService.ɵfac}),FormFieldTypesParserService}()},2521:function(e,t,n){"use strict";n.r(t),n.d(t,"TextAreaMultilineEmailSettings",(function(){return r}));var o=n(259),i=n(338),r=function(e){function TextAreaMultilineEmailSettings(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(TextAreaMultilineEmailSettings,e),TextAreaMultilineEmailSettings.prototype.init=function(t){e.prototype.init.call(this,t)},TextAreaMultilineEmailSettings.prototype.getValidators=function(t){var n=e.prototype.getValidators.call(this,t);return n.push(i.VALIDATORS[i.VALIDATOR_NAMES.MULTILINE_EMAILS]()),n},TextAreaMultilineEmailSettings}(n(1692).TextAreaSettings)},2522:function(e,t,n){"use strict";n.r(t),n.d(t,"ActionCreateCompositeComponent",(function(){return C}));var o=n(259),i=n(229),r=n(1143),s=n(2520),a=n(131),l=n(264),m=n(324),p=n(354),c=n(1142),u=n(261),f=["loader"];function ActionCreateCompositeComponent_div_3_div_3_Template(e,t){if(1&e&&(i["ɵɵelementStart"](0,"div",11),i["ɵɵtext"](1),i["ɵɵelementEnd"]()),2&e){var n=i["ɵɵnextContext"](2);i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"](" ",n.formFieldColumnData.component.properties.settings.instructionalText," ")}}function ActionCreateCompositeComponent_div_3_sf_error_4_Template(e,t){if(1&e&&i["ɵɵelement"](0,"sf-error",12),2&e){var n=i["ɵɵnextContext"](2);i["ɵɵproperty"]("messages",n.errorMessages)}}var _c1=function(e){return{"-has-errors":e}};function ActionCreateCompositeComponent_div_3_Template(e,t){if(1&e){var n=i["ɵɵgetCurrentView"]();i["ɵɵelementStart"](0,"div",6),i["ɵɵelementStart"](1,"sf-component-loader",7,8),i["ɵɵlistener"]("componentInit",(function ActionCreateCompositeComponent_div_3_Template_sf_component_loader_componentInit_1_listener(e){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"]().loaderInit(e)})),i["ɵɵelementEnd"](),i["ɵɵtemplate"](3,ActionCreateCompositeComponent_div_3_div_3_Template,2,1,"div",9),i["ɵɵtemplate"](4,ActionCreateCompositeComponent_div_3_sf_error_4_Template,1,1,"sf-error",10),i["ɵɵelementEnd"]()}if(2&e){var o=i["ɵɵnextContext"]();i["ɵɵproperty"]("ngClass",o.formFieldColumnData.cssClassList),i["ɵɵadvance"](1),i["ɵɵproperty"]("ngClass",i["ɵɵpureFunction1"](5,_c1,o.showErrors&&o.errorMessages&&o.errorMessages.length>0))("componentData",o.formFieldColumnData.component),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",o.formFieldColumnData.component.properties.settings.instructionalText&&(!o.showErrors||!o.errorMessages||0===o.errorMessages.length)),i["ɵɵadvance"](1),i["ɵɵproperty"]("ngIf",o.showErrors&&o.errorMessages&&o.errorMessages.length>0)}}function ActionCreateCompositeComponent_span_4_Template(e,t){if(1&e){var n=i["ɵɵgetCurrentView"]();i["ɵɵelementStart"](0,"span",13),i["ɵɵelementStart"](1,"sf-icon",14),i["ɵɵlistener"]("click",(function ActionCreateCompositeComponent_span_4_Template_sf_icon_click_1_listener(){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"]().onToggleTooltip()}))("keyup.enter",(function ActionCreateCompositeComponent_span_4_Template_sf_icon_keyup_enter_1_listener(){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"]().onToggleTooltip()})),i["ɵɵelementEnd"](),i["ɵɵelementStart"](2,"sf-notification",15),i["ɵɵtext"](3),i["ɵɵelementEnd"](),i["ɵɵelementEnd"]()}if(2&e){var o=i["ɵɵnextContext"]();i["ɵɵclassProp"]("-dropped",o.droppedTooltip),i["ɵɵadvance"](2),i["ɵɵproperty"]("caption",o.formFieldColumnData.tooltip.title),i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"](" ",o.formFieldColumnData.tooltip.message," ")}}function ActionCreateCompositeComponent_sf_icon_5_Template(e,t){if(1&e){var n=i["ɵɵgetCurrentView"]();i["ɵɵelementStart"](0,"sf-icon",16),i["ɵɵlistener"]("click",(function ActionCreateCompositeComponent_sf_icon_5_Template_sf_icon_click_0_listener(){return i["ɵɵrestoreView"](n),i["ɵɵnextContext"]().deleteAction()})),i["ɵɵelementEnd"]()}}var C=function(e){function ActionCreateCompositeComponent(t){var n=e.call(this)||this;return n.typeParserService=t,n.actionForDelete=new i.EventEmitter,n.showErrors=!1,n.formGroup=new m.FormGroup({}),n}return Object(o.__extends)(ActionCreateCompositeComponent,e),ActionCreateCompositeComponent.prototype.ngOnInit=function(){this.initActionFields()},ActionCreateCompositeComponent.prototype.loaderInit=function(e){var t=this,n=this;this.wrappedField=e,this.handleFocusChanges(),this.wrappedField.registerOnChange((function(e){t.processErrors(),e instanceof Array&&e.length>0?n.formRuleAction.Target=e[0].Id:n.formRuleAction.Target=e}))},ActionCreateCompositeComponent.prototype.formActionChanged=function(e){e&&(this.formRuleAction.Action=e,this.refreshDynamicComponent(null))},ActionCreateCompositeComponent.prototype.deleteAction=function(){this.actionForDelete.emit(this.formRuleAction)},ActionCreateCompositeComponent.prototype.isValid=function(){var e;this.formGroup.reset(),this.formGroup.setControl(this.wrappedField.settings.key,new m.FormControl(this.wrappedField.value,{validators:this.wrappedField.settings.validators})),this.formGroup.updateValueAndValidity(),e=this.formGroup.valid;var t=this.wrappedField.processErrors(this.formGroup.controls[this.wrappedField.settings.key].errors);return this.processErrors(t),e},ActionCreateCompositeComponent.prototype.processErrors=function(e){void 0===e&&(e=[]),this.errorMessages=[],this.showErrors=!1,e&&e.length>0&&(this.errorMessages=e,this.showErrors=!0)},ActionCreateCompositeComponent.prototype.onToggleTooltip=function(){this.droppedTooltip=!this.droppedTooltip},ActionCreateCompositeComponent.prototype.handleFocusChanges=function(){var e=this,t=this.wrappedField.focus$.subscribe((function(t){e.showErrors=!t}));this.registerSubscription(t)},ActionCreateCompositeComponent.prototype.initActionFields=function(){var e=this;this.formRuleAction&&(this.formActionsDropdownSettings=new r.ChoiceSettings("formActionsDropdown",!1),this.formDefinition.AvailableActions.forEach((function(t){e.formActionsDropdownSettings.choices.push({Value:t.Key,Name:t.Value})})),this.formActionsDropdownSettings.defaultValue=this.formRuleAction.Action,this.refreshDynamicComponent(this.formRuleAction.Target))},ActionCreateCompositeComponent.prototype.refreshDynamicComponent=function(e){var t=this;this.processErrors(),this.loader&&this.loader.destroy(this.formFieldColumnData.component),this.typeParserService.getActionComponentType(this.formRuleAction.Action,this.formDefinition,e).pipe(Object(a.first)()).subscribe((function(e){t.formFieldColumnData=e;var n=t.formFieldColumnData.component.properties.settings.defaultValue;null!==n&&(t.formRuleAction.Target=n.toString())}))},ActionCreateCompositeComponent.ɵfac=function ActionCreateCompositeComponent_Factory(e){return new(e||ActionCreateCompositeComponent)(i["ɵɵdirectiveInject"](s.FormFieldTypesParserService))},ActionCreateCompositeComponent.ɵcmp=i["ɵɵdefineComponent"]({type:ActionCreateCompositeComponent,selectors:[["sf-action-create-composite"]],viewQuery:function ActionCreateCompositeComponent_Query(e,t){if(1&e&&i["ɵɵviewQuery"](f,1),2&e){var n;i["ɵɵqueryRefresh"](n=i["ɵɵloadQuery"]())&&(t.loader=n.first)}},inputs:{formDefinition:"formDefinition",formRuleAction:"formRuleAction",canDelete:"canDelete"},outputs:{actionForDelete:"actionForDelete"},features:[i["ɵɵInheritDefinitionFeature"]],decls:6,vars:4,consts:[[1,"sf-row"],[1,"sf-row__col","-col-6","-sf-mr-xs"],[3,"settings","selectionChange"],["class","-sf-mr-3xs",3,"ngClass",4,"ngIf"],["class","-align-self-center sf-field__tooltip sf-tooltip -open-on-click",3,"-dropped",4,"ngIf"],["look","size-3xs sf-clickable","name","times","class","-sf-mt-3xs -sf-ml-auto",3,"click",4,"ngIf"],[1,"-sf-mr-3xs",3,"ngClass"],[1,"sf-field","-sf-mb-zero","-sf-pb-zero","-sf-pt-zero",3,"ngClass","componentData","componentInit"],["loader",""],["class","sf-field__hint -sf-mt-4xs -sf-txt-base",4,"ngIf"],["class","-sf-mt-4xs -sf-txt-base",3,"messages",4,"ngIf"],[1,"sf-field__hint","-sf-mt-4xs","-sf-txt-base"],[1,"-sf-mt-4xs","-sf-txt-base",3,"messages"],[1,"-align-self-center","sf-field__tooltip","sf-tooltip","-open-on-click"],["name","question-circle","look","size-xs sf-clickable","tabindex","0","aria-label","Show or hide fields information",3,"click","keyup.enter"],["look","tooltip narrow",1,"sf-tooltip__content",3,"caption"],["look","size-3xs sf-clickable","name","times",1,"-sf-mt-3xs","-sf-ml-auto",3,"click"]],template:function ActionCreateCompositeComponent_Template(e,t){1&e&&(i["ɵɵelementStart"](0,"div",0),i["ɵɵelementStart"](1,"div",1),i["ɵɵelementStart"](2,"sf-dropdown-choice",2),i["ɵɵlistener"]("selectionChange",(function ActionCreateCompositeComponent_Template_sf_dropdown_choice_selectionChange_2_listener(e){return t.formActionChanged(e)})),i["ɵɵelementEnd"](),i["ɵɵelementEnd"](),i["ɵɵtemplate"](3,ActionCreateCompositeComponent_div_3_Template,5,7,"div",3),i["ɵɵtemplate"](4,ActionCreateCompositeComponent_span_4_Template,4,4,"span",4),i["ɵɵtemplate"](5,ActionCreateCompositeComponent_sf_icon_5_Template,1,0,"sf-icon",5),i["ɵɵelementEnd"]()),2&e&&(i["ɵɵadvance"](2),i["ɵɵproperty"]("settings",t.formActionsDropdownSettings),i["ɵɵadvance"](1),i["ɵɵproperty"]("ngIf",t.formFieldColumnData),i["ɵɵadvance"](1),i["ɵɵproperty"]("ngIf",t.formFieldColumnData&&t.formFieldColumnData.tooltip),i["ɵɵadvance"](1),i["ɵɵproperty"]("ngIf",t.canDelete))},directives:[c.ChoiceDropdownComponent,u.NgIf,u.NgClass,p.SfDynamicComponentLoaderComponent,p.SfErrorComponent,p.SfIconComponent,p.SfNotificationComponent],encapsulation:2}),ActionCreateCompositeComponent}(l.RxBaseComponent)},2523:function(e,t,n){"use strict";n.r(t),n.d(t,"ConditionCreateCompositeComponent",(function(){return C}));var o=n(229),i=n(1143),r=n(2519),s=n(2520),a=n(246),l=n(1237),m=n(245),p=n(354),c=n(1142),u=n(261),f=["loader"];function ConditionCreateCompositeComponent_sf_component_loader_5_Template(e,t){if(1&e){var n=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"sf-component-loader",6,7),o["ɵɵlistener"]("componentInit",(function ConditionCreateCompositeComponent_sf_component_loader_5_Template_sf_component_loader_componentInit_0_listener(e){return o["ɵɵrestoreView"](n),o["ɵɵnextContext"]().loaderInit(e)})),o["ɵɵelementEnd"]()}if(2&e){var i=o["ɵɵnextContext"]();o["ɵɵproperty"]("componentData",i.formFieldColumnData.component)("ngClass",i.formFieldColumnData.cssClassList)}}function ConditionCreateCompositeComponent_sf_icon_6_Template(e,t){if(1&e){var n=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"sf-icon",8),o["ɵɵlistener"]("click",(function ConditionCreateCompositeComponent_sf_icon_6_Template_sf_icon_click_0_listener(){return o["ɵɵrestoreView"](n),o["ɵɵnextContext"]().deleteCondition()})),o["ɵɵelementEnd"]()}}var C=function(){function ConditionCreateCompositeComponent(e){this.typeParserService=e,this.conditionForDelete=new o.EventEmitter}return ConditionCreateCompositeComponent.prototype.ngOnInit=function(){this.initConditionFields()},ConditionCreateCompositeComponent.prototype.formFieldChanged=function(e){if(this.formField=this.formDefinition.Fields.find((function(t){return t.Id===e})),this.formField){var t=this.formField.Operators.length>0?this.formField.Operators[0].Key:null;this.operatorsDropdownSettings.choices=this.setOperatorChoices(this.formField.Operators),this.operatorsDropdownSettings.defaultValue=t,this.formRuleCondition.Operator=t,this.formRuleCondition.Value=this.getDefaultFieldValue(),this.refreshDynamicComponent(this.formField,t,this.formRuleCondition.Value)}this.formRuleCondition.Id=e},ConditionCreateCompositeComponent.prototype.conditionOperatorChanged=function(e){this.refreshDynamicComponent(this.formField,e,this.formRuleCondition.Value),this.formRuleCondition.Operator=e},ConditionCreateCompositeComponent.prototype.deleteCondition=function(){this.conditionForDelete.emit(this.formRuleCondition)},ConditionCreateCompositeComponent.prototype.loaderInit=function(e){var t=this;this.wrappedField=e,this.wrappedField.registerOnChange((function(e){if(t.loader.currentInstance instanceof l.DateTimePickerComponent)if(e){var n=new Date(e);t.formRuleCondition.Value=Object(m.convertDateToIsoDateTime)(n,r.FormsConstants.TIMEZONE_OFFSET)}else t.formRuleCondition.Value=e;else t.formRuleCondition.Value=e}))},ConditionCreateCompositeComponent.prototype.initConditionFields=function(){var e=this;this.formRuleCondition&&(this.formFieldsDropdownSettings=new i.ChoiceSettings("formFieldsDropdown",!1),this.operatorsDropdownSettings=new i.ChoiceSettings("operatorsDropdown",!1),this.typeParserService.getConditionFields(this.formDefinition).forEach((function(t){e.formFieldsDropdownSettings.choices.push({Value:t.Id,Name:t.Title})})),this.formField=this.formDefinition.Fields.find((function(t){return t.Id===e.formRuleCondition.Id})),this.formField&&(this.formFieldsDropdownSettings.defaultValue=this.formRuleCondition.Id,this.operatorsDropdownSettings.choices=this.setOperatorChoices(this.formField.Operators),this.operatorsDropdownSettings.defaultValue=this.formRuleCondition.Operator,this.refreshDynamicComponent(this.formField,this.formRuleCondition.Operator,this.formRuleCondition.Value)))},ConditionCreateCompositeComponent.prototype.refreshDynamicComponent=function(e,t,n){this.loader&&this.loader.destroy(this.formFieldColumnData.component),t===r.FormsConstants.CONDITION_OPERATORS.IsFilled||t===r.FormsConstants.CONDITION_OPERATORS.IsNotFilled?(this.formRuleCondition.Value=a.stringConstants.EMPTY_STRING,this.formFieldColumnData=this.typeParserService.getConditionComponentType({Type:null},null)):this.formFieldColumnData=this.typeParserService.getConditionComponentType(e,n)},ConditionCreateCompositeComponent.prototype.setOperatorChoices=function(e){return e.map((function(e){return{Name:e.Value,Value:e.Key}}))},ConditionCreateCompositeComponent.prototype.getDefaultFieldValue=function(){var e=a.stringConstants.EMPTY_STRING;return this.formField&&this.formField.Values&&this.formField.Values.length>0&&(e=this.formField.Values[0]),e},ConditionCreateCompositeComponent.ɵfac=function ConditionCreateCompositeComponent_Factory(e){return new(e||ConditionCreateCompositeComponent)(o["ɵɵdirectiveInject"](s.FormFieldTypesParserService))},ConditionCreateCompositeComponent.ɵcmp=o["ɵɵdefineComponent"]({type:ConditionCreateCompositeComponent,selectors:[["sf-condition-create-composite"]],viewQuery:function ConditionCreateCompositeComponent_Query(e,t){if(1&e&&o["ɵɵviewQuery"](f,1),2&e){var n;o["ɵɵqueryRefresh"](n=o["ɵɵloadQuery"]())&&(t.loader=n.first)}},inputs:{formDefinition:"formDefinition",formRuleCondition:"formRuleCondition",canDelete:"canDelete"},outputs:{conditionForDelete:"conditionForDelete"},decls:7,vars:4,consts:[[1,"sf-row"],[1,"sf-row__col","-col-6","-sf-mr-xs"],[1,"-sf-mr-xs","sf-row__col","-col-7",3,"settings","selectionChange"],[1,"sf-row__col",3,"settings","selectionChange"],["class","-sf-mr-3xs",3,"componentData","ngClass","componentInit",4,"ngIf"],["look","size-3xs sf-clickable","name","times","class","-sf-mt-3xs  -sf-ml-auto",3,"click",4,"ngIf"],[1,"-sf-mr-3xs",3,"componentData","ngClass","componentInit"],["loader",""],["look","size-3xs sf-clickable","name","times",1,"-sf-mt-3xs","-sf-ml-auto",3,"click"]],template:function ConditionCreateCompositeComponent_Template(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵelementStart"](1,"div",1),o["ɵɵelementStart"](2,"div",0),o["ɵɵelementStart"](3,"sf-dropdown-choice",2),o["ɵɵlistener"]("selectionChange",(function ConditionCreateCompositeComponent_Template_sf_dropdown_choice_selectionChange_3_listener(e){return t.formFieldChanged(e)})),o["ɵɵelementEnd"](),o["ɵɵelementStart"](4,"sf-dropdown-choice",3),o["ɵɵlistener"]("selectionChange",(function ConditionCreateCompositeComponent_Template_sf_dropdown_choice_selectionChange_4_listener(e){return t.conditionOperatorChanged(e)})),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵtemplate"](5,ConditionCreateCompositeComponent_sf_component_loader_5_Template,2,2,"sf-component-loader",4),o["ɵɵtemplate"](6,ConditionCreateCompositeComponent_sf_icon_6_Template,1,0,"sf-icon",5),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵproperty"]("settings",t.formFieldsDropdownSettings),o["ɵɵadvance"](1),o["ɵɵproperty"]("settings",t.operatorsDropdownSettings),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.formFieldColumnData),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.canDelete))},directives:[c.ChoiceDropdownComponent,u.NgIf,p.SfDynamicComponentLoaderComponent,u.NgClass,p.SfIconComponent],encapsulation:2}),ConditionCreateCompositeComponent}()},2524:function(e,t,n){"use strict";n.r(t),n.d(t,"ConditionColumnComponent",(function(){return p})),n.d(t,"GetConditionFieldTitlePipe",(function(){return c})),n.d(t,"GetConditionOperatorLabelPipe",(function(){return u})),n.d(t,"GetRuleOperatorLabelPipe",(function(){return f})),n.d(t,"GetConditionFieldValuePipe",(function(){return C}));var o=n(2519),i=n(2520),r=n(246),s=n(1105),a=n(1432),l=n(229),m=n(261);function ConditionColumnComponent_div_0_span_9_Template(e,t){if(1&e&&(l["ɵɵelementStart"](0,"span",1),l["ɵɵtext"](1),l["ɵɵpipe"](2,"sfGetRuleOperatorLabel"),l["ɵɵelementEnd"]()),2&e){var n=l["ɵɵnextContext"](2);l["ɵɵadvance"](1),l["ɵɵtextInterpolate1"](" ",l["ɵɵpipeBind1"](2,1,n.formRuleOperator),"")}}function ConditionColumnComponent_div_0_Template(e,t){if(1&e&&(l["ɵɵelementStart"](0,"div"),l["ɵɵelementStart"](1,"div"),l["ɵɵtext"](2),l["ɵɵpipe"](3,"sfGetConditionFieldTitle"),l["ɵɵelementStart"](4,"span",1),l["ɵɵtext"](5),l["ɵɵpipe"](6,"sfGetConditionOperatorLabel"),l["ɵɵelementEnd"](),l["ɵɵtext"](7),l["ɵɵpipe"](8,"sfGetConditionFieldValue"),l["ɵɵtemplate"](9,ConditionColumnComponent_div_0_span_9_Template,3,3,"span",2),l["ɵɵelementEnd"](),l["ɵɵelementEnd"]()),2&e){var n=t.$implicit,o=t.last,i=l["ɵɵnextContext"]();l["ɵɵadvance"](2),l["ɵɵtextInterpolate"](l["ɵɵpipeBind2"](3,4,n,i.formDefinition)),l["ɵɵadvance"](3),l["ɵɵtextInterpolate1"](" ",l["ɵɵpipeBind2"](6,7,n,i.formDefinition)," "),l["ɵɵadvance"](2),l["ɵɵtextInterpolate"](l["ɵɵpipeBind2"](8,10,n,i.formDefinition)),l["ɵɵadvance"](2),l["ɵɵproperty"]("ngIf",!o)}}var p=function(){function ConditionColumnComponent(e){this.typeParserService=e}return ConditionColumnComponent.ɵfac=function ConditionColumnComponent_Factory(e){return new(e||ConditionColumnComponent)(l["ɵɵdirectiveInject"](i.FormFieldTypesParserService))},ConditionColumnComponent.ɵcmp=l["ɵɵdefineComponent"]({type:ConditionColumnComponent,selectors:[["sf-condition-column"]],inputs:{formRuleConditions:"formRuleConditions",formRuleOperator:"formRuleOperator",formDefinition:"formDefinition"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"-sf-txt-hint"],["class","-sf-txt-hint",4,"ngIf"]],template:function ConditionColumnComponent_Template(e,t){1&e&&l["ɵɵtemplate"](0,ConditionColumnComponent_div_0_Template,10,13,"div",0),2&e&&l["ɵɵproperty"]("ngForOf",t.formRuleConditions)},directives:function(){return[m.NgForOf,m.NgIf]},pipes:function(){return[c,u,C,f]},encapsulation:2}),ConditionColumnComponent}(),c=function(){function GetConditionFieldTitlePipe(e){this.typeParserService=e}return GetConditionFieldTitlePipe.prototype.transform=function(e,t){var n=this.typeParserService.getField(t,e.Id);return n?n.Title:r.stringConstants.EMPTY_STRING},GetConditionFieldTitlePipe.ɵfac=function GetConditionFieldTitlePipe_Factory(e){return new(e||GetConditionFieldTitlePipe)(l["ɵɵdirectiveInject"](i.FormFieldTypesParserService))},GetConditionFieldTitlePipe.ɵpipe=l["ɵɵdefinePipe"]({name:"sfGetConditionFieldTitle",type:GetConditionFieldTitlePipe,pure:!0}),GetConditionFieldTitlePipe}(),u=function(){function GetConditionOperatorLabelPipe(e){this.typeParserService=e}return GetConditionOperatorLabelPipe.prototype.transform=function(e,t){var n=this.typeParserService.getField(t,e.Id);if(n){var o=n.Operators.find((function(t){return t.Key===e.Operator}));if(o)return o.Value}return r.stringConstants.EMPTY_STRING},GetConditionOperatorLabelPipe.ɵfac=function GetConditionOperatorLabelPipe_Factory(e){return new(e||GetConditionOperatorLabelPipe)(l["ɵɵdirectiveInject"](i.FormFieldTypesParserService))},GetConditionOperatorLabelPipe.ɵpipe=l["ɵɵdefinePipe"]({name:"sfGetConditionOperatorLabel",type:GetConditionOperatorLabelPipe,pure:!0}),GetConditionOperatorLabelPipe}(),f=function(){function GetRuleOperatorLabelPipe(){}return GetRuleOperatorLabelPipe.prototype.transform=function(e){return o.FormRuleOperatorList[e]},GetRuleOperatorLabelPipe.ɵfac=function GetRuleOperatorLabelPipe_Factory(e){return new(e||GetRuleOperatorLabelPipe)},GetRuleOperatorLabelPipe.ɵpipe=l["ɵɵdefinePipe"]({name:"sfGetRuleOperatorLabel",type:GetRuleOperatorLabelPipe,pure:!0}),GetRuleOperatorLabelPipe}(),C=function(){function GetConditionFieldValuePipe(e){this.typeParserService=e,this.relativeDatePipe=new s.RelativeDatePipe,this.isoWeekDatesPipe=new a.IsoWeekDatesPipe}return GetConditionFieldValuePipe.prototype.transform=function(e,t){var n=this.typeParserService.getField(t,e.Id);if(n&&n.InputType&&e.Value&&e.Value.trim()!==r.stringConstants.EMPTY_STRING)switch(n.InputType){case o.FormsConstants.TEXT_INPUT_TYPE.DATE:return this.relativeDatePipe.transform(e.Value,null,o.FormsConstants.TIMEZONE_OFFSET);case o.FormsConstants.TEXT_INPUT_TYPE.MONTH:return this.relativeDatePipe.transform(e.Value,s.RelativeDatePipe.MONTH_AND_YEAR,o.FormsConstants.TIMEZONE_OFFSET);case o.FormsConstants.TEXT_INPUT_TYPE.TIME:return this.relativeDatePipe.transform(e.Value,s.RelativeDatePipe.TIME,o.FormsConstants.TIMEZONE_OFFSET);case o.FormsConstants.TEXT_INPUT_TYPE.DATE_TIME_LOCAL:return this.relativeDatePipe.transform(e.Value,s.RelativeDatePipe.FULL_DATE_SHORT_MONTH_AND_TIME,o.FormsConstants.TIMEZONE_OFFSET);case o.FormsConstants.TEXT_INPUT_TYPE.WEEK:return this.isoWeekDatesPipe.transform(e.Value);default:return e.Value}return e.Value},GetConditionFieldValuePipe.ɵfac=function GetConditionFieldValuePipe_Factory(e){return new(e||GetConditionFieldValuePipe)(l["ɵɵdirectiveInject"](i.FormFieldTypesParserService))},GetConditionFieldValuePipe.ɵpipe=l["ɵɵdefinePipe"]({name:"sfGetConditionFieldValue",type:GetConditionFieldValuePipe,pure:!0}),GetConditionFieldValuePipe}()},2525:function(e,t,n){"use strict";n.r(t),n.d(t,"ActionColumnComponent",(function(){return l}));var o=n(229),i=n(261),r=n(2526),s=n(360),a=n(2527);function ActionColumnComponent_div_0_Template(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵelementStart"](1,"span",1,2),o["ɵɵtext"](3),o["ɵɵpipe"](4,"sfTrimText"),o["ɵɵelementEnd"](),o["ɵɵelementStart"](5,"span",3,4),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵelementEnd"]()),2&e){var n=t.$implicit,i=o["ɵɵreference"](2),r=o["ɵɵreference"](6),s=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵproperty"]("formRuleAction",n)("formDefinition",s.formDefinition)("isFormField",!1),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind2"](4,9,i.actionColumnData.title,"...")," "),o["ɵɵadvance"](2),o["ɵɵproperty"]("formRuleAction",n)("formDefinition",s.formDefinition)("ngClass",r.actionColumnData.cssClassList)("trimLength",50),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",r.actionColumnData.title," ")}}var l=function(){function ActionColumnComponent(){}return ActionColumnComponent.ɵfac=function ActionColumnComponent_Factory(e){return new(e||ActionColumnComponent)},ActionColumnComponent.ɵcmp=o["ɵɵdefineComponent"]({type:ActionColumnComponent,selectors:[["sf-action-column"]],inputs:{formRuleActions:"formRuleActions",formDefinition:"formDefinition"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["sfFormActionColumn","",1,"-sf-txt-hint",3,"formRuleAction","formDefinition","isFormField"],["formActionColumn","sfFormActionColumn"],["sfFormActionColumn","","sfTextOverflow","",3,"formRuleAction","formDefinition","ngClass","trimLength"],["formFieldActionColumn","sfFormActionColumn"]],template:function ActionColumnComponent_Template(e,t){1&e&&o["ɵɵtemplate"](0,ActionColumnComponent_div_0_Template,8,12,"div",0),2&e&&o["ɵɵproperty"]("ngForOf",t.formRuleActions)},directives:[i.NgForOf,r.FormActionColumnDirective,s.TextOverflowDirective,i.NgClass],pipes:[a.TrimTextPipe],encapsulation:2}),ActionColumnComponent}()},2526:function(e,t,n){"use strict";n.r(t),n.d(t,"FormActionColumnDirective",(function(){return p}));var o=n(2519),i=n(2520),r=n(246),s=n(269),a=n(316),l=n(256),m=n(229),p=function(){function FormActionColumnDirective(e,t,n){this.typeParserService=e,this.metadataStore=t,this.dynamicItemsService=n,this.isFormField=!0,this.actionColumnData={title:r.stringConstants.EMPTY_STRING}}return FormActionColumnDirective.prototype.ngOnInit=function(){this.setFieldActionData()},FormActionColumnDirective.prototype.setFieldActionData=function(){this.isFormField?this.getActionFieldData():this.getActionData()},FormActionColumnDirective.prototype.getActionData=function(){var e=this,t=this.formDefinition.AvailableActions.find((function(t){return t.Key===e.formRuleAction.Action}));this.actionColumnData.title=this.formRuleAction.Action,t&&(this.actionColumnData.title=t.Value)},FormActionColumnDirective.prototype.getActionFieldData=function(){var e=this;switch(this.formRuleAction.Action){case o.FormsConstants.FORM_ACTION_TYPE.SHOW:case o.FormsConstants.FORM_ACTION_TYPE.HIDE:var t=this.typeParserService.getField(this.formDefinition,this.formRuleAction.Target);t&&(this.actionColumnData.title=t.Title);break;case o.FormsConstants.FORM_ACTION_TYPE.SKIP:var n=this.formDefinition.Steps?this.formDefinition.Steps.find((function(t){return t.Key.toString()===e.formRuleAction.Target})):null;n&&(this.actionColumnData.title=n.Value);break;case o.FormsConstants.FORM_ACTION_TYPE.GOTO:var i=this.formRuleAction.Target;if(i){var s={itemKey:i,entityData:{metadata:this.metadataStore.getEntity(l.ENTITY_SET.PAGES),culture:this.formDefinition.Culture}};this.dynamicItemsService.getItem(s).subscribe((function(t){e.actionColumnData.title=t.data.Title}),(function(t){e.actionColumnData={title:o.FormsConstants.PAGE_DOES_NOT_EXIST,cssClassList:"-sf-txt-failure"}}))}break;case o.FormsConstants.FORM_ACTION_TYPE.SEND_NOTIFICATION:this.actionColumnData.title=this.formRuleAction.Target.trim().split(",").filter((function(e){return e!==r.stringConstants.EMPTY_STRING})).map((function(e){return e.trim()})).join(""+r.stringConstants.COMMA+r.stringConstants.INTERVAL);break;default:this.actionColumnData.title=this.formRuleAction.Target}},FormActionColumnDirective.ɵfac=function FormActionColumnDirective_Factory(e){return new(e||FormActionColumnDirective)(m["ɵɵdirectiveInject"](i.FormFieldTypesParserService),m["ɵɵdirectiveInject"](s.MetadataStore),m["ɵɵdirectiveInject"](a.DynamicItemService))},FormActionColumnDirective.ɵdir=m["ɵɵdefineDirective"]({type:FormActionColumnDirective,selectors:[["","sfFormActionColumn",""]],inputs:{formRuleAction:"formRuleAction",formDefinition:"formDefinition",isFormField:"isFormField"},exportAs:["sfFormActionColumn"]}),FormActionColumnDirective}()},2527:function(e,t,n){"use strict";n.r(t),n.d(t,"TrimTextPipe",(function(){return r}));var o=n(246),i=n(229),r=function(){function TrimTextPipe(){}return TrimTextPipe.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)return o.stringConstants.EMPTY_STRING;var i=e,r=t[0]?t[0].trim():o.stringConstants.EMPTY_STRING;return r&&r!==o.stringConstants.EMPTY_STRING&&(r=r.replace(o.regexConstants.ESCAPE_RESERVED_CHARACTERS_PATTERN,"\\"+o.regexConstants.DOLLAR+o.stringConstants.AMPERSAND),i=(i=i.replace(new RegExp(o.regexConstants.CARET+r,o.regexConstants.IGNORE_CASE),o.stringConstants.EMPTY_STRING)).replace(new RegExp(r+o.regexConstants.DOLLAR,o.regexConstants.IGNORE_CASE),o.stringConstants.EMPTY_STRING)),i},TrimTextPipe.ɵfac=function TrimTextPipe_Factory(e){return new(e||TrimTextPipe)},TrimTextPipe.ɵpipe=i["ɵɵdefinePipe"]({name:"sfTrimText",type:TrimTextPipe,pure:!0}),TrimTextPipe}()},2528:function(e,t,n){"use strict";n.r(t),n.d(t,"FormsEditIntegratedComponent",(function(){return l}));var o=n(261),i=n(260),r=n(2519),s=n(1152),a=n(229),l=function(){function FormsEditIntegratedComponent(e,t){this.document=e,this.router=t}return FormsEditIntegratedComponent.prototype.ngOnInit=function(){var e=this;this.document.addEventListener(r.FormsConstants.ROUTES.SITEFINITY_OLD_BACKEND_EDIT_FORM_RULE_EVENT_NAME,(function(t){e.formId=t.detail.controlId,e.culture=t.detail.culture,e.router.navigate([s.ROUTE_PATHS.CONTENT,s.ROUTE_PATHS_NO_PREFIX.FORMS,r.FormsConstants.ROUTES.RULES],{queryParams:{id:e.formId,culture:e.culture}})}))},FormsEditIntegratedComponent.ɵfac=function FormsEditIntegratedComponent_Factory(e){return new(e||FormsEditIntegratedComponent)(a["ɵɵdirectiveInject"](o.DOCUMENT),a["ɵɵdirectiveInject"](i.Router))},FormsEditIntegratedComponent.ɵcmp=a["ɵɵdefineComponent"]({type:FormsEditIntegratedComponent,selectors:[["sf-forms-edit-integrated"]],decls:0,vars:0,template:function FormsEditIntegratedComponent_Template(e,t){},encapsulation:2}),FormsEditIntegratedComponent}()}}]);