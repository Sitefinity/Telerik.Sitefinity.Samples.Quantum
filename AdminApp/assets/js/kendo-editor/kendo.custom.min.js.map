{"version":3,"file":"kendo.custom.min.js","sources":["kendo.custom.js"],"sourcesContent":["/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.core',['jquery'], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"core\",\n    name: \"Core\",\n    category: \"framework\",\n    description: \"The core of the Kendo framework.\"\n};\n\n/*jshint eqnull: true, loopfunc: true, evil: true, boss: true, freeze: false*/\n(function($, window, undefined) {\n    var kendo = window.kendo = window.kendo || { cultures: {} },\n        extend = $.extend,\n        each = $.each,\n        isArray = Array.isArray,\n        proxy = $.proxy,\n        noop = $.noop,\n        math = Math,\n        Template,\n        JSON = window.JSON || {},\n        support = {},\n        percentRegExp = /%/,\n        formatRegExp = /\\{(\\d+)(:[^\\}]+)?\\}/g,\n        boxShadowRegExp = /(\\d+(?:\\.?)\\d*)px\\s*(\\d+(?:\\.?)\\d*)px\\s*(\\d+(?:\\.?)\\d*)px\\s*(\\d+)?/i,\n        numberRegExp = /^(\\+|-?)\\d+(\\.?)\\d*$/,\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        NUMBER = \"number\",\n        OBJECT = \"object\",\n        NULL = \"null\",\n        BOOLEAN = \"boolean\",\n        UNDEFINED = \"undefined\",\n        PREFIX = \"prefix\",\n        getterCache = {},\n        setterCache = {},\n        slice = [].slice,\n        cssPropertiesNames = [ \"themeColor\", \"fillMode\", \"shape\", \"size\", \"rounded\", \"positionMode\" ],\n        // avoid extending the depricated properties in latest verions of jQuery\n        noDepricateExtend = function() {\n            var src, copyIsArray, copy, name, options, clone,\n                target = arguments[ 0 ] || {},\n                i = 1,\n                length = arguments.length,\n                deep = false;\n\n            // Handle a deep copy situation\n            if ( typeof target === \"boolean\" ) {\n                deep = target;\n\n                // skip the boolean and the target\n                target = arguments[ i ] || {};\n                i++;\n            }\n\n            // Handle case when target is a string or something (possible in deep copy)\n            if ( typeof target !== \"object\" && typeof target !== \"function\") {\n                target = {};\n            }\n\n            // extend jQuery itself if only one argument is passed\n            if ( i === length ) {\n                target = this;\n                i--;\n            }\n\n            for ( ; i < length; i++ ) {\n\n                // Only deal with non-null/undefined values\n                if ( ( options = arguments[ i ] ) != null ) {\n\n                    // Extend the base object\n                    for ( name in options ) {\n                        // filters, concat and : properties are depricated in the jQuery 3.3.0\n                        // accessing these properties throw a warning when jQuery migrate is included\n                        if (name == \"filters\" || name == \"concat\" || name == \":\") {\n                            continue;\n                        }\n                        src = target[ name ];\n                        copy = options[ name ];\n\n                        // Prevent never-ending loop\n                        if ( target === copy ) {\n                            continue;\n                        }\n\n                        // Recurse if we're merging plain objects or arrays\n                        if ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n                            ( copyIsArray = Array.isArray( copy ) ) ) ) {\n\n                            if ( copyIsArray ) {\n                                copyIsArray = false;\n                                clone = src && Array.isArray( src ) ? src : [];\n\n                            } else {\n                                clone = src && jQuery.isPlainObject( src ) ? src : {};\n                            }\n\n                            // Never move original objects, clone them\n                            target[ name ] = noDepricateExtend( deep, clone, copy );\n\n                        // Don't bring in undefined values\n                        } else if ( copy !== undefined ) {\n                            target[ name ] = copy;\n                        }\n                    }\n                }\n            }\n\n            // Return the modified object\n            return target;\n        };\n\n    kendo.version = \"2022.1.301\".replace(/^\\s+|\\s+$/g, '');\n\n    function Class() {}\n\n    Class.extend = function(proto) {\n        var base = function() {},\n            member,\n            that = this,\n            subclass = proto && proto.init ? proto.init : function () {\n                that.apply(this, arguments);\n            },\n            fn;\n\n        base.prototype = that.prototype;\n        fn = subclass.fn = subclass.prototype = new base();\n\n        for (member in proto) {\n            if (proto[member] != null && proto[member].constructor === Object) {\n                // Merge object members\n                fn[member] = extend(true, {}, base.prototype[member], proto[member]);\n            } else {\n                fn[member] = proto[member];\n            }\n        }\n\n        fn.constructor = subclass;\n        subclass.extend = that.extend;\n\n        return subclass;\n    };\n\n    Class.prototype._initOptions = function(options) {\n        this.options = deepExtend({}, this.options, options);\n    };\n\n    var isFunction = kendo.isFunction = function(fn) {\n        return typeof fn === \"function\";\n    };\n\n    var preventDefault = function() {\n        this._defaultPrevented = true;\n    };\n\n    var isDefaultPrevented = function() {\n        return this._defaultPrevented === true;\n    };\n\n    var Observable = Class.extend({\n        init: function() {\n            this._events = {};\n        },\n\n        bind: function(eventName, handlers, one) {\n            var that = this,\n                idx,\n                eventNames = typeof eventName === STRING ? [eventName] : eventName,\n                length,\n                original,\n                handler,\n                handlersIsFunction = typeof handlers === FUNCTION,\n                events;\n\n            if (handlers === undefined) {\n                for (idx in eventName) {\n                    that.bind(idx, eventName[idx]);\n                }\n                return that;\n            }\n\n            for (idx = 0, length = eventNames.length; idx < length; idx++) {\n                eventName = eventNames[idx];\n\n                handler = handlersIsFunction ? handlers : handlers[eventName];\n\n                if (handler) {\n                    if (one) {\n                        original = handler;\n                        handler = function() {\n                            that.unbind(eventName, handler);\n                            original.apply(that, arguments);\n                        };\n                        handler.original = original;\n                    }\n                    events = that._events[eventName] = that._events[eventName] || [];\n                    events.push(handler);\n                }\n            }\n\n            return that;\n        },\n\n        one: function(eventNames, handlers) {\n            return this.bind(eventNames, handlers, true);\n        },\n\n        first: function(eventName, handlers) {\n            var that = this,\n                idx,\n                eventNames = typeof eventName === STRING ? [eventName] : eventName,\n                length,\n                handler,\n                handlersIsFunction = typeof handlers === FUNCTION,\n                events;\n\n            for (idx = 0, length = eventNames.length; idx < length; idx++) {\n                eventName = eventNames[idx];\n\n                handler = handlersIsFunction ? handlers : handlers[eventName];\n\n                if (handler) {\n                    events = that._events[eventName] = that._events[eventName] || [];\n                    events.unshift(handler);\n                }\n            }\n\n            return that;\n        },\n\n        trigger: function(eventName, e) {\n            var that = this,\n                events = that._events[eventName],\n                idx,\n                length;\n\n            if (events) {\n                e = e || {};\n\n                e.sender = that;\n\n                e._defaultPrevented = false;\n\n                e.preventDefault = preventDefault;\n\n                e.isDefaultPrevented = isDefaultPrevented;\n\n                events = events.slice();\n\n                for (idx = 0, length = events.length; idx < length; idx++) {\n                    events[idx].call(that, e);\n                }\n\n                return e._defaultPrevented === true;\n            }\n\n            return false;\n        },\n\n        unbind: function(eventName, handler) {\n            var that = this,\n                events = that._events[eventName],\n                idx;\n\n            if (eventName === undefined) {\n                that._events = {};\n            } else if (events) {\n                if (handler) {\n                    for (idx = events.length - 1; idx >= 0; idx--) {\n                        if (events[idx] === handler || events[idx].original === handler) {\n                            events.splice(idx, 1);\n                        }\n                    }\n                } else {\n                    that._events[eventName] = [];\n                }\n            }\n\n            return that;\n        }\n    });\n\n\n     function compilePart(part, stringPart) {\n         if (stringPart) {\n             return \"'\" +\n                 part.split(\"'\").join(\"\\\\'\")\n                     .split('\\\\\"').join('\\\\\\\\\\\\\"')\n                     .replace(/\\n/g, \"\\\\n\")\n                     .replace(/\\r/g, \"\\\\r\")\n                     .replace(/\\t/g, \"\\\\t\") + \"'\";\n         } else {\n             var first = part.charAt(0),\n                 rest = part.substring(1);\n\n             if (first === \"=\") {\n                 return \"+(\" + rest + \")+\";\n             } else if (first === \":\") {\n                 return \"+$kendoHtmlEncode(\" + rest + \")+\";\n             } else {\n                 return \";\" + part + \";$kendoOutput+=\";\n             }\n         }\n     }\n\n    var argumentNameRegExp = /^\\w+/,\n        encodeRegExp = /\\$\\{([^}]*)\\}/g,\n        escapedCurlyRegExp = /\\\\\\}/g,\n        curlyRegExp = /__CURLY__/g,\n        escapedSharpRegExp = /\\\\#/g,\n        sharpRegExp = /__SHARP__/g,\n        zeros = [\"\", \"0\", \"00\", \"000\", \"0000\"];\n\n    Template = {\n        paramName: \"data\", // name of the parameter of the generated template\n        useWithBlock: true, // whether to wrap the template in a with() block\n        render: function(template, data) {\n            var idx,\n                length,\n                html = \"\";\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        },\n        compile: function(template, options) {\n            var settings = extend({}, this, options),\n                paramName = settings.paramName,\n                argumentName = paramName.match(argumentNameRegExp)[0],\n                useWithBlock = settings.useWithBlock,\n                functionBody = \"var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;\",\n                fn,\n                parts,\n                idx;\n\n            if (isFunction(template)) {\n                return template;\n            }\n\n            functionBody += useWithBlock ? \"with(\" + paramName + \"){\" : \"\";\n\n            functionBody += \"$kendoOutput=\";\n\n            parts = template\n                .replace(escapedCurlyRegExp, \"__CURLY__\")\n                .replace(encodeRegExp, \"#=$kendoHtmlEncode($1)#\")\n                .replace(curlyRegExp, \"}\")\n                .replace(escapedSharpRegExp, \"__SHARP__\")\n                .split(\"#\");\n\n            for (idx = 0; idx < parts.length; idx ++) {\n                functionBody += compilePart(parts[idx], idx % 2 === 0);\n            }\n\n            functionBody += useWithBlock ? \";}\" : \";\";\n\n            functionBody += \"return $kendoOutput;\";\n\n            functionBody = functionBody.replace(sharpRegExp, \"#\");\n\n            try {\n                fn = new Function(argumentName, functionBody);\n                fn._slotCount = Math.floor(parts.length / 2);\n                return fn;\n            } catch(e) {\n                throw new Error(kendo.format(\"Invalid template:'{0}' Generated code:'{1}'\", template, functionBody));\n            }\n        }\n    };\n\nfunction pad(number, digits, end) {\n    number = number + \"\";\n    digits = digits || 2;\n    end = digits - number.length;\n\n    if (end) {\n        return zeros[digits].substring(0, end) + number;\n    }\n\n    return number;\n}\n\n    //JSON stringify\n(function() {\n    var escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        gap,\n        indent,\n        meta = {\n            \"\\b\": \"\\\\b\",\n            \"\\t\": \"\\\\t\",\n            \"\\n\": \"\\\\n\",\n            \"\\f\": \"\\\\f\",\n            \"\\r\": \"\\\\r\",\n            \"\\\"\" : '\\\\\"',\n            \"\\\\\": \"\\\\\\\\\"\n        },\n        rep,\n        toString = {}.toString;\n\n\n    if (typeof Date.prototype.toJSON !== FUNCTION) {\n\n        Date.prototype.toJSON = function () {\n            var that = this;\n\n            return isFinite(that.valueOf()) ?\n                pad(that.getUTCFullYear(), 4) + \"-\" +\n                pad(that.getUTCMonth() + 1)   + \"-\" +\n                pad(that.getUTCDate())        + \"T\" +\n                pad(that.getUTCHours())       + \":\" +\n                pad(that.getUTCMinutes())     + \":\" +\n                pad(that.getUTCSeconds())     + \"Z\" : null;\n        };\n\n        String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function () {\n            return this.valueOf();\n        };\n    }\n\n    function quote(string) {\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? \"\\\"\" + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === STRING ? c :\n                \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + \"\\\"\" : \"\\\"\" + string + \"\\\"\";\n    }\n\n    function str(key, holder) {\n        var i,\n            k,\n            v,\n            length,\n            mind = gap,\n            partial,\n            value = holder[key],\n            type;\n\n        if (value && typeof value === OBJECT && typeof value.toJSON === FUNCTION) {\n            value = value.toJSON(key);\n        }\n\n        if (typeof rep === FUNCTION) {\n            value = rep.call(holder, key, value);\n        }\n\n        type = typeof value;\n        if (type === STRING) {\n            return quote(value);\n        } else if (type === NUMBER) {\n            return isFinite(value) ? String(value) : NULL;\n        } else if (type === BOOLEAN || type === NULL) {\n            return String(value);\n        } else if (type === OBJECT) {\n            if (!value) {\n                return NULL;\n            }\n            gap += indent;\n            partial = [];\n            if (toString.apply(value) === \"[object Array]\") {\n                length = value.length;\n                for (i = 0; i < length; i++) {\n                    partial[i] = str(i, value) || NULL;\n                }\n                v = partial.length === 0 ? \"[]\" : gap ?\n                    \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\" :\n                    \"[\" + partial.join(\",\") + \"]\";\n                gap = mind;\n                return v;\n            }\n            if (rep && typeof rep === OBJECT) {\n                length = rep.length;\n                for (i = 0; i < length; i++) {\n                    if (typeof rep[i] === STRING) {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? \": \" : \":\") + v);\n                        }\n                    }\n                }\n            } else {\n                for (k in value) {\n                    if (Object.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? \": \" : \":\") + v);\n                        }\n                    }\n                }\n            }\n\n            v = partial.length === 0 ? \"{}\" : gap ?\n                \"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\" :\n                \"{\" + partial.join(\",\") + \"}\";\n            gap = mind;\n            return v;\n        }\n    }\n\n    if (typeof JSON.stringify !== FUNCTION) {\n        JSON.stringify = function (value, replacer, space) {\n            var i;\n            gap = \"\";\n            indent = \"\";\n\n            if (typeof space === NUMBER) {\n                for (i = 0; i < space; i += 1) {\n                    indent += \" \";\n                }\n\n            } else if (typeof space === STRING) {\n                indent = space;\n            }\n\n            rep = replacer;\n            if (replacer && typeof replacer !== FUNCTION && (typeof replacer !== OBJECT || typeof replacer.length !== NUMBER)) {\n                throw new Error(\"JSON.stringify\");\n            }\n\n            return str(\"\", {\"\": value});\n        };\n    }\n})();\n\n// Date and Number formatting\n(function() {\n    var dateFormatRegExp = /dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|\"[^\"]*\"|'[^']*'/g,\n        standardFormatRegExp =  /^(n|c|p|e)(\\d*)$/i,\n        literalRegExp = /(\\\\.)|(['][^']*[']?)|([\"][^\"]*[\"]?)/g,\n        commaRegExp = /\\,/g,\n        EMPTY = \"\",\n        POINT = \".\",\n        COMMA = \",\",\n        SHARP = \"#\",\n        ZERO = \"0\",\n        PLACEHOLDER = \"??\",\n        EN = \"en-US\",\n        objectToString = {}.toString;\n\n    //cultures\n    kendo.cultures[\"en-US\"] = {\n        name: EN,\n        numberFormat: {\n            pattern: [\"-n\"],\n            decimals: 2,\n            \",\": \",\",\n            \".\": \".\",\n            groupSize: [3],\n            percent: {\n                pattern: [\"-n %\", \"n %\"],\n                decimals: 2,\n                \",\": \",\",\n                \".\": \".\",\n                groupSize: [3],\n                symbol: \"%\"\n            },\n            currency: {\n                name: \"US Dollar\",\n                abbr: \"USD\",\n                pattern: [\"($n)\", \"$n\"],\n                decimals: 2,\n                \",\": \",\",\n                \".\": \".\",\n                groupSize: [3],\n                symbol: \"$\"\n            }\n        },\n        calendars: {\n            standard: {\n                days: {\n                    names: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n                    namesAbbr: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n                    namesShort: [ \"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\" ]\n                },\n                months: {\n                    names: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n                    namesAbbr: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n                },\n                AM: [ \"AM\", \"am\", \"AM\" ],\n                PM: [ \"PM\", \"pm\", \"PM\" ],\n                patterns: {\n                    d: \"M/d/yyyy\",\n                    D: \"dddd, MMMM dd, yyyy\",\n                    F: \"dddd, MMMM dd, yyyy h:mm:ss tt\",\n                    g: \"M/d/yyyy h:mm tt\",\n                    G: \"M/d/yyyy h:mm:ss tt\",\n                    m: \"MMMM dd\",\n                    M: \"MMMM dd\",\n                    s: \"yyyy'-'MM'-'ddTHH':'mm':'ss\",\n                    t: \"h:mm tt\",\n                    T: \"h:mm:ss tt\",\n                    u: \"yyyy'-'MM'-'dd HH':'mm':'ss'Z'\",\n                    y: \"MMMM, yyyy\",\n                    Y: \"MMMM, yyyy\"\n                },\n                \"/\": \"/\",\n                \":\": \":\",\n                firstDay: 0,\n                twoDigitYearMax: 2029\n            }\n        }\n    };\n\n\n     function findCulture(culture) {\n        if (culture) {\n            if (culture.numberFormat) {\n                return culture;\n            }\n\n            if (typeof culture === STRING) {\n                var cultures = kendo.cultures;\n                return cultures[culture] || cultures[culture.split(\"-\")[0]] || null;\n            }\n\n            return null;\n        }\n\n        return null;\n    }\n\n    function getCulture(culture) {\n        if (culture) {\n            culture = findCulture(culture);\n        }\n\n        return culture || kendo.cultures.current;\n    }\n\n    kendo.culture = function(cultureName) {\n        var cultures = kendo.cultures, culture;\n\n        if (cultureName !== undefined) {\n            culture = findCulture(cultureName) || cultures[EN];\n            culture.calendar = culture.calendars.standard;\n            cultures.current = culture;\n        } else {\n            return cultures.current;\n        }\n    };\n\n    kendo.findCulture = findCulture;\n    kendo.getCulture = getCulture;\n\n    //set current culture to en-US.\n    kendo.culture(EN);\n\n    function formatDate(date, format, culture) {\n        culture = getCulture(culture);\n\n        var calendar = culture.calendars.standard,\n            days = calendar.days,\n            months = calendar.months;\n\n        format = calendar.patterns[format] || format;\n\n        return format.replace(dateFormatRegExp, function (match) {\n            var minutes;\n            var result;\n            var sign;\n\n            if (match === \"d\") {\n                result = date.getDate();\n            } else if (match === \"dd\") {\n                result = pad(date.getDate());\n            } else if (match === \"ddd\") {\n                result = days.namesAbbr[date.getDay()];\n            } else if (match === \"dddd\") {\n                result = days.names[date.getDay()];\n            } else if (match === \"M\") {\n                result = date.getMonth() + 1;\n            } else if (match === \"MM\") {\n                result = pad(date.getMonth() + 1);\n            } else if (match === \"MMM\") {\n                result = months.namesAbbr[date.getMonth()];\n            } else if (match === \"MMMM\") {\n                result = months.names[date.getMonth()];\n            } else if (match === \"yy\") {\n                result = pad(date.getFullYear() % 100);\n            } else if (match === \"yyyy\") {\n                result = pad(date.getFullYear(), 4);\n            } else if (match === \"h\" ) {\n                result = date.getHours() % 12 || 12;\n            } else if (match === \"hh\") {\n                result = pad(date.getHours() % 12 || 12);\n            } else if (match === \"H\") {\n                result = date.getHours();\n            } else if (match === \"HH\") {\n                result = pad(date.getHours());\n            } else if (match === \"m\") {\n                result = date.getMinutes();\n            } else if (match === \"mm\") {\n                result = pad(date.getMinutes());\n            } else if (match === \"s\") {\n                result = date.getSeconds();\n            } else if (match === \"ss\") {\n                result = pad(date.getSeconds());\n            } else if (match === \"f\") {\n                result = math.floor(date.getMilliseconds() / 100);\n            } else if (match === \"ff\") {\n                result = date.getMilliseconds();\n                if (result > 99) {\n                    result = math.floor(result / 10);\n                }\n                result = pad(result);\n            } else if (match === \"fff\") {\n                result = pad(date.getMilliseconds(), 3);\n            } else if (match === \"tt\") {\n                result = date.getHours() < 12 ? calendar.AM[0] : calendar.PM[0];\n            } else if (match === \"zzz\") {\n                minutes = date.getTimezoneOffset();\n                sign = minutes < 0;\n\n                result = math.abs(minutes / 60).toString().split(\".\")[0];\n                minutes = math.abs(minutes) - (result * 60);\n\n                result = (sign ? \"+\" : \"-\") + pad(result);\n                result += \":\" + pad(minutes);\n            } else if (match === \"zz\" || match === \"z\") {\n                result = date.getTimezoneOffset() / 60;\n                sign = result < 0;\n\n                result = math.abs(result).toString().split(\".\")[0];\n                result = (sign ? \"+\" : \"-\") + (match === \"zz\" ? pad(result) : result);\n            }\n\n            return result !== undefined ? result : match.slice(1, match.length - 1);\n        });\n    }\n\n    //number formatting\n    function formatNumber(number, format, culture) {\n        culture = getCulture(culture);\n\n        var numberFormat = culture.numberFormat,\n            decimal = numberFormat[POINT],\n            precision = numberFormat.decimals,\n            pattern = numberFormat.pattern[0],\n            literals = [],\n            symbol,\n            isCurrency, isPercent,\n            customPrecision,\n            formatAndPrecision,\n            negative = number < 0,\n            integer,\n            fraction,\n            integerLength,\n            fractionLength,\n            replacement = EMPTY,\n            value = EMPTY,\n            idx,\n            length,\n            ch,\n            hasGroup,\n            hasNegativeFormat,\n            decimalIndex,\n            sharpIndex,\n            zeroIndex,\n            hasZero, hasSharp,\n            percentIndex,\n            currencyIndex,\n            startZeroIndex,\n            start = -1,\n            end;\n\n        //return empty string if no number\n        if (number === undefined) {\n            return EMPTY;\n        }\n\n        if (!isFinite(number)) {\n            return number;\n        }\n\n        //if no format then return number.toString() or number.toLocaleString() if culture.name is not defined\n        if (!format) {\n            return culture.name.length ? number.toLocaleString() : number.toString();\n        }\n\n        formatAndPrecision = standardFormatRegExp.exec(format);\n\n        // standard formatting\n        if (formatAndPrecision) {\n            format = formatAndPrecision[1].toLowerCase();\n\n            isCurrency = format === \"c\";\n            isPercent = format === \"p\";\n\n            if (isCurrency || isPercent) {\n                //get specific number format information if format is currency or percent\n                numberFormat = isCurrency ? numberFormat.currency : numberFormat.percent;\n                decimal = numberFormat[POINT];\n                precision = numberFormat.decimals;\n                symbol = numberFormat.symbol;\n                pattern = numberFormat.pattern[negative ? 0 : 1];\n            }\n\n            customPrecision = formatAndPrecision[2];\n\n            if (customPrecision) {\n                precision = +customPrecision;\n            }\n\n            //return number in exponential format\n            if (format === \"e\") {\n                var exp = customPrecision ? number.toExponential(precision) : number.toExponential(); // toExponential() and toExponential(undefined) differ in FF #653438.\n\n                return exp.replace(POINT, numberFormat[POINT]);\n            }\n\n            // multiply if format is percent\n            if (isPercent) {\n                number *= 100;\n            }\n\n            number = round(number, precision);\n            negative = number < 0;\n            number = number.split(POINT);\n\n            integer = number[0];\n            fraction = number[1];\n\n            //exclude \"-\" if number is negative.\n            if (negative) {\n                integer = integer.substring(1);\n            }\n\n            value = groupInteger(integer, 0, integer.length, numberFormat);\n\n            if (fraction) {\n                value += decimal + fraction;\n            }\n\n            if (format === \"n\" && !negative) {\n                return value;\n            }\n\n            number = EMPTY;\n\n            for (idx = 0, length = pattern.length; idx < length; idx++) {\n                ch = pattern.charAt(idx);\n\n                if (ch === \"n\") {\n                    number += value;\n                } else if (ch === \"$\" || ch === \"%\") {\n                    number += symbol;\n                } else {\n                    number += ch;\n                }\n            }\n\n            return number;\n        }\n\n        //custom formatting\n        //\n        //separate format by sections.\n\n        if (format.indexOf(\"'\") > -1 || format.indexOf(\"\\\"\") > -1 || format.indexOf(\"\\\\\") > -1) {\n            format = format.replace(literalRegExp, function (match) {\n                var quoteChar = match.charAt(0).replace(\"\\\\\", \"\"),\n                    literal = match.slice(1).replace(quoteChar, \"\");\n\n                literals.push(literal);\n\n                return PLACEHOLDER;\n            });\n        }\n\n        format = format.split(\";\");\n        if (negative && format[1]) {\n            //get negative format\n            format = format[1];\n            hasNegativeFormat = true;\n        } else if (number === 0 && format[2]) {\n            //format for zeros\n            format = format[2];\n            if (format.indexOf(SHARP) == -1 && format.indexOf(ZERO) == -1) {\n                //return format if it is string constant.\n                return format;\n            }\n        } else {\n            format = format[0];\n        }\n\n        percentIndex = format.indexOf(\"%\");\n        currencyIndex = format.indexOf(\"$\");\n\n        isPercent = percentIndex != -1;\n        isCurrency = currencyIndex != -1;\n\n        //multiply number if the format has percent\n        if (isPercent) {\n            number *= 100;\n        }\n\n        if (isCurrency && format[currencyIndex - 1] === \"\\\\\") {\n            format = format.split(\"\\\\\").join(\"\");\n            isCurrency = false;\n        }\n\n        if (isCurrency || isPercent) {\n            //get specific number format information if format is currency or percent\n            numberFormat = isCurrency ? numberFormat.currency : numberFormat.percent;\n            decimal = numberFormat[POINT];\n            precision = numberFormat.decimals;\n            symbol = numberFormat.symbol;\n        }\n\n        hasGroup = format.indexOf(COMMA) > -1;\n        if (hasGroup) {\n            format = format.replace(commaRegExp, EMPTY);\n        }\n\n        decimalIndex = format.indexOf(POINT);\n        length = format.length;\n\n        if (decimalIndex != -1) {\n            fraction = number.toString().split(\"e\");\n            if (fraction[1]) {\n                fraction = round(number, Math.abs(fraction[1]));\n            } else {\n                fraction = fraction[0];\n            }\n            fraction = fraction.split(POINT)[1] || EMPTY;\n            zeroIndex = format.lastIndexOf(ZERO) - decimalIndex;\n            sharpIndex = format.lastIndexOf(SHARP) - decimalIndex;\n            hasZero = zeroIndex > -1;\n            hasSharp = sharpIndex > -1;\n            idx = fraction.length;\n\n            if (!hasZero && !hasSharp) {\n                format = format.substring(0, decimalIndex) + format.substring(decimalIndex + 1);\n                length = format.length;\n                decimalIndex = -1;\n                idx = 0;\n            }\n\n            if (hasZero && zeroIndex > sharpIndex) {\n                idx = zeroIndex;\n            } else if (sharpIndex > zeroIndex) {\n                if (hasSharp && idx > sharpIndex) {\n                    var rounded = round(number, sharpIndex, negative);\n\n                    while (rounded.charAt(rounded.length - 1) === ZERO && sharpIndex > 0 && sharpIndex > zeroIndex) {\n                        sharpIndex--;\n\n                        rounded = round(number, sharpIndex, negative);\n                    }\n\n                    idx = sharpIndex;\n                } else if (hasZero && idx < zeroIndex) {\n                    idx = zeroIndex;\n                }\n            }\n        }\n\n        number = round(number, idx, negative);\n\n        sharpIndex = format.indexOf(SHARP);\n        startZeroIndex = zeroIndex = format.indexOf(ZERO);\n\n        //define the index of the first digit placeholder\n        if (sharpIndex == -1 && zeroIndex != -1) {\n            start = zeroIndex;\n        } else if (sharpIndex != -1 && zeroIndex == -1) {\n            start = sharpIndex;\n        } else {\n            start = sharpIndex > zeroIndex ? zeroIndex : sharpIndex;\n        }\n\n        sharpIndex = format.lastIndexOf(SHARP);\n        zeroIndex = format.lastIndexOf(ZERO);\n\n        //define the index of the last digit placeholder\n        if (sharpIndex == -1 && zeroIndex != -1) {\n            end = zeroIndex;\n        } else if (sharpIndex != -1 && zeroIndex == -1) {\n            end = sharpIndex;\n        } else {\n            end = sharpIndex > zeroIndex ? sharpIndex : zeroIndex;\n        }\n\n        if (start == length) {\n            end = start;\n        }\n\n        if (start != -1) {\n            value = number.toString().split(POINT);\n            integer = value[0];\n            fraction = value[1] || EMPTY;\n\n            integerLength = integer.length;\n            fractionLength = fraction.length;\n\n            if (negative && (number * -1) >= 0) {\n                negative = false;\n            }\n\n            number = format.substring(0, start);\n\n            if (negative && !hasNegativeFormat) {\n                number += \"-\";\n            }\n\n            for (idx = start; idx < length; idx++) {\n                ch = format.charAt(idx);\n\n                if (decimalIndex == -1) {\n                    if (end - idx < integerLength) {\n                        number += integer;\n                        break;\n                    }\n                } else {\n                    if (zeroIndex != -1 && zeroIndex < idx) {\n                        replacement = EMPTY;\n                    }\n\n                    if ((decimalIndex - idx) <= integerLength && decimalIndex - idx > -1) {\n                        number += integer;\n                        idx = decimalIndex;\n                    }\n\n                    if (decimalIndex === idx) {\n                        number += (fraction ? decimal : EMPTY) + fraction;\n                        idx += end - decimalIndex + 1;\n                        continue;\n                    }\n                }\n\n                if (ch === ZERO) {\n                    number += ch;\n                    replacement = ch;\n                } else if (ch === SHARP) {\n                    number += replacement;\n                }\n            }\n\n            if (hasGroup) {\n                number = groupInteger(number, start + (negative && !hasNegativeFormat ? 1 : 0), Math.max(end, (integerLength + start)), numberFormat);\n            }\n\n            if (end >= start) {\n                number += format.substring(end + 1);\n            }\n\n            //replace symbol placeholders\n            if (isCurrency || isPercent) {\n                value = EMPTY;\n                for (idx = 0, length = number.length; idx < length; idx++) {\n                    ch = number.charAt(idx);\n                    value += (ch === \"$\" || ch === \"%\") ? symbol : ch;\n                }\n                number = value;\n            }\n\n            length = literals.length;\n\n            if (length) {\n                for (idx = 0; idx < length; idx++) {\n                    number = number.replace(PLACEHOLDER, literals[idx]);\n                }\n            }\n        }\n\n        return number;\n    }\n\n    var groupInteger = function(number, start, end, numberFormat) {\n        var decimalIndex = number.indexOf(numberFormat[POINT]);\n        var groupSizes = numberFormat.groupSize.slice();\n        var groupSize = groupSizes.shift();\n        var integer, integerLength;\n        var idx, parts, value;\n        var newGroupSize;\n\n        end = decimalIndex !== -1 ? decimalIndex : end + 1;\n\n        integer = number.substring(start, end);\n        integerLength = integer.length;\n\n        if (integerLength >= groupSize) {\n            idx = integerLength;\n            parts = [];\n\n            while (idx > -1) {\n                value = integer.substring(idx - groupSize, idx);\n                if (value) {\n                    parts.push(value);\n                }\n                idx -= groupSize;\n                newGroupSize = groupSizes.shift();\n                groupSize = newGroupSize !== undefined ? newGroupSize : groupSize;\n\n                if (groupSize === 0) {\n                    if (idx > 0) {\n                        parts.push(integer.substring(0, idx));\n                    }\n                    break;\n                }\n            }\n\n            integer = parts.reverse().join(numberFormat[COMMA]);\n            number = number.substring(0, start) + integer + number.substring(end);\n        }\n\n        return number;\n    };\n\n    var round = function(value, precision, negative) {\n        precision = precision || 0;\n\n        value = value.toString().split('e');\n        value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + precision) : precision)));\n\n        if (negative) {\n            value = -value;\n        }\n\n        value = value.toString().split('e');\n        value = +(value[0] + 'e' + (value[1] ? (+value[1] - precision) : -precision));\n\n        return value.toFixed(Math.min(precision, 20));\n    };\n\n    var toString = function(value, fmt, culture) {\n        if (fmt) {\n            if (objectToString.call(value) === \"[object Date]\") {\n                return formatDate(value, fmt, culture);\n            } else if (typeof value === NUMBER) {\n                return formatNumber(value, fmt, culture);\n            }\n        }\n\n        return value !== undefined ? value : \"\";\n    };\n\n    kendo.format = function(fmt) {\n        var values = arguments;\n\n        return fmt.replace(formatRegExp, function(match, index, placeholderFormat) {\n            var value = values[parseInt(index, 10) + 1];\n\n            return toString(value, placeholderFormat ? placeholderFormat.substring(1) : \"\");\n        });\n    };\n\n    kendo._extractFormat = function (format) {\n        if (format.slice(0,3) === \"{0:\") {\n            format = format.slice(3, format.length - 1);\n        }\n\n        return format;\n    };\n\n    kendo._activeElement = function() {\n        try {\n            return document.activeElement;\n        } catch(e) {\n            return document.documentElement.activeElement;\n        }\n    };\n\n    kendo._round = round;\n    kendo._outerWidth = function (element, includeMargin) { return $(element).outerWidth(includeMargin || false) || 0; };\n    kendo._outerHeight = function (element, includeMargin) { return $(element).outerHeight(includeMargin || false) || 0; };\n    kendo.toString = toString;\n})();\n\n\n(function() {\n    var nonBreakingSpaceRegExp = /\\u00A0/g,\n        spaceRegExp = /\\s/g,\n        exponentRegExp = /[eE][\\-+]?[0-9]+/,\n        shortTimeZoneRegExp = /[+|\\-]\\d{1,2}/,\n        longTimeZoneRegExp = /[+|\\-]\\d{1,2}:?\\d{2}/,\n        dateRegExp = /^\\/Date\\((.*?)\\)\\/$/,\n        offsetRegExp = /[+-]\\d*/,\n        FORMATS_SEQUENCE = [ [], [ \"G\", \"g\", \"F\" ], [ \"D\", \"d\", \"y\", \"m\", \"T\", \"t\" ] ],\n        STANDARD_FORMATS = [\n            [\n            \"yyyy-MM-ddTHH:mm:ss.fffffffzzz\",\n            \"yyyy-MM-ddTHH:mm:ss.fffffff\",\n            \"yyyy-MM-ddTHH:mm:ss.fffzzz\",\n            \"yyyy-MM-ddTHH:mm:ss.fff\",\n            \"ddd MMM dd yyyy HH:mm:ss\",\n            \"yyyy-MM-ddTHH:mm:sszzz\",\n            \"yyyy-MM-ddTHH:mmzzz\",\n            \"yyyy-MM-ddTHH:mmzz\",\n            \"yyyy-MM-ddTHH:mm:ss\",\n            \"yyyy-MM-dd HH:mm:ss\",\n            \"yyyy/MM/dd HH:mm:ss\"\n            ], [\n            \"yyyy-MM-ddTHH:mm\",\n            \"yyyy-MM-dd HH:mm\",\n            \"yyyy/MM/dd HH:mm\"\n            ], [\n            \"yyyy/MM/dd\",\n            \"yyyy-MM-dd\",\n            \"HH:mm:ss\",\n            \"HH:mm\"\n            ]\n        ],\n        numberRegExp = {\n            2: /^\\d{1,2}/,\n            3: /^\\d{1,3}/,\n            4: /^\\d{4}/\n        },\n        objectToString = {}.toString;\n\n    function outOfRange(value, start, end) {\n        return !(value >= start && value <= end);\n    }\n\n    function designatorPredicate(designator) {\n        return designator.charAt(0);\n    }\n\n    function mapDesignators(designators) {\n        return $.map(designators, designatorPredicate);\n    }\n\n    //if date's day is different than the typed one - adjust\n    function adjustDST(date, hours) {\n        if (!hours && date.getHours() === 23) {\n            date.setHours(date.getHours() + 2);\n        }\n    }\n\n    function lowerArray(data) {\n        var idx = 0,\n            length = data.length,\n            array = [];\n\n        for (; idx < length; idx++) {\n            array[idx] = (data[idx] + \"\").toLowerCase();\n        }\n\n        return array;\n    }\n\n    function lowerLocalInfo(localInfo) {\n        var newLocalInfo = {}, property;\n\n        for (property in localInfo) {\n            newLocalInfo[property] = lowerArray(localInfo[property]);\n        }\n\n        return newLocalInfo;\n    }\n\n    function parseExact(value, format, culture, strict) {\n        if (!value) {\n            return null;\n        }\n\n        var lookAhead = function (match) {\n                var i = 0;\n                while (format[idx] === match) {\n                    i++;\n                    idx++;\n                }\n                if (i > 0) {\n                    idx -= 1;\n                }\n                return i;\n            },\n            getNumber = function(size) {\n                var rg = numberRegExp[size] || new RegExp('^\\\\d{1,' + size + '}'),\n                    match = value.substr(valueIdx, size).match(rg);\n\n                if (match) {\n                    match = match[0];\n                    valueIdx += match.length;\n                    return parseInt(match, 10);\n                }\n                return null;\n            },\n            getIndexByName = function (names, lower) {\n                var i = 0,\n                    length = names.length,\n                    name, nameLength,\n                    matchLength = 0,\n                    matchIdx = 0,\n                    subValue;\n\n                for (; i < length; i++) {\n                    name = names[i];\n                    nameLength = name.length;\n                    subValue = value.substr(valueIdx, nameLength);\n\n                    if (lower) {\n                        subValue = subValue.toLowerCase();\n                    }\n\n                    if (subValue == name && nameLength > matchLength) {\n                        matchLength = nameLength;\n                        matchIdx = i;\n                    }\n                }\n\n                if (matchLength) {\n                    valueIdx += matchLength;\n                    return matchIdx + 1;\n                }\n\n                return null;\n            },\n            checkLiteral = function() {\n                var result = false;\n                if (value.charAt(valueIdx) === format[idx]) {\n                    valueIdx++;\n                    result = true;\n                }\n                return result;\n            },\n            calendar = culture.calendars.standard,\n            year = null,\n            month = null,\n            day = null,\n            hours = null,\n            minutes = null,\n            seconds = null,\n            milliseconds = null,\n            idx = 0,\n            valueIdx = 0,\n            literal = false,\n            date = new Date(),\n            twoDigitYearMax = calendar.twoDigitYearMax || 2029,\n            defaultYear = date.getFullYear(),\n            ch, count, length, pattern,\n            pmHour, UTC, matches,\n            amDesignators, pmDesignators,\n            hoursOffset, minutesOffset,\n            hasTime, match;\n\n        if (!format) {\n            format = \"d\"; //shord date format\n        }\n\n        //if format is part of the patterns get real format\n        pattern = calendar.patterns[format];\n        if (pattern) {\n            format = pattern;\n        }\n\n        format = format.split(\"\");\n        length = format.length;\n\n        for (; idx < length; idx++) {\n            ch = format[idx];\n\n            if (literal) {\n                if (ch === \"'\") {\n                    literal = false;\n                } else {\n                    checkLiteral();\n                }\n            } else {\n                if (ch === \"d\") {\n                    count = lookAhead(\"d\");\n                    if (!calendar._lowerDays) {\n                        calendar._lowerDays = lowerLocalInfo(calendar.days);\n                    }\n\n                    if (day !== null && count > 2) {\n                        continue;\n                    }\n\n                    day = count < 3 ? getNumber(2) : getIndexByName(calendar._lowerDays[count == 3 ? \"namesAbbr\" : \"names\"], true);\n\n                    if (day === null || outOfRange(day, 1, 31)) {\n                        return null;\n                    }\n                } else if (ch === \"M\") {\n                    count = lookAhead(\"M\");\n                    if (!calendar._lowerMonths) {\n                        calendar._lowerMonths = lowerLocalInfo(calendar.months);\n                    }\n                    month = count < 3 ? getNumber(2) : getIndexByName(calendar._lowerMonths[count == 3 ? 'namesAbbr' : 'names'], true);\n\n                    if (month === null || outOfRange(month, 1, 12)) {\n                        return null;\n                    }\n                    month -= 1; //because month is zero based\n                } else if (ch === \"y\") {\n                    count = lookAhead(\"y\");\n                    year = getNumber(count);\n\n                    if (year === null) {\n                        return null;\n                    }\n\n                    if (count == 2) {\n                        if (typeof twoDigitYearMax === \"string\") {\n                            twoDigitYearMax = defaultYear + parseInt(twoDigitYearMax, 10);\n                        }\n\n                        year = (defaultYear - defaultYear % 100) + year;\n                        if (year > twoDigitYearMax) {\n                            year -= 100;\n                        }\n                    }\n                } else if (ch === \"h\" ) {\n                    lookAhead(\"h\");\n                    hours = getNumber(2);\n                    if (hours == 12) {\n                        hours = 0;\n                    }\n                    if (hours === null || outOfRange(hours, 0, 11)) {\n                        return null;\n                    }\n                } else if (ch === \"H\") {\n                    lookAhead(\"H\");\n                    hours = getNumber(2);\n                    if (hours === null || outOfRange(hours, 0, 23)) {\n                        return null;\n                    }\n                } else if (ch === \"m\") {\n                    lookAhead(\"m\");\n                    minutes = getNumber(2);\n                    if (minutes === null || outOfRange(minutes, 0, 59)) {\n                        return null;\n                    }\n                } else if (ch === \"s\") {\n                    lookAhead(\"s\");\n                    seconds = getNumber(2);\n                    if (seconds === null || outOfRange(seconds, 0, 59)) {\n                        return null;\n                    }\n                } else if (ch === \"f\") {\n                    count = lookAhead(\"f\");\n\n                    match = value.substr(valueIdx, count).match(numberRegExp[3]);\n                    milliseconds = getNumber(count); //move value index position\n\n                    if (milliseconds !== null) {\n                        milliseconds = parseFloat(\"0.\" + match[0], 10);\n                        milliseconds = kendo._round(milliseconds, 3);\n                        milliseconds *= 1000;\n                    }\n\n                    if (milliseconds === null || outOfRange(milliseconds, 0, 999)) {\n                        return null;\n                    }\n\n                } else if (ch === \"t\") {\n                    count = lookAhead(\"t\");\n                    amDesignators = calendar.AM;\n                    pmDesignators = calendar.PM;\n\n                    if (count === 1) {\n                        amDesignators = mapDesignators(amDesignators);\n                        pmDesignators = mapDesignators(pmDesignators);\n                    }\n\n                    pmHour = getIndexByName(pmDesignators);\n                    if (!pmHour && !getIndexByName(amDesignators)) {\n                        return null;\n                    }\n                }\n                else if (ch === \"z\") {\n                    UTC = true;\n                    count = lookAhead(\"z\");\n\n                    if (value.substr(valueIdx, 1) === \"Z\") {\n                        checkLiteral();\n                        continue;\n                    }\n\n                    matches = value.substr(valueIdx, 6)\n                                   .match(count > 2 ? longTimeZoneRegExp : shortTimeZoneRegExp);\n\n                    if (!matches) {\n                        return null;\n                    }\n\n                    matches = matches[0].split(\":\");\n\n                    hoursOffset = matches[0];\n                    minutesOffset = matches[1];\n\n                    if (!minutesOffset && hoursOffset.length > 3) { //(+|-)[hh][mm] format is used\n                        valueIdx = hoursOffset.length - 2;\n                        minutesOffset = hoursOffset.substring(valueIdx);\n                        hoursOffset = hoursOffset.substring(0, valueIdx);\n                    }\n\n                    hoursOffset = parseInt(hoursOffset, 10);\n                    if (outOfRange(hoursOffset, -12, 13)) {\n                        return null;\n                    }\n\n                    if (count > 2) {\n                        minutesOffset = matches[0][0] + minutesOffset;\n                        minutesOffset = parseInt(minutesOffset, 10);\n                        if (isNaN(minutesOffset) || outOfRange(minutesOffset, -59, 59)) {\n                            return null;\n                        }\n                    }\n                } else if (ch === \"'\") {\n                    literal = true;\n                    checkLiteral();\n                } else if (!checkLiteral()) {\n                    return null;\n                }\n            }\n        }\n\n        // if more characters follow, assume wrong format\n        // https://github.com/telerik/kendo-ui-core/issues/3476\n        if (strict && !/^\\s*$/.test(value.substr(valueIdx))) {\n            return null;\n        }\n\n        hasTime = hours !== null || minutes !== null || seconds || null;\n\n        if (year === null && month === null && day === null && hasTime) {\n            year = defaultYear;\n            month = date.getMonth();\n            day = date.getDate();\n        } else {\n            if (year === null) {\n                year = defaultYear;\n            }\n\n            if (day === null) {\n                day = 1;\n            }\n        }\n\n        if (pmHour && hours < 12) {\n            hours += 12;\n        }\n\n        if (UTC) {\n            if (hoursOffset) {\n                hours += -hoursOffset;\n            }\n\n            if (minutesOffset) {\n                minutes += -minutesOffset;\n            }\n\n            value = new Date(Date.UTC(year, month, day, hours, minutes, seconds, milliseconds));\n        } else {\n            value = new Date(year, month, day, hours, minutes, seconds, milliseconds);\n            adjustDST(value, hours);\n        }\n\n        if (year < 100) {\n            value.setFullYear(year);\n        }\n\n        if (value.getDate() !== day && UTC === undefined) {\n            return null;\n        }\n\n        return value;\n    }\n\n    function parseMicrosoftFormatOffset(offset) {\n        var sign = offset.substr(0, 1) === \"-\" ? -1 : 1;\n\n        offset = offset.substring(1);\n        offset = (parseInt(offset.substr(0, 2), 10) * 60) + parseInt(offset.substring(2), 10);\n\n        return sign * offset;\n    }\n\n    function getDefaultFormats(culture) {\n        var length = math.max(FORMATS_SEQUENCE.length, STANDARD_FORMATS.length);\n        var calendar = culture.calendar || culture.calendars.standard;\n        var patterns = calendar.patterns;\n        var cultureFormats, formatIdx, idx;\n        var formats = [];\n\n        for (idx = 0; idx < length; idx++) {\n            cultureFormats = FORMATS_SEQUENCE[idx];\n            for (formatIdx = 0; formatIdx < cultureFormats.length; formatIdx++) {\n                formats.push(patterns[cultureFormats[formatIdx]]);\n            }\n            formats = formats.concat(STANDARD_FORMATS[idx]);\n        }\n\n        return formats;\n    }\n\n    function internalParseDate(value, formats, culture, strict) {\n        if (objectToString.call(value) === \"[object Date]\") {\n            return value;\n        }\n\n        var idx = 0;\n        var date = null;\n        var length;\n        var tzoffset;\n\n        if (value && value.indexOf(\"/D\") === 0) {\n            date = dateRegExp.exec(value);\n            if (date) {\n                date = date[1];\n                tzoffset = offsetRegExp.exec(date.substring(1));\n\n                date = new Date(parseInt(date, 10));\n\n                if (tzoffset) {\n                    tzoffset = parseMicrosoftFormatOffset(tzoffset[0]);\n                    date = kendo.timezone.apply(date, 0);\n                    date = kendo.timezone.convert(date, 0, -1 * tzoffset);\n                }\n\n                return date;\n            }\n        }\n\n        culture = kendo.getCulture(culture);\n\n        if (!formats) {\n            formats = getDefaultFormats(culture);\n        }\n\n        formats = isArray(formats) ? formats: [formats];\n        length = formats.length;\n\n        for (; idx < length; idx++) {\n            date = parseExact(value, formats[idx], culture, strict);\n            if (date) {\n                return date;\n            }\n        }\n\n        return date;\n    }\n\n    kendo.parseDate = function(value, formats, culture) {\n        return internalParseDate(value, formats, culture, false);\n    };\n\n    kendo.parseExactDate = function(value, formats, culture) {\n        return internalParseDate(value, formats, culture, true);\n    };\n\n    kendo.parseInt = function(value, culture) {\n        var result = kendo.parseFloat(value, culture);\n        if (result) {\n            result = result | 0;\n        }\n        return result;\n    };\n\n    kendo.parseFloat = function(value, culture, format) {\n        if (!value && value !== 0) {\n           return null;\n        }\n\n        if (typeof value === NUMBER) {\n           return value;\n        }\n\n        value = value.toString();\n        culture = kendo.getCulture(culture);\n\n        var number = culture.numberFormat,\n            percent = number.percent,\n            currency = number.currency,\n            symbol = currency.symbol,\n            percentSymbol = percent.symbol,\n            negative = value.indexOf(\"-\"),\n            parts, isPercent;\n\n        //handle exponential number\n        if (exponentRegExp.test(value)) {\n            value = parseFloat(value.replace(number[\".\"], \".\"));\n            if (isNaN(value)) {\n                value = null;\n            }\n            return value;\n        }\n\n        if (negative > 0) {\n            return null;\n        } else {\n            negative = negative > -1;\n        }\n\n        if (value.indexOf(symbol) > -1 || (format && format.toLowerCase().indexOf(\"c\") > -1)) {\n            number = currency;\n            parts = number.pattern[0].replace(\"$\", symbol).split(\"n\");\n            if (value.indexOf(parts[0]) > -1 && value.indexOf(parts[1]) > -1) {\n                value = value.replace(parts[0], \"\").replace(parts[1], \"\");\n                negative = true;\n            }\n        } else if (value.indexOf(percentSymbol) > -1) {\n            isPercent = true;\n            number = percent;\n            symbol = percentSymbol;\n        }\n\n        value = value.replace(\"-\", \"\")\n                     .replace(symbol, \"\")\n                     .replace(nonBreakingSpaceRegExp, \" \")\n                     .split(number[\",\"].replace(nonBreakingSpaceRegExp, \" \")).join(\"\")\n                     .replace(spaceRegExp, \"\")\n                     .replace(number[\".\"], \".\");\n\n        value = parseFloat(value);\n\n        if (isNaN(value)) {\n            value = null;\n        } else if (negative) {\n            value *= -1;\n        }\n\n        if (value && isPercent) {\n            value /= 100;\n        }\n\n        return value;\n    };\n})();\n\n    function getShadows(element) {\n        var shadow = element.css(kendo.support.transitions.css + \"box-shadow\") || element.css(\"box-shadow\"),\n            radius = shadow ? shadow.match(boxShadowRegExp) || [ 0, 0, 0, 0, 0 ] : [ 0, 0, 0, 0, 0 ],\n            blur = math.max((+radius[3]), +(radius[4] || 0));\n\n        return {\n            left: (-radius[1]) + blur,\n            right: (+radius[1]) + blur,\n            bottom: (+radius[2]) + blur\n        };\n    }\n\n    function wrap(element, autosize) {\n        var percentage,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            parent = element.parent(),\n            windowOuterWidth = outerWidth(window);\n\n        parent.removeClass(\"k-animation-container-sm\");\n\n        if (!parent.hasClass(\"k-animation-container\")) {\n            var width = element[0].style.width,\n                height = element[0].style.height,\n                percentWidth = percentRegExp.test(width),\n                percentHeight = percentRegExp.test(height),\n                forceWidth = element.hasClass(\"k-tooltip\") || element.is(\".k-menu-horizontal.k-context-menu\");\n\n            percentage = percentWidth || percentHeight;\n\n            if (!percentWidth && (!autosize || (autosize && width) || forceWidth)) { width = autosize ? outerWidth(element) + 1 : outerWidth(element); }\n            if (!percentHeight && (!autosize || (autosize && height)) || element.is(\".k-menu-horizontal.k-context-menu\")) { height = outerHeight(element); }\n\n            element.wrap(\n                         $(\"<div/>\")\n                         .addClass(\"k-animation-container\")\n                         .css({\n                             width: width,\n                             height: height\n                         }));\n            parent = element.parent();\n\n            if (percentage) {\n                element.css({\n                    width: \"100%\",\n                    height: \"100%\",\n                    boxSizing: \"border-box\",\n                    mozBoxSizing: \"border-box\",\n                    webkitBoxSizing: \"border-box\"\n                });\n            }\n        } else {\n            wrapResize(element, autosize);\n        }\n\n        if(windowOuterWidth < outerWidth(parent)){\n            parent.addClass(\"k-animation-container-sm\");\n\n            wrapResize(element, autosize);\n        }\n\n        return parent;\n    }\n\n    function wrapResize(element, autosize) {\n        var percentage,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            wrapper = element.parent(\".k-animation-container\"),\n            wrapperStyle = wrapper[0].style;\n\n        if (wrapper.is(\":hidden\")) {\n            wrapper.css({\n                display: \"\",\n                position: \"\"\n            });\n        }\n\n        percentage = percentRegExp.test(wrapperStyle.width) || percentRegExp.test(wrapperStyle.height);\n\n        if (!percentage) {\n            wrapper.css({\n                width: autosize ? outerWidth(element) + 1 : outerWidth(element),\n                height: outerHeight(element),\n                boxSizing: \"content-box\",\n                mozBoxSizing: \"content-box\",\n                webkitBoxSizing: \"content-box\"\n            });\n        }\n    }\n\n    function deepExtend(destination) {\n        var i = 1,\n            length = arguments.length;\n\n        for (i = 1; i < length; i++) {\n            deepExtendOne(destination, arguments[i]);\n        }\n\n        return destination;\n    }\n\n    function deepExtendOne(destination, source) {\n        var ObservableArray = kendo.data.ObservableArray,\n            LazyObservableArray = kendo.data.LazyObservableArray,\n            DataSource = kendo.data.DataSource,\n            HierarchicalDataSource = kendo.data.HierarchicalDataSource,\n            property,\n            propValue,\n            propType,\n            propInit,\n            destProp;\n\n        for (property in source) {\n            propValue = source[property];\n            propType = typeof propValue;\n\n            if (propType === OBJECT && propValue !== null) {\n                propInit = propValue.constructor;\n            } else {\n                propInit = null;\n            }\n\n            if (propInit &&\n                propInit !== Array && propInit !== ObservableArray && propInit !== LazyObservableArray &&\n                propInit !== DataSource && propInit !== HierarchicalDataSource && propInit !== RegExp &&\n                (!kendo.isFunction(window.ArrayBuffer) || propInit !== ArrayBuffer)) {\n\n                if (propValue instanceof Date) {\n                    destination[property] = new Date(propValue.getTime());\n                } else if (isFunction(propValue.clone)) {\n                    destination[property] = propValue.clone();\n                } else {\n                    destProp = destination[property];\n                    if (typeof (destProp) === OBJECT) {\n                        destination[property] = destProp || {};\n                    } else {\n                        destination[property] = {};\n                    }\n                    deepExtendOne(destination[property], propValue);\n                }\n            } else if (propType !== UNDEFINED) {\n                destination[property] = propValue;\n            }\n        }\n\n        return destination;\n    }\n\n    function testRx(agent, rxs, dflt) {\n        for (var rx in rxs) {\n            if (rxs.hasOwnProperty(rx) && rxs[rx].test(agent)) {\n                return rx;\n            }\n        }\n        return dflt !== undefined ? dflt : agent;\n    }\n\n    function toHyphens(str) {\n        return str.replace(/([a-z][A-Z])/g, function (g) {\n            return g.charAt(0) + '-' + g.charAt(1).toLowerCase();\n        });\n    }\n\n    function toCamelCase(str) {\n        return str.replace(/\\-(\\w)/g, function (strMatch, g1) {\n            return g1.toUpperCase();\n        });\n    }\n\n    function getComputedStyles(element, properties) {\n        var styles = {}, computedStyle;\n\n        if (document.defaultView && document.defaultView.getComputedStyle) {\n            computedStyle = document.defaultView.getComputedStyle(element, \"\");\n\n            if (properties) {\n                $.each(properties, function(idx, value) {\n                    styles[value] = computedStyle.getPropertyValue(value);\n                });\n            }\n        } else {\n            computedStyle = element.currentStyle;\n\n            if (properties) {\n                $.each(properties, function(idx, value) {\n                    styles[value] = computedStyle[toCamelCase(value)];\n                });\n            }\n        }\n\n        if (!kendo.size(styles)) {\n            styles = computedStyle;\n        }\n\n        return styles;\n    }\n\n    function isScrollable(element) {\n        if (element && element.className && typeof(element.className) === \"string\" && element.className.indexOf(\"k-auto-scrollable\") > -1) {\n            return true;\n        }\n\n        var overflow = getComputedStyles(element, [\"overflow\"]).overflow;\n        return overflow.indexOf(\"auto\") > -1 || overflow.indexOf(\"scroll\") > -1;\n    }\n\n    function scrollLeft(element, value) {\n        var webkit = support.browser.webkit;\n        var mozila = support.browser.mozilla;\n        var browserVersion = support.browser.version;\n        var el, isRtl;\n\n        if(element instanceof $ && value !== undefined) {\n            element.each(function(i, e) {\n                scrollLeft(e, value);\n            });\n\n            return;\n        } else {\n            el = element instanceof $ ? element[0] : element;\n        }\n\n        if (!el) {\n            return;\n        }\n\n        isRtl = support.isRtl(element);\n\n        // After updating browser detection,\n        // Test in which if should the Safari browsers go\n        if (value !== undefined) {\n            if (isRtl && webkit && (browserVersion < 85 || support.browser.safari)) {\n                el.scrollLeft = el.scrollWidth - el.clientWidth - value;\n            } else if (isRtl && (mozila || webkit) && value > 0) {\n                el.scrollLeft = -value;\n            } else {\n                el.scrollLeft = value;\n            }\n        } else {\n            if (isRtl && webkit && (browserVersion < 85 || support.browser.safari)) {\n                return el.scrollWidth - el.clientWidth - el.scrollLeft;\n            } else {\n                return Math.abs(el.scrollLeft);\n            }\n        }\n    }\n\n    (function () {\n        support._scrollbar = undefined;\n\n        support.scrollbar = function (refresh) {\n            if (!isNaN(support._scrollbar) && !refresh) {\n                return support._scrollbar;\n            } else {\n                var div = document.createElement(\"div\"),\n                    result;\n\n                div.style.cssText = \"overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block\";\n                div.innerHTML = \"&nbsp;\";\n                document.body.appendChild(div);\n\n                support._scrollbar = result = div.offsetWidth - div.scrollWidth;\n\n                document.body.removeChild(div);\n\n                return result;\n            }\n        };\n\n        support.isRtl = function(element) {\n            return $(element).closest(\".k-rtl\").length > 0;\n        };\n\n        var table = document.createElement(\"table\");\n\n        // Internet Explorer does not support setting the innerHTML of TBODY and TABLE elements\n        try {\n            table.innerHTML = \"<tr><td></td></tr>\";\n\n            support.tbodyInnerHtml = true;\n        } catch (e) {\n            support.tbodyInnerHtml = false;\n        }\n\n        support.touch = \"ontouchstart\" in window;\n\n        var docStyle = document.documentElement.style;\n        var transitions = support.transitions = false,\n            transforms = support.transforms = false,\n            elementProto = \"HTMLElement\" in window ? HTMLElement.prototype : [];\n\n        support.hasHW3D = (\"WebKitCSSMatrix\" in window && \"m11\" in new window.WebKitCSSMatrix()) || \"MozPerspective\" in docStyle || \"msPerspective\" in docStyle;\n        support.cssFlexbox = (\"flexWrap\" in docStyle) || (\"WebkitFlexWrap\" in docStyle) || (\"msFlexWrap\" in docStyle);\n\n        each([ \"Moz\", \"webkit\", \"O\", \"ms\" ], function () {\n            var prefix = this.toString(),\n                hasTransitions = typeof table.style[prefix + \"Transition\"] === STRING;\n\n            if (hasTransitions || typeof table.style[prefix + \"Transform\"] === STRING) {\n                var lowPrefix = prefix.toLowerCase();\n\n                transforms = {\n                    css: (lowPrefix != \"ms\") ? \"-\" + lowPrefix + \"-\" : \"\",\n                    prefix: prefix,\n                    event: (lowPrefix === \"o\" || lowPrefix === \"webkit\") ? lowPrefix : \"\"\n                };\n\n                if (hasTransitions) {\n                    transitions = transforms;\n                    transitions.event = transitions.event ? transitions.event + \"TransitionEnd\" : \"transitionend\";\n                }\n\n                return false;\n            }\n        });\n\n        table = null;\n\n        support.transforms = transforms;\n        support.transitions = transitions;\n\n        support.devicePixelRatio = window.devicePixelRatio === undefined ? 1 : window.devicePixelRatio;\n\n        try {\n            support.screenWidth = window.outerWidth || window.screen ? window.screen.availWidth : window.innerWidth;\n            support.screenHeight = window.outerHeight || window.screen ? window.screen.availHeight : window.innerHeight;\n        } catch(e) {\n            //window.outerWidth throws error when in IE showModalDialog.\n            support.screenWidth = window.screen.availWidth;\n            support.screenHeight = window.screen.availHeight;\n        }\n\n        support.detectOS = function (ua) {\n            var os = false, minorVersion, match = [],\n                notAndroidPhone = !/mobile safari/i.test(ua),\n                agentRxs = {\n                    wp: /(Windows Phone(?: OS)?)\\s(\\d+)\\.(\\d+(\\.\\d+)?)/,\n                    fire: /(Silk)\\/(\\d+)\\.(\\d+(\\.\\d+)?)/,\n                    android: /(Android|Android.*(?:Opera|Firefox).*?\\/)\\s*(\\d+)\\.?(\\d+(\\.\\d+)?)?/,\n                    iphone: /(iPhone|iPod).*OS\\s+(\\d+)[\\._]([\\d\\._]+)/,\n                    ipad: /(iPad).*OS\\s+(\\d+)[\\._]([\\d_]+)/,\n                    meego: /(MeeGo).+NokiaBrowser\\/(\\d+)\\.([\\d\\._]+)/,\n                    webos: /(webOS)\\/(\\d+)\\.(\\d+(\\.\\d+)?)/,\n                    blackberry: /(BlackBerry|BB10).*?Version\\/(\\d+)\\.(\\d+(\\.\\d+)?)/,\n                    playbook: /(PlayBook).*?Tablet\\s*OS\\s*(\\d+)\\.(\\d+(\\.\\d+)?)/,\n                    windows: /(MSIE)\\s+(\\d+)\\.(\\d+(\\.\\d+)?)/,\n                    tizen: /(tizen).*?Version\\/(\\d+)\\.(\\d+(\\.\\d+)?)/i,\n                    sailfish: /(sailfish).*rv:(\\d+)\\.(\\d+(\\.\\d+)?).*firefox/i,\n                    ffos: /(Mobile).*rv:(\\d+)\\.(\\d+(\\.\\d+)?).*Firefox/\n                },\n                osRxs = {\n                    ios: /^i(phone|pad|pod)$/i,\n                    android: /^android|fire$/i,\n                    blackberry: /^blackberry|playbook/i,\n                    windows: /windows/,\n                    wp: /wp/,\n                    flat: /sailfish|ffos|tizen/i,\n                    meego: /meego/\n                },\n                formFactorRxs = {\n                    tablet: /playbook|ipad|fire/i\n                },\n                browserRxs = {\n                    omini: /Opera\\sMini/i,\n                    omobile: /Opera\\sMobi/i,\n                    firefox: /Firefox|Fennec/i,\n                    mobilesafari: /version\\/.*safari/i,\n                    ie: /MSIE|Windows\\sPhone/i,\n                    chrome: /chrome|crios/i,\n                    webkit: /webkit/i\n                };\n\n            for (var agent in agentRxs) {\n                if (agentRxs.hasOwnProperty(agent)) {\n                    match = ua.match(agentRxs[agent]);\n                    if (match) {\n                        if (agent == \"windows\" && \"plugins\" in navigator) { return false; } // Break if not Metro/Mobile Windows\n\n                        os = {};\n                        os.device = agent;\n                        os.tablet = testRx(agent, formFactorRxs, false);\n                        os.browser = testRx(ua, browserRxs, \"default\");\n                        os.name = testRx(agent, osRxs);\n                        os[os.name] = true;\n                        os.majorVersion = match[2];\n                        os.minorVersion = (match[3] || \"0\").replace(\"_\", \".\");\n                        minorVersion = os.minorVersion.replace(\".\", \"\").substr(0, 2);\n                        os.flatVersion = os.majorVersion + minorVersion + (new Array(3 - (minorVersion.length < 3 ? minorVersion.length : 2)).join(\"0\"));\n                        os.cordova = typeof window.PhoneGap !== UNDEFINED || typeof window.cordova !== UNDEFINED; // Use file protocol to detect appModes.\n                        os.appMode = window.navigator.standalone || (/file|local|wmapp/).test(window.location.protocol) || os.cordova; // Use file protocol to detect appModes.\n\n                        if (os.android && (support.devicePixelRatio < 1.5 && os.flatVersion < 400 || notAndroidPhone) && (support.screenWidth > 800 || support.screenHeight > 800)) {\n                            os.tablet = agent;\n                        }\n\n                        break;\n                    }\n                }\n            }\n            return os;\n        };\n\n        var mobileOS = support.mobileOS = support.detectOS(navigator.userAgent);\n\n        support.wpDevicePixelRatio = mobileOS.wp ? screen.width / 320 : 0;\n\n        support.hasNativeScrolling = false;\n\n        if (mobileOS.ios || (mobileOS.android && mobileOS.majorVersion > 2) || mobileOS.wp) {\n            support.hasNativeScrolling = mobileOS;\n        }\n\n        support.delayedClick = function() {\n\n            // only the mobile devices with touch events do this.\n            if (support.touch) {\n                // All iOS devices so far (by the time I am writing this, iOS 9.0.2 is the latest),\n                // delay their click events.\n                if (mobileOS.ios) {\n                    return true;\n                }\n\n                if (mobileOS.android) {\n\n                    if (!support.browser.chrome) { // older webkits and webviews delay the click\n                        return true;\n                    }\n\n                    // from here on, we deal with Chrome on Android.\n                    if (support.browser.version < 32) {\n                        return false;\n                    }\n\n                    // Chrome 32+ does conditional fast clicks if the view port is not user scalable.\n                    return !($(\"meta[name=viewport]\").attr(\"content\") || \"\").match(/user-scalable=no/i);\n                }\n            }\n\n            return false;\n        };\n\n        support.mouseAndTouchPresent = support.touch && !(support.mobileOS.ios || support.mobileOS.android);\n\n        support.detectBrowser = function(ua) {\n            var browser = false,\n                match = [],\n                chromiumEdgeMatch = [],\n                browserRxs = {\n                    edge: /(edge)[ \\/]([\\w.]+)/i,\n                    webkit: /(chrome|crios)[ \\/]([\\w.]+)/i,\n                    safari: /(webkit)[ \\/]([\\w.]+)/i,\n                    opera: /(opera)(?:.*version|)[ \\/]([\\w.]+)/i,\n                    msie: /(msie\\s|trident.*? rv:)([\\w.]+)/i,\n                    mozilla: /(mozilla)(?:.*? rv:([\\w.]+)|)/i\n                };\n\n            for (var agent in browserRxs) {\n                if (browserRxs.hasOwnProperty(agent)) {\n                    match = ua.match(browserRxs[agent]);\n                    if (match) {\n                        browser = {};\n                        browser[agent] = true;\n                        browser[match[1].toLowerCase().split(\" \")[0].split(\"/\")[0]] = true;\n                        browser.version = parseInt(document.documentMode || match[2], 10);\n\n                        if (browser.chrome) {\n                            chromiumEdgeMatch = ua.match(/(edg)[ \\/]([\\w.]+)/i);\n\n                            if(chromiumEdgeMatch) {\n                                browser.chromiumEdge = true;\n                            }\n                        }\n\n                        break;\n                    }\n                }\n            }\n\n            return browser;\n        };\n\n        support.browser = support.detectBrowser(navigator.userAgent);\n\n        if (!mobileOS && support.touch && support.browser.safari) {\n            mobileOS = support.mobileOS = {\n                ios: true,\n                tablet: \"tablet\",\n                device: \"ipad\"\n            };\n        }\n\n        support.detectClipboardAccess = function() {\n            var commands = {\n                copy: document.queryCommandSupported ? document.queryCommandSupported(\"copy\") : false,\n                cut: document.queryCommandSupported ? document.queryCommandSupported(\"cut\") : false,\n                paste : document.queryCommandSupported ? document.queryCommandSupported(\"paste\") : false\n            };\n\n            if (support.browser.chrome) {\n                //not using queryCommandSupported due to chromium issues 476508 and 542948\n                commands.paste = false;\n                if(support.browser.version >= 43) {\n                    commands.copy = true;\n                    commands.cut = true;\n                }\n            }\n\n            return commands;\n        };\n\n        support.clipboard = support.detectClipboardAccess();\n\n        support.zoomLevel = function() {\n            try {\n                var browser = support.browser;\n                var ie11WidthCorrection = 0;\n                var docEl = document.documentElement;\n\n                if (browser.msie && browser.version == 11 && docEl.scrollHeight > docEl.clientHeight && !support.touch) {\n                    ie11WidthCorrection = support.scrollbar();\n                }\n\n                return support.touch ? (docEl.clientWidth / window.innerWidth) :\n                       browser.msie && browser.version >= 10 ? (((top || window).document.documentElement.offsetWidth + ie11WidthCorrection) / (top || window).innerWidth) : 1;\n            } catch(e) {\n                return 1;\n            }\n        };\n\n        (function(browser) {\n            // add browser-specific CSS class\n            var cssClass = \"\",\n                docElement = $(document.documentElement),\n                majorVersion = parseInt(browser.version, 10);\n\n            if (browser.msie) {\n                cssClass = \"ie\";\n            } else if (browser.mozilla) {\n                cssClass = \"ff\";\n            } else if (browser.safari) {\n                cssClass = \"safari\";\n            } else if (browser.webkit) {\n                cssClass = \"webkit\";\n            } else if (browser.opera) {\n                cssClass = \"opera\";\n            } else if (browser.edge) {\n                cssClass = \"edge\";\n            }\n\n            if (cssClass) {\n                cssClass = \"k-\" + cssClass + \" k-\" + cssClass + majorVersion;\n            }\n            if (support.mobileOS) {\n                cssClass += \" k-mobile\";\n            }\n\n            if (!support.cssFlexbox) {\n                cssClass += \" k-no-flexbox\";\n            }\n\n            docElement.addClass(cssClass);\n        })(support.browser);\n\n        support.eventCapture = document.documentElement.addEventListener;\n\n        var input = document.createElement(\"input\");\n\n        support.placeholder = \"placeholder\" in input;\n        support.propertyChangeEvent = \"onpropertychange\" in input;\n\n        support.input = (function() {\n            var types = [\"number\", \"date\", \"time\", \"month\", \"week\", \"datetime\", \"datetime-local\"];\n            var length = types.length;\n            var value = \"test\";\n            var result = {};\n            var idx = 0;\n            var type;\n\n            for (;idx < length; idx++) {\n                type = types[idx];\n                input.setAttribute(\"type\", type);\n                input.value = value;\n\n                result[type.replace(\"-\", \"\")] = input.type !== \"text\" && input.value !== value;\n            }\n\n            return result;\n        })();\n\n        input.style.cssText = \"float:left;\";\n\n        support.cssFloat = !!input.style.cssFloat;\n\n        input = null;\n\n        support.stableSort = (function() {\n            // Chrome sort is not stable for more than *10* items\n            // IE9+ sort is not stable for than *512* items\n            var threshold = 513;\n\n            var sorted = [{\n                index: 0,\n                field: \"b\"\n            }];\n\n            for (var i = 1; i < threshold; i++) {\n                sorted.push({\n                    index: i,\n                    field: \"a\"\n                });\n            }\n\n            sorted.sort(function(a, b) {\n                return a.field > b.field ? 1 : (a.field < b.field ? -1 : 0);\n            });\n\n            return sorted[0].index === 1;\n        })();\n\n        support.matchesSelector = elementProto.webkitMatchesSelector || elementProto.mozMatchesSelector ||\n                                  elementProto.msMatchesSelector || elementProto.oMatchesSelector ||\n                                  elementProto.matchesSelector || elementProto.matches ||\n          function( selector ) {\n              var nodeList = document.querySelectorAll ? ( this.parentNode || document ).querySelectorAll( selector ) || [] : $(selector),\n                  i = nodeList.length;\n\n              while (i--) {\n                  if (nodeList[i] == this) {\n                      return true;\n                  }\n              }\n\n              return false;\n          };\n\n        support.matchMedia = \"matchMedia\" in window;\n\n        support.pushState = window.history && window.history.pushState;\n\n        support.hashChange = \"onhashchange\" in window;\n\n        support.customElements = \"registerElement\" in window.document;\n\n        var chrome = support.browser.chrome,\n            mobileChrome = support.browser.crios,\n            mozilla = support.browser.mozilla,\n            safari = support.browser.safari;\n        support.msPointers = !chrome && window.MSPointerEvent;\n        support.pointers = !chrome && !mobileChrome && !mozilla && !safari && window.PointerEvent;\n        support.kineticScrollNeeded = mobileOS && (support.touch || support.msPointers || support.pointers);\n    })();\n\n\n    function size(obj) {\n        var result = 0, key;\n        for (key in obj) {\n            if (obj.hasOwnProperty(key) && key != \"toJSON\") { // Ignore fake IE7 toJSON.\n                result++;\n            }\n        }\n\n        return result;\n    }\n\n    function getOffset(element, type, positioned) {\n        if (!type) {\n            type = \"offset\";\n        }\n\n        var offset = element[type]();\n        // clone ClientRect object to JS object (jQuery3)\n        var result = {\n            top: offset.top,\n            right: offset.right,\n            bottom: offset.bottom,\n            left: offset.left\n        };\n\n        // IE10 touch zoom is living in a separate viewport\n        if (support.browser.msie && (support.pointers || support.msPointers) && !positioned) {\n            var sign = support.isRtl(element) ? 1 : -1;\n\n            result.top -= (window.pageYOffset - (document.documentElement.scrollTop));\n            result.left -= (window.pageXOffset + (sign * document.documentElement.scrollLeft));\n        }\n\n        return result;\n    }\n\n    var directions = {\n        left: { reverse: \"right\" },\n        right: { reverse: \"left\" },\n        down: { reverse: \"up\" },\n        up: { reverse: \"down\" },\n        top: { reverse: \"bottom\" },\n        bottom: { reverse: \"top\" },\n        \"in\": { reverse: \"out\" },\n        out: { reverse: \"in\" }\n    };\n\n    function parseEffects(input) {\n        var effects = {};\n\n        each((typeof input === \"string\" ? input.split(\" \") : input), function(idx) {\n            effects[idx] = this;\n        });\n\n        return effects;\n    }\n\n    function fx(element) {\n        return new kendo.effects.Element(element);\n    }\n\n    var effects = {};\n\n    $.extend(effects, {\n        enabled: true,\n        Element: function(element) {\n            this.element = $(element);\n        },\n\n        promise: function(element, options) {\n            if (!element.is(\":visible\")) {\n                element.css({ display: element.data(\"olddisplay\") || \"block\" }).css(\"display\");\n            }\n\n            if (options.hide) {\n                element.data(\"olddisplay\", element.css(\"display\")).hide();\n            }\n\n            if (options.init) {\n                options.init();\n            }\n\n            if (options.completeCallback) {\n                options.completeCallback(element); // call the external complete callback with the element\n            }\n\n            element.dequeue();\n        },\n\n        disable: function() {\n            this.enabled = false;\n            this.promise = this.promiseShim;\n        },\n\n        enable: function() {\n            this.enabled = true;\n            this.promise = this.animatedPromise;\n        }\n    });\n\n    effects.promiseShim = effects.promise;\n\n    function prepareAnimationOptions(options, duration, reverse, complete) {\n        if (typeof options === STRING) {\n            // options is the list of effect names separated by space e.g. animate(element, \"fadeIn slideDown\")\n\n            // only callback is provided e.g. animate(element, options, function() {});\n            if (isFunction(duration)) {\n                complete = duration;\n                duration = 400;\n                reverse = false;\n            }\n\n            if (isFunction(reverse)) {\n                complete = reverse;\n                reverse = false;\n            }\n\n            if (typeof duration === BOOLEAN){\n                reverse = duration;\n                duration = 400;\n            }\n\n            options = {\n                effects: options,\n                duration: duration,\n                reverse: reverse,\n                complete: complete\n            };\n        }\n\n        return extend({\n            //default options\n            effects: {},\n            duration: 400, //jQuery default duration\n            reverse: false,\n            init: noop,\n            teardown: noop,\n            hide: false\n        }, options, { completeCallback: options.complete, complete: noop }); // Move external complete callback, so deferred.resolve can be always executed.\n\n    }\n\n    function animate(element, options, duration, reverse, complete) {\n        var idx = 0,\n            length = element.length,\n            instance;\n\n        for (; idx < length; idx ++) {\n            instance = $(element[idx]);\n            instance.queue(function() {\n                effects.promise(instance, prepareAnimationOptions(options, duration, reverse, complete));\n            });\n        }\n\n        return element;\n    }\n\n    function toggleClass(element, classes, options, add) {\n        if (classes) {\n            classes = classes.split(\" \");\n\n            each(classes, function(idx, value) {\n                element.toggleClass(value, add);\n            });\n        }\n\n        return element;\n    }\n\n    if (!(\"kendoAnimate\" in $.fn)) {\n        extend($.fn, {\n            kendoStop: function(clearQueue, gotoEnd) {\n                return this.stop(clearQueue, gotoEnd);\n            },\n\n            kendoAnimate: function(options, duration, reverse, complete) {\n                return animate(this, options, duration, reverse, complete);\n            },\n\n            kendoAddClass: function(classes, options){\n                return kendo.toggleClass(this, classes, options, true);\n            },\n\n            kendoRemoveClass: function(classes, options){\n                return kendo.toggleClass(this, classes, options, false);\n            },\n            kendoToggleClass: function(classes, options, toggle){\n                return kendo.toggleClass(this, classes, options, toggle);\n            }\n        });\n    }\n\n    var ampRegExp = /&/g,\n        ltRegExp = /</g,\n        quoteRegExp = /\"/g,\n        aposRegExp = /'/g,\n        gtRegExp = />/g;\n    function htmlEncode(value) {\n        return (\"\" + value).replace(ampRegExp, \"&amp;\").replace(ltRegExp, \"&lt;\").replace(gtRegExp, \"&gt;\").replace(quoteRegExp, \"&quot;\").replace(aposRegExp, \"&#39;\");\n    }\n\n    function unescape(value) {\n        var template;\n\n        try {\n            template = window.decodeURIComponent(value);\n        } catch(error) {\n            // If the string contains Unicode characters\n            // the decodeURIComponent() will throw an error.\n            // Therefore: convert to UTF-8 character\n            template = value.replace(/%u([\\dA-F]{4})|%([\\dA-F]{2})/gi, function(_, m1, m2) {\n                return String.fromCharCode(parseInt(\"0x\" + (m1 || m2), 16));\n            });\n        }\n\n        return template;\n    }\n\n    var eventTarget = function (e) {\n        return e.target;\n    };\n\n    if (support.touch) {\n\n        eventTarget = function(e) {\n            var touches = \"originalEvent\" in e ? e.originalEvent.changedTouches : \"changedTouches\" in e ? e.changedTouches : null;\n\n            return touches ? document.elementFromPoint(touches[0].clientX, touches[0].clientY) : e.target;\n        };\n\n        each([\"swipe\", \"swipeLeft\", \"swipeRight\", \"swipeUp\", \"swipeDown\", \"doubleTap\", \"tap\"], function(m, value) {\n            $.fn[value] = function(callback) {\n                return this.on(value, callback);\n            };\n        });\n    }\n\n    if (support.touch) {\n        if (!support.mobileOS) {\n            support.mousedown = \"mousedown touchstart\";\n            support.mouseup = \"mouseup touchend\";\n            support.mousemove = \"mousemove touchmove\";\n            support.mousecancel = \"mouseleave touchcancel\";\n            support.click = \"click\";\n            support.resize = \"resize\";\n        } else {\n            support.mousedown = \"touchstart\";\n            support.mouseup = \"touchend\";\n            support.mousemove = \"touchmove\";\n            support.mousecancel = \"touchcancel\";\n            support.click = \"touchend\";\n            support.resize = \"orientationchange\";\n        }\n    } else if (support.pointers) {\n        support.mousemove = \"pointermove\";\n        support.mousedown = \"pointerdown\";\n        support.mouseup = \"pointerup\";\n        support.mousecancel = \"pointercancel\";\n        support.click = \"pointerup\";\n        support.resize = \"orientationchange resize\";\n    } else if (support.msPointers) {\n        support.mousemove = \"MSPointerMove\";\n        support.mousedown = \"MSPointerDown\";\n        support.mouseup = \"MSPointerUp\";\n        support.mousecancel = \"MSPointerCancel\";\n        support.click = \"MSPointerUp\";\n        support.resize = \"orientationchange resize\";\n    } else {\n        support.mousemove = \"mousemove\";\n        support.mousedown = \"mousedown\";\n        support.mouseup = \"mouseup\";\n        support.mousecancel = \"mouseleave\";\n        support.click = \"click\";\n        support.resize = \"resize\";\n    }\n\n    var wrapExpression = function(members, paramName) {\n        var result = paramName || \"d\",\n            index,\n            idx,\n            length,\n            member,\n            count = 1;\n\n        for (idx = 0, length = members.length; idx < length; idx++) {\n            member = members[idx];\n            if (member !== \"\") {\n                index = member.indexOf(\"[\");\n\n                if (index !== 0) {\n                    if (index == -1) {\n                        member = \".\" + member;\n                    } else {\n                        count++;\n                        member = \".\" + member.substring(0, index) + \" || {})\" + member.substring(index);\n                    }\n                }\n\n                count++;\n                result += member + ((idx < length - 1) ? \" || {})\" : \")\");\n            }\n        }\n        return new Array(count).join(\"(\") + result;\n    },\n    localUrlRe = /^([a-z]+:)?\\/\\//i;\n\n    extend(kendo, {\n        widgets: [],\n        _widgetRegisteredCallbacks: [],\n        ui: kendo.ui || {},\n        fx: kendo.fx || fx,\n        effects: kendo.effects || effects,\n        mobile: kendo.mobile || { },\n        data: kendo.data || {},\n        dataviz: kendo.dataviz || {},\n        drawing: kendo.drawing || {},\n        spreadsheet: { messages: {} },\n        keys: {\n            INSERT: 45,\n            DELETE: 46,\n            BACKSPACE: 8,\n            TAB: 9,\n            ENTER: 13,\n            ESC: 27,\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            DOWN: 40,\n            END: 35,\n            HOME: 36,\n            SPACEBAR: 32,\n            PAGEUP: 33,\n            PAGEDOWN: 34,\n            F2: 113,\n            F10: 121,\n            F12: 123,\n            NUMPAD_PLUS: 107,\n            NUMPAD_MINUS: 109,\n            NUMPAD_DOT: 110\n        },\n        support: kendo.support || support,\n        animate: kendo.animate || animate,\n        ns: \"\",\n        attr: function(value) {\n            return \"data-\" + kendo.ns + value;\n        },\n        getShadows: getShadows,\n        wrap: wrap,\n        deepExtend: deepExtend,\n        getComputedStyles: getComputedStyles,\n        isScrollable: isScrollable,\n        scrollLeft: scrollLeft,\n        size: size,\n        toCamelCase: toCamelCase,\n        toHyphens: toHyphens,\n        getOffset: kendo.getOffset || getOffset,\n        parseEffects: kendo.parseEffects || parseEffects,\n        toggleClass: kendo.toggleClass || toggleClass,\n        directions: kendo.directions || directions,\n        Observable: Observable,\n        Class: Class,\n        Template: Template,\n        template: proxy(Template.compile, Template),\n        render: proxy(Template.render, Template),\n        stringify: proxy(JSON.stringify, JSON),\n        eventTarget: eventTarget,\n        htmlEncode: htmlEncode,\n        unescape: unescape,\n        isLocalUrl: function(url) {\n            return url && !localUrlRe.test(url);\n        },\n\n        expr: function(expression, safe, paramName) {\n            expression = expression || \"\";\n\n            if (typeof safe == STRING) {\n                paramName = safe;\n                safe = false;\n            }\n\n            paramName = paramName || \"d\";\n\n            if (expression && expression.charAt(0) !== \"[\") {\n                expression = \".\" + expression;\n            }\n\n            if (safe) {\n                expression = expression.replace(/\"([^.]*)\\.([^\"]*)\"/g,'\"$1_$DOT$_$2\"');\n                expression = expression.replace(/'([^.]*)\\.([^']*)'/g,\"'$1_$DOT$_$2'\");\n                expression = wrapExpression(expression.split(\".\"), paramName);\n                expression = expression.replace(/_\\$DOT\\$_/g, \".\");\n            } else {\n                expression = paramName + expression;\n            }\n\n            return expression;\n        },\n\n        getter: function(expression, safe) {\n            var key = expression + safe;\n            return getterCache[key] = getterCache[key] || new Function(\"d\", \"return \" + kendo.expr(expression, safe));\n        },\n\n        setter: function(expression) {\n            return setterCache[expression] = setterCache[expression] || new Function(\"d,value\", kendo.expr(expression) + \"=value\");\n        },\n\n        accessor: function(expression) {\n            return {\n                get: kendo.getter(expression),\n                set: kendo.setter(expression)\n            };\n        },\n\n        guid: function() {\n            var id = \"\", i, random, chars = \"abcdef\";\n\n            id += chars[Math.floor(Math.random() * Math.floor(chars.length))];\n\n            for (i = 1; i < 32; i++) {\n                random = math.random() * 16 | 0;\n\n                if (i == 8 || i == 12 || i == 16 || i == 20) {\n                    id += \"-\";\n                }\n                id += (i == 12 ? 4 : (i == 16 ? (random & 3 | 8) : random)).toString(16);\n            }\n\n            return id;\n        },\n\n        roleSelector: function(role) {\n            return role.replace(/(\\S+)/g, \"[\" + kendo.attr(\"role\") + \"=$1],\").slice(0, -1);\n        },\n\n        directiveSelector: function(directives) {\n            var selectors = directives.split(\" \");\n\n            if (selectors) {\n                for (var i = 0; i < selectors.length; i++) {\n                    if (selectors[i] != \"view\") {\n                        selectors[i] = selectors[i].replace(/(\\w*)(view|bar|strip|over)$/, \"$1-$2\");\n                    }\n                }\n            }\n\n            return selectors.join(\" \").replace(/(\\S+)/g, \"kendo-mobile-$1,\").slice(0, -1);\n        },\n\n        triggeredByInput: function(e) {\n            return (/^(label|input|textarea|select)$/i).test(e.target.tagName);\n        },\n\n        onWidgetRegistered: function(callback) {\n            for (var i = 0, len = kendo.widgets.length; i < len; i++) {\n                callback(kendo.widgets[i]);\n            }\n\n            kendo._widgetRegisteredCallbacks.push(callback);\n        },\n\n        logToConsole: function(message, type) {\n            var console = window.console;\n\n            if (!kendo.suppressLog && typeof(console) != \"undefined\" && console.log) {\n                console[type || \"log\"](message);\n            }\n        }\n    });\n\n    var Widget = Observable.extend( {\n        init: function(element, options) {\n            var that = this;\n\n            that.element = kendo.jQuery(element).handler(that);\n\n            that.angular(\"init\", options);\n\n            Observable.fn.init.call(that);\n\n            var dataSource = options ? options.dataSource : null;\n            var props;\n\n            if (options) {\n                props = (that.componentTypes || {})[(options || {}).componentType];\n            }\n\n            if (dataSource) {\n                // avoid deep cloning the data source\n                options = extend({}, options, { dataSource: {} });\n            }\n\n            options = that.options = extend(true, {}, that.options, that.defaults, props || {}, options);\n\n            if (dataSource) {\n                options.dataSource = dataSource;\n            }\n\n            if (!that.element.attr(kendo.attr(\"role\"))) {\n                that.element.attr(kendo.attr(\"role\"), (options.name || \"\").toLowerCase());\n            }\n\n            that.element.data(\"kendo\" + options.prefix + options.name, that);\n\n            that.bind(that.events, options);\n        },\n\n        events: [],\n\n        options: {\n            prefix: \"\"\n        },\n\n        _hasBindingTarget: function() {\n            return !!this.element[0].kendoBindingTarget;\n        },\n\n        _tabindex: function(target) {\n            target = target || this.wrapper;\n\n            var element = this.element,\n                TABINDEX = \"tabindex\",\n                tabindex = target.attr(TABINDEX) || element.attr(TABINDEX);\n\n            element.removeAttr(TABINDEX);\n\n            target.attr(TABINDEX, !isNaN(tabindex) ? tabindex : 0);\n        },\n\n        setOptions: function(options) {\n            this._clearCssClasses(options);\n            this._setEvents(options);\n            $.extend(this.options, options);\n            this._applyCssClasses();\n        },\n\n        _setEvents: function(options) {\n            var that = this,\n                idx = 0,\n                length = that.events.length,\n                e;\n\n            for (; idx < length; idx ++) {\n                e = that.events[idx];\n                if (that.options[e] && options[e]) {\n                    that.unbind(e, that.options[e]);\n                    if (that._events && that._events[e]) {\n                        delete that._events[e];\n                    }\n                }\n            }\n\n            that.bind(that.events, options);\n        },\n\n        resize: function(force) {\n            var size = this.getSize(),\n                currentSize = this._size;\n\n            if (force || (size.width > 0 || size.height > 0) && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n                this._size = size;\n                this._resize(size, force);\n                this.trigger(\"resize\", size);\n            }\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.element);\n        },\n\n        size: function(size) {\n            if (!size) {\n                return this.getSize();\n            } else {\n                this.setSize(size);\n            }\n        },\n\n        setSize: $.noop,\n        _resize: $.noop,\n\n        destroy: function() {\n            var that = this;\n\n            that.element.removeData(\"kendo\" + that.options.prefix + that.options.name);\n            that.element.removeData(\"handler\");\n            that.unbind();\n        },\n        _destroy: function() {\n            this.destroy();\n        },\n        angular: function(){},\n\n        _muteAngularRebind: function(callback) {\n            this._muteRebind = true;\n\n            callback.call(this);\n\n            this._muteRebind = false;\n        },\n\n        _applyCssClasses: function(element) {\n            var protoOptions = this.__proto__.options, // jshint ignore:line\n                options = this.options,\n                el = element || this.wrapper || this.element,\n                classes = [],\n                i, prop, validFill, widgetName;\n\n            if (!kendo.cssProperties.propertyDictionary[protoOptions.name]) {\n                return;\n            }\n\n            for (i = 0; i < cssPropertiesNames.length; i++) {\n                prop = cssPropertiesNames[i];\n                widgetName = this.options._altname || protoOptions.name;\n\n                if (protoOptions.hasOwnProperty(prop)) {\n                    if (prop === \"themeColor\") {\n                        validFill = kendo.cssProperties.getValidClass({\n                            widget: widgetName,\n                            propName: \"fillMode\",\n                            value: options.fillMode\n                        });\n\n                        if (validFill && validFill.length) {\n                            classes.push(kendo.cssProperties.getValidClass({\n                                widget: widgetName,\n                                propName: prop,\n                                value: options[prop],\n                                fill: options.fillMode\n                            }));\n                        }\n                    } else {\n                        classes.push(kendo.cssProperties.getValidClass({\n                            widget: widgetName,\n                            propName: prop,\n                            value: options[prop]\n                        }));\n                    }\n                }\n            }\n\n            el.addClass(classes.join(\" \"));\n        },\n\n        _clearCssClasses: function(newOptions, element) {\n            var protoOptions = this.__proto__.options, // jshint ignore:line\n                currentOptions = this.options,\n                el = element || this.wrapper || this.element,\n                i, prop, widgetName;\n\n            if(!kendo.cssProperties.propertyDictionary[protoOptions.name]) {\n                return;\n            }\n\n            for(i = 0; i < cssPropertiesNames.length; i++) {\n                prop = cssPropertiesNames[i];\n                widgetName = this.options._altname || protoOptions.name;\n\n                if(protoOptions.hasOwnProperty(prop) && newOptions.hasOwnProperty(prop)) {\n                    if (prop === \"themeColor\") {\n                        el.removeClass(kendo.cssProperties.getValidClass({\n                            widget: widgetName,\n                            propName: prop,\n                            value: currentOptions[prop],\n                            fill: currentOptions.fillMode\n                        }));\n                    } else {\n                        if (prop === \"fillMode\") {\n                            el.removeClass(kendo.cssProperties.getValidClass({\n                                widget: widgetName,\n                                propName: \"themeColor\",\n                                value: currentOptions.themeColor,\n                                fill: currentOptions.fillMode\n                            }));\n                        }\n\n                        el.removeClass(kendo.cssProperties.getValidClass({\n                            widget: widgetName,\n                            propName: prop,\n                            value: currentOptions[prop]\n                        }));\n                    }\n                }\n            }\n        }\n    });\n\n    var DataBoundWidget = Widget.extend({\n        // Angular consumes these.\n        dataItems: function() {\n            return this.dataSource.flatView();\n        },\n\n        _angularItems: function(cmd) {\n            var that = this;\n            that.angular(cmd, function(){\n                return {\n                    elements: that.items(),\n                    data: $.map(that.dataItems(), function(dataItem){\n                        return { dataItem: dataItem };\n                    })\n                };\n            });\n        }\n    });\n\n    kendo.dimensions = function(element, dimensions) {\n        var domElement = element[0];\n\n        if (dimensions) {\n            element.css(dimensions);\n        }\n\n        return { width: domElement.offsetWidth, height: domElement.offsetHeight };\n    };\n\n    kendo.notify = noop;\n\n    var templateRegExp = /template$/i,\n        jsonRegExp = /^\\s*(?:\\{(?:.|\\r\\n|\\n)*\\}|\\[(?:.|\\r\\n|\\n)*\\])\\s*$/,\n        jsonFormatRegExp = /^\\{(\\d+)(:[^\\}]+)?\\}|^\\[[A-Za-z_]+\\]$/,\n        dashRegExp = /([A-Z])/g;\n\n    function parseOption(element, option) {\n        var value;\n\n        if (option.indexOf(\"data\") === 0) {\n            option = option.substring(4);\n            option = option.charAt(0).toLowerCase() + option.substring(1);\n        }\n\n        option = option.replace(dashRegExp, \"-$1\");\n        value = element.getAttribute(\"data-\" + kendo.ns + option);\n\n        if (value === null) {\n            value = undefined;\n        } else if (value === \"null\") {\n            value = null;\n        } else if (value === \"true\") {\n            value = true;\n        } else if (value === \"false\") {\n            value = false;\n        } else if (numberRegExp.test(value) && option != \"mask\" && option != \"format\") {\n            value = parseFloat(value);\n        } else if (jsonRegExp.test(value) && !jsonFormatRegExp.test(value)) {\n            value = new Function(\"return (\" + value + \")\")();\n        }\n\n        return value;\n    }\n\n    function parseOptions(element, options, source) {\n        var result = {},\n            option,\n            value,\n            role = element.getAttribute(\"data-\" + kendo.ns + \"role\");\n\n        for (option in options) {\n            value = parseOption(element, option);\n\n            if (value !== undefined) {\n\n                if (templateRegExp.test(option) && role != \"drawer\") {\n                    if(typeof value === \"string\") {\n                        if($(\"#\" + value).length){\n                            value = kendo.template($(\"#\" + value).html());\n                        }else if (source){\n                            value = kendo.template(source[value]);\n                        }\n                    } else {\n                        value = element.getAttribute(option);\n                    }\n                }\n\n                result[option] = value;\n            }\n        }\n\n        return result;\n    }\n\n    kendo.initWidget = function(element, options, roles) {\n        var result,\n            option,\n            widget,\n            idx,\n            length,\n            role,\n            value,\n            dataSource,\n            fullPath,\n            widgetKeyRegExp;\n\n        // Preserve backwards compatibility with (element, options, namespace) signature, where namespace was kendo.ui\n        if (!roles) {\n            roles = kendo.ui.roles;\n        } else if (roles.roles) {\n            roles = roles.roles;\n        }\n\n        element = element.nodeType ? element : element[0];\n\n        role = element.getAttribute(\"data-\" + kendo.ns + \"role\");\n\n        if (!role) {\n            return;\n        }\n\n        fullPath = role.indexOf(\".\") === -1;\n\n        // look for any widget that may be already instantiated based on this role.\n        // The prefix used is unknown, hence the regexp\n        //\n\n        if (fullPath) {\n            widget = roles[role];\n        } else { // full namespace path - like kendo.ui.Widget\n            widget = kendo.getter(role)(window);\n        }\n\n        var data = $(element).data(),\n            widgetKey = widget ? \"kendo\" + widget.fn.options.prefix + widget.fn.options.name : \"\";\n\n        if (fullPath) {\n            widgetKeyRegExp = new RegExp(\"^kendo.*\" + role + \"$\", \"i\");\n        } else { // full namespace path - like kendo.ui.Widget\n            widgetKeyRegExp = new RegExp(\"^\" + widgetKey + \"$\", \"i\");\n        }\n\n        for(var key in data) {\n            if (key.match(widgetKeyRegExp)) {\n                // we have detected a widget of the same kind - save its reference, we will set its options\n                if (key === widgetKey) {\n                    result = data[key];\n                } else {\n                    return data[key];\n                }\n            }\n        }\n\n        if (!widget) {\n            return;\n        }\n\n        dataSource = parseOption(element, \"dataSource\");\n\n        options = $.extend({}, parseOptions(element, $.extend({}, widget.fn.options, widget.fn.defaults) ), options);\n\n        if (dataSource) {\n            if (typeof dataSource === STRING) {\n                options.dataSource = kendo.getter(dataSource)(window);\n            } else {\n                options.dataSource = dataSource;\n            }\n        }\n\n        for (idx = 0, length = widget.fn.events.length; idx < length; idx++) {\n            option = widget.fn.events[idx];\n\n            value = parseOption(element, option);\n\n            if (value !== undefined) {\n                options[option] = kendo.getter(value)(window);\n            }\n        }\n\n        if (!result) {\n            result = new widget(element, options);\n        } else if (!$.isEmptyObject(options)) {\n            result.setOptions(options);\n        }\n\n        return result;\n    };\n\n    kendo.rolesFromNamespaces = function(namespaces) {\n        var roles = [],\n            idx,\n            length;\n\n        if (!namespaces[0]) {\n            namespaces = [kendo.ui, kendo.dataviz.ui];\n        }\n\n        for (idx = 0, length = namespaces.length; idx < length; idx ++) {\n            roles[idx] = namespaces[idx].roles;\n        }\n\n        return extend.apply(null, [{}].concat(roles.reverse()));\n    };\n\n    kendo.init = function(element) {\n        var roles = kendo.rolesFromNamespaces(slice.call(arguments, 1));\n\n        $(element).find(\"[data-\" + kendo.ns + \"role]\").addBack().each(function(){\n            kendo.initWidget(this, {}, roles);\n        });\n    };\n\n    kendo.destroy = function(element) {\n        $(element).find(\"[data-\" + kendo.ns + \"role]\").addBack().each(function(){\n            var data = $(this).data();\n\n            for (var key in data) {\n                if (key.indexOf(\"kendo\") === 0 && typeof data[key].destroy === FUNCTION) {\n                    data[key].destroy();\n                }\n            }\n        });\n    };\n\n    function containmentComparer(a, b) {\n        return $.contains(a, b) ? -1 : 1;\n    }\n\n    function resizableWidget() {\n        var widget = $(this);\n        return ($.inArray(widget.attr(\"data-\" + kendo.ns + \"role\"), [\"slider\", \"rangeslider\", \"breadcrumb\"]) > -1) || widget.is(\":visible\");\n    }\n\n    kendo.resize = function(element, force) {\n        var widgets = $(element).find(\"[data-\" + kendo.ns + \"role]\").addBack().filter(resizableWidget);\n\n        if (!widgets.length) {\n            return;\n        }\n\n        // sort widgets based on their parent-child relation\n        var widgetsArray = $.makeArray(widgets);\n        widgetsArray.sort(containmentComparer);\n\n        // resize widgets\n        $.each(widgetsArray, function () {\n            var widget = kendo.widgetInstance($(this));\n            if (widget) {\n                widget.resize(force);\n            }\n        });\n    };\n\n    kendo.parseOptions = parseOptions;\n\n    extend(kendo.ui, {\n        Widget: Widget,\n        DataBoundWidget: DataBoundWidget,\n        roles: {},\n        progress: function(container, toggle, options) {\n            var mask = container.find(\".k-loading-mask\"),\n                support = kendo.support,\n                browser = support.browser,\n                isRtl, leftRight, webkitCorrection, containerScrollLeft, cssClass;\n\n                options = $.extend({}, {\n                    width: \"100%\",\n                    height: \"100%\",\n                    top: container.scrollTop(),\n                    opacity: false\n                }, options);\n\n                cssClass = options.opacity ? 'k-loading-mask k-opaque' : 'k-loading-mask';\n\n            if (toggle) {\n                if (!mask.length) {\n                    isRtl = support.isRtl(container);\n                    leftRight = isRtl ? \"right\" : \"left\";\n                    containerScrollLeft = kendo.scrollLeft(container);\n                    webkitCorrection = browser.webkit ? (!isRtl ? 0 : container[0].scrollWidth - container.width() - 2 * containerScrollLeft) : 0;\n\n                    mask = $(kendo.format(\"<div class='{0}'><span role='alert' aria-live='polite' class='k-loading-text'>{1}</span><div class='k-loading-image'></div><div class='k-loading-color'></div></div>\", cssClass, kendo.ui.progress.messages.loading))\n                        .width(options.width).height(options.height)\n                        .css(\"top\", options.top)\n                        .css(leftRight, Math.abs(containerScrollLeft) + webkitCorrection)\n                        .prependTo(container);\n                }\n            } else if (mask) {\n                mask.remove();\n            }\n        },\n        plugin: function(widget, register, prefix) {\n            var name = widget.fn.options.name,\n                getter;\n\n            register = register || kendo.ui;\n            prefix = prefix || \"\";\n\n            register[name] = widget;\n\n            register.roles[name.toLowerCase()] = widget;\n\n            getter = \"getKendo\" + prefix + name;\n            name = \"kendo\" + prefix + name;\n\n            var widgetEntry = { name: name, widget: widget, prefix: prefix || \"\" };\n            kendo.widgets.push(widgetEntry);\n\n            for (var i = 0, len = kendo._widgetRegisteredCallbacks.length; i < len; i++) {\n                kendo._widgetRegisteredCallbacks[i](widgetEntry);\n            }\n\n            $.fn[name] = function(options) {\n                var value = this,\n                    args;\n\n                if (typeof options === STRING) {\n                    args = slice.call(arguments, 1);\n\n                    this.each(function(){\n                        var widget = $.data(this, name),\n                            method,\n                            result;\n\n                        if (!widget) {\n                            throw new Error(kendo.format(\"Cannot call method '{0}' of {1} before it is initialized\", options, name));\n                        }\n\n                        method = widget[options];\n\n                        if (typeof method !== FUNCTION) {\n                            throw new Error(kendo.format(\"Cannot find method '{0}' of {1}\", options, name));\n                        }\n\n                        result = method.apply(widget, args);\n\n                        if (result !== undefined) {\n                            value = result;\n                            return false;\n                        }\n                    });\n                } else {\n                    this.each(function() {\n                        return new widget(this, options);\n                    });\n                }\n\n                return value;\n            };\n\n            $.fn[name].widget = widget;\n\n            $.fn[getter] = function() {\n                return this.data(name);\n            };\n        }\n    });\n\n    kendo.ui.progress.messages = {\n        loading: \"Loading...\"\n    };\n\n    var ContainerNullObject = { bind: function () { return this; }, nullObject: true, options: {} };\n\n    var MobileWidget = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n            this.element.autoApplyNS();\n            this.wrapper = this.element;\n            this.element.addClass(\"km-widget\");\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.element.kendoDestroy();\n        },\n\n        options: {\n            prefix: \"Mobile\"\n        },\n\n        events: [],\n\n        view: function() {\n            var viewElement = this.element.closest(kendo.roleSelector(\"view splitview modalview drawer\"));\n            return kendo.widgetInstance(viewElement, kendo.mobile.ui) || ContainerNullObject;\n        },\n\n        viewHasNativeScrolling: function() {\n            var view = this.view();\n            return view && view.options.useNativeScrolling;\n        },\n\n        container: function() {\n            var element = this.element.closest(kendo.roleSelector(\"view layout modalview drawer splitview\"));\n            return kendo.widgetInstance(element.eq(0), kendo.mobile.ui) || ContainerNullObject;\n        }\n    });\n\n    extend(kendo.mobile, {\n        init: function(element) {\n            kendo.init(element, kendo.mobile.ui, kendo.ui, kendo.dataviz.ui);\n        },\n\n        appLevelNativeScrolling: function() {\n            return kendo.mobile.application && kendo.mobile.application.options && kendo.mobile.application.options.useNativeScrolling;\n        },\n\n        roles: {},\n\n        ui: {\n            Widget: MobileWidget,\n            DataBoundWidget: DataBoundWidget.extend(MobileWidget.prototype),\n            roles: {},\n            plugin: function(widget) {\n                kendo.ui.plugin(widget, kendo.mobile.ui, \"Mobile\");\n            }\n        }\n    });\n\n    deepExtend(kendo.dataviz, {\n        init: function(element) {\n            kendo.init(element, kendo.dataviz.ui);\n        },\n        ui: {\n            roles: {},\n            themes: {},\n            views: [],\n            plugin: function(widget) {\n                kendo.ui.plugin(widget, kendo.dataviz.ui);\n            }\n        },\n        roles: {}\n    });\n\n    kendo.touchScroller = function(elements, options) {\n        // return the first touch scroller\n        if (!options){ options = {}; }\n\n        options.useNative = true;\n\n        return $(elements).map(function(idx, element) {\n            element = $(element);\n            if (support.kineticScrollNeeded && kendo.mobile.ui.Scroller && !element.data(\"kendoMobileScroller\")) {\n                element.kendoMobileScroller(options);\n                return element.data(\"kendoMobileScroller\");\n            } else {\n                return false;\n            }\n        })[0];\n    };\n\n    kendo.preventDefault = function(e) {\n        e.preventDefault();\n    };\n\n    kendo.widgetInstance = function(element, suites) {\n        var role = element.data(kendo.ns + \"role\"),\n            widgets = [], i, length,\n            elementData = element.data(\"kendoView\");\n\n        if (role) {\n            // HACK!!! mobile view scroller widgets are instantiated on data-role=\"content\" elements. We need to discover them when resizing.\n            if (role === \"content\") {\n                role = \"scroller\";\n            }\n\n            // kendoEditorToolbar is not a public plugin, thus it does not exist in kendo.ui.roles.\n            // Therefore, this is needed in order to be resized when placed in Kendo Window.\n            if (role === \"editortoolbar\") {\n                var editorToolbar = element.data(\"kendoEditorToolbar\");\n                if (editorToolbar) {\n                    return editorToolbar;\n                }\n            }\n\n            // kendo.View is not a ui plugin\n\n            if (role === \"view\" && elementData) {\n                return elementData;\n            }\n\n            if (suites) {\n                if (suites[0]) {\n                    for (i = 0, length = suites.length; i < length; i ++) {\n                        widgets.push(suites[i].roles[role]);\n                    }\n                } else {\n                    widgets.push(suites.roles[role]);\n                }\n            }\n            else {\n                widgets = [ kendo.ui.roles[role], kendo.dataviz.ui.roles[role],  kendo.mobile.ui.roles[role] ];\n            }\n\n            if (role.indexOf(\".\") >= 0) {\n                widgets = [ kendo.getter(role)(window) ];\n            }\n\n            for (i = 0, length = widgets.length; i < length; i ++) {\n                var widget = widgets[i];\n                if (widget) {\n                    var instance = element.data(\"kendo\" + widget.fn.options.prefix + widget.fn.options.name);\n                    if (instance) {\n                        return instance;\n                    }\n                }\n            }\n        }\n    };\n\n    kendo.onResize = function(callback) {\n        var handler = callback;\n        if (support.mobileOS.android) {\n            handler = function() { setTimeout(callback, 600); };\n        }\n\n        $(window).on(support.resize, handler);\n        return handler;\n    };\n\n    kendo.unbindResize = function(callback) {\n        $(window).off(support.resize, callback);\n    };\n\n    kendo.attrValue = function(element, key) {\n        return element.data(kendo.ns + key);\n    };\n\n    kendo.days = {\n        Sunday: 0,\n        Monday: 1,\n        Tuesday: 2,\n        Wednesday: 3,\n        Thursday: 4,\n        Friday: 5,\n        Saturday: 6\n    };\n\n    function focusable(element, isTabIndexNotNaN) {\n        var nodeName = element.nodeName.toLowerCase();\n\n        return (/input|select|textarea|button|object/.test(nodeName) ?\n                !element.disabled :\n                \"a\" === nodeName ?\n                element.href || isTabIndexNotNaN :\n                isTabIndexNotNaN\n               ) &&\n            visible(element);\n    }\n\n    function visible(element) {\n        return $.expr.pseudos.visible(element) &&\n            !$(element).parents().addBack().filter(function() {\n                return $.css(this,\"visibility\") === \"hidden\";\n            }).length;\n    }\n\n    $.extend($.expr.pseudos, {\n        kendoFocusable: function(element) {\n            var idx = $.attr(element, \"tabindex\");\n            return focusable(element, !isNaN(idx) && idx > -1);\n        }\n    });\n\n    var MOUSE_EVENTS = [\"mousedown\", \"mousemove\", \"mouseenter\", \"mouseleave\", \"mouseover\", \"mouseout\", \"mouseup\", \"click\"];\n    var EXCLUDE_BUST_CLICK_SELECTOR = \"label, input, [data-rel=external]\";\n\n    var MouseEventNormalizer = {\n        setupMouseMute: function() {\n            var idx = 0,\n                length = MOUSE_EVENTS.length,\n                element = document.documentElement;\n\n            if (MouseEventNormalizer.mouseTrap || !support.eventCapture) {\n                return;\n            }\n\n            MouseEventNormalizer.mouseTrap = true;\n\n            MouseEventNormalizer.bustClick = false;\n            MouseEventNormalizer.captureMouse = false;\n\n            var handler = function(e) {\n                if (MouseEventNormalizer.captureMouse) {\n                    if (e.type === \"click\") {\n                        if (MouseEventNormalizer.bustClick && !$(e.target).is(EXCLUDE_BUST_CLICK_SELECTOR)) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    } else {\n                        e.stopPropagation();\n                    }\n                }\n            };\n\n            for (; idx < length; idx++) {\n                element.addEventListener(MOUSE_EVENTS[idx], handler, true);\n            }\n        },\n\n        muteMouse: function(e) {\n            MouseEventNormalizer.captureMouse = true;\n            if (e.data.bustClick) {\n                MouseEventNormalizer.bustClick = true;\n            }\n            clearTimeout(MouseEventNormalizer.mouseTrapTimeoutID);\n        },\n\n        unMuteMouse: function() {\n            clearTimeout(MouseEventNormalizer.mouseTrapTimeoutID);\n            MouseEventNormalizer.mouseTrapTimeoutID = setTimeout(function() {\n                MouseEventNormalizer.captureMouse = false;\n                MouseEventNormalizer.bustClick = false;\n            }, 400);\n        }\n    };\n\n    var eventMap = {\n        down: \"touchstart mousedown\",\n        move: \"mousemove touchmove\",\n        up: \"mouseup touchend touchcancel\",\n        cancel: \"mouseleave touchcancel\"\n    };\n\n    if (support.touch && (support.mobileOS.ios || support.mobileOS.android)) {\n        eventMap = {\n            down: \"touchstart\",\n            move: \"touchmove\",\n            up: \"touchend touchcancel\",\n            cancel: \"touchcancel\"\n        };\n    } else if (support.pointers) {\n        eventMap = {\n            down: \"pointerdown\",\n            move: \"pointermove\",\n            up: \"pointerup\",\n            cancel: \"pointercancel pointerleave\"\n        };\n    } else if (support.msPointers) {\n        eventMap = {\n            down: \"MSPointerDown\",\n            move: \"MSPointerMove\",\n            up: \"MSPointerUp\",\n            cancel: \"MSPointerCancel MSPointerLeave\"\n        };\n    }\n\n    if (support.msPointers && !(\"onmspointerenter\" in window)) { // IE10\n        // Create MSPointerEnter/MSPointerLeave events using mouseover/out and event-time checks\n        $.each({\n            MSPointerEnter: \"MSPointerOver\",\n            MSPointerLeave: \"MSPointerOut\"\n        }, function( orig, fix ) {\n            $.event.special[ orig ] = {\n                delegateType: fix,\n                bindType: fix,\n\n                handle: function( event ) {\n                    var ret,\n                        target = this,\n                        related = event.relatedTarget,\n                        handleObj = event.handleObj;\n\n                    // For mousenter/leave call the handler if related is outside the target.\n                    // NB: No relatedTarget if the mouse left/entered the browser window\n                    if ( !related || (related !== target && !$.contains( target, related )) ) {\n                        event.type = handleObj.origType;\n                        ret = handleObj.handler.apply( this, arguments );\n                        event.type = fix;\n                    }\n                    return ret;\n                }\n            };\n        });\n    }\n\n\n    var getEventMap = function(e) { return (eventMap[e] || e); },\n        eventRegEx = /([^ ]+)/g;\n\n    kendo.applyEventMap = function(events, ns) {\n        events = events.replace(eventRegEx, getEventMap);\n\n        if (ns) {\n            events = events.replace(eventRegEx, \"$1.\" + ns);\n        }\n\n        return events;\n    };\n\n    kendo.keyDownHandler = function(e, widget) {\n        var events = widget._events.kendoKeydown;\n\n        if(!events){\n            return true;\n        }\n\n        events = events.slice();\n        e.sender = widget;\n        e.preventKendoKeydown = false;\n        for (var idx = 0, length = events.length; idx < length; idx++) {\n            events[idx].call(widget, e);\n        }\n\n        return !e.preventKendoKeydown;\n    };\n\n    var on = $.fn.on;\n\n    function kendoJQuery(selector, context) {\n        return new kendoJQuery.fn.init(selector, context);\n    }\n\n    noDepricateExtend(true, kendoJQuery, $);\n\n    kendoJQuery.fn = kendoJQuery.prototype = new $();\n\n    kendoJQuery.fn.constructor = kendoJQuery;\n\n    kendoJQuery.fn.init = function(selector, context) {\n        if (context && context instanceof $ && !(context instanceof kendoJQuery)) {\n            context = kendoJQuery(context);\n        }\n\n        return $.fn.init.call(this, selector, context, rootjQuery);\n    };\n\n    kendoJQuery.fn.init.prototype = kendoJQuery.fn;\n\n    var rootjQuery = kendoJQuery(document);\n\n    extend(kendoJQuery.fn, {\n        handler: function(handler) {\n            this.data(\"handler\", handler);\n            return this;\n        },\n\n        autoApplyNS: function(ns) {\n            this.data(\"kendoNS\", ns || kendo.guid());\n            return this;\n        },\n\n        on: function() {\n            var that = this,\n                ns = that.data(\"kendoNS\");\n\n            // support for event map signature\n            if (arguments.length === 1) {\n                return on.call(that, arguments[0]);\n            }\n\n            var context = that,\n                args = slice.call(arguments);\n\n            if (typeof args[args.length -1] === UNDEFINED) {\n                args.pop();\n            }\n\n            var callback =  args[args.length - 1],\n                events = kendo.applyEventMap(args[0], ns);\n\n            // setup mouse trap\n            if (support.mouseAndTouchPresent && events.search(/mouse|click/) > -1 && this[0] !== document.documentElement) {\n                MouseEventNormalizer.setupMouseMute();\n\n                var selector = args.length === 2 ? null : args[1],\n                    bustClick = events.indexOf(\"click\") > -1 && events.indexOf(\"touchend\") > -1;\n\n                on.call(this,\n                    {\n                        touchstart: MouseEventNormalizer.muteMouse,\n                        touchend: MouseEventNormalizer.unMuteMouse\n                    },\n                    selector,\n                    {\n                        bustClick: bustClick\n                    });\n            }\n\n            if(arguments[0].indexOf(\"keydown\") !== -1 && args[1] && args[1].options){\n                args[0] = events;\n                var widget = args[1];\n                var keyDownCallBack = args[args.length - 1];\n                args[args.length - 1]= function(e){\n                    if(kendo.keyDownHandler(e, widget)){\n                       return keyDownCallBack.apply(this, [e]);\n                    }\n                };\n                on.apply(that, args);\n                return that;\n            }\n\n            if (typeof callback === STRING) {\n                context = that.data(\"handler\");\n                callback = context[callback];\n\n                args[args.length - 1] = function(e) {\n                    callback.call(context, e);\n                };\n            }\n\n            args[0] = events;\n\n            on.apply(that, args);\n\n            return that;\n        },\n\n        kendoDestroy: function(ns) {\n            ns = ns || this.data(\"kendoNS\");\n\n            if (ns) {\n                this.off(\".\" + ns);\n            }\n\n            return this;\n        }\n    });\n\n    kendo.jQuery = kendoJQuery;\n    kendo.eventMap = eventMap;\n\n    kendo.timezone = (function(){\n        var months =  { Jan: 0, Feb: 1, Mar: 2, Apr: 3, May: 4, Jun: 5, Jul: 6, Aug: 7, Sep: 8, Oct: 9, Nov: 10, Dec: 11 };\n        var days = { Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6 };\n\n        function ruleToDate(year, rule) {\n            var date;\n            var targetDay;\n            var ourDay;\n            var month = rule[3];\n            var on = rule[4];\n            var time = rule[5];\n            var cache = rule[8];\n\n            if (!cache) {\n                rule[8] = cache = {};\n            }\n\n            if (cache[year]) {\n                return cache[year];\n            }\n\n            if (!isNaN(on)) {\n                date = new Date(Date.UTC(year, months[month], on, time[0], time[1], time[2], 0));\n            } else if (on.indexOf(\"last\") === 0) {\n                date = new Date(Date.UTC(year, months[month] + 1, 1, time[0] - 24, time[1], time[2], 0));\n\n                targetDay = days[on.substr(4, 3)];\n                ourDay = date.getUTCDay();\n\n                date.setUTCDate(date.getUTCDate() + targetDay - ourDay - (targetDay > ourDay ? 7 : 0));\n            } else if (on.indexOf(\">=\") >= 0) {\n                date = new Date(Date.UTC(year, months[month], on.substr(5), time[0], time[1], time[2], 0));\n\n                targetDay = days[on.substr(0, 3)];\n                ourDay = date.getUTCDay();\n\n                date.setUTCDate(date.getUTCDate() + targetDay - ourDay + (targetDay < ourDay ? 7 : 0));\n            } else if (on.indexOf(\"<=\") >= 0) {\n                date = new Date(Date.UTC(year, months[month], on.substr(5), time[0], time[1], time[2], 0));\n\n                targetDay = days[on.substr(0, 3)];\n                ourDay = date.getUTCDay();\n\n                date.setUTCDate(date.getUTCDate() + targetDay - ourDay - (targetDay > ourDay ? 7 : 0));\n            }\n\n            return cache[year] = date;\n        }\n\n        function findRule(utcTime, rules, zone) {\n            rules = rules[zone];\n\n            if (!rules) {\n                var time = zone.split(\":\");\n                var offset = 0;\n\n                if (time.length > 1) {\n                    offset = time[0] * 60 + Number(time[1]);\n                }\n\n                return [-1000000, 'max', '-', 'Jan', 1, [0, 0, 0], offset, '-'];\n            }\n\n            var year = new Date(utcTime).getUTCFullYear();\n\n            rules = jQuery.grep(rules, function(rule) {\n                var from = rule[0];\n                var to = rule[1];\n\n                return from <= year && (to >= year || (from == year && to == \"only\") || to == \"max\");\n            });\n\n            rules.push(utcTime);\n\n            rules.sort(function(a, b) {\n                if (typeof a != \"number\") {\n                    a = Number(ruleToDate(year, a));\n                }\n\n                if (typeof b != \"number\") {\n                    b = Number(ruleToDate(year, b));\n                }\n\n                return a - b;\n            });\n\n            var rule = rules[jQuery.inArray(utcTime, rules) - 1] || rules[rules.length - 1];\n\n            return isNaN(rule) ? rule : null;\n        }\n\n        function findZone(utcTime, zones, timezone) {\n            var zoneRules = zones[timezone];\n\n            if (typeof zoneRules === \"string\") {\n                zoneRules = zones[zoneRules];\n            }\n\n            if (!zoneRules) {\n                throw new Error('Timezone \"' + timezone + '\" is either incorrect, or kendo.timezones.min.js is not included.');\n            }\n\n            for (var idx = zoneRules.length - 1; idx >= 0; idx--) {\n                var until = zoneRules[idx][3];\n\n                if (until && utcTime > until) {\n                    break;\n                }\n            }\n\n            var zone = zoneRules[idx + 1];\n\n            if (!zone) {\n                throw new Error('Timezone \"' + timezone + '\" not found on ' + utcTime + \".\");\n            }\n\n            return zone;\n        }\n\n        function zoneAndRule(utcTime, zones, rules, timezone) {\n            if (typeof utcTime != NUMBER) {\n                utcTime = Date.UTC(utcTime.getFullYear(), utcTime.getMonth(),\n                    utcTime.getDate(), utcTime.getHours(), utcTime.getMinutes(),\n                    utcTime.getSeconds(), utcTime.getMilliseconds());\n            }\n\n            var zone = findZone(utcTime, zones, timezone);\n\n            return {\n                zone: zone,\n                rule: findRule(utcTime, rules, zone[1])\n            };\n        }\n\n        function offset(utcTime, timezone) {\n            if (timezone == \"Etc/UTC\" || timezone == \"Etc/GMT\") {\n                return 0;\n            }\n\n            var info = zoneAndRule(utcTime, this.zones, this.rules, timezone);\n            var zone = info.zone;\n            var rule = info.rule;\n\n            return kendo.parseFloat(rule? zone[0] - rule[6] : zone[0]);\n        }\n\n        function abbr(utcTime, timezone) {\n            var info = zoneAndRule(utcTime, this.zones, this.rules, timezone);\n            var zone = info.zone;\n            var rule = info.rule;\n\n            var base = zone[2];\n\n            if (base.indexOf(\"/\") >= 0) {\n                return base.split(\"/\")[rule && +rule[6] ? 1 : 0];\n            } else if (base.indexOf(\"%s\") >= 0) {\n                return base.replace(\"%s\", (!rule || rule[7] == \"-\") ? '' : rule[7]);\n            }\n\n            return base;\n        }\n\n        function convert(date, fromOffset, toOffset) {\n            var tempToOffset = toOffset;\n            var diff;\n\n            if (typeof fromOffset == STRING) {\n                fromOffset = this.offset(date, fromOffset);\n            }\n\n            if (typeof toOffset == STRING) {\n                toOffset = this.offset(date, toOffset);\n            }\n\n            var fromLocalOffset = date.getTimezoneOffset();\n\n            date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n\n            var toLocalOffset = date.getTimezoneOffset();\n\n            if (typeof tempToOffset == STRING) {\n                tempToOffset = this.offset(date, tempToOffset);\n            }\n\n            diff = (toLocalOffset - fromLocalOffset) + (toOffset - tempToOffset);\n\n            return new Date(date.getTime() + diff * 60000);\n        }\n\n        function apply(date, timezone) {\n           return this.convert(date, date.getTimezoneOffset(), timezone);\n        }\n\n        function remove(date, timezone) {\n           return this.convert(date, timezone, date.getTimezoneOffset());\n        }\n\n        function toLocalDate(time) {\n            return this.apply(new Date(time), \"Etc/UTC\");\n        }\n\n        return {\n           zones: {},\n           rules: {},\n           offset: offset,\n           convert: convert,\n           apply: apply,\n           remove: remove,\n           abbr: abbr,\n           toLocalDate: toLocalDate\n        };\n    })();\n\n    kendo.date = (function(){\n        var MS_PER_MINUTE = 60000,\n            MS_PER_DAY = 86400000;\n\n        function adjustDST(date, hours) {\n            if (hours === 0 && date.getHours() === 23) {\n                date.setHours(date.getHours() + 2);\n                return true;\n            }\n\n            return false;\n        }\n\n        function setDayOfWeek(date, day, dir) {\n            var hours = date.getHours();\n\n            dir = dir || 1;\n            day = ((day - date.getDay()) + (7 * dir)) % 7;\n\n            date.setDate(date.getDate() + day);\n            adjustDST(date, hours);\n        }\n\n        function dayOfWeek(date, day, dir) {\n            date = new Date(date);\n            setDayOfWeek(date, day, dir);\n            return date;\n        }\n\n        function firstDayOfMonth(date) {\n            return new Date(\n                date.getFullYear(),\n                date.getMonth(),\n                1\n            );\n        }\n\n        function lastDayOfMonth(date) {\n            var last = new Date(date.getFullYear(), date.getMonth() + 1, 0),\n                first = firstDayOfMonth(date),\n                timeOffset = Math.abs(last.getTimezoneOffset() - first.getTimezoneOffset());\n\n            if (timeOffset) {\n                last.setHours(first.getHours() + (timeOffset / 60));\n            }\n\n            return last;\n        }\n\n        function firstDayOfYear(date) {\n            return new Date(date.getFullYear(), 0, 1);\n        }\n\n        function lastDayOfYear(date) {\n            return new Date(date.getFullYear(), 11, 31);\n        }\n\n        function moveDateToWeekStart(date, weekStartDay) {\n            if (weekStartDay !== 1) {\n                return addDays(dayOfWeek(date, weekStartDay, -1), 4);\n            }\n\n            return addDays(date, (4 - (date.getDay() || 7)));\n        }\n\n        function calcWeekInYear(date, weekStartDay) {\n            var firstWeekInYear = new Date(date.getFullYear(), 0, 1, -6);\n\n            var newDate = moveDateToWeekStart(date, weekStartDay);\n\n            var diffInMS = newDate.getTime() - firstWeekInYear.getTime();\n\n            var days = Math.floor(diffInMS / MS_PER_DAY);\n\n            return 1 + Math.floor(days / 7);\n        }\n\n        function weekInYear(date, weekStartDay) {\n            if(weekStartDay === undefined) {\n                weekStartDay = kendo.culture().calendar.firstDay;\n            }\n\n            var prevWeekDate = addDays(date, -7);\n            var nextWeekDate = addDays(date, 7);\n\n            var weekNumber = calcWeekInYear(date, weekStartDay);\n\n            if (weekNumber === 0) {\n                return calcWeekInYear(prevWeekDate, weekStartDay) + 1;\n            }\n\n            if (weekNumber === 53 && calcWeekInYear(nextWeekDate, weekStartDay) > 1) {\n                return 1;\n            }\n\n            return weekNumber;\n        }\n\n        function getDate(date) {\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\n            adjustDST(date, 0);\n            return date;\n        }\n\n        function toUtcTime(date) {\n            return Date.UTC(date.getFullYear(), date.getMonth(),\n                        date.getDate(), date.getHours(), date.getMinutes(),\n                        date.getSeconds(), date.getMilliseconds());\n        }\n\n        function getMilliseconds(date) {\n            return toInvariantTime(date).getTime() - getDate(toInvariantTime(date));\n        }\n\n        function isInTimeRange(value, min, max) {\n            var msMin = getMilliseconds(min),\n                msMax = getMilliseconds(max),\n                msValue;\n\n            if (!value || msMin == msMax) {\n                return true;\n            }\n\n            if (min >= max) {\n                max += MS_PER_DAY;\n            }\n\n            msValue = getMilliseconds(value);\n\n            if (msMin > msValue) {\n                msValue += MS_PER_DAY;\n            }\n\n            if (msMax < msMin) {\n                msMax += MS_PER_DAY;\n            }\n\n            return msValue >= msMin && msValue <= msMax;\n        }\n\n        function isInDateRange(value, min, max) {\n            var msMin = min.getTime(),\n                msMax = max.getTime(),\n                msValue;\n\n            if (msMin >= msMax) {\n                msMax += MS_PER_DAY;\n            }\n\n            msValue = value.getTime();\n\n            return msValue >= msMin && msValue <= msMax;\n        }\n\n        function addDays(date, offset) {\n            var hours = date.getHours();\n                date = new Date(date);\n\n            setTime(date, offset * MS_PER_DAY);\n            adjustDST(date, hours);\n            return date;\n        }\n\n        function setTime(date, milliseconds, ignoreDST) {\n            var offset = date.getTimezoneOffset();\n            var difference;\n\n            date.setTime(date.getTime() + milliseconds);\n\n            if (!ignoreDST) {\n                difference = date.getTimezoneOffset() - offset;\n                date.setTime(date.getTime() + difference * MS_PER_MINUTE);\n            }\n        }\n\n        function setHours(date, time) {\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate(), time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());\n            adjustDST(date, time.getHours());\n            return date;\n        }\n\n        function today() {\n            return getDate(new Date());\n        }\n\n        function isToday(date) {\n           return getDate(date).getTime() == today().getTime();\n        }\n\n        function toInvariantTime(date) {\n            var staticDate = new Date(1980, 1, 1, 0, 0, 0);\n\n            if (date) {\n                staticDate.setHours(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n            }\n\n            return staticDate;\n        }\n\n        function addYear(date, offset) {\n            var currentDate = new Date(date);\n\n            return new Date(currentDate.setFullYear(currentDate.getFullYear() + offset));\n        }\n\n        return {\n            adjustDST: adjustDST,\n            dayOfWeek: dayOfWeek,\n            setDayOfWeek: setDayOfWeek,\n            getDate: getDate,\n            isInDateRange: isInDateRange,\n            isInTimeRange: isInTimeRange,\n            isToday: isToday,\n            nextDay: function(date) {\n                return addDays(date, 1);\n            },\n            previousDay: function(date) {\n                return addDays(date, -1);\n            },\n            toUtcTime: toUtcTime,\n            MS_PER_DAY: MS_PER_DAY,\n            MS_PER_HOUR: 60 * MS_PER_MINUTE,\n            MS_PER_MINUTE: MS_PER_MINUTE,\n            setTime: setTime,\n            setHours: setHours,\n            addDays: addDays,\n            today: today,\n            toInvariantTime: toInvariantTime,\n            firstDayOfMonth: firstDayOfMonth,\n            lastDayOfMonth: lastDayOfMonth,\n            weekInYear: weekInYear,\n            getMilliseconds: getMilliseconds,\n            firstDayOfYear: firstDayOfYear,\n            lastDayOfYear: lastDayOfYear,\n            nextYear: function(date) {\n                return addYear(date, 1);\n            },\n            previousYear: function(date) {\n                return addYear(date, -1);\n            }\n        };\n    })();\n\n\n    kendo.stripWhitespace = function(element) {\n        if (document.createNodeIterator) {\n            var iterator = document.createNodeIterator(element, NodeFilter.SHOW_TEXT, function(node) {\n                    return node.parentNode == element ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;\n                }, false);\n\n            while (iterator.nextNode()) {\n                if (iterator.referenceNode && !iterator.referenceNode.textContent.trim()) {\n                    iterator.referenceNode.parentNode.removeChild(iterator.referenceNode);\n                }\n            }\n        } else { // IE7/8 support\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var child = element.childNodes[i];\n\n                if (child.nodeType == 3 && !/\\S/.test(child.nodeValue)) {\n                    element.removeChild(child);\n                    i--;\n                }\n\n                if (child.nodeType == 1) {\n                    kendo.stripWhitespace(child);\n                }\n            }\n        }\n    };\n\n    var animationFrame  = window.requestAnimationFrame       ||\n                          window.webkitRequestAnimationFrame ||\n                          window.mozRequestAnimationFrame    ||\n                          window.oRequestAnimationFrame      ||\n                          window.msRequestAnimationFrame     ||\n                          function(callback){ setTimeout(callback, 1000 / 60); };\n\n    kendo.animationFrame = function(callback) {\n        animationFrame.call(window, callback);\n    };\n\n    var animationQueue = [];\n\n    kendo.queueAnimation = function(callback) {\n        animationQueue[animationQueue.length] = callback;\n        if (animationQueue.length === 1) {\n            kendo.runNextAnimation();\n        }\n    };\n\n    kendo.runNextAnimation = function() {\n        kendo.animationFrame(function() {\n            if (animationQueue[0]) {\n                animationQueue.shift()();\n                if (animationQueue[0]) {\n                    kendo.runNextAnimation();\n                }\n            }\n        });\n    };\n\n    kendo.parseQueryStringParams = function(url) {\n        var queryString = url.split('?')[1] || \"\",\n            params = {},\n            paramParts = queryString.split(/&|=/),\n            length = paramParts.length,\n            idx = 0;\n\n        for (; idx < length; idx += 2) {\n            if(paramParts[idx] !== \"\") {\n                params[decodeURIComponent(paramParts[idx])] = decodeURIComponent(paramParts[idx + 1]);\n            }\n        }\n\n        return params;\n    };\n\n    kendo.elementUnderCursor = function(e) {\n        if (typeof e.x.client != \"undefined\") {\n            return document.elementFromPoint(e.x.client, e.y.client);\n        }\n    };\n\n    kendo.wheelDeltaY = function(jQueryEvent) {\n        var e = jQueryEvent.originalEvent,\n            deltaY = e.wheelDeltaY,\n            delta;\n\n            if (e.wheelDelta) { // Webkit and IE\n                if (deltaY === undefined || deltaY) { // IE does not have deltaY, thus always scroll (horizontal scrolling is treated as vertical)\n                    delta = e.wheelDelta;\n                }\n            } else if (e.detail && e.axis === e.VERTICAL_AXIS) { // Firefox and Opera\n                delta = (-e.detail) * 10;\n            }\n\n        return delta;\n    };\n\n    kendo.throttle = function(fn, delay) {\n        var timeout;\n        var lastExecTime = 0;\n\n        if (!delay || delay <= 0) {\n            return fn;\n        }\n\n        var throttled = function() {\n            var that = this;\n            var elapsed = +new Date() - lastExecTime;\n            var args = arguments;\n\n            function exec() {\n                fn.apply(that, args);\n                lastExecTime = +new Date();\n            }\n\n            // first execution\n            if (!lastExecTime) {\n                return exec();\n            }\n\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n\n            if (elapsed > delay) {\n                exec();\n            } else {\n                timeout = setTimeout(exec, delay - elapsed);\n            }\n        };\n\n        throttled.cancel = function() {\n            clearTimeout(timeout);\n        };\n\n        return throttled;\n    };\n\n\n    kendo.caret = function (element, start, end) {\n        var rangeElement;\n        var isPosition = start !== undefined;\n\n        if (end === undefined) {\n            end = start;\n        }\n\n        if (element[0]) {\n            element = element[0];\n        }\n\n        if (isPosition && element.disabled) {\n            return;\n        }\n\n        try {\n            if (element.selectionStart !== undefined) {\n                if (isPosition) {\n                    element.focus();\n                    var mobile = support.mobileOS;\n                    if(mobile.wp || mobile.android) {// without the timeout the caret is at the end of the input\n                        setTimeout(function() { element.setSelectionRange(start, end); }, 0);\n                    }\n                    else {\n                        element.setSelectionRange(start, end);\n                    }\n                } else {\n                    start = [element.selectionStart, element.selectionEnd];\n                }\n            } else if (document.selection) {\n                if ($(element).is(\":visible\")) {\n                    element.focus();\n                }\n\n                rangeElement = element.createTextRange();\n\n                if (isPosition) {\n                    rangeElement.collapse(true);\n                    rangeElement.moveStart(\"character\", start);\n                    rangeElement.moveEnd(\"character\", end - start);\n                    rangeElement.select();\n                } else {\n                    var rangeDuplicated = rangeElement.duplicate(),\n                        selectionStart, selectionEnd;\n\n                        rangeElement.moveToBookmark(document.selection.createRange().getBookmark());\n                        rangeDuplicated.setEndPoint('EndToStart', rangeElement);\n                        selectionStart = rangeDuplicated.text.length;\n                        selectionEnd = selectionStart + rangeElement.text.length;\n\n                    start = [selectionStart, selectionEnd];\n                }\n            }\n        } catch(e) {\n            /* element is not focused or it is not in the DOM */\n            start = [];\n        }\n\n        return start;\n    };\n\n    kendo.compileMobileDirective = function(element, scope) {\n        var angular = window.angular;\n\n        element.attr(\"data-\" + kendo.ns + \"role\", element[0].tagName.toLowerCase().replace('kendo-mobile-', '').replace('-', ''));\n\n        angular.element(element).injector().invoke([\"$compile\", function($compile) {\n            $compile(element)(scope);\n\n            if (!/^\\$(digest|apply)$/.test(scope.$$phase)) {\n                scope.$digest();\n            }\n        }]);\n\n        return kendo.widgetInstance(element, kendo.mobile.ui);\n    };\n\n    kendo.antiForgeryTokens = function() {\n        var tokens = { },\n            csrf_token = $(\"meta[name=csrf-token],meta[name=_csrf]\").attr(\"content\"),\n            csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        $(\"input[name^='__RequestVerificationToken']\").each(function() {\n            tokens[this.name] = this.value;\n        });\n\n        if (csrf_param !== undefined && csrf_token !== undefined) {\n          tokens[csrf_param] = csrf_token;\n        }\n\n        return tokens;\n    };\n\n    kendo.cycleForm = function(form) {\n        var firstElement = form.find(\"input, .k-widget\").first();\n        var lastElement = form.find(\"button, .k-button\").last();\n\n        function focus(el) {\n            var widget = kendo.widgetInstance(el);\n\n            if (widget && widget.focus) {\n              widget.focus();\n            } else {\n              el.trigger(\"focus\");\n            }\n        }\n\n        lastElement.on(\"keydown\", function(e) {\n          if (e.keyCode == kendo.keys.TAB && !e.shiftKey) {\n            e.preventDefault();\n            focus(firstElement);\n          }\n        });\n\n        firstElement.on(\"keydown\", function(e) {\n          if (e.keyCode == kendo.keys.TAB && e.shiftKey) {\n            e.preventDefault();\n            focus(lastElement);\n          }\n        });\n    };\n\n    kendo.focusElement = function(element) {\n        var scrollTopPositions = [];\n        var scrollableParents = element.parentsUntil(\"body\")\n                .filter(function(index, element) {\n                    var computedStyle = kendo.getComputedStyles(element, [\"overflow\"]);\n                    return computedStyle.overflow !== \"visible\";\n                })\n                .add(window);\n\n        scrollableParents.each(function(index, parent) {\n            scrollTopPositions[index] = $(parent).scrollTop();\n        });\n\n        try {\n            //The setActive method does not cause the document to scroll to the active object in the current page\n            element[0].setActive();\n        } catch (e) {\n            element[0].focus();\n        }\n\n        scrollableParents.each(function(index, parent) {\n            $(parent).scrollTop(scrollTopPositions[index]);\n        });\n    };\n\n    kendo.focusNextElement = function () {\n        if (document.activeElement) {\n            var focussable = $(\":kendoFocusable\");\n            var index = focussable.index(document.activeElement);\n\n            if(index > -1) {\n               var nextElement = focussable[index + 1] || focussable[0];\n               nextElement.focus();\n            }\n        }\n    };\n\n    kendo.trim = function(value) {\n        if(!!value) {\n            return value.toString().trim();\n        } else {\n            return \"\";\n        }\n    };\n\n    kendo.getWidgetFocusableElement = function(element) {\n        var nextFocusable = element.closest(\":kendoFocusable\"),\n            widgetInstance = kendo.widgetInstance(element),\n            target;\n\n        if (nextFocusable.length) {\n            target = nextFocusable;\n        } else if (widgetInstance) {\n            target = widgetInstance.options.name === 'Editor' ?\n                $(widgetInstance.body) :\n                widgetInstance.wrapper.find(\":kendoFocusable\").first();\n        } else {\n            target = element;\n        }\n\n        return target;\n    };\n\n    kendo.addAttribute =  function(element, attribute, value) {\n        var current = element.attr(attribute) || \"\";\n\n        if (current.indexOf(value) < 0) {\n            element.attr(attribute, (current + \" \" + value).trim());\n        }\n    };\n\n    kendo.removeAttribute = function(element, attribute, value) {\n        var current = element.attr(attribute) || \"\";\n\n        element.attr(attribute, current.replace(value, \"\").trim());\n    };\n\n    kendo.toggleAttribute = function(element, attribute, value) {\n        var current = element.attr(attribute) || \"\";\n\n        if (current.indexOf(value) < 0) {\n            kendo.addAttribute(element, attribute, value);\n        } else {\n            kendo.removeAttribute(element, attribute, value);\n        }\n    };\n\n    kendo.matchesMedia = function(mediaQuery) {\n        var media = kendo._bootstrapToMedia(mediaQuery) || mediaQuery;\n        return support.matchMedia && window.matchMedia(media).matches;\n    };\n\n    kendo._bootstrapToMedia = function(bootstrapMedia) {\n        return {\n            \"xs\": \"(max-width: 576px)\",\n            \"sm\": \"(min-width: 576px)\",\n            \"md\": \"(min-width: 768px)\",\n            \"lg\": \"(min-width: 992px)\",\n            \"xl\": \"(min-width: 1200px)\"\n        }[bootstrapMedia];\n    };\n\n    kendo.fileGroupMap = {\n        audio: [\".aif\", \".iff\", \".m3u\", \".m4a\", \".mid\", \".mp3\", \".mpa\", \".wav\", \".wma\", \".ogg\", \".wav\", \".wma\", \".wpl\"],\n        video: [\".3g2\", \".3gp\", \".avi\", \".asf\", \".flv\", \".m4u\", \".rm\", \".h264\", \".m4v\", \".mkv\", \".mov\", \".mp4\", \".mpg\",\n                \".rm\", \".swf\", \".vob\", \".wmv\"],\n        image: [\".ai\", \".dds\", \".heic\", \".jpe\", \"jfif\", \".jif\", \".jp2\", \".jps\", \".eps\", \".bmp\", \".gif\", \".jpeg\",\n                \".jpg\", \".png\", \".ps\", \".psd\", \".svg\", \".svgz\", \".tif\", \".tiff\"],\n        txt: [\".doc\", \".docx\", \".log\", \".pages\", \".tex\", \".wpd\", \".wps\", \".odt\", \".rtf\", \".text\", \".txt\", \".wks\"],\n        presentation: [\".key\", \".odp\", \".pps\", \".ppt\", \".pptx\"],\n        data: [\".xlr\", \".xls\", \".xlsx\"],\n        programming: [\".tmp\", \".bak\", \".msi\", \".cab\", \".cpl\", \".cur\", \".dll\", \".dmp\", \".drv\", \".icns\", \".ico\", \".link\",\n                      \".sys\", \".cfg\", \".ini\", \".asp\", \".aspx\", \".cer\", \".csr\", \".css\", \".dcr\", \".htm\", \".html\", \".js\",\n                      \".php\", \".rss\", \".xhtml\"],\n        pdf: [\".pdf\"],\n        config: [\".apk\", \".app\", \".bat\", \".cgi\", \".com\", \".exe\", \".gadget\", \".jar\", \".wsf\"],\n        zip: [\".7z\", \".cbr\", \".gz\", \".sitx\", \".arj\", \".deb\", \".pkg\", \".rar\", \".rpm\", \".tar.gz\", \".z\", \".zip\", \".zipx\"],\n        \"disc-image\": [\".dmg\", \".iso\", \".toast\", \".vcd\", \".bin\", \".cue\", \".mdf\"]\n    };\n\n    kendo.getFileGroup = function(extension, withPrefix) {\n        var fileTypeMap = kendo.fileGroupMap;\n        var groups = Object.keys(fileTypeMap);\n        var type = \"file\";\n\n        if (extension === undefined || !extension.length) {\n            return type;\n        }\n\n        for (var i = 0; i < groups.length; i += 1) {\n            var extensions = fileTypeMap[groups[i]];\n\n            if (extensions.indexOf(extension.toLowerCase()) > -1) {\n               return withPrefix ? \"file-\" + groups[i] : groups[i];\n            }\n        }\n\n        return type;\n    };\n\n    kendo.getFileSizeMessage = function(size) {\n        var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\n        if (size === 0) {\n            return '0 Byte';\n        }\n\n        var i = parseInt(Math.floor(Math.log(size) / Math.log(1024)), 10);\n        return Math.round(size / Math.pow(1024, i), 2) + ' ' + sizes[i];\n    };\n\n    kendo.selectorFromClasses = function(classes) {\n        return \".\"+classes.split(\" \").join(\".\");\n    };\n\n    // Standardized Properties and CSS classes\n\n    var themeColorValues = ['base', 'primary', 'secondary', 'tertiary', 'inherit', 'info', 'success', 'warning', 'error', 'dark', 'light', 'inverse'];\n    var fillValues = ['solid', 'outline', 'flat'];\n    //var postitionValues = ['edge', 'outside', 'inside'];\n    var shapeValues = ['rectangle', 'square'];\n    var sizeValues = [ ['small', 'sm'], ['medium', 'md'], ['large', 'lg'] ];\n    var roundedValues = [ ['small', 'sm'], ['medium', 'md'], ['large', 'lg'] ];\n    //var alignValues = [ ['top start', 'top-start'], ['top end', 'top-end'], ['bottom start', 'bottom-start'], ['bottom end', 'bottom-end'] ];\n    var positionModeValues = [ 'fixed', 'static', 'sticky', 'absolute' ];\n    var resizeValues = [ 'both', 'horizontal', 'vertical' ];\n    var overflowValues = [ 'auto', 'hidden', 'visible', 'scroll', 'clip' ];\n\n    kendo.cssProperties = (function() {\n        var defaultValues = {},\n            propertyDictionary = {};\n\n        function registerPrefix(widget, prefix) {\n            var dict = kendo.cssProperties.propertyDictionary;\n\n            if (!dict[widget]) {\n                dict[widget] = {};\n            }\n\n            dict[widget][PREFIX] = prefix;\n        }\n\n        function registerValues(widget, args) {\n            var dict = kendo.cssProperties.propertyDictionary,\n                i, j, prop, values, newValues, currentValue;\n\n            for (i = 0; i < args.length; i++) {\n                prop = args[i].prop;\n                newValues = args[i].values;\n\n                if(!dict[widget][prop]) {\n                    dict[widget][prop] = {};\n                }\n\n                values = dict[widget][prop];\n\n                for (j = 0; j < newValues.length; j++) {\n                    currentValue = newValues[j];\n\n                    if (isArray(newValues[j])) {\n                        values[currentValue[0]] = currentValue[1];\n                    } else {\n                        values[currentValue] = currentValue;\n                    }\n                }\n            }\n        }\n\n        function registerCssClass(propName, value, shorthand) {\n            if (!defaultValues[propName]) {\n                defaultValues[propName] = {};\n            }\n\n            defaultValues[propName][value] = shorthand || value;\n        }\n\n        function registerCssClasses(propName, arr) {\n            for (var i = 0; i < arr.length; i++) {\n                if (isArray(arr[i])) {\n                    registerCssClass(propName, arr[i][0], arr[i][1]);\n                } else {\n                    registerCssClass(propName, arr[i]);\n                }\n            }\n        }\n\n        function getValidClass(args) {\n            var widget = args.widget,\n                propName = args.propName,\n                value = args.value,\n                fill = args.fill,\n                cssProperties = kendo.cssProperties,\n                defaultValues = cssProperties.defaultValues[propName],\n                widgetProperties = cssProperties.propertyDictionary[widget],\n                widgetValues, validValue, prefix;\n\n            if(!widgetProperties) {\n                return \"\";\n            }\n\n            widgetValues = widgetProperties[propName];\n            validValue = widgetValues ? widgetValues[value] || defaultValues[value] : defaultValues[value];\n\n            if (validValue) {\n                if (propName === \"themeColor\") {\n                    prefix = widgetProperties[PREFIX] + fill + \"-\";\n                } else if (propName === \"positionMode\") {\n                    prefix = \"k-pos-\";\n                } else if (propName === \"rounded\") {\n                    prefix = \"k-rounded-\";\n                } else if (propName === \"resize\") {\n                    prefix = \"k-resize-\";\n                } else if (propName === \"overflow\") {\n                    prefix = \"k-overflow-\";\n                } else {\n                    prefix = widgetProperties[PREFIX];\n                }\n\n                return prefix + validValue;\n            } else {\n                return \"\";\n            }\n        }\n\n        registerCssClasses(\"themeColor\", themeColorValues);\n        registerCssClasses(\"fillMode\", fillValues);\n        registerCssClasses(\"shape\", shapeValues);\n        registerCssClasses(\"size\", sizeValues);\n        registerCssClasses(\"positionMode\", positionModeValues);\n        registerCssClasses(\"rounded\", roundedValues);\n        registerCssClasses(\"resize\", resizeValues);\n        registerCssClasses(\"overflow\", overflowValues);\n\n        return {\n            positionModeValues: positionModeValues,\n            roundedValues: roundedValues,\n            sizeValues: sizeValues,\n            shapeValues: shapeValues,\n            fillModeValues: fillValues,\n            themeColorValues: themeColorValues,\n\n            defaultValues: defaultValues,\n            propertyDictionary: propertyDictionary,\n\n            registerValues: registerValues,\n            getValidClass: getValidClass,\n            registerPrefix: registerPrefix\n        };\n    }());\n\n    //To do: delete below after implementing new styles and classes for BottomNavigation\n    kendo.registerCssClass = function (propName, value, shorthand) {\n        if (!kendo.propertyToCssClassMap[propName]) {\n            kendo.propertyToCssClassMap[propName] = {};\n        }\n\n        kendo.propertyToCssClassMap[propName][value] = shorthand || value;\n    };\n\n    kendo.registerCssClasses = function (propName, arr) {\n        for (var i = 0; i < arr.length; i++) {\n            if (isArray(arr[i])) {\n                kendo.registerCssClass(propName, arr[i][0], arr[i][1]);\n            } else {\n                kendo.registerCssClass(propName, arr[i]);\n            }\n        }\n    };\n\n    kendo.getValidCssClass = function (prefix, propName, value) {\n        var validValue = kendo.propertyToCssClassMap[propName][value];\n\n        if (validValue) {\n            return prefix + validValue;\n        }\n    };\n\n    kendo.propertyToCssClassMap = {};\n\n    kendo.registerCssClasses(\"themeColor\", themeColorValues);\n    kendo.registerCssClasses(\"fill\", fillValues);\n    //kendo.registerCssClasses(\"postition\", postitionValues);\n    kendo.registerCssClasses(\"shape\", shapeValues);\n    kendo.registerCssClasses(\"size\", sizeValues);\n    //kendo.registerCssClasses(\"align\", alignValues);\n    kendo.registerCssClasses(\"positionMode\", positionModeValues);\n\n    // jQuery deferred helpers\n\n    // influenced from: https://gist.github.com/fearphage/4341799\n    kendo.whenAll = function(array) {\n        var resolveValues = arguments.length == 1 && Array.isArray(array) ? array : Array.prototype.slice.call(arguments),\n            length = resolveValues.length,\n            remaining = length,\n            deferred = $.Deferred(),\n            i = 0,\n            failed = 0,\n            rejectContexts = Array(length),\n            rejectValues = Array(length),\n            resolveContexts = Array(length),\n            value;\n\n        function updateFunc (index, contexts, values) {\n            return function() {\n                if(values != resolveValues) {\n                    failed++;\n                }\n\n                deferred.notifyWith(\n                    contexts[index] = this,\n                    values[index] = Array.prototype.slice.call(arguments)\n                );\n\n                if (!(--remaining)) {\n                    deferred[(!failed ? 'resolve' : 'reject') + 'With'](contexts, values);\n                }\n            };\n        }\n\n        for (; i < length; i++) {\n            if ((value = resolveValues[i]) && kendo.isFunction(value.promise)) {\n                value.promise()\n                    .done(updateFunc(i, resolveContexts, resolveValues))\n                    .fail(updateFunc(i, rejectContexts, rejectValues));\n            }\n\n            else {\n                deferred.notifyWith(this, value);\n                --remaining;\n            }\n        }\n\n        if (!remaining) {\n            deferred.resolveWith(resolveContexts, resolveValues);\n        }\n\n        return deferred.promise();\n    };\n\n    // kendo.saveAs -----------------------------------------------\n    (function() {\n        function postToProxy(dataURI, fileName, proxyURL, proxyTarget) {\n            var form = $(\"<form>\").attr({\n                action: proxyURL,\n                method: \"POST\",\n                target: proxyTarget\n            });\n\n            var data = kendo.antiForgeryTokens();\n            data.fileName = fileName;\n\n            var parts = dataURI.split(\";base64,\");\n            data.contentType = parts[0].replace(\"data:\", \"\");\n            data.base64 = parts[1];\n\n            for (var name in data) {\n                if (data.hasOwnProperty(name)) {\n                    $('<input>').attr({\n                        value: data[name],\n                        name: name,\n                        type: \"hidden\"\n                    }).appendTo(form);\n                }\n            }\n\n            form.appendTo(\"body\").submit().remove();\n        }\n\n        var fileSaver = document.createElement(\"a\");\n        var downloadAttribute = \"download\" in fileSaver && !kendo.support.browser.edge;\n\n        function saveAsBlob(dataURI, fileName) {\n            var blob = dataURI; // could be a Blob object\n\n            if (typeof dataURI == \"string\") {\n                var parts = dataURI.split(\";base64,\");\n                var contentType = parts[0];\n                var base64 = atob(parts[1]);\n                var array = new Uint8Array(base64.length);\n\n                for (var idx = 0; idx < base64.length; idx++) {\n                    array[idx] = base64.charCodeAt(idx);\n                }\n                blob = new Blob([array.buffer], { type: contentType });\n            }\n\n            navigator.msSaveBlob(blob, fileName);\n        }\n\n        function saveAsDataURI(dataURI, fileName) {\n            if (window.Blob && dataURI instanceof Blob) {\n                dataURI = URL.createObjectURL(dataURI);\n            }\n\n            fileSaver.download = fileName;\n            fileSaver.href = dataURI;\n\n            var e = document.createEvent(\"MouseEvents\");\n            e.initMouseEvent(\"click\", true, false, window,\n                0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\n            fileSaver.dispatchEvent(e);\n            setTimeout(function(){\n                URL.revokeObjectURL(dataURI);\n            });\n        }\n\n        kendo.saveAs = function(options) {\n            var save = postToProxy;\n\n            if (!options.forceProxy) {\n                if (downloadAttribute) {\n                    save = saveAsDataURI;\n                } else if (navigator.msSaveBlob) {\n                    save = saveAsBlob;\n                }\n            }\n\n            save(options.dataURI, options.fileName, options.proxyURL, options.proxyTarget);\n        };\n    })();\n\n    // kendo proxySetters\n    kendo.proxyModelSetters = function proxyModelSetters(data) {\n        var observable = {};\n\n        Object.keys(data || {}).forEach(function(property) {\n          Object.defineProperty(observable, property, {\n            get: function() {\n              return data[property];\n            },\n            set: function(value) {\n              data[property] = value;\n              data.dirty = true;\n            }\n          });\n        });\n\n        return observable;\n    };\n\n    kendo.getSeriesColors = function() {\n        var seriesColorsTemplate = '<div class=\"k-var--series-a\"></div>' +\n                '<div class=\"k-var--series-b\"></div>' +\n                '<div class=\"k-var--series-c\"></div>' +\n                '<div class=\"k-var--series-d\"></div>' +\n                '<div class=\"k-var--series-e\"></div>' +\n                '<div class=\"k-var--series-f\"></div>',\n            series = $(seriesColorsTemplate),\n            colors = [];\n\n        series.appendTo($('body'));\n\n        series.each(function(i, item) {\n            colors.push($(item).css(\"background-color\"));\n        });\n\n        series.remove();\n\n        return colors;\n    };\n\n    kendo.isElement = function(element) {\n        return element instanceof Element || element instanceof HTMLDocument; // jshint ignore:line\n    };\n\n    // Kendo defaults\n    (function() {\n\n        kendo.defaults = kendo.defaults || {};\n        kendo.setDefaults = function(key, value) {\n            var path = key.split(\".\");\n            var curr = kendo.defaults;\n\n            key = path.pop();\n\n            path.forEach(function(part) {\n                if (curr[part] === undefined) {\n                    curr[part] = {};\n                }\n\n                curr = curr[part];\n            });\n\n            if (value.constructor === Object) {\n                curr[key] = deepExtend({}, curr[key], value);\n            } else {\n                curr[key] = value;\n            }\n        };\n\n    })();\n\n    // Implement type() as it has been depricated in jQuery\n    (function() {\n        kendo.class2type = {};\n\n        jQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n            function( _i, name ) {\n                kendo.class2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n            } );\n\n        kendo.type = function(obj) {\n            if ( obj == null ) {\n                return obj + \"\";\n            }\n\n            // Support: Android <=2.3 only (functionish RegExp)\n            return typeof obj === \"object\" || typeof obj === \"function\" ?\n                kendo.class2type[Object.prototype.toString.call(obj)] || \"object\" :\n                typeof obj;\n        };\n    }());\n\n})(jQuery, window);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.data.odata',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"data.odata\",\n    name: \"OData\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        NEWLINE = \"\\r\\n\",\n        DOUBLELINE = \"\\r\\n\\r\\n\",\n        isFunction = kendo.isFunction,\n        odataFilters = {\n            eq: \"eq\",\n            neq: \"ne\",\n            gt: \"gt\",\n            gte: \"ge\",\n            lt: \"lt\",\n            lte: \"le\",\n            contains : \"substringof\",\n            doesnotcontain: \"substringof\",\n            endswith: \"endswith\",\n            startswith: \"startswith\",\n            isnull: \"eq\",\n            isnotnull: \"ne\",\n            isnullorempty: \"eq\",\n            isnotnullorempty: \"ne\",\n            isempty: \"eq\",\n            isnotempty: \"ne\"\n        },\n        odataFiltersVersionFour = extend({}, odataFilters, {\n            contains: \"contains\"\n        }),\n        mappers = {\n            pageSize: $.noop,\n            page: $.noop,\n            filter: function(params, filter, useVersionFour) {\n                if (filter) {\n                    filter = toOdataFilter(filter, useVersionFour);\n                    if (filter) {\n                        params.$filter = filter;\n                    }\n                }\n            },\n            sort: function(params, orderby) {\n                var expr = $.map(orderby, function(value) {\n                    var order = value.field.replace(/\\./g, \"/\");\n\n                    if (value.dir === \"desc\") {\n                        order += \" desc\";\n                    }\n\n                    return order;\n                }).join(\",\");\n\n                if (expr) {\n                    params.$orderby = expr;\n                }\n            },\n            skip: function(params, skip) {\n                if (skip) {\n                    params.$skip = skip;\n                }\n            },\n            take: function(params, take) {\n                if (take) {\n                    params.$top = take;\n                }\n            }\n        },\n        defaultDataType = {\n            read: {\n                dataType: \"jsonp\"\n            }\n        };\n\n    function toOdataFilter(filter, useOdataFour) {\n        var result = [],\n            logic = filter.logic || \"and\",\n            idx,\n            length,\n            field,\n            type,\n            format,\n            operator,\n            value,\n            ignoreCase,\n            filters = filter.filters;\n\n        for (idx = 0, length = filters.length; idx < length; idx++) {\n            filter = filters[idx];\n            field = filter.field;\n            value = filter.value;\n            operator = filter.operator;\n\n            if (filter.filters) {\n                filter = toOdataFilter(filter, useOdataFour);\n            } else {\n                ignoreCase = filter.ignoreCase;\n                field = field.replace(/\\./g, \"/\");\n                filter = odataFilters[operator];\n                if (useOdataFour) {\n                    filter = odataFiltersVersionFour[operator];\n                }\n\n                if (operator === \"isnullorempty\") {\n                    filter = kendo.format(\"{0} {1} null or {0} {1} ''\", field, filter);\n                } else if(operator === \"isnotnullorempty\") {\n                    filter = kendo.format(\"{0} {1} null and {0} {1} ''\", field, filter);\n                } else if (operator === \"isnull\" || operator === \"isnotnull\") {\n                    filter = kendo.format(\"{0} {1} null\", field, filter);\n                } else if (operator === \"isempty\" || operator === \"isnotempty\") {\n                    filter = kendo.format(\"{0} {1} ''\", field, filter);\n                } else if (filter && value !== undefined) {\n                    type = kendo.type(value);\n                    if (type === \"string\") {\n                        format = \"'{1}'\";\n                        value = value.replace(/'/g, \"''\");\n\n                        if (ignoreCase === true) {\n                            field = \"tolower(\" + field + \")\";\n                        }\n\n                    } else if (type === \"date\") {\n                        if (useOdataFour) {\n                            format = \"{1:yyyy-MM-ddTHH:mm:ss+00:00}\";\n                            value = kendo.timezone.apply(value, 'Etc/UTC');\n                        } else {\n                            format = \"datetime'{1:yyyy-MM-ddTHH:mm:ss}'\";\n                        }\n                    } else {\n                        format = \"{1}\";\n                    }\n\n                    if (filter.length > 3) {\n                        if (filter !== \"substringof\") {\n                            format = \"{0}({2},\" + format + \")\";\n                        } else {\n                            format = \"{0}(\" + format + \",{2})\";\n                            if (operator === \"doesnotcontain\") {\n                                if (useOdataFour) {\n                                    format = \"{0}({2},'{1}') eq -1\";\n                                    filter = \"indexof\";\n                                } else {\n                                    format += \" eq false\";\n                                }\n                            }\n                        }\n                    } else {\n                        format = \"{2} {0} \" + format;\n                    }\n\n                    filter = kendo.format(format, filter, value, field);\n                }\n            }\n\n            result.push(filter);\n        }\n\n        filter = result.join(\" \" + logic + \" \");\n\n        if (result.length > 1) {\n            filter = \"(\" + filter + \")\";\n        }\n\n        return filter;\n    }\n\n    function stripMetadata(obj) {\n        for (var name in obj) {\n            if(name.indexOf(\"@odata\") === 0) {\n                delete obj[name];\n            }\n        }\n    }\n\n    function hex16() {\n        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substr(1);\n    }\n\n    function createBoundary(prefix) {\n        return prefix + hex16() + '-' + hex16() + '-' + hex16();\n    }\n\n    function createDelimeter(boundary, close) {\n        var result = NEWLINE + \"--\" + boundary;\n\n        if (close) {\n            result += \"--\";\n        }\n\n        return result;\n    }\n\n    function createCommand(transport, item, httpVerb, command) {\n         var transportUrl = transport.options[command].url;\n         var commandPrefix = kendo.format(\"{0} \", httpVerb);\n\n         if (isFunction(transportUrl)) {\n             return commandPrefix + transportUrl(item);\n         } else {\n             return commandPrefix + transportUrl;\n         }\n    }\n\n    function getOperationHeader(changeset, changeId) {\n        var header = \"\";\n\n        header += createDelimeter(changeset, false);\n        header += NEWLINE + 'Content-Type: application/http';\n        header += NEWLINE + 'Content-Transfer-Encoding: binary';\n        header += NEWLINE + 'Content-ID: ' + changeId;\n\n        return header;\n    }\n\n    function getOperationContent(item) {\n        var content = \"\";\n\n        content += NEWLINE + \"Content-Type: application/json;odata=minimalmetadata\";\n        content += NEWLINE + \"Prefer: return=representation\";\n        content += DOUBLELINE + kendo.stringify(item);\n\n        return content;\n    }\n\n    function getOperations(collection, changeset, changeId, command, transport, skipContent) {\n        var requestBody = \"\";\n\n        for (var i = 0; i < collection.length; i++) {\n            requestBody += getOperationHeader(changeset, changeId);\n            requestBody += DOUBLELINE + createCommand(transport, collection[i], transport.options[command].type, command) + ' HTTP/1.1';\n            if (!skipContent) {\n                requestBody += getOperationContent(collection[i]);\n            }\n            requestBody += NEWLINE;\n            changeId++;\n        }\n\n        return requestBody;\n    }\n\n    function processCollection(colection, boundary, changeset, changeId, transport, command, skipContent) {\n        var requestBody = \"\";\n\n        requestBody += getBoundary(boundary, changeset);\n        requestBody += getOperations(colection, changeset, changeId, command, transport, skipContent);\n        requestBody += createDelimeter(changeset, true);\n        requestBody += NEWLINE;\n\n        return requestBody;\n    }\n\n    function getBoundary(boundary,changeset) {\n        var requestBody = \"\";\n\n        requestBody += \"--\" + boundary + NEWLINE;\n        requestBody += \"Content-Type: multipart/mixed; boundary=\" + changeset + NEWLINE;\n\n        return requestBody;\n    }\n\n    function createBatchRequest(transport, colections) {\n\t\tvar options = extend({}, transport.options.batch);\n        var boundary = createBoundary(\"sf_batch_\");\n        var requestBody = \"\";\n        var changeId = 0;\n        var batchURL = transport.options.batch.url;\n        var changeset = createBoundary(\"sf_changeset_\");\n\n        options.type = transport.options.batch.type;\n        options.url = isFunction(batchURL) ? batchURL() : batchURL;\n\t\toptions.headers = extend(options.headers || {}, {\n\t\t\t\"Content-Type\": \"multipart/mixed; boundary=\" + boundary\n\t\t});\n\n        if (colections.updated.length) {\n            requestBody += processCollection(colections.updated, boundary, changeset, changeId, transport, \"update\", false);\n            changeId += colections.updated.length;\n            changeset = createBoundary(\"sf_changeset_\");\n        }\n\n        if (colections.destroyed.length) {\n            requestBody += processCollection(colections.destroyed, boundary, changeset, changeId, transport, \"destroy\", true);\n            changeId += colections.destroyed.length;\n            changeset = createBoundary(\"sf_changeset_\");\n        }\n\n        if (colections.created.length) {\n            requestBody += processCollection(colections.created, boundary, changeset, changeId, transport, \"create\", false);\n        }\n\n        requestBody += createDelimeter(boundary, true);\n\n        options.data = requestBody;\n\n        return options;\n    }\n\n    function parseBatchResponse(responseText) {\n        var responseMarkers = responseText.match(/--changesetresponse_[a-z0-9-]+$/gm);\n        var markerIndex = 0;\n        var collections = [];\n        var changeBody;\n        var status;\n        var code;\n        var marker;\n        var jsonModel;\n\n        collections.push({ models: [], passed: true });\n\n        for (var i = 0; i < responseMarkers.length; i++) {\n            marker = responseMarkers[i];\n            if (marker.lastIndexOf('--', marker.length - 1)) {\n                if (i < responseMarkers.length - 1) {\n                    collections.push({ models: [], passed: true });\n                }\n                continue;\n            }\n\n            if (!markerIndex) {\n                markerIndex = responseText.indexOf(marker);\n            } else {\n                markerIndex = responseText.indexOf(marker, markerIndex + marker.length);\n            }\n\n            changeBody = responseText.substring(markerIndex, responseText.indexOf(\"--\", markerIndex + 1));\n            status = changeBody.match(/^HTTP\\/1\\.\\d (\\d{3}) (.*)$/gm).pop();\n            code = kendo.parseFloat(status.match(/\\d{3}/g).pop());\n\n            if (code >= 200 && code <= 299) {\n                jsonModel = changeBody.match(/\\{.*\\}/gm);\n                if (jsonModel) {\n                    collections[collections.length - 1].models.push(JSON.parse(jsonModel[0]));\n                }\n            } else {\n                collections[collections.length - 1].passed = false;\n            }\n\n        }\n\n        return collections;\n    }\n\n    extend(true, kendo.data, {\n        schemas: {\n            odata: {\n                type: \"json\",\n                data: function(data) {\n                    return data.d.results || [data.d];\n                },\n                total: \"d.__count\"\n            }\n        },\n        transports: {\n            odata: {\n                read: {\n                    cache: true, // to prevent jQuery from adding cache buster\n                    dataType: \"jsonp\",\n                    jsonp: \"$callback\"\n                },\n                update: {\n                    cache: true,\n                    dataType: \"json\",\n                    contentType: \"application/json\", // to inform the server the the request body is JSON encoded\n                    type: \"PUT\" // can be PUT or MERGE\n                },\n                create: {\n                    cache: true,\n                    dataType: \"json\",\n                    contentType: \"application/json\",\n                    type: \"POST\" // must be POST to create new entity\n                },\n                destroy: {\n                    cache: true,\n                    dataType: \"json\",\n                    type: \"DELETE\"\n                },\n                parameterMap: function(options, type, useVersionFour) {\n                    var params,\n                        value,\n                        option,\n                        dataType;\n\n                    options = options || {};\n                    type = type || \"read\";\n                    dataType = (this.options || defaultDataType)[type];\n                    dataType = dataType ? dataType.dataType : \"json\";\n\n                    if (type === \"read\") {\n                        params = {\n                            $inlinecount: \"allpages\"\n                        };\n\n                        if (dataType != \"json\") {\n                            params.$format = \"json\";\n                        }\n\n                        for (option in options) {\n                            if (mappers[option]) {\n                                mappers[option](params, options[option], useVersionFour);\n                            } else {\n                                params[option] = options[option];\n                            }\n                        }\n                    } else {\n                        if (dataType !== \"json\") {\n                            throw new Error(\"Only json dataType can be used for \" + type + \" operation.\");\n                        }\n\n                        if (type !== \"destroy\") {\n                            for (option in options) {\n                                value = options[option];\n                                if (typeof value === \"number\") {\n                                    options[option] = value + \"\";\n                                }\n                            }\n\n                            params = kendo.stringify(options);\n                        }\n                    }\n\n                    return params;\n                }\n            }\n        }\n    });\n\n    extend(true, kendo.data, {\n        schemas: {\n            \"odata-v4\": {\n                type: \"json\",\n                data: function(data) {\n                    if (Array.isArray(data)) {\n                        for (var i = 0; i < data.length; i++) {\n                            stripMetadata(data[i]);\n                        }\n                        return data;\n                    } else {\n                        data = $.extend({}, data);\n                        stripMetadata(data);\n\n                        if (data.value) {\n                            return data.value;\n                        }\n                        return [data];\n                    }\n                },\n                total: function(data) {\n                    return data[\"@odata.count\"];\n                }\n            }\n        },\n        transports: {\n            \"odata-v4\": {\n                batch: {\n                    type: \"POST\"\n                },\n                read: {\n                    cache: true, // to prevent jQuery from adding cache buster\n                    dataType: \"json\"\n                },\n                update: {\n                    cache: true,\n                    dataType: \"json\",\n                    contentType: \"application/json;IEEE754Compatible=true\", // to inform the server the the request body is JSON encoded\n                    type: \"PUT\" // can be PUT or MERGE\n                },\n                create: {\n                    cache: true,\n                    dataType: \"json\",\n                    contentType: \"application/json;IEEE754Compatible=true\",\n                    type: \"POST\" // must be POST to create new entity\n                },\n                destroy: {\n                    cache: true,\n                    dataType: \"json\",\n                    type: \"DELETE\"\n                },\n                parameterMap: function(options, type) {\n                    var result = kendo.data.transports.odata.parameterMap(options, type, true);\n                    if (type == \"read\") {\n                        result.$count = true;\n                        delete result.$inlinecount;\n                    }\n\n\t\t\t\t\tif (result && result.$filter) {\n\t\t\t\t\t\t// Remove the single quotation marks around the GUID (OData v4).\n\t\t\t\t\t\tresult.$filter = result.$filter.replace(/('[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}')/ig, function (x) {\n\t\t\t\t\t\t\treturn x.substring(1, x.length - 1);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n                    return result;\n                },\n                submit: function(e) {\n                    var that = this;\n                    var options = createBatchRequest(that, e.data);\n                    var collections = e.data;\n\n                    if (!collections.updated.length && !collections.destroyed.length && !collections.created.length) {\n                        return;\n                    }\n\n                    $.ajax(extend(true, {}, {\n                        success: function (response) {\n                            var responses = parseBatchResponse(response);\n                            var index = 0;\n                            var current;\n\n                            if (collections.updated.length) {\n                                current = responses[index];\n                                if (current.passed) {\n                                    // Pass either the obtained models or an empty array if only status codes are returned.\n                                    e.success(current.models.length ? current.models : [], \"update\");\n                                }\n                                index++;\n                            }\n                            if (collections.destroyed.length) {\n                                current = responses[index];\n                                if (current.passed) {\n                                    // For delete operations OData returns only status codes.\n                                    // Passing empty array to datasource will force it to correctly remove the deleted items from the pristine collection.\n                                    e.success([], \"destroy\");\n                                }\n                                index++;\n                            }\n                            if (collections.created.length) {\n                                current = responses[index];\n                                if (current.passed) {\n                                    e.success(current.models, \"create\");\n                                }\n                            }\n                        },\n                        error: function (response, status, error) {\n                            e.error(response, status, error);\n                        }\n                    }, options));\n                }\n            }\n        }\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.data.xml',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"data.xml\",\n    name: \"XML\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    hidden: true\n};\n\n/*jshint  eqnull: true, boss: true */\n(function($, undefined) {\n    var kendo = window.kendo,\n        isArray = Array.isArray,\n        isPlainObject = $.isPlainObject,\n        map = $.map,\n        each = $.each,\n        extend = $.extend,\n        getter = kendo.getter,\n        Class = kendo.Class;\n\n    var XmlDataReader = Class.extend({\n        init: function(options) {\n            var that = this,\n                total = options.total,\n                model = options.model,\n                parse = options.parse,\n                errors = options.errors,\n                serialize = options.serialize,\n                data = options.data;\n\n            if (model) {\n                if (isPlainObject(model)) {\n                    var base = options.modelBase || kendo.data.Model;\n\n                    if (model.fields) {\n                        each(model.fields, function(field, value) {\n                            if (isPlainObject(value) && value.field) {\n                                if (!kendo.isFunction(value.field)) {\n                                    value = extend(value, { field: that.getter(value.field) });\n                                }\n                            } else {\n                                value = { field: that.getter(value) };\n                            }\n                            model.fields[field] = value;\n                        });\n                    }\n\n                    var id = model.id;\n                    if (id) {\n                        var idField = {};\n\n                        idField[that.xpathToMember(id, true)] = { field : that.getter(id) };\n                        model.fields = extend(idField, model.fields);\n                        model.id = that.xpathToMember(id);\n                    }\n                    model = base.define(model);\n                }\n\n                that.model = model;\n            }\n\n            if (total) {\n                if (typeof total == \"string\") {\n                    total = that.getter(total);\n                    that.total = function(data) {\n                        return parseInt(total(data), 10);\n                    };\n                } else if (typeof total == \"function\"){\n                    that.total = total;\n                }\n            }\n\n            if (errors) {\n                if (typeof errors == \"string\") {\n                    errors = that.getter(errors);\n                    that.errors = function(data) {\n                        return errors(data) || null;\n                    };\n                } else if (typeof errors == \"function\"){\n                    that.errors = errors;\n                }\n            }\n\n            if (data) {\n                if (typeof data == \"string\") {\n                    data = that.xpathToMember(data);\n                    that.data = function(value) {\n                        var result = that.evaluate(value, data),\n                            modelInstance;\n\n                        result = isArray(result) ? result : [result];\n\n                        if (that.model && model.fields) {\n                            modelInstance = new that.model();\n\n                            return map(result, function(value) {\n                                if (value) {\n                                    var record = {}, field;\n\n                                    for (field in model.fields) {\n                                        record[field] = modelInstance._parse(field, model.fields[field].field(value));\n                                    }\n\n                                    return record;\n                                }\n                            });\n                        }\n\n                        return result;\n                    };\n                } else if (typeof data == \"function\") {\n                    that.data = data;\n                }\n            }\n\n            if (typeof parse == \"function\") {\n                var xmlParse = that.parse;\n\n                that.parse = function(data) {\n                    var xml = parse.call(that, data);\n                    return xmlParse.call(that, xml);\n                };\n            }\n\n            if (typeof serialize == \"function\") {\n                that.serialize = serialize;\n            }\n        },\n        total: function(result) {\n            return this.data(result).length;\n        },\n        errors: function(data) {\n            return data ? data.errors : null;\n        },\n        serialize: function(data) {\n            return data;\n        },\n        parseDOM: function(element) {\n            var result = {},\n                parsedNode,\n                node,\n                nodeType,\n                nodeName,\n                member,\n                attribute,\n                attributes = element.attributes,\n                attributeCount = attributes.length,\n                idx;\n\n            for (idx = 0; idx < attributeCount; idx++) {\n                attribute = attributes[idx];\n                result[\"@\" + attribute.nodeName] = attribute.nodeValue;\n            }\n\n            for (node = element.firstChild; node; node = node.nextSibling) {\n                nodeType = node.nodeType;\n\n                if (nodeType === 3 || nodeType === 4) {\n                    // text nodes or CDATA are stored as #text field\n                    result[\"#text\"] = node.nodeValue;\n                } else if (nodeType === 1) {\n                    // elements are stored as fields\n                    parsedNode = this.parseDOM(node);\n\n                    nodeName = node.nodeName;\n\n                    member = result[nodeName];\n\n                    if (isArray(member)) {\n                        // elements of same nodeName are stored as array\n                        member.push(parsedNode);\n                    } else if (member !== undefined) {\n                        member = [member, parsedNode];\n                    } else {\n                        member = parsedNode;\n                    }\n\n                    result[nodeName] = member;\n                }\n            }\n            return result;\n        },\n\n        evaluate: function(value, expression) {\n            var members = expression.split(\".\"),\n                member,\n                result,\n                length,\n                intermediateResult,\n                idx;\n\n            while (member = members.shift()) {\n                value = value[member];\n\n                if (isArray(value)) {\n                    result = [];\n                    expression = members.join(\".\");\n\n                    for (idx = 0, length = value.length; idx < length; idx++) {\n                        intermediateResult = this.evaluate(value[idx], expression);\n\n                        intermediateResult = isArray(intermediateResult) ? intermediateResult : [intermediateResult];\n\n                        result.push.apply(result, intermediateResult);\n                    }\n\n                    return result;\n                }\n            }\n\n            return value;\n        },\n\n        parse: function(xml) {\n            var documentElement,\n                tree,\n                result = {};\n\n            documentElement = xml.documentElement || $.parseXML(xml).documentElement;\n\n            tree = this.parseDOM(documentElement);\n\n            result[documentElement.nodeName] = tree;\n\n            return result;\n        },\n\n        xpathToMember: function(member, raw) {\n            if (!member) {\n                return \"\";\n            }\n\n            member = member.replace(/^\\//, \"\") // remove the first \"/\"\n                           .replace(/\\//g, \".\"); // replace all \"/\" with \".\"\n\n            if (member.indexOf(\"@\") >= 0) {\n                // replace @attribute with '[\"@attribute\"]'\n                return member.replace(/\\.?(@.*)/, raw? '$1':'[\"$1\"]');\n            }\n\n            if (member.indexOf(\"text()\") >= 0) {\n                // replace \".text()\" with '[\"#text\"]'\n                return member.replace(/(\\.?text\\(\\))/, raw? '#text':'[\"#text\"]');\n            }\n\n            return member;\n        },\n        getter: function(member) {\n            return getter(this.xpathToMember(member), true);\n        }\n    });\n\n    $.extend(true, kendo.data, {\n        XmlDataReader: XmlDataReader,\n        readers: {\n            xml: XmlDataReader\n        }\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.data',[ \"./kendo.core\", \"./kendo.data.odata\", \"./kendo.data.xml\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"data\",\n    name: \"Data source\",\n    category: \"framework\",\n    description: \"Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.\",\n    depends: [ \"core\" ],\n    features: [ {\n        id: \"data-odata\",\n        name: \"OData\",\n        description: \"Support for accessing Open Data Protocol (OData) services.\",\n        depends: [ \"data.odata\" ]\n    }, {\n        id: \"data-signalr\",\n        name: \"SignalR\",\n        description: \"Support for binding to SignalR hubs.\",\n        depends: [ \"data.signalr\" ]\n    }, {\n        id: \"data-XML\",\n        name: \"XML\",\n        description: \"Support for binding to XML.\",\n        depends: [ \"data.xml\" ]\n    }]\n};\n\n/*jshint eqnull: true, loopfunc: true, evil: true */\n(function($, undefined) {\n    var extend = $.extend,\n        proxy = $.proxy,\n        isPlainObject = $.isPlainObject,\n        isEmptyObject = $.isEmptyObject,\n        isArray = $.isArray,\n        grep = $.grep,\n        ajax = $.ajax,\n        map,\n        each = $.each,\n        noop = $.noop,\n        kendo = window.kendo,\n        isFunction = kendo.isFunction,\n        Observable = kendo.Observable,\n        Class = kendo.Class,\n        STRING = \"string\",\n        FUNCTION = \"function\",\n        ASCENDING = \"asc\",\n        CREATE = \"create\",\n        READ = \"read\",\n        UPDATE = \"update\",\n        DESTROY = \"destroy\",\n        CHANGE = \"change\",\n        SYNC = \"sync\",\n        GET = \"get\",\n        ERROR = \"error\",\n        REQUESTSTART = \"requestStart\",\n        PROGRESS = \"progress\",\n        REQUESTEND = \"requestEnd\",\n        crud = [CREATE, READ, UPDATE, DESTROY],\n        identity = function(o) { return o; },\n        getter = kendo.getter,\n        stringify = kendo.stringify,\n        math = Math,\n        push = [].push,\n        join = [].join,\n        pop = [].pop,\n        splice = [].splice,\n        shift = [].shift,\n        slice = [].slice,\n        unshift = [].unshift,\n        toString = {}.toString,\n        stableSort = kendo.support.stableSort,\n        dateRegExp = /^\\/Date\\((.*?)\\)\\/$/,\n        objectKeys = [];\n\n    var ObservableArray = Observable.extend({\n        init: function(array, type) {\n            var that = this;\n\n            that.type = type || ObservableObject;\n\n            Observable.fn.init.call(that);\n\n            that.length = array.length;\n\n            that.wrapAll(array, that);\n        },\n\n        at: function(index) {\n            return this[index];\n        },\n\n        toJSON: function(serializeFunctions) {\n            var idx, length = this.length, value, json = new Array(length);\n\n            for (idx = 0; idx < length; idx++){\n                value = this[idx];\n\n                if (value instanceof ObservableObject) {\n                    value = value.toJSON(serializeFunctions);\n                }\n\n                json[idx] = value;\n            }\n\n            return json;\n        },\n\n        parent: noop,\n\n        wrapAll: function(source, target) {\n            var that = this,\n                idx,\n                length,\n                parent = function() {\n                    return that;\n                };\n\n            target = target || [];\n\n            for (idx = 0, length = source.length; idx < length; idx++) {\n                target[idx] = that.wrap(source[idx], parent);\n            }\n\n            return target;\n        },\n\n        wrap: function(object, parent) {\n            var that = this,\n                observable;\n\n            if (object !== null && toString.call(object) === \"[object Object]\") {\n                observable = object instanceof that.type || object instanceof Model;\n\n                if (!observable) {\n                    object = object instanceof ObservableObject ? object.toJSON() : object;\n                    object = new that.type(object);\n                }\n\n                object.parent = parent;\n\n                object.bind(CHANGE, function(e) {\n                    that.trigger(CHANGE, {\n                        field: e.field,\n                        node: e.node,\n                        index: e.index,\n                        items: e.items || [this],\n                        action: e.node ? (e.action || \"itemloaded\") : \"itemchange\"\n                    });\n                });\n            }\n\n            return object;\n        },\n\n        push: function() {\n            var index = this.length,\n                items = this.wrapAll(arguments),\n                result;\n\n            result = push.apply(this, items);\n\n            if (!this.omitChangeEvent) {\n                this.trigger(CHANGE, {\n                    action: \"add\",\n                    index: index,\n                    items: items\n                });\n            }\n\n            return result;\n        },\n\n        slice: slice,\n\n        sort: [].sort,\n\n        join: join,\n\n        pop: function() {\n            var length = this.length, result = pop.apply(this);\n\n            if (length) {\n                this.trigger(CHANGE, {\n                    action: \"remove\",\n                    index: length - 1,\n                    items:[result]\n                });\n            }\n\n            return result;\n        },\n\n        splice: function(index, howMany, item) {\n            var items = this.wrapAll(slice.call(arguments, 2)),\n                result, i, len;\n\n            result = splice.apply(this, [index, howMany].concat(items));\n\n            if (result.length) {\n                if (!this.omitChangeEvent) {\n                    this.trigger(CHANGE, {\n                        action: \"remove\",\n                        index: index,\n                        items: result\n                    });\n                }\n\n                for (i = 0, len = result.length; i < len; i++) {\n                    if (result[i] && result[i].children) {\n                        result[i].unbind(CHANGE);\n                    }\n                }\n            }\n\n            if (item) {\n                if (!this.omitChangeEvent) {\n                    this.trigger(CHANGE, {\n                        action: \"add\",\n                        index: index,\n                        items: items\n                    });\n                }\n            }\n            return result;\n        },\n\n        shift: function() {\n            var length = this.length, result = shift.apply(this);\n\n            if (length) {\n                this.trigger(CHANGE, {\n                    action: \"remove\",\n                    index: 0,\n                    items:[result]\n                });\n            }\n\n            return result;\n        },\n\n        unshift: function() {\n            var items = this.wrapAll(arguments),\n                result;\n\n            result = unshift.apply(this, items);\n\n            this.trigger(CHANGE, {\n                action: \"add\",\n                index: 0,\n                items: items\n            });\n\n            return result;\n        },\n\n        indexOf: function(item) {\n            var that = this,\n                idx,\n                length;\n\n            for (idx = 0, length = that.length; idx < length; idx++) {\n                if (that[idx] === item) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        forEach: function(callback, thisArg) {\n            var idx = 0;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                callback.call(context, this[idx], idx, this);\n            }\n        },\n\n        map: function(callback, thisArg) {\n            var idx = 0;\n            var result = [];\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                result[idx] = callback.call(context, this[idx], idx, this);\n            }\n\n            return result;\n        },\n\n        reduce: function(callback) {\n            var idx = 0,\n                result,\n                length = this.length;\n\n            if (arguments.length == 2) {\n                result = arguments[1];\n            } else if (idx < length) {\n                result = this[idx++];\n            }\n\n            for (; idx < length; idx++) {\n                result = callback(result, this[idx], idx, this);\n            }\n\n            return result;\n        },\n\n        reduceRight: function(callback) {\n            var idx = this.length - 1,\n                result;\n\n            if (arguments.length == 2) {\n                result = arguments[1];\n            } else if (idx > 0) {\n                result = this[idx--];\n            }\n\n            for (; idx >= 0; idx--) {\n                result = callback(result, this[idx], idx, this);\n            }\n\n            return result;\n        },\n\n        filter: function(callback, thisArg) {\n            var idx = 0;\n            var result = [];\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (callback.call(context, item, idx, this)) {\n                    result[result.length] = item;\n                }\n            }\n\n            return result;\n        },\n\n        find: function(callback, thisArg) {\n            var idx = 0;\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (callback.call(context, item, idx, this)) {\n                    return item;\n                }\n            }\n        },\n\n        every: function(callback, thisArg) {\n            var idx = 0;\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (!callback.call(context, item, idx, this)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        some: function(callback, thisArg) {\n            var idx = 0;\n            var item;\n            var length = this.length;\n            var context = thisArg || window;\n\n            for (; idx < length; idx++) {\n                item = this[idx];\n                if (callback.call(context, item, idx, this)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        // non-standard collection methods\n        remove: function(item) {\n            var idx = this.indexOf(item);\n\n            if (idx !== -1) {\n                this.splice(idx, 1);\n            }\n        },\n\n        empty: function() {\n            this.splice(0, this.length);\n        }\n    });\n\n    // Polyfill for Symbol.iterator\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator && !ObservableArray.prototype[Symbol.iterator]) {\n        ObservableArray.prototype[Symbol.iterator] = [][Symbol.iterator];\n    }\n\n    var LazyObservableArray = ObservableArray.extend({\n        init: function (data, type, events) {\n            Observable.fn.init.call(this);\n\n            this.type = type || ObservableObject;\n\n            if (events) {\n                this._events = events;\n            }\n\n            for (var idx = 0; idx < data.length; idx++) {\n                this[idx] = data[idx];\n            }\n\n            this.length = idx;\n            this._parent = proxy(function() { return this; }, this);\n        },\n        at: function(index) {\n            var item = this[index];\n\n            if (!(item instanceof this.type)) {\n                item = this[index] = this.wrap(item, this._parent);\n            } else {\n                item.parent = this._parent;\n            }\n\n            return item;\n        }\n    });\n\n    function eventHandler(context, type, field, prefix) {\n        return function(e) {\n            var event = {}, key;\n\n            for (key in e) {\n                event[key] = e[key];\n            }\n\n            if (prefix) {\n                event.field = field + \".\" + e.field;\n            } else {\n                event.field = field;\n            }\n\n            if (type == CHANGE && context._notifyChange) {\n                context._notifyChange(event);\n            }\n\n            context.trigger(type, event);\n        };\n    }\n\n    function ownKeys (value, ignoreObjectKeys) {\n        var props = [];\n        var keys, filteredObjectKeys;\n\n        value = value || {};\n\n        keys = Object.getOwnPropertyNames(value);\n        filteredObjectKeys = objectKeys.filter(function(key){\n            return keys.indexOf(key) < 0;\n        });\n\n        while (value) {\n            Object.getOwnPropertyNames(value).forEach(function (prop) {\n                if (props.indexOf(prop) === -1 && (!ignoreObjectKeys || filteredObjectKeys.indexOf(prop) < 0)) {\n                    props.push(prop);\n                }\n            });\n            value = Object.getPrototypeOf(value);\n        }\n\n        return props;\n    }\n\n    objectKeys = ownKeys({}, false);\n\n    var ObservableObject = Observable.extend({\n        init: function(value) {\n            var that = this,\n                member,\n                keys = ownKeys(value, true),\n                parent = function() {\n                    return that;\n                };\n\n            Observable.fn.init.call(this);\n\n            this._handlers = {};\n\n            keys.forEach(function(field){\n                member = value[field];\n\n                if (typeof member === \"object\" && member && !member.getTime && field.charAt(0) != \"_\") {\n                    member = that.wrap(member, field, parent);\n                }\n\n                that[field] = member;\n            });\n\n            that.uid = kendo.guid();\n        },\n\n        shouldSerialize: function(field, serializeFunctions) {\n            return this.hasOwnProperty(field) && field !== \"_handlers\" && field !== \"_events\" && ((serializeFunctions && serializeFunctions[field]) || typeof this[field] !== FUNCTION) && field !== \"uid\";\n        },\n\n        forEach: function(f) {\n            for (var i in this) {\n                if (this.shouldSerialize(i)) {\n                    f(this[i], i);\n                }\n            }\n        },\n\n        toJSON: function (serializeFunctions) {\n            var result = {}, value, field;\n\n            for (field in this) {\n                if (this.shouldSerialize(field, serializeFunctions)) {\n                    value = this[field];\n\n                    if (value instanceof ObservableObject || value instanceof ObservableArray) {\n                        value = value.toJSON(serializeFunctions);\n                    }\n\n                    result[field] = value;\n                }\n            }\n\n            return result;\n        },\n\n        get: function(field) {\n            var that = this, result;\n\n            that.trigger(GET, { field: field });\n\n            if (field === \"this\") {\n                result = that;\n            } else {\n                result = kendo.getter(field, true)(that);\n            }\n\n            return result;\n        },\n\n        _set: function(field, value) {\n            var that = this;\n            var composite = field.indexOf(\".\") >= 0;\n\n            if (composite) {\n                var paths = field.split(\".\"),\n                    path = \"\";\n\n                while (paths.length > 1) {\n                    path += paths.shift();\n                    var obj = kendo.getter(path, true)(that);\n                    if (obj instanceof ObservableObject) {\n                        obj.set(paths.join(\".\"), value);\n                        return composite;\n                    }\n                    path += \".\";\n                }\n            }\n\n            kendo.setter(field)(that, value);\n\n            return composite;\n        },\n\n        set: function(field, value) {\n            var that = this,\n                isSetPrevented = false,\n                composite = field.indexOf(\".\") >= 0,\n                current = kendo.getter(field, true)(that);\n\n            if (current !== value) {\n                if (current instanceof Observable && this._handlers[field]) {\n                    if (this._handlers[field].get) {\n                       current.unbind(GET, this._handlers[field].get);\n                    }\n                    current.unbind(CHANGE, this._handlers[field].change);\n                }\n\n                isSetPrevented = that.trigger(\"set\", { field: field, value: value });\n\n                if (!isSetPrevented) {\n                    if (!composite) {\n                        value = that.wrap(value, field, function() { return that; });\n                    }\n                    if (!that._set(field, value) || field.indexOf(\"(\") >= 0 || field.indexOf(\"[\") >= 0) {\n                        that.trigger(CHANGE, { field: field });\n                    }\n                }\n            }\n\n            return isSetPrevented;\n        },\n\n        parent: noop,\n\n        wrap: function(object, field, parent) {\n            var that = this;\n            var get;\n            var change;\n            var type = toString.call(object);\n\n            if (object != null && (type === \"[object Object]\" || type === \"[object Array]\")) {\n                var isObservableArray = object instanceof ObservableArray;\n                var isDataSource = object instanceof DataSource;\n\n                if (type === \"[object Object]\" && !isDataSource && !isObservableArray) {\n                    if (!(object instanceof ObservableObject)) {\n                        object = new ObservableObject(object);\n                    }\n\n                    get = eventHandler(that, GET, field, true);\n                    object.bind(GET, get);\n                    change = eventHandler(that, CHANGE, field, true);\n                    object.bind(CHANGE, change);\n\n                    that._handlers[field] = { get: get, change: change };\n                } else if (type === \"[object Array]\" || isObservableArray || isDataSource) {\n                    if (!isObservableArray && !isDataSource) {\n                        object = new ObservableArray(object);\n                    }\n\n                    change = eventHandler(that, CHANGE, field, false);\n\n                    object.bind(CHANGE, change);\n\n                    that._handlers[field] = { change: change };\n                }\n\n                object.parent = parent;\n            }\n\n            return object;\n        }\n    });\n\n    function equal(x, y) {\n        if (x === y) {\n            return true;\n        }\n\n        var xtype = kendo.type(x), ytype = kendo.type(y), field;\n\n        if (xtype !== ytype) {\n            return false;\n        }\n\n        if (xtype === \"date\") {\n            return x.getTime() === y.getTime();\n        }\n\n        if (xtype !== \"object\" && xtype !== \"array\") {\n            return false;\n        }\n\n        for (field in x) {\n            if (!equal(x[field], y[field])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    var parsers = {\n        \"number\": function(value) {\n            if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n            }\n            return kendo.parseFloat(value);\n        },\n\n        \"date\": function(value) {\n            if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n            }\n            return kendo.parseDate(value);\n        },\n\n        \"boolean\": function(value) {\n            if (typeof value === STRING) {\n                if (value.toLowerCase() === \"null\") {\n                    return null;\n                } else {\n                    return value.toLowerCase() === \"true\";\n                }\n            }\n            return value != null ? !!value : value;\n        },\n\n        \"string\": function(value) {\n            if (typeof value === STRING && value.toLowerCase() === \"null\") {\n                return null;\n            }\n            return value != null ? (value + \"\") : value;\n        },\n\n        \"default\": function(value) {\n            return value;\n        }\n    };\n\n    var defaultValues = {\n        \"string\": \"\",\n        \"number\": 0,\n        \"date\": new Date(),\n        \"boolean\": false,\n        \"default\": \"\"\n    };\n\n    function getFieldByName(obj, name) {\n        var field,\n            fieldName;\n\n        for (fieldName in obj) {\n            field = obj[fieldName];\n            if (isPlainObject(field) && field.field && field.field === name) {\n                return field;\n            } else if (field === name) {\n                return field;\n            }\n        }\n        return null;\n    }\n\n    var Model = ObservableObject.extend({\n        init: function(data) {\n            var that = this;\n\n            if (!data || $.isEmptyObject(data)) {\n                data = $.extend({}, that.defaults, data);\n\n                if (that._initializers) {\n                    for (var idx = 0; idx < that._initializers.length; idx++) {\n                         var name = that._initializers[idx];\n                         data[name] = that.defaults[name]();\n                    }\n                }\n            }\n\n            ObservableObject.fn.init.call(that, data);\n\n            that.dirty = false;\n            that.dirtyFields = {};\n\n            if (that.idField) {\n                that.id = that.get(that.idField);\n\n                if (that.id === undefined) {\n                    that.id = that._defaultId;\n                }\n            }\n        },\n\n        shouldSerialize: function(field) {\n            return ObservableObject.fn.shouldSerialize.call(this, field) &&\n                field !== \"uid\" && !(this.idField !== \"id\" && field === \"id\") &&\n                field !== \"dirty\" &&  field !== \"dirtyFields\" && field !== \"_accessors\";\n        },\n\n        _parse: function(field, value) {\n            var that = this,\n                fieldName = field,\n                fields = (that.fields || {}),\n                parse;\n\n            field = fields[field];\n            if (!field) {\n                field = getFieldByName(fields, fieldName);\n            }\n            if (field) {\n                parse = field.parse;\n                if (!parse && field.type) {\n                    parse = parsers[field.type.toLowerCase()];\n                }\n            }\n\n            return parse ? parse(value) : value;\n        },\n\n        _notifyChange: function(e) {\n            var action = e.action;\n\n            if (action == \"add\" || action == \"remove\") {\n                this.dirty = true;\n                this.dirtyFields[e.field] = true;\n            }\n        },\n\n        editable: function(field) {\n            field = (this.fields || {})[field];\n            return field ? field.editable !== false : true;\n        },\n\n        set: function(field, value) {\n            var that = this;\n            var dirty = that.dirty;\n\n            if (that.editable(field)) {\n                value = that._parse(field, value);\n\n                if (!equal(value, that.get(field))) {\n                    that.dirty = true;\n                    that.dirtyFields[field] = true;\n\n                    if (ObservableObject.fn.set.call(that, field, value) && !dirty) {\n                        that.dirty = dirty;\n\n                        if (!that.dirty) {\n                            that.dirtyFields[field] = false;\n                        }\n                    }\n                } else {\n                    that.trigger(\"equalSet\", { field: field, value: value });\n                }\n            }\n        },\n\n        accept: function(data) {\n            var that = this,\n                parent = function() { return that; },\n                field;\n\n            for (field in data) {\n                var value = data[field];\n\n                if (field.charAt(0) != \"_\") {\n                    value = that.wrap(data[field], field, parent);\n                }\n\n                that._set(field, value);\n            }\n\n            if (that.idField) {\n                that.id = that.get(that.idField);\n            }\n\n            that.dirty = false;\n            that.dirtyFields = {};\n        },\n\n        isNew: function() {\n            return this.id === this._defaultId;\n        }\n    });\n\n    Model.define = function(base, options) {\n        if (options === undefined) {\n            options = base;\n            base = Model;\n        }\n\n        var model,\n            proto = extend({ defaults: {} }, options),\n            name,\n            field,\n            type,\n            value,\n            idx,\n            length,\n            fields = {},\n            originalName,\n            id = proto.id,\n            functionFields = [];\n\n        if (id) {\n            proto.idField = id;\n        }\n\n        if (proto.id) {\n            delete proto.id;\n        }\n\n        if (id) {\n            proto.defaults[id] = proto._defaultId = \"\";\n        }\n\n        if (toString.call(proto.fields) === \"[object Array]\") {\n            for (idx = 0, length = proto.fields.length; idx < length; idx++) {\n                field = proto.fields[idx];\n                if (typeof field === STRING) {\n                    fields[field] = {};\n                } else if (field.field) {\n                    fields[field.field] = field;\n                }\n            }\n            proto.fields = fields;\n        }\n\n        for (name in proto.fields) {\n            field = proto.fields[name];\n            type = field.type || \"default\";\n            value = null;\n            originalName = name;\n\n            name = typeof (field.field) === STRING ? field.field : name;\n\n            if (!field.nullable) {\n                value = proto.defaults[originalName !== name ? originalName : name] = field.defaultValue !== undefined ? field.defaultValue : defaultValues[type.toLowerCase()];\n\n                if (typeof value === \"function\") {\n                    functionFields.push(name);\n                }\n            }\n\n            if (options.id === name) {\n                proto._defaultId = value;\n            }\n\n            proto.defaults[originalName !== name ? originalName : name] = value;\n\n            field.parse = field.parse || parsers[type];\n        }\n\n        if (functionFields.length > 0) {\n            proto._initializers = functionFields;\n        }\n\n        model = base.extend(proto);\n        model.define = function(options) {\n            return Model.define(model, options);\n        };\n\n        if (proto.fields) {\n            model.fields = proto.fields;\n            model.idField = proto.idField;\n        }\n\n        return model;\n    };\n\n    var Comparer = {\n        selector: function(field) {\n            return isFunction(field) ? field : getter(field);\n        },\n\n        compare: function(field) {\n            var selector = this.selector(field);\n            return function (a, b) {\n                a = selector(a);\n                b = selector(b);\n\n                if (a == null && b == null) {\n                    return 0;\n                }\n\n                if (a == null) {\n                    return -1;\n                }\n\n                if (b == null) {\n                    return 1;\n                }\n\n                if (a.localeCompare) {\n                    return a.localeCompare(b);\n                }\n\n                return a > b ? 1 : (a < b ? -1 : 0);\n            };\n        },\n\n        create: function(sort) {\n            var compare = sort.compare || this.compare(sort.field);\n\n            if (sort.dir == \"desc\") {\n                return function(a, b) {\n                    return compare(b, a, true);\n                };\n            }\n\n            return compare;\n        },\n\n        combine: function(comparers) {\n            return function(a, b) {\n                var result = comparers[0](a, b),\n                    idx,\n                    length;\n\n                for (idx = 1, length = comparers.length; idx < length; idx ++) {\n                    result = result || comparers[idx](a, b);\n                }\n\n                return result;\n            };\n        }\n    };\n\n    var StableComparer = extend({}, Comparer, {\n        asc: function(field) {\n            var selector = this.selector(field);\n            return function (a, b) {\n                var valueA = selector(a);\n                var valueB = selector(b);\n\n                if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                    valueA = valueA.getTime();\n                    valueB = valueB.getTime();\n                }\n\n                if (valueA === valueB) {\n                    return a.__position - b.__position;\n                }\n\n                if (valueA == null) {\n                    return -1;\n                }\n\n                if (valueB == null) {\n                    return 1;\n                }\n\n                if (valueA.localeCompare) {\n                    return valueA.localeCompare(valueB);\n                }\n\n                return valueA > valueB ? 1 : -1;\n            };\n        },\n\n        desc: function(field) {\n            var selector = this.selector(field);\n            return function (a, b) {\n                var valueA = selector(a);\n                var valueB = selector(b);\n\n                if (valueA && valueA.getTime && valueB && valueB.getTime) {\n                    valueA = valueA.getTime();\n                    valueB = valueB.getTime();\n                }\n\n                if (valueA === valueB) {\n                    return a.__position - b.__position;\n                }\n\n                if (valueA == null) {\n                    return 1;\n                }\n\n                if (valueB == null) {\n                    return -1;\n                }\n\n                if (valueB.localeCompare) {\n                    return valueB.localeCompare(valueA);\n                }\n\n                return valueA < valueB ? 1 : -1;\n            };\n        },\n        create: function(sort) {\n           return this[sort.dir](sort.field);\n        }\n    });\n\n    map = function (array, callback) {\n        var idx, length = array.length, result = new Array(length);\n\n        for (idx = 0; idx < length; idx++) {\n            result[idx] = callback(array[idx], idx, array);\n        }\n\n        return result;\n    };\n\n    var operators = (function(){\n\n        function quote(str) {\n            if (typeof str == \"string\") {\n                str = str.replace(/[\\r\\n]+/g, \"\");\n            }\n            return JSON.stringify(str);\n        }\n\n        function textOp(impl) {\n            return function(a, b, ignore, accentFoldingFiltering) {\n                b += \"\";\n                if (ignore) {\n                    a = \"(\" + a + \" + '').toString()\" + ((accentFoldingFiltering) ? \".toLocaleLowerCase('\" + accentFoldingFiltering  +\"')\" : \".toLowerCase()\");\n                    b = ((accentFoldingFiltering) ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase());\n                }\n                return impl(a, quote(b), ignore);\n            };\n        }\n\n        function operator(op, a, b, ignore, accentFoldingFiltering) {\n            if (b != null) {\n                if (typeof b === STRING) {\n                    var date = dateRegExp.exec(b);\n                    if (date) {\n                        b = new Date(+date[1]);\n                    } else if (ignore) {\n                        b = quote(((accentFoldingFiltering) ? b.toLocaleLowerCase(accentFoldingFiltering) : b.toLowerCase()));\n                        a = \"((\" + a + \" || '')+'')\" + ((accentFoldingFiltering) ? \".toLocaleLowerCase('\" + accentFoldingFiltering  +\"')\" : \".toLowerCase()\");\n                    } else {\n                        b = quote(b);\n                    }\n                }\n\n                if (b.getTime) {\n                    //b looks like a Date\n                    a = \"(\" + a + \"&&\" + a + \".getTime?\" + a + \".getTime():\" + a + \")\";\n                    b = b.getTime();\n                }\n            }\n\n            return a + \" \" + op + \" \" + b;\n        }\n\n        function getMatchRegexp(pattern) {\n            // take a pattern, as supported by Excel match filter, and\n            // convert it to the equivalent JS regular expression.\n            // Excel patterns support:\n            //\n            //   * - match any sequence of characters\n            //   ? - match a single character\n            //\n            // to match a literal * or ?, they must be prefixed by a tilde (~)\n            for (var rx = \"/^\", esc = false, i = 0; i < pattern.length; ++i) {\n                var ch = pattern.charAt(i);\n                if (esc) {\n                    rx += \"\\\\\" + ch;\n                } else if (ch == \"~\") {\n                    esc = true;\n                    continue;\n                } else if (ch == \"*\") {\n                    rx += \".*\";\n                } else if (ch == \"?\") {\n                    rx += \".\";\n                } else if (\".+^$()[]{}|\\\\/\\n\\r\\u2028\\u2029\\xA0\".indexOf(ch) >= 0) {\n                    rx += \"\\\\\" + ch;\n                } else {\n                    rx += ch;\n                }\n                esc = false;\n            }\n            return rx + \"$/\";\n        }\n\n        return {\n            quote: function(value) {\n                if (value && value.getTime) {\n                    return \"new Date(\" + value.getTime() + \")\";\n                }\n                return quote(value);\n            },\n            eq: function(a, b, ignore, accentFoldingFiltering) {\n                return operator(\"==\", a, b, ignore, accentFoldingFiltering);\n            },\n            neq: function(a, b, ignore, accentFoldingFiltering) {\n                return operator(\"!=\", a, b, ignore, accentFoldingFiltering);\n            },\n            gt: function(a, b, ignore) {\n                return operator(\">\", a, b, ignore);\n            },\n            gte: function(a, b, ignore) {\n                return operator(\">=\", a, b, ignore);\n            },\n            lt: function(a, b, ignore) {\n                return operator(\"<\", a, b, ignore);\n            },\n            lte: function(a, b, ignore) {\n                return operator(\"<=\", a, b, ignore);\n            },\n            startswith: textOp(function(a, b) {\n                return a + \".lastIndexOf(\" + b + \", 0) == 0\";\n            }),\n            doesnotstartwith: textOp(function(a, b) {\n                return a + \".lastIndexOf(\" + b + \", 0) == -1\";\n            }),\n            endswith: textOp(function(a, b) {\n                var n = b ? b.length - 2 : 0;\n                return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") >= 0\";\n            }),\n            doesnotendwith: textOp(function(a, b) {\n                var n = b ? b.length - 2 : 0;\n                return a + \".indexOf(\" + b + \", \" + a + \".length - \" + n + \") < 0\";\n            }),\n            contains: textOp(function(a, b) {\n                return a + \".indexOf(\" + b + \") >= 0\";\n            }),\n            doesnotcontain: textOp(function(a, b) {\n                return a + \".indexOf(\" + b + \") == -1\";\n            }),\n            matches: textOp(function(a, b){\n                b = b.substring(1, b.length - 1);\n                return getMatchRegexp(b) + \".test(\" + a + \")\";\n            }),\n            doesnotmatch: textOp(function(a, b){\n                b = b.substring(1, b.length - 1);\n                return \"!\" + getMatchRegexp(b) + \".test(\" + a + \")\";\n            }),\n            isempty: function(a) {\n                return a + \" === ''\";\n            },\n            isnotempty: function(a) {\n                return a + \" !== ''\";\n            },\n            isnull: function(a) {\n                return \"(\" + a + \" == null)\";\n            },\n            isnotnull: function(a) {\n                return \"(\" + a + \" != null)\";\n            },\n            isnullorempty: function(a) {\n                return \"(\" + a + \" === null) || (\" + a + \" === '')\";\n            },\n            isnotnullorempty: function(a) {\n                return \"(\" + a + \" !== null) && (\" + a + \" !== '')\";\n            }\n        };\n    })();\n\n    function Query(data) {\n        this.data = data || [];\n    }\n\n    Query.filterExpr = function(expression) {\n        var expressions = [],\n            logic = { and: \" && \", or: \" || \" },\n            idx,\n            length,\n            filter,\n            expr,\n            fieldFunctions = [],\n            operatorFunctions = [],\n            field,\n            operator,\n            filters = expression.filters;\n\n        for (idx = 0, length = filters.length; idx < length; idx++) {\n            filter = filters[idx];\n            field = filter.field;\n            operator = filter.operator;\n\n            if (filter.filters) {\n                expr = Query.filterExpr(filter);\n                //Nested function fields or operators - update their index e.g. __o[0] -> __o[1]\n                filter = expr.expression\n                .replace(/__o\\[(\\d+)\\]/g, function(match, index) {\n                    index = +index;\n                    return \"__o[\" + (operatorFunctions.length + index) + \"]\";\n                })\n                .replace(/__f\\[(\\d+)\\]/g, function(match, index) {\n                    index = +index;\n                    return \"__f[\" + (fieldFunctions.length + index) + \"]\";\n                });\n\n                operatorFunctions.push.apply(operatorFunctions, expr.operators);\n                fieldFunctions.push.apply(fieldFunctions, expr.fields);\n            } else {\n                if (typeof field === FUNCTION) {\n                    expr = \"__f[\" + fieldFunctions.length +\"](d)\";\n                    fieldFunctions.push(field);\n                } else {\n                    expr = kendo.expr(field);\n                }\n\n                if (typeof operator === FUNCTION) {\n                    filter = \"__o[\" + operatorFunctions.length + \"](\" + expr + \", \" + operators.quote(filter.value) + \")\";\n                    operatorFunctions.push(operator);\n                } else {\n                    filter = operators[(operator || \"eq\").toLowerCase()](expr, filter.value, filter.ignoreCase !== undefined? filter.ignoreCase : true, expression.accentFoldingFiltering);\n                }\n            }\n\n            expressions.push(filter);\n        }\n\n        return  { expression: \"(\" + expressions.join(logic[expression.logic]) + \")\", fields: fieldFunctions, operators: operatorFunctions };\n    };\n\n    function normalizeSort(field, dir) {\n        if (field) {\n            var descriptor = typeof field === STRING ? { field: field, dir: dir } : field,\n            descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n            return grep(descriptors, function(d) { return !!d.dir; });\n        }\n    }\n\n    function sortFields(sorts, dir) {\n        var sortObject = {};\n\n        if (sorts) {\n            var descriptor = typeof sorts === STRING ? { field: sorts, dir: dir } : sorts,\n            descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n            for (var i = 0; i < descriptors.length; i++) {\n                sortObject[descriptors[i].field] = { dir: descriptors[i].dir, index: i + 1 };\n            }\n        }\n\n        return sortObject;\n    }\n\n    var operatorMap = {\n        \"==\": \"eq\",\n        equals: \"eq\",\n        isequalto: \"eq\",\n        equalto: \"eq\",\n        equal: \"eq\",\n        \"!=\": \"neq\",\n        ne: \"neq\",\n        notequals: \"neq\",\n        isnotequalto: \"neq\",\n        notequalto: \"neq\",\n        notequal: \"neq\",\n        \"<\": \"lt\",\n        islessthan: \"lt\",\n        lessthan: \"lt\",\n        less: \"lt\",\n        \"<=\": \"lte\",\n        le: \"lte\",\n        islessthanorequalto: \"lte\",\n        lessthanequal: \"lte\",\n        \">\": \"gt\",\n        isgreaterthan: \"gt\",\n        greaterthan: \"gt\",\n        greater: \"gt\",\n        \">=\": \"gte\",\n        isgreaterthanorequalto: \"gte\",\n        greaterthanequal: \"gte\",\n        ge: \"gte\",\n        notsubstringof: \"doesnotcontain\",\n        isnull: \"isnull\",\n        isempty: \"isempty\",\n        isnotempty: \"isnotempty\"\n    };\n\n    function normalizeOperator(expression) {\n        var idx,\n        length,\n        filter,\n        operator,\n        filters = expression.filters;\n\n        if (filters) {\n            for (idx = 0, length = filters.length; idx < length; idx++) {\n                filter = filters[idx];\n                operator = filter.operator;\n\n                if (operator && typeof operator === STRING) {\n                    filter.operator = operatorMap[operator.toLowerCase()] || operator;\n                }\n\n                normalizeOperator(filter);\n            }\n        }\n    }\n\n    function normalizeFilter(expression) {\n        if (expression && !isEmptyObject(expression)) {\n            if (isArray(expression) || !expression.filters) {\n                expression = {\n                    logic: \"and\",\n                    filters: isArray(expression) ? expression : [expression]\n                };\n            }\n\n            normalizeOperator(expression);\n\n            return expression;\n        }\n    }\n\n    Query.normalizeFilter = normalizeFilter;\n\n    function compareDescriptor(f1, f2) {\n        if (f1.logic || f2.logic) {\n            return false;\n        }\n\n        return f1.field === f2.field && f1.value === f2.value && f1.operator === f2.operator;\n    }\n\n    function normalizeDescriptor(filter) {\n        filter = filter || {};\n\n        if (isEmptyObject(filter)) {\n            return { logic: \"and\", filters: [] };\n        }\n\n        return normalizeFilter(filter);\n    }\n\n    function fieldComparer(a, b) {\n        if (b.logic || (a.field > b.field)) {\n            return 1;\n        } else if (a.field < b.field) {\n            return -1;\n        } else {\n            return 0;\n        }\n    }\n\n    function compareFilters(expr1, expr2) {\n        expr1 = normalizeDescriptor(expr1);\n        expr2 = normalizeDescriptor(expr2);\n\n        if (expr1.logic !== expr2.logic) {\n            return false;\n        }\n\n        var f1, f2;\n        var filters1 = (expr1.filters || []).slice();\n        var filters2 = (expr2.filters || []).slice();\n\n        if (filters1.length !== filters2.length) {\n            return false;\n        }\n\n        filters1 = filters1.sort(fieldComparer);\n        filters2 = filters2.sort(fieldComparer);\n\n        for (var idx = 0; idx < filters1.length; idx++) {\n            f1 = filters1[idx];\n            f2 = filters2[idx];\n\n            if (f1.logic && f2.logic) {\n                if (!compareFilters(f1, f2)) {\n                    return false;\n                }\n            } else if (!compareDescriptor(f1, f2)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    Query.compareFilters = compareFilters;\n\n    function normalizeAggregate(expressions) {\n        return isArray(expressions) ? expressions : [expressions];\n    }\n\n    function normalizeGroup(field, dir, compare, skipItemSorting) {\n        var descriptor = typeof field === STRING ? { field: field, dir: dir, compare: compare, skipItemSorting : skipItemSorting } : field,\n        descriptors = isArray(descriptor) ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n        return map(descriptors, function(d) {\n            return {\n                field: d.field,\n                dir: d.dir || \"asc\",\n                aggregates: d.aggregates,\n                compare: d.compare,\n                skipItemSorting: d.skipItemSorting\n            };\n        });\n    }\n\n    function normalizeGroupWithoutCompare(field, dir, compare) {\n        var descriptors = normalizeGroup(field, dir, compare);\n\n        for (var i = 0; i < descriptors.length; i++) {\n            delete descriptors[i].compare;\n        }\n\n        return descriptors;\n    }\n\n    function anyGroupDescriptorHasCompare(groupDescriptors) {\n        var descriptors = isArray(groupDescriptors) ? groupDescriptors : [groupDescriptors];\n\n        for (var i = 0; i < descriptors.length; i++) {\n            if (descriptors[i] && isFunction(descriptors[i].compare)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    Query.prototype = {\n        toArray: function () {\n            return this.data;\n        },\n        range: function(index, count) {\n            return new Query(this.data.slice(index, index + count));\n        },\n        skip: function (count) {\n            return new Query(this.data.slice(count));\n        },\n        take: function (count) {\n            return new Query(this.data.slice(0, count));\n        },\n        select: function (selector) {\n            return new Query(map(this.data, selector));\n        },\n        order: function(selector, dir, inPlace) {\n            var sort = { dir: dir };\n\n            if (selector) {\n                if (selector.compare) {\n                    sort.compare = selector.compare;\n                } else {\n                    sort.field = selector;\n                }\n            }\n\n            if (inPlace) {\n                return new Query(this.data.sort(Comparer.create(sort)));\n            }\n\n            return new Query(this.data.slice(0).sort(Comparer.create(sort)));\n        },\n        orderBy: function(selector, inPlace) {\n            return this.order(selector, \"asc\", inPlace);\n        },\n        orderByDescending: function(selector, inPlace) {\n            return this.order(selector, \"desc\", inPlace);\n        },\n        sort: function(field, dir, comparer, inPlace) {\n            var idx,\n            length,\n            descriptors = normalizeSort(field, dir),\n            comparers = [];\n\n            comparer = comparer || Comparer;\n\n            if (descriptors.length) {\n                for (idx = 0, length = descriptors.length; idx < length; idx++) {\n                    comparers.push(comparer.create(descriptors[idx]));\n                }\n\n                return this.orderBy({ compare: comparer.combine(comparers) }, inPlace);\n            }\n\n            return this;\n        },\n\n        filter: function(expressions) {\n            var idx,\n            current,\n            length,\n            compiled,\n            predicate,\n            data = this.data,\n            fields,\n            operators,\n            result = [],\n            filter;\n\n            expressions = normalizeFilter(expressions);\n\n            if (!expressions || expressions.filters.length === 0) {\n                return this;\n            }\n\n            compiled = Query.filterExpr(expressions);\n            fields = compiled.fields;\n            operators = compiled.operators;\n\n            predicate = filter = new Function(\"d, __f, __o\", \"return \" + compiled.expression);\n\n            if (fields.length || operators.length) {\n                filter = function(d) {\n                    return predicate(d, fields, operators);\n                };\n            }\n\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                current = data[idx];\n\n                if (filter(current)) {\n                    result.push(current);\n                }\n            }\n\n            return new Query(result);\n        },\n\n        group: function(descriptors, allData, options) {\n            descriptors =  normalizeGroup(descriptors || []);\n            allData = allData || this.data;\n\n            var that = this,\n            result = new Query(that.data),\n            descriptor;\n\n            if (descriptors.length > 0) {\n                descriptor = descriptors[0];\n\n                if (options && options.groupPaging) {\n                    result = new Query(allData).groupAllData(descriptor, allData).select(function (group) {\n                        var data = new Query(allData).filter([{\n                            field: group.field,\n                            operator: \"eq\",\n                            value: group.value,\n                            ignoreCase: false\n                        }]);\n                        var items = descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), data.toArray(), options).toArray() : group.items;\n                        return {\n                            field: group.field,\n                            value: group.value,\n                            hasSubgroups: descriptors.length > 1,\n                            items: items,\n                            aggregates: data.aggregate(descriptor.aggregates),\n                            uid: kendo.guid(),\n                            itemCount: items.length,\n                            subgroupCount: items.length\n                        };\n                    });\n\n                } else {\n                    result = result.groupBy(descriptor).select(function(group) {\n                        var data = new Query(allData).filter([ { field: group.field, operator: \"eq\", value: group.value, ignoreCase: false } ]);\n                        return {\n                            field: group.field,\n                            value: group.value,\n                            items: descriptors.length > 1 ? new Query(group.items).group(descriptors.slice(1), data.toArray()).toArray() : group.items,\n                            hasSubgroups: descriptors.length > 1,\n                            aggregates: data.aggregate(descriptor.aggregates)\n                        };\n                    });\n                }\n            }\n            return result;\n        },\n\n        groupBy: function(descriptor) {\n            var that = this;\n\n            if (isEmptyObject(descriptor) || !this.data.length) {\n                return new Query([]);\n            }\n\n            var field = descriptor.field,\n                sorted = descriptor.skipItemSorting ? this.data : this._sortForGrouping(field, descriptor.dir || \"asc\"),\n                accessor = kendo.accessor(field),\n                item,\n                groupValue = accessor.get(sorted[0], field),\n                group = {\n                    field: field,\n                    value: groupValue,\n                    items: []\n                },\n                currentValue,\n                idx,\n                len,\n                result = [group];\n\n            for(idx = 0, len = sorted.length; idx < len; idx++) {\n                item = sorted[idx];\n                currentValue = accessor.get(item, field);\n                if(!groupValueComparer(groupValue, currentValue)) {\n                    groupValue = currentValue;\n                    group = {\n                        field: field,\n                        value: groupValue,\n                        items: []\n                    };\n                    result.push(group);\n                }\n                group.items.push(item);\n            }\n\n            result = that._sortGroups(result, descriptor);\n\n            return new Query(result);\n        },\n\n        groupAllData: function (descriptor, allData) {\n            if (isEmptyObject(descriptor) || this.data && !this.data.length) {\n                return new Query([]);\n            }\n\n            var field = descriptor.field,\n                sorted = descriptor.skipItemSorting ? allData : new Query(allData).sort(field, descriptor.dir || \"asc\", StableComparer).toArray(),\n                accessor = kendo.accessor(field),\n                item,\n                groupValue = accessor.get(sorted[0], field),\n                group = {\n                    field: field,\n                    value: groupValue,\n                    items: []\n                },\n                currentValue,\n                idx,\n                len,\n                result = [group];\n\n            for (idx = 0, len = sorted.length; idx < len; idx++) {\n                item = sorted[idx];\n                currentValue = accessor.get(item, field);\n                if (!groupValueComparer(groupValue, currentValue)) {\n                    groupValue = currentValue;\n                    group = {\n                        field: field,\n                        value: groupValue,\n                        items: []\n                    };\n                    result.push(group);\n                }\n                group.items.push(item);\n            }\n\n            result = this._sortGroups(result, descriptor);\n\n            return new Query(result);\n        },\n\n        _sortForGrouping: function(field, dir) {\n            var idx, length,\n                data = this.data;\n\n            if (!stableSort) {\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    data[idx].__position = idx;\n                }\n\n                data = new Query(data).sort(field, dir, StableComparer).toArray();\n\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    delete data[idx].__position;\n                }\n                return data;\n            }\n\n            return this.sort(field, dir).toArray();\n        },\n\n        _sortGroups: function(groups, descriptor) {\n            var result = groups;\n\n            if (descriptor && isFunction(descriptor.compare)) {\n                result = new Query(result).order({ compare: descriptor.compare }, descriptor.dir || ASCENDING).toArray();\n            }\n\n            return result;\n        },\n\n        aggregate: function (aggregates) {\n            var idx,\n                len,\n                result = {},\n                state = {};\n\n            if (aggregates && aggregates.length) {\n                for(idx = 0, len = this.data.length; idx < len; idx++) {\n                    calculateAggregate(result, aggregates, this.data[idx], idx, len, state);\n                }\n            }\n            return result;\n        }\n    };\n\n    function groupValueComparer(a, b) {\n        if (a && a.getTime && b && b.getTime) {\n            return a.getTime() === b.getTime();\n        }\n        return a === b;\n    }\n\n    function calculateAggregate(accumulator, aggregates, item, index, length, state) {\n        aggregates = aggregates || [];\n        var idx,\n            aggr,\n            functionName,\n            len = aggregates.length;\n\n        for (idx = 0; idx < len; idx++) {\n            aggr = aggregates[idx];\n            functionName = aggr.aggregate;\n            var field = aggr.field;\n            accumulator[field] = accumulator[field] || {};\n            state[field] = state[field] || {};\n            state[field][functionName] = state[field][functionName] || {};\n            accumulator[field][functionName] = functions[functionName.toLowerCase()](accumulator[field][functionName], item, kendo.accessor(field), index, length, state[field][functionName]);\n        }\n    }\n\n    var functions = {\n        sum: function(accumulator, item, accessor) {\n            var value = accessor.get(item);\n\n            if (!isNumber(accumulator)) {\n                accumulator = value;\n            } else if (isNumber(value)) {\n                accumulator += value;\n            }\n\n            return accumulator;\n        },\n        count: function(accumulator) {\n            return (accumulator || 0) + 1;\n        },\n        average: function(accumulator, item, accessor, index, length, state) {\n            var value = accessor.get(item);\n\n            if (state.count === undefined) {\n                state.count = 0;\n            }\n\n            if (!isNumber(accumulator)) {\n                accumulator = value;\n            } else if (isNumber(value)) {\n                accumulator += value;\n            }\n\n            if (isNumber(value)) {\n                state.count++;\n            }\n\n            if(index == length - 1 && isNumber(accumulator)) {\n                accumulator = accumulator / state.count;\n            }\n            return accumulator;\n        },\n        max: function(accumulator, item, accessor) {\n            var value = accessor.get(item);\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if(accumulator < value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        },\n        min: function(accumulator, item, accessor) {\n            var value = accessor.get(item);\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if(accumulator > value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        }\n    };\n\n    function isNumber(val) {\n        return typeof val === \"number\" && !isNaN(val);\n    }\n\n    function isDate(val) {\n        return val && val.getTime;\n    }\n\n    function toJSON(array) {\n        var idx, length = array.length, result = new Array(length);\n\n        for (idx = 0; idx < length; idx++) {\n            result[idx] = array[idx].toJSON();\n        }\n\n        return result;\n    }\n\n    Query.normalizeGroup = normalizeGroup;\n    Query.normalizeSort = normalizeSort;\n\n    Query.process = function(data, options, inPlace) {\n        options = options || {};\n\n        var group = options.group;\n        var customGroupSort = anyGroupDescriptorHasCompare(normalizeGroup(group || []));\n        var query = new Query(data),\n            groupDescriptorsWithoutCompare = normalizeGroupWithoutCompare(group || []),\n            normalizedSort = normalizeSort(options.sort || []),\n            sort = customGroupSort ? normalizedSort : groupDescriptorsWithoutCompare.concat(normalizedSort),\n            groupDescriptorsWithoutSort,\n            total,\n            filterCallback = options.filterCallback,\n            filter = options.filter,\n            skip = options.skip,\n            take = options.take;\n\n        if (sort && inPlace) {\n            query = query.sort(sort, undefined, undefined, inPlace);\n        }\n\n        if (filter) {\n            query = query.filter(filter);\n\n            if (filterCallback) {\n                query = filterCallback(query);\n            }\n\n            total = query.toArray().length;\n        }\n\n        if (sort) {\n            if (!inPlace) {\n                query = query.sort(sort);\n            }\n\n            if (group) {\n                data = query.toArray();\n            }\n        }\n\n        if (customGroupSort) {\n            query = query.group(group, data, options);\n\n            if (skip !== undefined && take !== undefined && !options.groupPaging) {\n                query = new Query(flatGroups(query.toArray())).range(skip, take);\n\n                groupDescriptorsWithoutSort = map(groupDescriptorsWithoutCompare, function(groupDescriptor) {\n                    return extend({}, groupDescriptor, {\n                        skipItemSorting: true\n                    });\n                });\n\n                query = query.group(groupDescriptorsWithoutSort, data, options);\n            }\n        } else {\n            if (skip !== undefined && take !== undefined) {\n                query = query.range(skip, take);\n            }\n\n            if (group && (!isEmptyObject(group) || group.length !== 0)) {\n                query = query.group(group, data, options);\n            }\n        }\n\n        return {\n            total: total,\n            data: query.toArray()\n        };\n    };\n\n    var LocalTransport = Class.extend({\n        init: function(options) {\n            this.data = options.data;\n        },\n\n        read: function(options) {\n            options.success(this.data);\n        },\n        update: function(options) {\n            options.success(options.data);\n        },\n        create: function(options) {\n            options.success(options.data);\n        },\n        destroy: function(options) {\n            options.success(options.data);\n        }\n    });\n\n    var RemoteTransport = Class.extend( {\n        init: function(options) {\n            var that = this, parameterMap;\n\n            options = that.options = extend({}, that.options, options);\n\n            each(crud, function(index, type) {\n                if (typeof options[type] === STRING) {\n                    options[type] = {\n                        url: options[type]\n                    };\n                }\n            });\n\n            that.cache = options.cache? Cache.create(options.cache) : {\n                find: noop,\n                add: noop\n            };\n\n            parameterMap = options.parameterMap;\n\n            if (options.submit) {\n                that.submit = options.submit;\n            }\n\n            if (isFunction(options.push)) {\n                that.push = options.push;\n            }\n\n            if (!that.push) {\n                that.push = identity;\n            }\n\n            that.parameterMap = isFunction(parameterMap) ? parameterMap : function(options) {\n                var result = {};\n\n                each(options, function(option, value) {\n                    if (option in parameterMap) {\n                        option = parameterMap[option];\n                        if (isPlainObject(option)) {\n                            value = option.value(value);\n                            option = option.key;\n                        }\n                    }\n\n                    result[option] = value;\n                });\n\n                return result;\n            };\n        },\n\n        options: {\n            parameterMap: identity\n        },\n\n        create: function(options) {\n            return ajax(this.setup(options, CREATE));\n        },\n\n        read: function(options) {\n            var that = this,\n                success,\n                error,\n                result,\n                cache = that.cache;\n\n            options = that.setup(options, READ);\n\n            success = options.success || noop;\n            error = options.error || noop;\n\n            result = cache.find(options.data);\n\n            if(result !== undefined) {\n                success(result);\n            } else {\n                options.success = function(result) {\n                    cache.add(options.data, result);\n\n                    success(result);\n                };\n\n                $.ajax(options);\n            }\n        },\n\n        update: function(options) {\n            return ajax(this.setup(options, UPDATE));\n        },\n\n        destroy: function(options) {\n            return ajax(this.setup(options, DESTROY));\n        },\n\n        setup: function(options, type) {\n            options = options || {};\n\n            var that = this,\n                parameters,\n                operation = that.options[type],\n                data = isFunction(operation.data) ? operation.data(options.data) : operation.data;\n\n            options = extend(true, {}, operation, options);\n            parameters = extend(true, {}, data, options.data);\n\n            options.data = that.parameterMap(parameters, type);\n\n            if (isFunction(options.url)) {\n                options.url = options.url(parameters);\n            }\n\n            return options;\n        }\n    });\n\n    var Cache = Class.extend({\n        init: function() {\n            this._store = {};\n        },\n        add: function(key, data) {\n            if(key !== undefined) {\n                this._store[stringify(key)] = data;\n            }\n        },\n        find: function(key) {\n            return this._store[stringify(key)];\n        },\n        clear: function() {\n            this._store = {};\n        },\n        remove: function(key) {\n            delete this._store[stringify(key)];\n        }\n    });\n\n    Cache.create = function(options) {\n        var store = {\n            \"inmemory\": function() { return new Cache(); }\n        };\n\n        if (isPlainObject(options) && isFunction(options.find)) {\n            return options;\n        }\n\n        if (options === true) {\n            return new Cache();\n        }\n\n        return store[options]();\n    };\n\n    function serializeRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n        var record,\n            getter,\n            originalName,\n            idx,\n            setters = {},\n            length;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            record = data[idx];\n            for (getter in getters) {\n                originalName = fieldNames[getter];\n\n                if (originalName && originalName !== getter) {\n                    if (!setters[originalName]) {\n                        setters[originalName] = kendo.setter(originalName);\n                    }\n                    setters[originalName](record, getters[getter](record));\n                    delete record[getter];\n                }\n            }\n        }\n    }\n\n    function convertRecords(data, getters, modelInstance, originalFieldNames, fieldNames) {\n        var record,\n            getter,\n            originalName,\n            idx,\n            length;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            record = data[idx];\n            for (getter in getters) {\n                record[getter] = modelInstance._parse(getter, getters[getter](record));\n\n                originalName = fieldNames[getter];\n                if (originalName && originalName !== getter) {\n                    delete record[originalName];\n                }\n            }\n        }\n    }\n\n    function convertGroup(data, getters, modelInstance, originalFieldNames, fieldNames) {\n        var record,\n            idx,\n            fieldName,\n            length;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            record = data[idx];\n\n            fieldName = originalFieldNames[record.field];\n            if (fieldName && fieldName != record.field) {\n                record.field = fieldName;\n            }\n\n            record.value = modelInstance._parse(record.field, record.value);\n\n            if (record.items) {\n                if (record.hasSubgroups) {\n                    convertGroup(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                } else {\n                    convertRecords(record.items, getters, modelInstance, originalFieldNames, fieldNames);\n                }\n            }\n        }\n    }\n\n    function wrapDataAccess(originalFunction, model, converter, getters, originalFieldNames, fieldNames) {\n        return function(data) {\n            data = originalFunction(data);\n\n            return wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames)(data);\n        };\n    }\n\n    function wrapDataAccessBase(model, converter, getters, originalFieldNames, fieldNames) {\n        return function(data) {\n\n            if (data && !isEmptyObject(getters)) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof ObservableArray)) {\n                    data = [data];\n                }\n\n                converter(data, getters, new model(), originalFieldNames, fieldNames);\n            }\n\n            return data || [];\n        };\n    }\n\n    var DataReader = Class.extend({\n        init: function(schema) {\n            var that = this, member, get, model, base;\n\n            schema = schema || {};\n\n            for (member in schema) {\n                get = schema[member];\n\n                that[member] = typeof get === STRING ? getter(get) : get;\n            }\n\n            base = schema.modelBase || Model;\n\n            if (isPlainObject(that.model)) {\n                that.model = model = base.define(that.model);\n            }\n\n            var dataFunction = proxy(that.data, that);\n\n            that._dataAccessFunction = dataFunction;\n\n            if (that.model) {\n                var groupsFunction = proxy(that.groups, that),\n                    serializeFunction = proxy(that.serialize, that),\n                    originalFieldNames = {},\n                    getters = {},\n                    serializeGetters = {},\n                    fieldNames = {},\n                    shouldSerialize = false,\n                    fieldName,\n                    name;\n\n                model = that.model;\n\n                if (model.fields) {\n                    each(model.fields, function(field, value) {\n                        var fromName;\n\n                        fieldName = field;\n\n                        if (isPlainObject(value) && value.field) {\n                            fieldName = value.field;\n                        } else if (typeof value === STRING) {\n                            fieldName = value;\n                        }\n\n                        if (isPlainObject(value) && value.from) {\n                            fromName = value.from;\n                        }\n\n                        shouldSerialize = shouldSerialize || (fromName && fromName !== field) || fieldName !== field;\n                        name = fromName || fieldName;\n                        getters[field] = name.indexOf(\".\") !== -1 ? getter(name, true) : getter(name);\n                        serializeGetters[field] = getter(field);\n                        originalFieldNames[fromName || fieldName] = field;\n                        fieldNames[field] = fromName || fieldName;\n                    });\n\n                    if (!schema.serialize && shouldSerialize) {\n                        that.serialize = wrapDataAccess(serializeFunction, model, serializeRecords, serializeGetters, originalFieldNames, fieldNames);\n                    }\n                }\n\n                that._dataAccessFunction = dataFunction;\n                that._wrapDataAccessBase = wrapDataAccessBase(model, convertRecords, getters, originalFieldNames, fieldNames);\n                that.data = wrapDataAccess(dataFunction, model, convertRecords, getters, originalFieldNames, fieldNames);\n                that.groups = wrapDataAccess(groupsFunction, model, convertGroup, getters, originalFieldNames, fieldNames);\n            }\n        },\n        errors: function(data) {\n            return data ? data.errors : null;\n        },\n        parse: identity,\n        data: identity,\n        total: function(data) {\n            return data.length;\n        },\n        groups: identity,\n        aggregates: function() {\n            return {};\n        },\n        serialize: function(data) {\n            return data;\n        }\n    });\n\n    function fillLastGroup(originalGroup, newGroup) {\n        var currOriginal;\n        var currentNew;\n\n        if (newGroup.items && newGroup.items.length) {\n            for (var i = 0; i < newGroup.items.length; i++) {\n                currOriginal = originalGroup.items[originalGroup.items.length - 1];\n                currentNew = newGroup.items[i];\n                if (currOriginal && currentNew) {\n                    if (currOriginal.hasSubgroups && currOriginal.value == currentNew.value) {\n                        fillLastGroup(currOriginal, currentNew);\n                    } else if (currOriginal.field && currOriginal.value == currentNew.value) {\n                        currOriginal.items.push.apply(currOriginal.items, currentNew.items);\n                    } else {\n                        originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                    }\n                } else if (currentNew) {\n                    originalGroup.items.push.apply(originalGroup.items, [currentNew]);\n                }\n            }\n        }\n    }\n    function mergeGroups(target, dest, skip, take) {\n        var group,\n            idx = 0,\n            items;\n\n        while (dest.length && take) {\n            group = dest[idx];\n            items = group.items;\n\n            var length = items.length;\n\n            if (target && target.field === group.field && target.value === group.value) {\n                if (target.hasSubgroups && target.items.length) {\n                    mergeGroups(target.items[target.items.length - 1], group.items, skip, take);\n                } else {\n                    items = items.slice(skip, skip + take);\n                    target.items = target.items.concat(items);\n                }\n                dest.splice(idx--, 1);\n            } else if (group.hasSubgroups && items.length) {\n                mergeGroups(group, items, skip, take);\n                if (!group.items.length) {\n                    dest.splice(idx--, 1);\n                }\n            } else {\n                items = items.slice(skip, skip + take);\n                group.items = items;\n\n                if (!group.items.length) {\n                    dest.splice(idx--, 1);\n                }\n            }\n\n            if (items.length === 0) {\n                skip -= length;\n            } else {\n                skip = 0;\n                take -= items.length;\n            }\n\n            if (++idx >= dest.length) {\n                break;\n            }\n        }\n\n        if (idx < dest.length) {\n            dest.splice(idx, dest.length - idx);\n        }\n    }\n\n    function flatGroups(groups, indexFunction) {\n        var result = [];\n        var groupsLength = (groups || []).length;\n        var group;\n        var items;\n        var indexFn = isFunction(indexFunction) ? indexFunction : function(array, index) {\n            return array[index];\n        };\n\n        for (var groupIndex = 0; groupIndex < groupsLength; groupIndex++) {\n            group = indexFn(groups, groupIndex);\n\n            if (group.hasSubgroups) {\n                result = result.concat(flatGroups(group.items));\n            } else {\n                items = group.items;\n\n                for (var itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                    result.push(indexFn(items, itemIndex));\n                }\n            }\n        }\n        return result;\n    }\n\n    function flattenGroups(data) {\n        var idx,\n            result = [],\n            length,\n            items,\n            itemIndex;\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            var group = data.at(idx);\n            if (group.items) {\n                if (group.hasSubgroups) {\n                    result = result.concat(flattenGroups(group.items));\n                } else {\n                    items = group.items;\n                    for (itemIndex = 0; itemIndex < items.length; itemIndex++) {\n                        result.push(items.at(itemIndex));\n                    }\n                }\n            }\n        }\n        return result;\n    }\n\n    function wrapGroupItems(data, model) {\n        var idx, length, group;\n        if (model) {\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                group = data.at(idx);\n                if (group.items) {\n                    if (group.hasSubgroups) {\n                        wrapGroupItems(group.items, model);\n                    } else {\n                        group.items = new LazyObservableArray(group.items, model, group.items._events);\n                    }\n                }\n            }\n        }\n    }\n\n    function eachGroupItems(data, func) {\n        for (var idx = 0; idx < data.length; idx++) {\n            if (data[idx].hasSubgroups) {\n                if (eachGroupItems(data[idx].items, func)) {\n                    return true;\n                }\n            } else if (func(data[idx].items, data[idx])) {\n                return true;\n            }\n        }\n    }\n\n    function replaceInRanges(ranges, data, item, observable) {\n        for (var idx = 0; idx < ranges.length; idx++) {\n            if (ranges[idx].data === data) {\n                break;\n            }\n            if (replaceInRange(ranges[idx].data, item, observable)) {\n                break;\n            }\n        }\n    }\n\n    function replaceInRange(items, item, observable) {\n        for (var idx = 0, length = items.length; idx < length; idx++) {\n            if (items[idx] && items[idx].hasSubgroups) {\n                return replaceInRange(items[idx].items, item, observable);\n            } else if (items[idx] === item || items[idx] === observable) {\n               items[idx] = observable;\n               return true;\n            }\n        }\n    }\n\n    function replaceWithObservable(view, data, ranges, type, serverGrouping) {\n        for (var viewIndex = 0, length = view.length; viewIndex < length; viewIndex++) {\n            var item = view[viewIndex];\n\n            if (!item || item instanceof type) {\n                continue;\n            }\n\n            if (item.hasSubgroups !== undefined && !serverGrouping) {\n                replaceWithObservable(item.items, data, ranges, type, serverGrouping);\n            } else {\n                for (var idx = 0; idx < data.length; idx++) {\n                    if (data[idx] === item) {\n                        view[viewIndex] = data.at(idx);\n                        replaceInRanges(ranges, data, item, view[viewIndex]);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    function removeModel(data, model) {\n        if (!data) {\n            return;\n        }\n        var length = data.length;\n        var dataItem;\n        var idx;\n\n        for (idx = 0; idx < length; idx++) {\n            dataItem = data[idx];\n\n            if (dataItem.uid && dataItem.uid == model.uid) {\n                data.splice(idx, 1);\n                return dataItem;\n            }\n        }\n    }\n\n    function indexOfPristineModel(data, model) {\n        if (model) {\n            return indexOf(data, function(item) {\n                return (item.uid && item.uid == model.uid) || (item[model.idField] === model.id && model.id !== model._defaultId);\n            });\n        }\n        return -1;\n    }\n\n    function indexOfModel(data, model) {\n        if (model) {\n            return indexOf(data, function(item) {\n                return item.uid == model.uid;\n            });\n        }\n        return -1;\n    }\n\n    function indexOf(data, comparer) {\n        var idx, length;\n        if (!data) {\n            return;\n        }\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            if (comparer(data[idx])) {\n                return idx;\n            }\n        }\n\n        return -1;\n    }\n\n    function fieldNameFromModel(fields, name) {\n        if (fields && !isEmptyObject(fields)) {\n            var descriptor = fields[name];\n            var fieldName;\n            if (isPlainObject(descriptor)) {\n                fieldName = descriptor.from || descriptor.field || name;\n            } else {\n                fieldName = fields[name] || name;\n            }\n\n            if (isFunction(fieldName)) {\n                return name;\n            }\n\n            return fieldName;\n        }\n        return name;\n    }\n\n    function convertFilterDescriptorsField(descriptor, model) {\n        var idx,\n            length,\n            target = {};\n\n        for (var field in descriptor) {\n            if (field !== \"filters\") {\n                target[field] = descriptor[field];\n            }\n        }\n\n        if (descriptor.filters) {\n            target.filters = [];\n            for (idx = 0, length = descriptor.filters.length; idx < length; idx++) {\n                target.filters[idx] = convertFilterDescriptorsField(descriptor.filters[idx], model);\n            }\n        } else {\n            target.field = fieldNameFromModel(model.fields, target.field);\n        }\n        return target;\n    }\n\n    function convertDescriptorsField(descriptors, model) {\n        var idx,\n            length,\n            result = [],\n            target,\n            descriptor;\n\n        for (idx = 0, length = descriptors.length; idx < length; idx ++) {\n            target = {};\n\n            descriptor = descriptors[idx];\n\n            for (var field in descriptor) {\n                target[field] = descriptor[field];\n            }\n\n            target.field = fieldNameFromModel(model.fields, target.field);\n\n            if (target.aggregates && isArray(target.aggregates)) {\n                target.aggregates = convertDescriptorsField(target.aggregates, model);\n            }\n            result.push(target);\n        }\n        return result;\n    }\n\n    var DataSource = Observable.extend({\n        init: function(options) {\n            var that = this, model, data;\n\n            if (options) {\n                data = options.data;\n            }\n\n            options = that.options = extend({}, that.options, options);\n\n            that._map = {};\n            that._prefetch = {};\n            that._data = [];\n            that._pristineData = [];\n            that._ranges = [];\n            that._view = [];\n            that._pristineTotal = 0;\n            that._destroyed = [];\n            that._pageSize = options.pageSize;\n            that._page = options.page  || (options.pageSize ? 1 : undefined);\n            that._sort = normalizeSort(options.sort);\n            that._sortFields = sortFields(options.sort);\n            that._filter = normalizeFilter(options.filter);\n            that._group = normalizeGroup(options.group);\n            that._aggregate = options.aggregate;\n            that._total = options.total;\n            that._groupPaging = options.groupPaging;\n\n            if (that._groupPaging) {\n                that._groupsState = {};\n            }\n            that._shouldDetachObservableParents = true;\n\n            Observable.fn.init.call(that);\n\n            that.transport = Transport.create(options, data, that);\n\n            if (isFunction(that.transport.push)) {\n                that.transport.push({\n                    pushCreate: proxy(that._pushCreate, that),\n                    pushUpdate: proxy(that._pushUpdate, that),\n                    pushDestroy: proxy(that._pushDestroy, that)\n                });\n            }\n\n            if (options.offlineStorage != null) {\n                if (typeof options.offlineStorage == \"string\") {\n                    var key = options.offlineStorage;\n\n                    that._storage = {\n                        getItem: function() {\n                            return JSON.parse(localStorage.getItem(key));\n                        },\n                        setItem: function(item) {\n                            localStorage.setItem(key, stringify(that.reader.serialize(item)));\n                        }\n                    };\n                } else {\n                    that._storage = options.offlineStorage;\n                }\n            }\n\n            that.reader = new kendo.data.readers[options.schema.type || \"json\" ](options.schema);\n\n            model = that.reader.model || {};\n\n            that._detachObservableParents();\n\n            that._data = that._observe(that._data);\n            that._online = true;\n\n            that.bind([\"push\", ERROR, CHANGE, REQUESTSTART, SYNC, REQUESTEND, PROGRESS], options);\n        },\n\n        options: {\n            data: null,\n            schema: {\n               modelBase: Model\n            },\n            offlineStorage: null,\n            serverSorting: false,\n            serverPaging: false,\n            serverFiltering: false,\n            serverGrouping: false,\n            serverAggregates: false,\n            batch: false,\n            inPlaceSort: false\n        },\n\n        clone: function() {\n            return this;\n        },\n\n        online: function(value) {\n            if (value !== undefined) {\n                if (this._online != value) {\n                    this._online = value;\n\n                    if (value) {\n                        return this.sync();\n                    }\n                }\n\n                return $.Deferred().resolve().promise();\n            } else {\n                return this._online;\n            }\n        },\n\n        offlineData: function(state) {\n            if (this.options.offlineStorage == null) {\n                return null;\n            }\n\n            if (state !== undefined) {\n                return this._storage.setItem(state);\n            }\n\n            return this._storage.getItem() || [];\n        },\n\n        _isServerGrouped: function() {\n            var group = this.group() || [];\n\n            return this.options.serverGrouping && group.length;\n        },\n\n        _isServerGroupPaged: function(){\n            return this._isServerGrouped() && this._groupPaging;\n        },\n\n        _isGroupPaged: function(){\n            var group = this._group || [];\n\n            return this._groupPaging && group.length;\n        },\n\n        _pushCreate: function(result) {\n            this._push(result, \"pushCreate\");\n        },\n\n        _pushUpdate: function(result) {\n            this._push(result, \"pushUpdate\");\n        },\n\n        _pushDestroy: function(result) {\n            this._push(result, \"pushDestroy\");\n        },\n\n        _push: function(result, operation) {\n            var data = this._readData(result);\n\n            if (!data) {\n                data = result;\n            }\n\n            this[operation](data);\n        },\n\n        _flatData: function(data, skip) {\n            if (data) {\n                if (this._isServerGrouped()) {\n                    return flattenGroups(data);\n                }\n\n                if (!skip) {\n                    for (var idx = 0; idx < data.length; idx++) {\n                        data.at(idx);\n                    }\n                }\n            }\n\n            return data;\n        },\n\n        parent: noop,\n\n        get: function(id) {\n            var idx, length, data = this._flatData(this._data, this.options.useRanges);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].id == id) {\n                    return data[idx];\n                }\n            }\n        },\n\n        getByUid: function(id) {\n            return this._getByUid(id, this._data);\n        },\n\n        _getByUid: function(id, dataItems) {\n            var idx, length, data = this._flatData(dataItems, this.options.useRanges);\n\n            if (!data) {\n                return;\n            }\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].uid == id) {\n                    return data[idx];\n                }\n            }\n        },\n\n        indexOf: function(model) {\n            return indexOfModel(this._data, model);\n        },\n\n        at: function(index) {\n            return this._data.at(index);\n        },\n\n        data: function(value) {\n            var that = this;\n            if (value !== undefined) {\n                that._detachObservableParents();\n                that._data = this._observe(value);\n\n                that._pristineData = value.slice(0);\n\n                that._storeData();\n\n                that._ranges = [];\n                that.trigger(\"reset\");\n                that._addRange(that._data);\n\n                that._total = that._data.length;\n                that._pristineTotal = that._total;\n\n                that._process(that._data);\n            } else {\n                if (that._data) {\n                    for (var idx = 0; idx < that._data.length; idx++) {\n                        that._data.at(idx);\n                    }\n                }\n\n                return that._data;\n            }\n        },\n\n        view: function(value) {\n            if (value === undefined) {\n                return this._view;\n            } else {\n                this._view = this._observeView(value);\n            }\n        },\n\n        _observeView: function(data) {\n            var that = this;\n            replaceWithObservable(data, that._data, that._ranges, that.reader.model || ObservableObject, that._isServerGrouped());\n\n            var view = new LazyObservableArray(data, that.reader.model);\n            view.parent = function() { return that.parent(); };\n            return view;\n        },\n\n        flatView: function() {\n            var groups = this.group() || [];\n\n            if (groups.length) {\n                return flattenGroups(this._view);\n            } else {\n                return this._view;\n            }\n        },\n\n        add: function(model) {\n            return this.insert(this._data.length, model);\n        },\n\n        _createNewModel: function(model) {\n            if (this.reader.model) {\n                return new this.reader.model(model);\n            }\n\n            if (model instanceof ObservableObject) {\n                return model;\n            }\n\n            return new ObservableObject(model);\n        },\n\n        insert: function(index, model) {\n            if (!model) {\n                model = index;\n                index = 0;\n            }\n\n            if (!(model instanceof Model)) {\n                model = this._createNewModel(model);\n            }\n\n            if (this._isServerGrouped()) {\n                this._data.splice(index, 0, this._wrapInEmptyGroup(model));\n            } else {\n                this._data.splice(index, 0, model);\n            }\n\n            this._insertModelInRange(index, model);\n\n            return model;\n        },\n\n        pushInsert: function(index, items) {\n            var that = this;\n            var rangeSpan = that._getCurrentRangeSpan();\n\n            if (!items) {\n                items = index;\n                index = 0;\n            }\n\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var pushed = [];\n            var autoSync = this.options.autoSync;\n            this.options.autoSync = false;\n\n            try {\n                for (var idx = 0; idx < items.length; idx ++) {\n                    var item = items[idx];\n\n                    var result = this.insert(index, item);\n\n                    pushed.push(result);\n\n                    var pristine = result.toJSON();\n\n                    if (this._isServerGrouped()) {\n                        pristine = this._wrapInEmptyGroup(pristine);\n                    }\n\n                    this._pristineData.push(pristine);\n\n                    if (rangeSpan && rangeSpan.length) {\n                        $(rangeSpan).last()[0].pristineData.push(pristine);\n                    }\n\n                    index++;\n                }\n            } finally {\n                this.options.autoSync = autoSync;\n            }\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"create\",\n                    items: pushed\n                });\n            }\n        },\n\n        pushCreate: function(items) {\n            this.pushInsert(this._data.length, items);\n        },\n\n        pushUpdate: function(items) {\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var pushed = [];\n\n            for (var idx = 0; idx < items.length; idx ++) {\n                var item = items[idx];\n                var model = this._createNewModel(item);\n\n                var target = this.get(model.id);\n\n                if (target) {\n                    pushed.push(target);\n\n                    target.accept(item);\n\n                    target.trigger(CHANGE);\n\n                    this._updatePristineForModel(target, item);\n                } else {\n                    this.pushCreate(item);\n                }\n            }\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"update\",\n                    items: pushed\n                });\n            }\n        },\n\n        pushDestroy: function(items) {\n            var pushed = this._removeItems(items);\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"destroy\",\n                    items: pushed\n                });\n            }\n        },\n\n        _removeItems: function(items, removePristine) {\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var shouldRemovePristine = typeof removePristine !== \"undefined\" ? removePristine : true;\n\n            var destroyed = [];\n            var autoSync = this.options.autoSync;\n            this.options.autoSync = false;\n            try {\n                for (var idx = 0; idx < items.length; idx ++) {\n                    var item = items[idx];\n                    var model = this._createNewModel(item);\n                    var found = false;\n\n                    this._eachItem(this._data, function(items){\n                        for (var idx = 0; idx < items.length; idx++) {\n                            var item = items.at(idx);\n                            if (item.id === model.id) {\n                                destroyed.push(item);\n                                items.splice(idx, 1);\n                                found = true;\n                                break;\n                            }\n                        }\n                    });\n\n                    if (found && shouldRemovePristine) {\n                        this._removePristineForModel(model);\n                        this._destroyed.pop();\n                    }\n                }\n            } finally {\n                this.options.autoSync = autoSync;\n            }\n\n            return destroyed;\n        },\n\n        pushMove: function(index, items) {\n            var pushed = this._moveItems(index, items);\n\n            if (pushed.length) {\n                this.trigger(\"push\", {\n                    type: \"update\",\n                    items: pushed\n                });\n            }\n        },\n\n        _moveItems: function (index, items) {\n            if (!isArray(items)) {\n                items = [items];\n            }\n\n            var moved = [];\n            var autoSync = this.options.autoSync;\n            this.options.autoSync = false;\n\n            try {\n                for (var i = 0; i < items.length; i ++) {\n                    var item = items[i];\n                    var model = this._createNewModel(item);\n\n                    this._eachItem(this._data, function(dataItems){\n                        for (var idx = 0; idx < dataItems.length; idx++) {\n                            var dataItem = dataItems.at(idx);\n                            if (dataItem.id === model.id) {\n                                moved.push(dataItem);\n                                dataItems.splice(index >= idx ? --index : index, 0, dataItems.splice(idx, 1)[0]);\n                                index++;\n                                break;\n                            }\n                        }\n                    });\n                }\n            } finally {\n                this.options.autoSync = autoSync;\n            }\n\n            return moved;\n        },\n\n        remove: function(model) {\n            var result,\n                that = this,\n                hasGroups = that._isServerGrouped();\n\n            if (hasGroups && model.uid && (!model.isNew || !model.isNew())) {\n                that._destroyed.push(model);\n            }\n\n            this._eachItem(that._data, function(items) {\n                result = removeModel(items, model);\n\n                if (result && hasGroups) {\n                    return true;\n                }\n            });\n\n            this._removeModelFromRanges(model);\n\n            return model;\n        },\n\n        destroyed: function() {\n            return this._destroyed;\n        },\n\n        created: function() {\n            var idx,\n                length,\n                result = [],\n                data = this._flatData(this._data, this.options.useRanges);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].isNew && data[idx].isNew()) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        updated: function() {\n            var idx,\n                length,\n                result = [],\n                data = this._flatData(this._data, this.options.useRanges);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if ((data[idx].isNew && !data[idx].isNew()) && data[idx].dirty) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        sync: function() {\n            var that = this,\n                created = [],\n                updated = [],\n                destroyed = that._destroyed;\n\n            var promise = $.Deferred().resolve().promise();\n\n            if (that.online()) {\n\n                if (!that.reader.model) {\n                    return promise;\n                }\n\n                created = that.created();\n                updated = that.updated();\n\n                var promises = [];\n\n                if (that.options.batch && that.transport.submit) {\n                    promises = that._sendSubmit(created, updated, destroyed);\n                } else {\n                    promises.push.apply(promises, that._send(\"create\", created));\n                    promises.push.apply(promises, that._send(\"update\", updated));\n                    promises.push.apply(promises, that._send(\"destroy\", destroyed));\n                }\n\n                promise = $.when\n                 .apply(null, promises)\n                 .then(function() {\n                    var idx, length;\n\n                    for (idx = 0, length = arguments.length; idx < length; idx++){\n                        if (arguments[idx]) {\n                            that._accept(arguments[idx]);\n                        }\n                    }\n\n                    that._storeData(true);\n\n                    that._syncEnd();\n\n                    that._change({ action: \"sync\" });\n\n                    that.trigger(SYNC);\n\n                    if (that._isServerGroupPaged()) {\n                        that.read();\n                    }\n                });\n            } else {\n                that._storeData(true);\n\n                that._syncEnd();\n\n                that._change({ action: \"sync\" });\n            }\n\n            return promise;\n        },\n\n        _syncEnd: noop,\n\n        cancelChanges: function(model) {\n            var that = this;\n\n            if (model instanceof kendo.data.Model) {\n                that._cancelModel(model);\n            } else {\n                that._destroyed = [];\n                that._detachObservableParents();\n                that._data = that._observe(that._pristineData);\n                if (that.options.serverPaging) {\n                    that._total = that._pristineTotal;\n                }\n\n                that._ranges = [];\n                that._addRange(that._data, 0);\n\n                that._changesCanceled();\n\n                that._change();\n\n                that._markOfflineUpdatesAsDirty();\n\n                if (that._isServerGrouped()) {\n                    that.read();\n                }\n            }\n        },\n\n        _changesCanceled: noop,\n\n        _markOfflineUpdatesAsDirty: function() {\n            var that = this;\n\n            if (that.options.offlineStorage != null) {\n                that._eachItem(that._data, function(items) {\n                    for (var idx = 0; idx < items.length; idx++) {\n                        var item = items.at(idx);\n                        if (item.__state__ == \"update\" || item.__state__ == \"create\") {\n                            item.dirty = true;\n                        }\n                    }\n                });\n            }\n        },\n\n        hasChanges: function() {\n            var idx,\n                length,\n                data = this._flatData(this._data, this.options.useRanges);\n\n            if (this._destroyed.length) {\n                return true;\n            }\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if ((data[idx].isNew && data[idx].isNew()) || data[idx].dirty) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _accept: function(result) {\n            var that = this,\n                models = result.models,\n                response = result.response,\n                idx = 0,\n                serverGroup = that._isServerGrouped(),\n                pristine = that._pristineData,\n                type = result.type,\n                length;\n\n            that.trigger(REQUESTEND, { response: response, type: type });\n\n            if (response && !isEmptyObject(response)) {\n                response = that.reader.parse(response);\n\n                if (that._handleCustomErrors(response)) {\n                    return;\n                }\n\n                response = that.reader.data(response);\n\n                if (!isArray(response)) {\n                    response = [response];\n                }\n            } else {\n                response = $.map(models, function(model) { return model.toJSON(); } );\n            }\n\n            if (type === \"destroy\") {\n                that._destroyed = [];\n            }\n\n            for (idx = 0, length = models.length; idx < length; idx++) {\n                if (type !== \"destroy\") {\n                    models[idx].accept(response[idx]);\n\n                    if (type === \"create\") {\n                        pristine.push(serverGroup ? that._wrapInEmptyGroup(models[idx].toJSON()) : response[idx]);\n                    } else if (type === \"update\") {\n                        that._updatePristineForModel(models[idx], response[idx]);\n                    }\n                } else {\n                    that._removePristineForModel(models[idx]);\n                }\n            }\n        },\n\n        _updatePristineForModel: function(model, values) {\n            this._executeOnPristineForModel(model, function(index, items) {\n                kendo.deepExtend(items[index], values);\n            });\n        },\n\n        _executeOnPristineForModel: function(model, callback) {\n            this._eachPristineItem(\n                function(items) {\n                    var index = indexOfPristineModel(items, model);\n                    if (index > -1) {\n                        callback(index, items);\n                        return true;\n                    }\n                });\n        },\n\n        _removePristineForModel: function(model) {\n            this._executeOnPristineForModel(model, function(index, items) {\n                items.splice(index, 1);\n            });\n        },\n\n        _readData: function(data) {\n            var read = !this._isServerGrouped() ? this.reader.data : this.reader.groups;\n            return read.call(this.reader, data);\n        },\n\n        _eachPristineItem: function(callback) {\n            var that = this;\n            var options = that.options;\n            var rangeSpan = that._getCurrentRangeSpan();\n\n            that._eachItem(that._pristineData, callback);\n\n            if (options.serverPaging && options.useRanges) {\n                each(rangeSpan, function(i, range) {\n                    that._eachItem(range.pristineData, callback);\n                });\n            }\n        },\n\n       _eachItem: function(data, callback) {\n            if (data && data.length) {\n                if (this._isServerGrouped()) {\n                    eachGroupItems(data, callback);\n                } else {\n                    callback(data);\n                }\n            }\n        },\n\n        _pristineForModel: function(model) {\n            var pristine,\n                idx,\n                callback = function(items) {\n                    idx = indexOfPristineModel(items, model);\n                    if (idx > -1) {\n                        pristine = items[idx];\n                        return true;\n                    }\n                };\n\n            this._eachPristineItem(callback);\n\n            return pristine;\n        },\n\n        _cancelModel: function(model) {\n            var that = this;\n            var pristine = this._pristineForModel(model);\n\n            this._eachItem(this._data, function(items) {\n                var idx = indexOfModel(items, model);\n                if (idx >= 0) {\n                    if (pristine && (!model.isNew() || pristine.__state__)) {\n                        items[idx].accept(pristine);\n\n                        if (pristine.__state__ == \"update\") {\n                            items[idx].dirty = true;\n                        }\n\n                    } else {\n                        that._modelCanceled(model);\n\n                        items.splice(idx, 1);\n\n                        that._removeModelFromRanges(model);\n                    }\n                }\n            });\n        },\n\n        _modelCanceled: noop,\n\n        _submit: function(promises, data) {\n            var that = this;\n\n            that.trigger(REQUESTSTART, { type: \"submit\" });\n\n            that.trigger(PROGRESS);\n\n            that.transport.submit(extend({\n                success: function(response, type) {\n                    var promise = $.grep(promises, function(x) {\n                        return x.type == type;\n                    })[0];\n\n                    if (promise) {\n                        promise.resolve({\n                            response: response,\n                            models: promise.models,\n                            type: type\n                        });\n                    }\n                },\n                error: function(response, status, error) {\n                    for (var idx = 0; idx < promises.length; idx++) {\n                        promises[idx].reject(response);\n                    }\n\n                    that.error(response, status, error);\n                }\n            }, data));\n        },\n\n        _sendSubmit: function(created, updated, destroyed) {\n            var that = this,\n                promises = [];\n\n            if (that.options.batch) {\n                if (created.length) {\n                    promises.push($.Deferred(function(deferred) {\n                        deferred.type = \"create\";\n                        deferred.models = created;\n                    }));\n                }\n\n                if (updated.length) {\n                    promises.push($.Deferred(function(deferred) {\n                        deferred.type = \"update\";\n                        deferred.models = updated;\n                    }));\n                }\n\n                if (destroyed.length) {\n                    promises.push($.Deferred(function(deferred) {\n                        deferred.type = \"destroy\";\n                        deferred.models = destroyed;\n                    }));\n                }\n\n                that._submit(promises, {\n                    data: {\n                        created: that.reader.serialize(toJSON(created)),\n                        updated: that.reader.serialize(toJSON(updated)),\n                        destroyed: that.reader.serialize(toJSON(destroyed))\n                    }\n                });\n            }\n\n            return promises;\n        },\n\n        _promise: function(data, models, type) {\n            var that = this;\n\n            return $.Deferred(function(deferred) {\n                that.trigger(REQUESTSTART, { type: type });\n\n                that.trigger(PROGRESS);\n\n                that.transport[type].call(that.transport, extend({\n                    success: function(response) {\n                        deferred.resolve({\n                            response: response,\n                            models: models,\n                            type: type\n                        });\n                    },\n                    error: function(response, status, error) {\n                        deferred.reject(response);\n                        that.error(response, status, error);\n                    }\n                }, data));\n            }).promise();\n        },\n\n        _send: function(method, data) {\n            var that = this,\n                idx,\n                length,\n                promises = [],\n                converted = that.reader.serialize(toJSON(data));\n\n            if (that.options.batch) {\n                if (data.length) {\n                    promises.push(that._promise( { data: { models: converted } }, data , method));\n                }\n            } else {\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    promises.push(that._promise( { data: converted[idx] }, [ data[idx] ], method));\n                }\n            }\n\n            return promises;\n        },\n\n        read: function(data) {\n            var that = this, params = that._params(data);\n            var deferred = $.Deferred();\n\n            that._queueRequest(params, function() {\n                var isPrevented = that.trigger(REQUESTSTART, { type: \"read\" });\n                if (!isPrevented) {\n                    that.trigger(PROGRESS);\n\n                    that._ranges = [];\n                    that.trigger(\"reset\");\n                    if (that.online()) {\n                        that.transport.read({\n                            data: params,\n                            success: function(data) {\n                                that._ranges = [];\n                                that.success(data, params);\n\n                                deferred.resolve();\n                            },\n                            error: function() {\n                                var args = slice.call(arguments);\n\n                                that.error.apply(that, args);\n\n                                deferred.reject.apply(deferred, args);\n                            }\n                        });\n                    } else if (that.options.offlineStorage != null){\n                        that.success(that.offlineData(), params);\n\n                        deferred.resolve();\n                    }\n                } else {\n                    that._dequeueRequest();\n\n                    deferred.resolve(isPrevented);\n                }\n            });\n\n            return deferred.promise();\n        },\n\n        _readAggregates: function(data) {\n            return this.reader.aggregates(data);\n        },\n\n        success: function(data) {\n            var that = this,\n                options = that.options,\n                items,\n                replaceSubset;\n\n            that.trigger(REQUESTEND, { response: data, type: \"read\" });\n\n            if (that.online()) {\n                data = that.reader.parse(data);\n\n                if (that._handleCustomErrors(data)) {\n                    that._dequeueRequest();\n                    return;\n                }\n\n                that._total = that.reader.total(data);\n\n                if (that._isServerGroupPaged()) {\n                    that._serverGroupsTotal = that._total;\n                }\n\n                if (that._pageSize > that._total) {\n                    that._pageSize = that._total;\n                    if (that.options.pageSize && that.options.pageSize > that._pageSize) {\n                        that._pageSize = that.options.pageSize;\n                    }\n                }\n\n                if (that._aggregate && options.serverAggregates) {\n                    that._aggregateResult = that._readAggregates(data);\n                }\n\n                data = that._readData(data);\n\n                that._destroyed = [];\n            } else {\n                data = that._readData(data);\n\n                items = [];\n                var itemIds = {};\n                var model = that.reader.model;\n                var idField = model ? model.idField : \"id\";\n                var idx;\n\n                for (idx = 0; idx < this._destroyed.length; idx++) {\n                    var id = this._destroyed[idx][idField];\n                    itemIds[id] = id;\n                }\n\n                for (idx = 0; idx < data.length; idx++) {\n                    var item = data[idx];\n                    var state = item.__state__;\n                    if (state == \"destroy\") {\n                        if (!itemIds[item[idField]]) {\n                            this._destroyed.push(this._createNewModel(item));\n                        }\n                    } else {\n                        items.push(item);\n                    }\n                }\n\n                data = items;\n\n                that._total = data.length;\n            }\n\n            that._pristineTotal = that._total;\n            replaceSubset = that._skip && that._data.length && that._skip < that._data.length;\n\n            if (that.options.endless) {\n                if (replaceSubset) {\n                    that._pristineData.splice(that._skip, that._pristineData.length);\n                }\n                items = data.slice(0);\n                for (var j = 0; j < items.length; j++) {\n                    that._pristineData.push(items[j]);\n                }\n            } else {\n                that._pristineData = data.slice(0);\n            }\n\n            that._detachObservableParents();\n\n            if (that.options.endless) {\n                that._data.unbind(CHANGE, that._changeHandler);\n\n                if (that._isServerGrouped() && that._data[that._data.length - 1].value === data[0].value) {\n                    fillLastGroup(that._data[that._data.length - 1], data[0]);\n                    data.shift();\n                }\n\n                data = that._observe(data);\n                if (replaceSubset) {\n                    that._data.splice(that._skip, that._data.length);\n                }\n                for (var i = 0; i < data.length; i++) {\n                    that._data.push(data[i]);\n                }\n                that._data.bind(CHANGE, that._changeHandler);\n            } else {\n                that._data = that._observe(data);\n            }\n\n            that._markOfflineUpdatesAsDirty();\n\n            that._storeData();\n\n            that._addRange(that._data);\n\n            that._process(that._data);\n\n            that._dequeueRequest();\n        },\n\n        _detachObservableParents: function() {\n            if (this._data && this._shouldDetachObservableParents) {\n                for (var idx = 0; idx < this._data.length; idx++) {\n                    if (this._data[idx].parent) {\n                        this._data[idx].parent = noop;\n                    }\n                }\n            }\n        },\n\n        _storeData: function(updatePristine) {\n            var serverGrouping = this._isServerGrouped();\n            var model = this.reader.model;\n\n            function items(data) {\n                var state = [];\n\n                for (var idx = 0; idx < data.length; idx++) {\n                    var dataItem = data.at(idx);\n                    var item = dataItem.toJSON();\n\n                    if (serverGrouping && dataItem.items) {\n                        item.items = items(dataItem.items);\n                    } else {\n                        item.uid = dataItem.uid;\n\n                        if (model) {\n                            if (dataItem.isNew()) {\n                                item.__state__ = \"create\";\n                            } else if (dataItem.dirty) {\n                                item.__state__ = \"update\";\n                            }\n                        }\n                    }\n                    state.push(item);\n                }\n\n                return state;\n            }\n\n            if (this.options.offlineStorage != null) {\n                var state = items(this._data);\n\n                var destroyed = [];\n\n                for (var idx = 0; idx < this._destroyed.length; idx++) {\n                    var item = this._destroyed[idx].toJSON();\n                    item.__state__ = \"destroy\";\n                    destroyed.push(item);\n                }\n\n                this.offlineData(state.concat(destroyed));\n\n                if (updatePristine) {\n                    this._pristineData = this.reader.reader ? this.reader.reader._wrapDataAccessBase(state) : this.reader._wrapDataAccessBase(state);\n                }\n            }\n        },\n\n        _addRange: function (data, skip) {\n            var that = this,\n                start = typeof (skip) !== \"undefined\" ? skip : (that._skip || 0),\n                end,\n                range = {\n                    data: data,\n                    pristineData: data.toJSON(),\n                    timestamp: that._timeStamp()\n                };\n\n            if (this._isGroupPaged()) {\n                end = start + data.length;\n                range.outerStart = start;\n                range.outerEnd = end;\n            } else {\n                end = start + that._flatData(data, true).length;\n            }\n\n            range.start = start;\n            range.end = end;\n            that._ranges.push(range);\n            that._sortRanges();\n\n            if (that._isGroupPaged()) {\n                if (!that._groupsFlat) {\n                    that._groupsFlat = [];\n                }\n                that._appendToGroupsFlat(range.data);\n                that._updateOuterRangesLength();\n            }\n        },\n\n        _appendToGroupsFlat: function (data) {\n            var length = data.length;\n\n            for (var i = 0; i < length; i++) {\n                this._groupsFlat.push(data[i]);\n            }\n        },\n\n        _getGroupByUid: function(uid){\n            var length = this._groupsFlat.length;\n            var group;\n\n            for (var i = 0; i < length; i++) {\n                group = this._groupsFlat[i];\n                if (group.uid === uid) {\n                    return group;\n                }\n            }\n        },\n\n        _sortRanges: function() {\n            this._ranges.sort(function(x, y) {\n                return x.start - y.start;\n            });\n        },\n\n        error: function(xhr, status, errorThrown) {\n            this._dequeueRequest();\n            this.trigger(REQUESTEND, { });\n            this.trigger(ERROR, { xhr: xhr, status: status, errorThrown: errorThrown });\n        },\n\n        _params: function(data) {\n            var that = this,\n                options =  extend({\n                    take: that.take(),\n                    skip: that.skip(),\n                    page: that.page(),\n                    pageSize: that.pageSize(),\n                    sort: that._sort,\n                    filter: that._filter,\n                    group: that._group,\n                    aggregate: that._aggregate,\n                    groupPaging: !!that._groupPaging\n                }, data);\n\n            if (!that.options.serverPaging) {\n                delete options.take;\n                delete options.skip;\n                delete options.page;\n                delete options.pageSize;\n            }\n\n            if (!that.options.serverGrouping) {\n                delete options.group;\n            } else if (that.reader.model && options.group) {\n                options.group = convertDescriptorsField(options.group, that.reader.model);\n            }\n\n            if (!that.options.serverFiltering) {\n                delete options.filter;\n            } else if (that.reader.model && options.filter) {\n               options.filter = convertFilterDescriptorsField(options.filter, that.reader.model);\n            }\n\n            if (!that.options.serverSorting) {\n                delete options.sort;\n            } else if (that.reader.model && options.sort) {\n                options.sort = convertDescriptorsField(options.sort, that.reader.model);\n            }\n\n            if (!that.options.serverAggregates) {\n                delete options.aggregate;\n            } else if (that.reader.model && options.aggregate) {\n                options.aggregate = convertDescriptorsField(options.aggregate, that.reader.model);\n            }\n\n            if (!that.options.groupPaging) {\n                delete options.groupPaging;\n            }\n\n            return options;\n        },\n\n        _queueRequest: function(options, callback) {\n            var that = this;\n            if (!that._requestInProgress) {\n                that._requestInProgress = true;\n                that._pending = undefined;\n                callback();\n            } else {\n                that._pending = { callback: proxy(callback, that), options: options };\n            }\n        },\n\n        _dequeueRequest: function() {\n            var that = this;\n            that._requestInProgress = false;\n            if (that._pending) {\n                that._queueRequest(that._pending.options, that._pending.callback);\n            }\n        },\n\n        _handleCustomErrors: function(response) {\n            if (this.reader.errors) {\n                var errors = this.reader.errors(response);\n                if (errors) {\n                    this.trigger(ERROR, { xhr: null, status: \"customerror\", errorThrown: \"custom error\", errors: errors });\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _shouldWrap: function(data) {\n            var model = this.reader.model;\n\n            if (model && data.length) {\n                return !(data[0] instanceof model);\n            }\n\n            return false;\n        },\n\n        _observe: function(data) {\n            var that = this,\n                model = that.reader.model;\n\n            that._shouldDetachObservableParents = true;\n\n            if (data instanceof ObservableArray) {\n                that._shouldDetachObservableParents = false;\n                if (that._shouldWrap(data)) {\n                    data.type = that.reader.model;\n                    data.wrapAll(data, data);\n                }\n            } else {\n                var arrayType = that.pageSize() && !that.options.serverPaging ? LazyObservableArray : ObservableArray;\n                data = new arrayType(data, that.reader.model);\n                data.parent = function() { return that.parent(); };\n            }\n\n            if (that._isServerGrouped()) {\n                wrapGroupItems(data, model);\n            }\n\n            if (that._changeHandler && that._data && that._data instanceof ObservableArray &&\n                !(that.options.useRanges && that.options.serverPaging)) {\n                that._data.unbind(CHANGE, that._changeHandler);\n            } else {\n                that._changeHandler = proxy(that._change, that);\n            }\n\n            return data.bind(CHANGE, that._changeHandler);\n        },\n\n        _updateTotalForAction: function(action, items) {\n            var that = this;\n\n            var total = parseInt(that._total, 10);\n\n            if (!isNumber(that._total)) {\n                total = parseInt(that._pristineTotal, 10);\n            }\n            if (action === \"add\") {\n                total += items.length;\n            } else if (action === \"remove\") {\n                total -= items.length;\n            } else if (action !== \"itemchange\" && action !== \"sync\" && !that.options.serverPaging) {\n                total = that._pristineTotal;\n            } else if (action === \"sync\") {\n                total = that._pristineTotal = parseInt(that._total, 10);\n            }\n\n            that._total = total;\n        },\n\n        _change: function(e) {\n            var that = this, idx, length, action = e ? e.action : \"\";\n\n            if (action === \"remove\") {\n                for (idx = 0, length = e.items.length; idx < length; idx++) {\n                    if (!e.items[idx].isNew || !e.items[idx].isNew()) {\n                        that._destroyed.push(e.items[idx]);\n                    }\n                }\n            }\n\n            if (that.options.autoSync && (action === \"add\" || action === \"remove\" || action === \"itemchange\")) {\n\n                var handler = function(args) {\n                    if (args.action === \"sync\") {\n                        that.unbind(\"change\", handler);\n                        that._updateTotalForAction(action, e.items);\n                    }\n                };\n\n                that.first(\"change\", handler);\n\n                that.sync();\n\n            } else {\n                that._updateTotalForAction(action, e ? e.items : []);\n\n                that._process(that._data, e);\n            }\n        },\n\n        _calculateAggregates: function (data, options) {\n            options = options || {};\n\n            var query = new Query(data),\n                aggregates = options.aggregate,\n                filter = options.filter;\n\n            if (filter) {\n                query = query.filter(filter);\n            }\n\n            return query.aggregate(aggregates);\n        },\n\n        _process: function (data, e) {\n            var that = this,\n                options = {},\n                result;\n\n            if (that.options.serverPaging !== true) {\n                options.skip = that._skip;\n                options.take = that._take || that._pageSize;\n\n                if(options.skip === undefined && that._page !== undefined && that._pageSize !== undefined) {\n                    options.skip = (that._page - 1) * that._pageSize;\n                }\n\n                if (that.options.useRanges) {\n                    options.skip = that.currentRangeStart();\n                }\n            }\n\n            if (that.options.serverSorting !== true) {\n                options.sort = that._sort;\n            }\n\n            if (that.options.serverFiltering !== true) {\n                options.filter = that._filter;\n            }\n\n            if (that.options.serverGrouping !== true) {\n                options.group = that._group;\n            }\n\n            if (that.options.serverAggregates !== true) {\n                options.aggregate = that._aggregate;\n            }\n\n            if (that.options.serverGrouping) {\n                that._clearEmptyGroups(data);\n            }\n\n            options.groupPaging = that._groupPaging;\n\n            if (that._isGroupPaged() && e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                result = that._queryProcess(data, {\n                    aggregate: that._aggregate\n                });\n            } else {\n                result = that._queryProcess(data, options);\n            }\n\n            if (that.options.serverAggregates !== true) {\n                // for performance reasons, calculate aggregates for part of the data only after query process\n                // this is necessary in the TreeList when paging\n                that._aggregateResult = that._calculateAggregates(result.dataToAggregate || data, options);\n            }\n\n            that._setView(result, options, e);\n\n            that._setFilterTotal(result.total, false);\n\n            e = e || {};\n\n            e.items = e.items || that._view;\n\n            that.trigger(CHANGE, e);\n        },\n\n        _setView: function (result, options, e) {\n            var that = this;\n\n            if (that._isGroupPaged() && !that._isServerGrouped()) {\n                if (e && (e.action === \"page\" || e.action === \"expandGroup\" || e.action === \"collapseGroup\")) {\n                    that.view(result.data);\n                    that._updateOuterRangesLength();\n                } else {\n                    that._ranges = [];\n                    var query = new Query(result.data);\n                    that._addRange(that._observe(result.data));\n\n                    if (options.skip + options.take > result.data.length) {\n                        options.skip = result.data.length - options.take;\n                    }\n\n                    that.view(query.range(options.skip, options.take).toArray());\n                }\n\n            } else {\n                that.view(result.data);\n            }\n        },\n\n        _clearEmptyGroups: function(data) {\n            for (var idx = data.length - 1; idx >=0; idx--) {\n                var group = data[idx];\n                if (group.hasSubgroups) {\n                    this._clearEmptyGroups(group.items);\n                } else {\n                    if (group.items && !group.items.length) {\n                        splice.apply(group.parent(), [idx, 1]);\n                    }\n                }\n            }\n        },\n\n        _queryProcess: function(data, options) {\n            if (this.options.inPlaceSort) {\n                return Query.process(data, options, this.options.inPlaceSort);\n            }\n            else {\n                return Query.process(data, options);\n            }\n        },\n\n        _mergeState: function(options) {\n            var that = this;\n\n            if (options !== undefined) {\n                that._pageSize = options.pageSize;\n                that._page = options.page;\n                that._sort = options.sort;\n                that._filter = options.filter;\n                that._group = options.group;\n                that._aggregate = options.aggregate;\n                that._skip = that._currentRangeStart = options.skip;\n                that._take = options.take;\n\n                if(that._skip === undefined) {\n                    that._skip = that._currentRangeStart = that.skip();\n                    options.skip = that.skip();\n                }\n\n                if(that._take === undefined && that._pageSize !== undefined) {\n                    that._take = that._pageSize;\n                    options.take = that._take;\n                }\n\n                if (options.sort) {\n                    that._sort = options.sort = normalizeSort(options.sort);\n                    that._sortFields = sortFields(options.sort);\n                }\n\n                if (options.filter) {\n                    that._filter = options.filter = (that.options.accentFoldingFiltering && !$.isEmptyObject(options.filter)) ? $.extend({}, normalizeFilter(options.filter), { accentFoldingFiltering: that.options.accentFoldingFiltering}) : normalizeFilter(options.filter);\n                }\n\n                if (options.group) {\n                    that._group = options.group = normalizeGroup(options.group);\n                }\n                if (options.aggregate) {\n                    that._aggregate = options.aggregate = normalizeAggregate(options.aggregate);\n                }\n            }\n            return options;\n        },\n\n        query: function(options) {\n            var result;\n            var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n\n            if (remote || ((this._data === undefined || this._data.length === 0) && !this._destroyed.length)) {\n                if (this.options.endless) {\n                    var moreItemsCount = options.pageSize - this.pageSize();\n                    if (moreItemsCount > 0) {\n                        moreItemsCount = this.pageSize();\n                        options.page = options.pageSize / moreItemsCount;\n                        options.pageSize = moreItemsCount;\n                    } else {\n                        options.page = 1;\n                        this.options.endless = false;\n                    }\n                }\n                return this.read(this._mergeState(options));\n            }\n\n            var isPrevented = this.trigger(REQUESTSTART, { type: \"read\" });\n            if (!isPrevented) {\n                this.trigger(PROGRESS);\n                if (options) {\n                    options.groupPaging = this._groupPaging;\n                }\n                result = this._queryProcess(this._data, this._mergeState(options));\n\n                this._setFilterTotal(result.total, true);\n\n                this._aggregateResult = this._calculateAggregates(result.dataToAggregate || this._data, options);\n                this._setView(result, options);\n                this.trigger(REQUESTEND, { type: \"read\" });\n                this.trigger(CHANGE, { items: result.data, action: options ? options.action : \"\" });\n            }\n\n            return $.Deferred().resolve(isPrevented).promise();\n        },\n\n        _hasExpandedSubGroups: function (group) {\n            var result = false;\n            var length = group.items ? group.items.length : 0;\n\n            if (!group.hasSubgroups) {\n                return false;\n            }\n\n            for (var i = 0; i < length; i++) {\n                if (this._groupsState[group.items[i].uid]) {\n                    result = true;\n                    break;\n                }\n            }\n            return result;\n        },\n\n        _findGroupedRange: function (data, result, options, parents, callback) {\n            var that = this;\n            var length = data.length;\n            var group;\n            var current;\n            var itemsLength;\n            var groupCount;\n            var itemsToSkip;\n\n            for (var i = 0; i < length; i++) {\n                group = data[i];\n\n                if (options.taken >= options.take) {\n                    break;\n                }\n\n                if (!that._getGroupByUid(group.uid)) {\n                    that._groupsFlat.push(group);\n                }\n\n                if (that._groupsState[group.uid]) {\n                    if (that._isServerGroupPaged()) {\n                       if (that._fetchGroupItems(group, options, parents, callback)) {\n                            that._fetchingGroupItems = true;\n                            return;\n                       }\n                       groupCount = (group.subgroupCount || group.itemCount) + 1;\n                       itemsToSkip = options.skip - options.skipped;\n                       if (!that._hasExpandedSubGroups(group) && itemsToSkip > groupCount) {\n                           options.skipped += groupCount;\n                           continue;\n                       }\n                    }\n\n                    if (options.includeParents && options.skipped < options.skip) {\n                        options.skipped++;\n                        group.excludeHeader = true;\n                    } else if (options.includeParents) {\n                        options.taken++;\n                        group.excludeHeader = false;\n                    }\n\n                    if (group.hasSubgroups && group.items && group.items.length) {\n                        group.currentItems = [];\n\n                        if (!parents) {\n                            parents = [];\n                        }\n                        parents.push(group);\n\n                        that._findGroupedRange(group.items, group.currentItems, options, parents, callback);\n                        parents.pop();\n\n                        if (group.currentItems.length || options.taken > 0) {\n                            result.push(group);\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    } else {\n                        current = [];\n                        itemsLength = group.items.length;\n\n                        for (var j = 0; j < itemsLength; j++) {\n                            if (options.skipped < options.skip) {\n                                options.skipped++;\n                                continue;\n                            }\n\n                            if (options.taken >= options.take) {\n                                break;\n                            }\n                            current.push(group.items[j]);\n                            options.taken++;\n                        }\n\n                        if (current.length || options.taken > 0) {\n                            group.currentItems = current;\n                            result.push(group);\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    }\n                } else {\n                    if (options.skipped < options.skip) {\n                        options.skipped++;\n                        continue;\n                    }\n                    result.push(group);\n                    options.taken++;\n                }\n            }\n        },\n\n        _expandedSubGroupItemsCount: function (group, end, includeCurrentItems) {\n            var that = this;\n            var result = 0;\n            var subGroup;\n            var endSpecified = typeof end === \"number\";\n            var length = endSpecified ? end : group.subgroupCount;\n            var temp;\n\n            if (!group.hasSubgroups) {\n                return result;\n            }\n\n            for (var i = 0; i < length; i++) {\n                subGroup = group.items[i];\n\n                if (!subGroup) {\n                    break;\n                }\n\n                if (subGroup.hasSubgroups && that._groupsState[group.uid]) {\n                    temp = that._expandedSubGroupItemsCount(subGroup, length, true);\n                    result += temp;\n\n                    if (endSpecified) {\n                        length -= temp;\n                    }\n                } else if (!subGroup.hasSubgroups && that._groupsState[subGroup.uid]) {\n                    temp = subGroup.items ? subGroup.items.length : 0;\n                    result += temp;\n                    if (endSpecified) {\n                        length -= temp;\n                    }\n                }\n\n                if (includeCurrentItems) {\n                    result += 1;\n                    if (endSpecified) {\n                        length -= 1;\n                    }\n                }\n\n                if (endSpecified && result > length) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        _fetchGroupItems: function(group, options, parents, callback) {\n            var that = this;\n            var groupItemsSkip;\n            var firstItem;\n            var lastItem;\n            var groupItemCount = group.hasSubgroups ? group.subgroupCount : group.itemCount;\n            var take = options.take;\n            var skipped = options.skipped;\n            var pageSize = that.take();\n            var expandedSubGroupItemsCount;\n\n            if (options.includeParents) {\n                if (skipped < options.skip) {\n                    skipped += 1;\n                } else {\n                    take -= 1;\n                }\n            }\n\n            if (!group.items || (group.items && !group.items.length)) {\n                that.getGroupItems(group, options, parents, callback, 0);\n                return true;\n            } else {\n                expandedSubGroupItemsCount = this._expandedSubGroupItemsCount(group, options.skip - skipped);\n                groupItemsSkip = Math.max(options.skip - (skipped + expandedSubGroupItemsCount), 0);\n\n                if (groupItemsSkip >= groupItemCount) {\n                    return false;\n                }\n\n                firstItem = group.items[groupItemsSkip];\n                lastItem = group.items[Math.min(groupItemsSkip + take, groupItemCount - 1)];\n\n                if (firstItem.notFetched) {\n                    that.getGroupItems(group, options, parents, callback, math.max(math.floor(groupItemsSkip / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                    return true;\n                }\n\n                if (lastItem.notFetched) {\n                    that.getGroupItems(group, options, parents, callback, math.max(math.floor((groupItemsSkip + pageSize) / pageSize), 0) * pageSize, math.round((groupItemsSkip + pageSize) / pageSize));\n                    return true;\n                }\n            }\n        },\n\n        getGroupItems: function(group, options, parents, callback, groupItemsSkip, page) {\n            var that = this;\n            var take;\n            var filter;\n            var data;\n            var subgroups;\n\n            if (!group.items) {\n                group.items = [];\n            }\n\n            take = that.take();\n            filter = this._composeItemsFilter(group, parents);\n            data = {\n                page: page || 1,\n                pageSize: take,\n                skip: groupItemsSkip,\n                take: take,\n                filter: filter,\n                aggregate: that._aggregate,\n                sort: that._sort\n            };\n            subgroups = that.findSubgroups(group);\n\n            if (subgroups && subgroups.length) {\n                data.group = subgroups;\n                data.groupPaging = true;\n            }\n\n            clearTimeout(that._timeout);\n            that._timeout = setTimeout(function () {\n                that._queueRequest(data, function () {\n                    if (!that.trigger(REQUESTSTART, {\n                            type: \"read\"\n                        })) {\n                        that.transport.read({\n                            data: data,\n                            success: that._groupItemsSuccessHandler(group, options.skip, that.take(), callback, groupItemsSkip),\n                            error: function () {\n                                var args = slice.call(arguments);\n                                that.error.apply(that, args);\n                            }\n                        });\n                    } else {\n                        that._dequeueRequest();\n                    }\n                });\n            }, 100);\n        },\n\n        _groupItemsSuccessHandler: function(group, skip, take, callback, groupItemsSkip) {\n            var that = this;\n            var timestamp = that._timeStamp();\n            callback = isFunction(callback) ? callback : noop;\n            var totalField = that.options.schema && that.options.schema.total ? that.options.schema.total : \"Total\";\n\n            return function (data) {\n                var temp;\n                var model = Model.define(that.options.schema.model);\n                var totalCount;\n\n                that._dequeueRequest();\n\n                that.trigger(REQUESTEND, {\n                    response: data,\n                    type: \"read\"\n                });\n\n                if (isFunction(totalField)) {\n                    totalCount = totalField(data);\n                } else {\n                    totalCount = data[totalField];\n                }\n\n                data = that.reader.parse(data);\n\n                if (group.hasSubgroups) {\n                    temp = that.reader.groups(data);\n                    group.subgroupCount = totalCount;\n                } else {\n                    temp = that.reader.data(data);\n                    temp = temp.map(function (item) {\n                        return new model(item);\n                    });\n                }\n\n                group.items.omitChangeEvent = true;\n                for (var i = 0; i < totalCount; i++) {\n                    if (i >= groupItemsSkip && i < (groupItemsSkip + take) ) {\n                        group.items.splice(i, 1, temp[i - groupItemsSkip]);\n                    } else {\n                        if (!group.items[i]) {\n                            group.items.splice(i, 0, { notFetched: true });\n                        }\n                    }\n                }\n                group.items.omitChangeEvent = false;\n\n                that._updateRangePristineData(group);\n                that._fetchingGroupItems = false;\n\n                if (!group.countAdded) {\n                    that._serverGroupsTotal += totalCount;\n                    group.countAdded = true;\n                }\n\n                that.range(skip, take, callback, \"expandGroup\");\n\n                if (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress) {\n                    that.trigger(CHANGE, {});\n                }\n            };\n        },\n\n        findSubgroups: function(group) {\n            var indexOfCurrentGroup = this._group.map(function (g) {\n                return g.field;\n            }).indexOf(group.field);\n\n            return this._group.slice(indexOfCurrentGroup + 1, this._group.length);\n        },\n\n        _composeItemsFilter: function(group, parents) {\n            var filter = this.filter() || {\n                logic: \"and\",\n                filters: []\n            };\n\n            filter = extend(true, {}, filter);\n            filter.filters.push({\n                field: group.field,\n                operator: \"eq\",\n                value: group.value\n            });\n\n            if (parents) {\n                for (var i = 0; i < parents.length; i++) {\n                    filter.filters.push({\n                        field: parents[i].field,\n                        operator: \"eq\",\n                        value: parents[i].value\n                    });\n                }\n            }\n\n            return filter;\n        },\n\n        _updateRangePristineData: function(group) {\n            var that = this;\n            var ranges = that._ranges;\n            var rangesLength = ranges.length;\n            var temp;\n            var currentGroup;\n            var range;\n            var dataLength;\n            var indexes;\n            var currIdx;\n\n            for (var i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                dataLength = range.data.length;\n                indexes = [];\n                temp = null;\n\n                for (var j = 0; j < dataLength; j++) {\n                    currentGroup = range.data[j];\n                    indexes.push(j);\n\n                    if ((currentGroup.uid === group.uid) || (currentGroup.hasSubgroups && currentGroup.items.length && that._containsSubGroup(currentGroup, group, indexes))) {\n                        break;\n                    }\n                    indexes.pop();\n                }\n\n                if (indexes.length) {\n                    temp = ranges[i].pristineData;\n\n                    while (indexes.length > 1) {\n                        currIdx = indexes.splice(0, 1)[0];\n                        temp = temp[currIdx].items;\n                    }\n                    temp[indexes[0]] = that._cloneGroup(group);\n                    break;\n                }\n            }\n        },\n\n        _containsSubGroup: function(group, subgroup, indexes) {\n            var that = this;\n            var length = group.items.length;\n            var currentSubGroup;\n\n            if (group.hasSubgroups && length) {\n                for (var i = 0; i < length; i++) {\n                    currentSubGroup = group.items[i];\n                    indexes.push(i);\n                    if (currentSubGroup.uid === subgroup.uid) {\n                        return true;\n                    } else if (currentSubGroup.hasSubgroups && currentSubGroup.items.length) {\n                        return that._containsSubGroup(currentSubGroup, subgroup, indexes);\n                    }\n                    indexes.pop();\n                }\n            }\n\n        },\n\n        _cloneGroup: function(group) {\n            var that = this;\n            group = typeof group.toJSON == \"function\" ? group.toJSON() : group;\n\n            if (group.items && group.items.length) {\n                group.items = group.items.map(function (item) {\n                    return that._cloneGroup(item);\n                });\n            }\n\n            return group;\n        },\n\n        _setFilterTotal: function(filterTotal, setDefaultValue) {\n            var that = this;\n\n            if (!that.options.serverFiltering) {\n                if (filterTotal !== undefined) {\n                    that._total = filterTotal;\n                } else if (setDefaultValue) {\n                    that._total = that._data.length;\n                }\n            }\n        },\n\n        fetch: function(callback) {\n            var that = this;\n            var fn = function(isPrevented) {\n                if (isPrevented !== true && isFunction(callback)) {\n                    callback.call(that);\n                }\n            };\n\n            return this._query().done(fn);\n        },\n\n        _query: function(options) {\n            var that = this;\n\n            return that.query(extend({}, {\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that.sort(),\n                filter: that.filter(),\n                group: that.group(),\n                aggregate: that.aggregate()\n            }, options));\n        },\n\n        next: function(options) {\n            var that = this,\n                page = that.page(),\n                total = that.total();\n\n            options = options || {};\n\n            if (!page || (total && page + 1 > that.totalPages())) {\n                return;\n            }\n\n            that._skip = that._currentRangeStart = page * that.take();\n\n            page += 1;\n            options.page = page;\n\n            that._query(options);\n\n            return page;\n        },\n\n        prev: function(options) {\n            var that = this,\n                page = that.page();\n\n            options = options || {};\n\n            if (!page || page === 1) {\n                return;\n            }\n\n            that._skip = that._currentRangeStart = that._skip - that.take();\n\n            page -= 1;\n            options.page = page;\n\n            that._query(options);\n\n            return page;\n        },\n\n        page: function(val) {\n            var that = this,\n            skip;\n\n            if(val !== undefined) {\n                val = math.max(math.min(math.max(val, 1), that.totalPages()), 1);\n                var take = that.take();\n\n                if (that._isGroupPaged()) {\n                    val -= 1;\n                    that.range(val * take, take, null, \"page\");\n                    return;\n                }\n                that._query(that._pageableQueryOptions({ page: val }));\n                return;\n            }\n            skip = that.skip();\n\n            return skip !== undefined ? math.round((skip || 0) / (that.take() || 1)) + 1 : undefined;\n        },\n\n        pageSize: function(val) {\n            var that = this;\n\n            if (val !== undefined) {\n                that._query(that._pageableQueryOptions({ pageSize: val, page: 1 }));\n                return;\n            }\n\n            return that.take();\n        },\n\n        sort: function(val) {\n            var that = this;\n\n            if(val !== undefined) {\n                that.trigger(\"sort\");\n                that._query({ sort: val });\n                return;\n            }\n\n            return that._sort;\n        },\n\n        filter: function(val) {\n            var that = this;\n\n            if (val === undefined) {\n                return that._filter;\n            }\n\n            that.trigger(\"reset\");\n            that._query({ filter: val, page: 1 });\n        },\n\n        group: function(val) {\n            var that = this;\n            var options = { group: val };\n\n            if (that._groupPaging) {\n                // clear ranges if ungrouping is performed\n                if (val!== undefined && (!val || !val.length) ) {\n                    that._ranges = [];\n                }\n                options.page = 1;\n            }\n\n            if(val !== undefined) {\n                that._query(options);\n                return;\n            }\n\n            return that._group;\n        },\n\n        getGroupsFlat: function (data) {\n            var idx,\n                result = [],\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                var group = data[idx];\n                if (group.hasSubgroups) {\n                    result = result.concat(this.getGroupsFlat(group.items));\n                }\n\n                result.push(group);\n            }\n\n            return result;\n        },\n\n        total: function() {\n            return parseInt(this._total || 0, 10);\n        },\n\n        groupsTotal: function (includeExpanded) {\n            var that = this;\n\n            if (!that._group.length) {\n                return that.total();\n            }\n\n            if (that._isServerGrouped()) {\n                if (that._serverGroupsTotal) {\n                    return that._serverGroupsTotal;\n                }\n                that._serverGroupsTotal = that.total();\n\n                return that._serverGroupsTotal;\n            }\n\n            return that._calculateGroupsTotal(that._ranges.length ? that._ranges[0].data : [], includeExpanded);\n        },\n\n        _calculateGroupsTotal: function (groups, includeExpanded, itemsField, ignoreState) {\n            var that = this;\n            itemsField = itemsField || \"items\";\n            var total;\n            var length;\n\n            if (that._group.length && groups) {\n                total = 0;\n                length = groups.length;\n\n                for (var i = 0; i < length; i++) {\n                    total += that.groupCount(groups[i], includeExpanded, itemsField, ignoreState);\n                }\n                that._groupsTotal = total;\n                return total;\n            }\n\n            that._groupsTotal = that._data.length;\n            return that._groupsTotal;\n        },\n\n        groupCount: function (group, includeExpanded, itemsField, ignoreState) {\n            var that = this;\n            var total = 0;\n\n            if (group.hasSubgroups && that._groupsState[group.uid]) {\n                if (includeExpanded && !group.excludeHeader || ignoreState) {\n                    total += 1;\n                }\n\n                group[itemsField].forEach(function (subgroup) {\n                    total += that.groupCount(subgroup, includeExpanded, itemsField, ignoreState);\n                });\n            } else {\n                if (that._groupsState[group.uid]) {\n                    if (includeExpanded && !group.excludeHeader || ignoreState) {\n                        total++;\n                    }\n                    total += group[itemsField] ? group[itemsField].length : 0;\n                } else {\n                    total++;\n                }\n            }\n            return total;\n        },\n\n        countGroupRange: function (range) {\n            var total = 0;\n            var length = range.length;\n\n            for (var i = 0; i < length; i++) {\n                total += this.groupCount(range[i], true);\n            }\n\n            return total;\n        },\n\n        aggregate: function(val) {\n            var that = this;\n\n            if(val !== undefined) {\n                that._query({ aggregate: val });\n                return;\n            }\n\n            return that._aggregate;\n        },\n\n        aggregates: function() {\n            var result = this._aggregateResult;\n\n            if (isEmptyObject(result)) {\n                result = this._emptyAggregates(this.aggregate());\n            }\n\n            return result;\n        },\n\n        _emptyAggregates: function(aggregates) {\n            var result = {};\n\n            if (!isEmptyObject(aggregates)) {\n                var aggregate = {};\n\n                if (!isArray(aggregates)){\n                    aggregates = [aggregates];\n                }\n\n                for (var idx = 0; idx <aggregates.length; idx++) {\n                    aggregate[aggregates[idx].aggregate] = 0;\n                    result[aggregates[idx].field] = aggregate;\n                }\n            }\n\n            return result;\n        },\n\n        _pageableQueryOptions: function(options) {\n            return options;\n        },\n\n        _wrapInEmptyGroup: function(model) {\n            var groups = this.group(),\n                parent,\n                group,\n                idx,\n                length;\n\n            for (idx = groups.length-1, length = 0; idx >= length; idx--) {\n                group = groups[idx];\n                parent = {\n                    value: model.get ? model.get(group.field) : model[group.field],\n                    field: group.field,\n                    items: parent ? [parent] : [model],\n                    hasSubgroups: !!parent,\n                    aggregates: this._emptyAggregates(group.aggregates)\n                };\n            }\n\n            return parent;\n        },\n\n        totalPages: function() {\n            var that = this,\n                pageSize = that.pageSize() || that.total(),\n                total = that._isGroupPaged() ? that.groupsTotal(true) : that.total();\n\n            return math.ceil((total || 0) / pageSize);\n        },\n\n        inRange: function(skip, take) {\n            var that = this,\n                end = math.min(skip + take, that.total());\n\n            if (!that.options.serverPaging && that._data.length > 0) {\n                return true;\n            }\n\n            return that._findRange(skip, end).length > 0;\n        },\n\n        lastRange: function() {\n            var ranges = this._ranges;\n            return ranges[ranges.length - 1] || { start: 0, end: 0, data: [] };\n        },\n\n        firstItemUid: function() {\n            var ranges = this._ranges;\n            return ranges.length && ranges[0].data.length && ranges[0].data[0].uid;\n        },\n\n        enableRequestsInProgress: function() {\n            this._skipRequestsInProgress = false;\n        },\n\n        _timeStamp: function() {\n            return new Date().getTime();\n        },\n\n        range: function(skip, take, callback, action) {\n            this._currentRequestTimeStamp = this._timeStamp();\n            this._skipRequestsInProgress = true;\n            var total = this._isGroupPaged() ? this.groupsTotal(true) : this.total();\n\n            if (action === \"expandGroup\" || action === \"collapseGroup\") {\n                this._updateOuterRangesLength();\n            }\n\n            skip = math.min(skip || 0, total);\n            callback = isFunction(callback) ? callback : noop;\n\n            var that = this,\n                pageSkip = math.max(math.floor(skip / take), 0) * take,\n                size = math.min(pageSkip + take, total),\n                data;\n\n            data = that._findRange(skip, math.min(skip + take, total), callback);\n\n            if ((data.length || total === 0) && !that._fetchingGroupItems) {\n                that._processRangeData(data, skip, take, that._originalPageSkip || pageSkip, that._originalSize || size, {\n                    action: action\n                });\n                that._originalPageSkip = null;\n                that._originalSize = null;\n                callback();\n                return;\n            }\n\n            if (that._isGroupPaged()) {\n                that._originalPageSkip = pageSkip;\n                that._originalSize = size;\n\n                pageSkip = math.max(math.floor(that._adjustPageSkip(skip, take) / take), 0) * take;\n                size = math.min(pageSkip + take, total);\n            }\n\n            if (take !== undefined && !that._fetchingGroupItems) {\n                if ((that._isGroupPaged() && !that._groupRangeExists(pageSkip, take)) || !that._rangeExists(pageSkip, size)) {\n                    that.prefetch(pageSkip, take, function() {\n                        if (skip > pageSkip && size < that.total() && !that._rangeExists(size, math.min(size + take, that.total()))) {\n                            that.prefetch(size, take, function() {\n                                that.range(skip, take, callback );\n                            });\n                        } else {\n                            that.range(skip, take, callback);\n                        }\n                    });\n                } else if (pageSkip < skip) {\n                    that.prefetch(size, take, function() {\n                        that.range(skip, take, callback );\n                    });\n                }\n            }\n        },\n\n        _findRange: function(start, end, callback) {\n            var that = this,\n                ranges = that._ranges,\n                range,\n                data = [],\n                skipIdx,\n                takeIdx,\n                startIndex,\n                endIndex,\n                rangeData,\n                rangeEnd,\n                processed,\n                options = that.options,\n                remote = options.serverSorting || options.serverPaging || options.serverFiltering || options.serverGrouping || options.serverAggregates,\n                flatData,\n                count,\n                length,\n                groupMapOptions = {\n                        take: end - start,\n                        skip: start,\n                        skipped: 0,\n                        taken: 0,\n                        includeParents: true\n                    },\n                prevRangeEnd,\n                isGroupPaged = that._isGroupPaged(),\n                startField = isGroupPaged ? \"outerStart\" : \"start\",\n                endField = isGroupPaged ? \"outerEnd\" : \"end\",\n                currentDataLength;\n\n            for (skipIdx = 0, length = ranges.length; skipIdx < length; skipIdx++) {\n                range = ranges[skipIdx];\n\n                if (isGroupPaged) {\n                    if (range.outerStart >= end) {\n                        return [];\n                    }\n\n                    if (start > range.outerEnd) {\n                        groupMapOptions.skipped += range.outerEnd - (prevRangeEnd || 0);\n                        prevRangeEnd = range.outerEnd;\n                        continue;\n                    }\n\n                    if (typeof prevRangeEnd !== \"undefined\" && prevRangeEnd != range.outerStart) {\n                        groupMapOptions.skipped += range.outerStart - prevRangeEnd;\n                    }\n\n                    if (groupMapOptions.skipped > groupMapOptions.skip) {\n                        return [];\n                    }\n\n                    if (typeof prevRangeEnd === \"undefined\" && start > 0 && range.start > 0) {\n                        groupMapOptions.skipped = range.outerStart;\n                    }\n\n                    takeIdx = skipIdx;\n                    while (true) {\n                        this._findGroupedRange(range.data, data, groupMapOptions, null, callback);\n                        currentDataLength = that._calculateGroupsTotal(data, true, \"currentItems\");\n\n                        if (currentDataLength >= groupMapOptions.take) {\n                            return data;\n                        }\n\n                        if (that._fetchingGroupItems) {\n                            return [];\n                        }\n                        takeIdx++;\n\n                        if (ranges[takeIdx] && ranges[takeIdx].outerStart === range.outerEnd) {\n                            range = ranges[takeIdx];\n                        } else {\n                            break;\n                        }\n                    }\n                } else if (start >= range[startField] && start <= range[endField]) {\n                    count = 0;\n\n                    for (takeIdx = skipIdx; takeIdx < length; takeIdx++) {\n                        range = ranges[takeIdx];\n                        flatData = that._flatData(range.data, true);\n\n                        if (flatData.length && start + count >= range.start) {\n                            rangeData = range.data;\n                            rangeEnd = range.end;\n\n                            if (!remote) {\n                                if (options.inPlaceSort) {\n                                    processed = that._queryProcess(range.data, { filter: that.filter() });\n                                } else {\n                                    var sort = normalizeGroupWithoutCompare(that.group() || []).concat(normalizeSort(that.sort() || []));\n                                    processed = that._queryProcess(range.data, { sort: sort, filter: that.filter() });\n                                }\n                                flatData = rangeData = processed.data;\n\n                                if (processed.total !== undefined) {\n                                    rangeEnd = processed.total;\n                                }\n                            }\n\n                            startIndex = 0;\n                            if (start + count > range.start) {\n                                startIndex = (start + count) - range.start;\n                            }\n                            endIndex = flatData.length;\n                            if (rangeEnd > end) {\n                                endIndex = endIndex - (rangeEnd - end);\n                            }\n                            count += endIndex - startIndex;\n                            data = that._mergeGroups(data, rangeData, startIndex, endIndex);\n\n                            if (end <= range.end && count == end - start) {\n                                return data;\n                            }\n                        }\n                    }\n                    break;\n                }\n                prevRangeEnd = range.outerEnd;\n            }\n            return [];\n        },\n\n        _getRangesMismatch: function (pageSkip) {\n            var that = this;\n            var ranges = that._ranges;\n            var mismatch = 0;\n            var i = 0;\n\n            while (true) {\n                var range = ranges[i];\n                if (!range || range.outerStart > pageSkip) {\n                    break;\n                }\n\n                if (range.outerEnd != range.end) {\n                    mismatch = range.outerEnd - range.end;\n                }\n                i++;\n            }\n\n            return mismatch;\n        },\n\n        _mergeGroups: function(data, range, skip, take) {\n            if (this._isServerGrouped()) {\n                var temp = range.toJSON(),\n                    prevGroup;\n\n                if (data.length) {\n                    prevGroup = data[data.length - 1];\n                }\n\n                mergeGroups(prevGroup, temp, skip, take);\n\n                return data.concat(temp);\n            }\n            return data.concat(range.slice(skip, take));\n        },\n\n        _processRangeData: function(data, skip, take, pageSkip, size, eventData) {\n            var that = this;\n\n            that._pending = undefined;\n\n            that._skip = skip > that.skip() && !that._omitPrefetch ? math.min(size, (that.totalPages() - 1) * that.take()) : pageSkip;\n\n            that._currentRangeStart = skip;\n\n            that._take = take;\n\n            var paging = that.options.serverPaging;\n            var sorting = that.options.serverSorting;\n            var filtering = that.options.serverFiltering;\n            var aggregates = that.options.serverAggregates;\n            try {\n                that.options.serverPaging = true;\n                if (!that._isServerGrouped() && !(that.group() && that.group().length)) {\n                    that.options.serverSorting = true;\n                }\n                that.options.serverFiltering = true;\n                that.options.serverPaging = true;\n                that.options.serverAggregates = true;\n\n                if (paging) {\n                    that._detachObservableParents();\n                    that._data = data = that._observe(data);\n                }\n                that._process(data, eventData);\n            } finally {\n                that.options.serverPaging = paging;\n                that.options.serverSorting = sorting;\n                that.options.serverFiltering = filtering;\n                that.options.serverAggregates = aggregates;\n            }\n        },\n\n        skip: function() {\n            var that = this;\n\n            if (that._skip === undefined) {\n                return (that._page !== undefined ? (that._page  - 1) * (that.take() || 1) : undefined);\n            }\n            return that._skip;\n        },\n\n        currentRangeStart: function() {\n            return this._currentRangeStart || 0;\n        },\n\n        take: function() {\n            return this._take || this._pageSize;\n        },\n\n        _prefetchSuccessHandler: function (skip, size, callback, force) {\n            var that = this;\n            var timestamp = that._timeStamp();\n\n            return function(data) {\n                var found = false,\n                    range = { start: skip, end: size, data: [], timestamp: that._timeStamp() },\n                    idx,\n                    length,\n                    temp;\n\n                that._dequeueRequest();\n\n                that.trigger(REQUESTEND, { response: data, type: \"read\" });\n\n                data = that.reader.parse(data);\n\n                temp = that._readData(data);\n\n                if (temp.length) {\n                    for (idx = 0, length = that._ranges.length; idx < length; idx++) {\n                        if (that._ranges[idx].start === skip) {\n                            found = true;\n                            range = that._ranges[idx];\n\n                            if (!that._isGroupPaged()) {\n                                range.pristineData = temp;\n                                range.data = that._observe(temp);\n                                range.end = range.start + that._flatData(range.data, true).length;\n                                that._sortRanges();\n                            }\n\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        that._addRange(that._observe(temp), skip);\n                    }\n                }\n\n                that._total = that.reader.total(data);\n\n                if (force || (timestamp >= that._currentRequestTimeStamp || !that._skipRequestsInProgress)) {\n                    if (callback && temp.length) {\n                        callback();\n                    } else {\n                        that.trigger(CHANGE, {});\n                    }\n                }\n            };\n        },\n\n        prefetch: function(skip, take, callback) {\n            var that = this,\n                size = math.min(skip + take, that.total()),\n                options = {\n                    take: take,\n                    skip: skip,\n                    page: skip / take + 1,\n                    pageSize: take,\n                    sort: that._sort,\n                    filter: that._filter,\n                    group: that._group,\n                    aggregate: that._aggregate\n                };\n\n\n            if ((that._isGroupPaged() && !that._isServerGrouped() && that._groupRangeExists(skip, size))) {\n                if (callback) {\n                    callback();\n                }\n                return;\n            }\n\n            if ((that._isServerGroupPaged() && !that._groupRangeExists(skip, size)) || !that._rangeExists(skip, size)) {\n                clearTimeout(that._timeout);\n\n                that._timeout = setTimeout(function() {\n                    that._queueRequest(options, function() {\n                        if (!that.trigger(REQUESTSTART, { type: \"read\" })) {\n                            if (that._omitPrefetch) {\n                                that.trigger(PROGRESS);\n                            }\n                            that.transport.read({\n                                data: that._params(options),\n                                success: that._prefetchSuccessHandler(skip, size, callback),\n                                error: function() {\n                                    var args = slice.call(arguments);\n                                    that.error.apply(that, args);\n                                }\n                            });\n                        } else {\n                            that._dequeueRequest();\n                        }\n                    });\n                }, 100);\n            } else if (callback) {\n                callback();\n            }\n        },\n\n        _multiplePrefetch: function(skip, take, callback) {\n            var that = this,\n                size = math.min(skip + take, that.total()),\n                options = {\n                    take: take,\n                    skip: skip,\n                    page: skip / take + 1,\n                    pageSize: take,\n                    sort: that._sort,\n                    filter: that._filter,\n                    group: that._group,\n                    aggregate: that._aggregate\n                };\n\n            if (!that._rangeExists(skip, size)) {\n                if (!that.trigger(REQUESTSTART, { type: \"read\" })) {\n                    that.transport.read({\n                        data: that._params(options),\n                        success: that._prefetchSuccessHandler(skip, size, callback, true)\n                    });\n                }\n            } else if (callback) {\n                callback();\n            }\n        },\n\n        _adjustPageSkip: function (start, take) {\n            var that = this;\n            var prevRange = that._getPrevRange(start);\n            var result;\n            var total = that.total();\n            var mismatch;\n\n            if (prevRange) {\n                mismatch = that._getRangesMismatch(start);\n\n                if (!mismatch) {\n                    return start;\n                }\n                start -= mismatch;\n            }\n            result = math.max(math.floor(start / take), 0) * take;\n\n            if (result > total) {\n                while (true) {\n                    result -= take;\n                    if (result < total) {\n                        break;\n                    }\n                }\n            }\n            return result;\n        },\n\n        _getNextRange: function (end) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                length;\n\n            for (idx = 0, length = ranges.length; idx < length; idx++) {\n                if (ranges[idx].start <= end && ranges[idx].end >= end) {\n                    return ranges[idx];\n                }\n            }\n        },\n\n        _getPrevRange: function (start) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                range,\n                length = ranges.length;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n                if (ranges[idx].outerStart <= start) {\n                    range = ranges[idx];\n                    break;\n                }\n\n            }\n\n            return range;\n        },\n\n        _rangeExists: function(start, end) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                length;\n\n            for (idx = 0, length = ranges.length; idx < length; idx++) {\n                if (ranges[idx].start <= start && ranges[idx].end >= end) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _groupRangeExists: function (start, end) {\n            var that = this,\n                ranges = that._ranges,\n                idx,\n                length,\n                availableItemsCount = 0,\n                total = that.groupsTotal(true);\n\n            if (end > total && !that._isServerGrouped()) {\n                end = total;\n            }\n\n            for (idx = 0, length = ranges.length; idx < length; idx++) {\n                var range = ranges[idx];\n                if (range.outerStart <= start && range.outerEnd >= start) {\n                    availableItemsCount += range.outerEnd - start;\n                } else if (range.outerStart <= end && range.outerEnd >= end) {\n                    availableItemsCount += end - range.outerStart;\n                }\n            }\n\n            return availableItemsCount >= end - start;\n        },\n\n        _getCurrentRangeSpan: function() {\n            var that = this;\n            var ranges = that._ranges;\n            var start = that.currentRangeStart();\n            var end = start + (that.take() || 0);\n            var rangeSpan = [];\n            var range;\n            var idx;\n            var length = ranges.length;\n\n            for (idx = 0; idx < length; idx++) {\n                range = ranges[idx];\n\n                if ((range.start <= start && range.end >= start) || (range.start >= start && range.start <= end)) {\n                    rangeSpan.push(range);\n                }\n            }\n\n            return rangeSpan;\n        },\n\n        _removeModelFromRanges: function(model) {\n            var that = this;\n            var range;\n\n            for (var idx = 0, length = this._ranges.length; idx < length; idx++) {\n                range = this._ranges[idx];\n\n                that._removeModelFromRange(range, model);\n            }\n\n            that._updateRangesLength();\n        },\n\n        _removeModelFromRange: function(range, model) {\n            this._eachItem(range.data, function(data) {\n                if (!data) {\n                    return;\n                }\n                for (var idx = 0; idx < data.length; idx++) {\n                    var dataItem = data[idx];\n\n                    if (dataItem.uid && dataItem.uid == model.uid) {\n                        [].splice.call(data, idx, 1);\n                        break;\n                    }\n                }\n            });\n        },\n\n        _insertModelInRange: function(index, model) {\n            var that = this;\n            var ranges = that._ranges || [];\n            var rangesLength = ranges.length;\n            var range;\n            var i;\n\n            for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n\n                if (range.start <= index && range.end >= index) {\n                    if (!that._getByUid(model.uid, range.data)) {\n                        if (that._isServerGrouped()) {\n                            range.data.splice(index, 0, that._wrapInEmptyGroup(model));\n                        } else {\n                            range.data.splice(index, 0, model);\n                        }\n                    }\n\n                    break;\n                }\n            }\n\n            that._updateRangesLength();\n        },\n\n        _updateRangesLength: function() {\n            var that = this;\n            var ranges = that._ranges || [];\n            var rangesLength = ranges.length;\n            var mismatchFound = false;\n            var mismatchLength = 0;\n            var lengthDifference = 0;\n            var rangeLength;\n            var range;\n            var i;\n\n            for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                rangeLength = that._isGroupPaged() ? range.data.length : that._flatData(range.data, true).length;\n                lengthDifference = rangeLength - math.abs(range.end - range.start);\n\n                if (!mismatchFound && lengthDifference !== 0) {\n                    mismatchFound = true;\n                    mismatchLength = lengthDifference;\n                    range.end += mismatchLength;\n                    continue;\n                }\n\n                if (mismatchFound) {\n                    range.start += mismatchLength;\n                    range.end += mismatchLength;\n                }\n            }\n        },\n\n        _updateOuterRangesLength: function () {\n            var that = this;\n            var ranges = that._ranges || [];\n            var rangesLength = ranges.length;\n            var mismatchLength = 0;\n            var range;\n            var i;\n            var prevRange;\n            var rangeLength;\n\n            for (i = 0; i < rangesLength; i++) {\n                range = ranges[i];\n                rangeLength = that._isGroupPaged() ? that._calculateGroupsTotal(range.data, true, \"items\", true) : that._flatData(range.data, true).length;\n\n                if (prevRange) {\n                    if (prevRange.end != range.start) {\n                        mismatchLength = range.start - prevRange.end;\n                    }\n                    range.outerStart = prevRange.outerEnd + mismatchLength;\n                    mismatchLength = 0;\n                } else {\n                    range.outerStart = range.start;\n                }\n\n                range.outerEnd = range.outerStart + rangeLength;\n                prevRange = range;\n            }\n        }\n    });\n\n    var Transport = {};\n\n    Transport.create = function(options, data, dataSource) {\n        var transport,\n            transportOptions = options.transport ? $.extend({}, options.transport) : null;\n\n        if (transportOptions) {\n            transportOptions.read = typeof transportOptions.read === STRING ? { url: transportOptions.read } : transportOptions.read;\n\n            if (options.type === \"jsdo\") {\n                transportOptions.dataSource = dataSource;\n            }\n\n            if (options.type) {\n                kendo.data.transports = kendo.data.transports || {};\n                kendo.data.schemas = kendo.data.schemas || {};\n\n                if (!kendo.data.transports[options.type]) {\n                    kendo.logToConsole(\"Unknown DataSource transport type '\" + options.type + \"'.\\nVerify that registration scripts for this type are included after Kendo UI on the page.\", \"warn\");\n                } else if (!isPlainObject(kendo.data.transports[options.type])) {\n                    transport = new kendo.data.transports[options.type](extend(transportOptions, { data: data }));\n                } else {\n                    transportOptions = extend(true, {}, kendo.data.transports[options.type], transportOptions);\n                }\n\n                options.schema = extend(true, {}, kendo.data.schemas[options.type], options.schema);\n            }\n\n            if (!transport) {\n                transport = isFunction(transportOptions.read) ? transportOptions : new RemoteTransport(transportOptions);\n            }\n        } else {\n            transport = new LocalTransport({ data: options.data || [] });\n        }\n        return transport;\n    };\n\n    DataSource.create = function(options) {\n        if (isArray(options) || options instanceof ObservableArray) {\n           options = { data: options };\n        }\n\n        var dataSource = options || {},\n            data = dataSource.data,\n            fields = dataSource.fields,\n            table = dataSource.table,\n            select = dataSource.select,\n            idx,\n            length,\n            model = {},\n            field;\n\n        if (!data && fields && !dataSource.transport) {\n            if (table) {\n                data = inferTable(table, fields);\n            } else if (select) {\n                data = inferSelect(select, fields);\n\n                if (dataSource.group === undefined && data[0] && data[0].optgroup !== undefined) {\n                    dataSource.group = \"optgroup\";\n                }\n            }\n        }\n\n        if (kendo.data.Model && fields && (!dataSource.schema || !dataSource.schema.model)) {\n            for (idx = 0, length = fields.length; idx < length; idx++) {\n                field = fields[idx];\n                if (field.type) {\n                    model[field.field] = field;\n                }\n            }\n\n            if (!isEmptyObject(model)) {\n                dataSource.schema = extend(true, dataSource.schema, { model:  { fields: model } });\n            }\n        }\n\n        dataSource.data = data;\n\n        select = null;\n        dataSource.select = null;\n        table = null;\n        dataSource.table = null;\n\n        return dataSource instanceof DataSource ? dataSource : new DataSource(dataSource);\n    };\n\n    function inferSelect(select, fields) {\n        select = $(select)[0];\n        var options = select.options;\n        var firstField = fields[0];\n        var secondField = fields[1];\n\n        var data = [];\n        var idx, length;\n        var optgroup;\n        var option;\n        var record;\n        var value;\n\n        for (idx = 0, length = options.length; idx < length; idx++) {\n            record = {};\n            option = options[idx];\n            optgroup = option.parentNode;\n\n            if (optgroup === select) {\n                optgroup = null;\n            }\n\n            if (option.disabled || (optgroup && optgroup.disabled)) {\n                continue;\n            }\n\n            if (optgroup) {\n                record.optgroup = optgroup.label;\n            }\n\n            record[firstField.field] = option.text;\n\n            value = option.attributes.value;\n\n            if (value && value.specified) {\n                value = option.value;\n            } else {\n                value = option.text;\n            }\n\n            record[secondField.field] = value;\n\n            data.push(record);\n        }\n\n        return data;\n    }\n\n    function inferTable(table, fields) {\n        var tbody = $(table)[0].tBodies[0],\n        rows = tbody ? tbody.rows : [],\n        idx,\n        length,\n        fieldIndex,\n        fieldCount = fields.length,\n        data = [],\n        cells,\n        record,\n        cell,\n        empty;\n\n        for (idx = 0, length = rows.length; idx < length; idx++) {\n            record = {};\n            empty = true;\n            cells = rows[idx].cells;\n\n            for (fieldIndex = 0; fieldIndex < fieldCount; fieldIndex++) {\n                cell = cells[fieldIndex];\n                if(cell.nodeName.toLowerCase() !== \"th\") {\n                    empty = false;\n                    record[fields[fieldIndex].field] = cell.innerHTML;\n                }\n            }\n            if(!empty) {\n                data.push(record);\n            }\n        }\n\n        return data;\n    }\n\n    var Node = Model.define({\n        idField: \"id\",\n\n        init: function(value) {\n            var that = this,\n                hasChildren = that.hasChildren || value && value.hasChildren,\n                childrenField = \"items\",\n                childrenOptions = {};\n\n            kendo.data.Model.fn.init.call(that, value);\n\n            if (typeof that.children === STRING) {\n                childrenField = that.children;\n            }\n\n            childrenOptions = {\n                schema: {\n                    data: childrenField,\n                    model: {\n                        hasChildren: hasChildren,\n                        id: that.idField,\n                        fields: that.fields\n                    }\n                }\n            };\n\n            if (typeof that.children !== STRING) {\n                extend(childrenOptions, that.children);\n            }\n\n            childrenOptions.data = value;\n\n            if (!hasChildren) {\n                hasChildren = childrenOptions.schema.data;\n            }\n\n            if (typeof hasChildren === STRING) {\n                hasChildren = kendo.getter(hasChildren);\n            }\n\n            if (isFunction(hasChildren)) {\n                var hasChildrenObject = hasChildren.call(that, that);\n\n                if(hasChildrenObject && hasChildrenObject.length === 0){\n                    that.hasChildren = false;\n                } else{\n                    that.hasChildren = !!hasChildrenObject;\n                }\n            }\n\n            that._childrenOptions = childrenOptions;\n\n            if (that.hasChildren) {\n                that._initChildren();\n            }\n\n            that._loaded = !!(value && value._loaded);\n        },\n\n        _initChildren: function() {\n            var that = this;\n            var children, transport, parameterMap;\n\n            if (!(that.children instanceof HierarchicalDataSource)) {\n                children = that.children = new HierarchicalDataSource(that._childrenOptions);\n\n                transport = children.transport;\n                parameterMap = transport.parameterMap;\n\n                transport.parameterMap = function(data, type) {\n                    data[that.idField || \"id\"] = that.id;\n\n                    if (parameterMap) {\n                        data = parameterMap.call(that, data, type);\n                    }\n\n                    return data;\n                };\n\n                children.parent = function(){\n                    return that;\n                };\n\n                children.bind(CHANGE, function(e){\n                    e.node = e.node || that;\n                    that.trigger(CHANGE, e);\n                });\n\n                children.bind(ERROR, function(e){\n                    var collection = that.parent();\n\n                    if (collection) {\n                        e.node = e.node || that;\n                        collection.trigger(ERROR, e);\n                    }\n                });\n\n                that._updateChildrenField();\n            }\n        },\n\n        append: function(model) {\n            this._initChildren();\n            this.loaded(true);\n            this.children.add(model);\n        },\n\n        hasChildren: false,\n\n        level: function() {\n            var parentNode = this.parentNode(),\n                level = 0;\n\n            while (parentNode && parentNode.parentNode) {\n                level++;\n                parentNode = parentNode.parentNode ? parentNode.parentNode() : null;\n            }\n\n            return level;\n        },\n\n        _updateChildrenField: function() {\n            var fieldName = this._childrenOptions.schema.data;\n\n            this[fieldName || \"items\"] = this.children.data();\n        },\n\n        _childrenLoaded: function() {\n            this._loaded = true;\n\n            this._updateChildrenField();\n        },\n\n        load: function() {\n            var options = {};\n            var method = \"_query\";\n            var children, promise;\n\n            if (this.hasChildren) {\n                this._initChildren();\n\n                children = this.children;\n\n                options[this.idField || \"id\"] = this.id;\n\n                if (!this._loaded) {\n                    children._data = undefined;\n                    method = \"read\";\n                }\n\n                children.one(CHANGE, proxy(this._childrenLoaded, this));\n\n                if(this._matchFilter){\n                    options.filter = { field: '_matchFilter', operator: 'eq', value: true };\n                }\n\n                promise = children[method](options);\n            } else {\n                this.loaded(true);\n            }\n\n            return promise || $.Deferred().resolve().promise();\n        },\n\n        parentNode: function() {\n            var array = this.parent();\n\n            return array.parent();\n        },\n\n        loaded: function(value) {\n            if (value !== undefined) {\n                this._loaded = value;\n            } else {\n                return this._loaded;\n            }\n        },\n\n        shouldSerialize: function(field) {\n            return Model.fn.shouldSerialize.call(this, field) &&\n                    field !== \"children\" &&\n                    field !== \"_loaded\" &&\n                    field !== \"hasChildren\" &&\n                    field !== \"_childrenOptions\";\n        }\n    });\n\n    function dataMethod(name) {\n        return function() {\n            var data = this._data,\n                result = DataSource.fn[name].apply(this, slice.call(arguments));\n\n            if (this._data != data) {\n                this._attachBubbleHandlers();\n            }\n\n            return result;\n        };\n    }\n\n    var HierarchicalDataSource = DataSource.extend({\n        init: function(options) {\n            var node = Node.define({\n                children: options\n            });\n\n            if(options.filter && !options.serverFiltering){\n                this._hierarchicalFilter = options.filter;\n                options.filter = null;\n            }\n\n            DataSource.fn.init.call(this, extend(true, {}, { schema: { modelBase: node, model: node } }, options));\n\n            this._attachBubbleHandlers();\n        },\n\n        _attachBubbleHandlers: function() {\n            var that = this;\n\n            that._data.bind(ERROR, function(e) {\n                that.trigger(ERROR, e);\n            });\n        },\n\n        read: function(data) {\n            var result = DataSource.fn.read.call(this, data);\n\n            if(this._hierarchicalFilter){\n                if(this._data && this._data.length > 0){\n                    this.filter(this._hierarchicalFilter);\n                }else{\n                    this.options.filter = this._hierarchicalFilter;\n                    this._filter = normalizeFilter(this.options.filter);\n                    this._hierarchicalFilter = null;\n                }\n            }\n\n            return result;\n        },\n\n        remove: function(node){\n            var parentNode = node.parentNode(),\n                dataSource = this,\n                result;\n\n            if (parentNode && parentNode._initChildren) {\n                dataSource = parentNode.children;\n            }\n\n            result = DataSource.fn.remove.call(dataSource, node);\n\n            if (parentNode && !dataSource.data().length) {\n                parentNode.hasChildren = false;\n            }\n\n            return result;\n        },\n\n        success: dataMethod(\"success\"),\n\n        data: dataMethod(\"data\"),\n\n        insert: function(index, model) {\n            var parentNode = this.parent();\n\n            if (parentNode && parentNode._initChildren) {\n                parentNode.hasChildren = true;\n                parentNode._initChildren();\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n\n        filter: function(val) {\n            if (val === undefined) {\n                 return this._filter;\n            }\n\n            if(!this.options.serverFiltering && this._markHierarchicalQuery(val)){\n                val = { logic: \"or\", filters: [val, {field:'_matchFilter', operator: 'equals', value: true }]};\n            }\n\n            this.trigger(\"reset\");\n            this._query({ filter: val, page: 1 });\n        },\n\n        _markHierarchicalQuery: function(expressions){\n            var compiled;\n            var predicate;\n            var fields;\n            var operators;\n            var filter;\n            var accentFoldingFiltering = this.options.accentFoldingFiltering;\n\n            expressions = accentFoldingFiltering ? $.extend({}, normalizeFilter(expressions), { accentFoldingFiltering: accentFoldingFiltering}) : normalizeFilter(expressions);\n\n            if (!expressions || expressions.filters.length === 0) {\n                this._updateHierarchicalFilter(function(){return true;});\n                return false;\n            }\n\n            compiled = Query.filterExpr(expressions);\n            fields = compiled.fields;\n            operators = compiled.operators;\n\n            predicate = filter = new Function(\"d, __f, __o\", \"return \" + compiled.expression);\n\n            if (fields.length || operators.length) {\n                filter = function(d) {\n                    return predicate(d, fields, operators);\n                };\n            }\n\n            this._updateHierarchicalFilter(filter);\n            return true;\n        },\n\n         _updateHierarchicalFilter: function(filter){\n            var current;\n            var data = this._data;\n            var result = false;\n\n            for (var idx = 0; idx < data.length; idx++) {\n                 current = data[idx];\n\n                 if(current.hasChildren){\n                     current._matchFilter = current.children._updateHierarchicalFilter(filter);\n                    if(!current._matchFilter){\n                        current._matchFilter = filter(current);\n                    }\n                }else{\n                    current._matchFilter = filter(current);\n                }\n\n                if(current._matchFilter){\n                    result = true;\n                }\n            }\n            return result;\n        },\n\n        _find: function(method, value) {\n            var idx, length, node, children;\n            var data = this._data;\n\n            if (!data) {\n                return;\n            }\n\n            node = DataSource.fn[method].call(this, value);\n\n            if (node) {\n                return node;\n            }\n\n            data = this._flatData(this._data);\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                children = data[idx].children;\n\n                if (!(children instanceof HierarchicalDataSource)) {\n                    continue;\n                }\n\n                node = children[method](value);\n\n                if (node) {\n                    return node;\n                }\n            }\n        },\n\n        get: function(id) {\n            return this._find(\"get\", id);\n        },\n\n        getByUid: function(uid) {\n            return this._find(\"getByUid\", uid);\n        }\n    });\n\n    function inferList(list, fields) {\n        var items = $(list).children(),\n            idx,\n            length,\n            data = [],\n            record,\n            textField = fields[0].field,\n            urlField = fields[1] && fields[1].field,\n            spriteCssClassField = fields[2] && fields[2].field,\n            imageUrlField = fields[3] && fields[3].field,\n            item,\n            id,\n            textChild,\n            className,\n            children;\n\n        function elements(collection, tagName) {\n            return collection.filter(tagName).add(collection.find(tagName));\n        }\n\n        for (idx = 0, length = items.length; idx < length; idx++) {\n            record = { _loaded: true };\n            item = items.eq(idx);\n\n            textChild = item[0].firstChild;\n            children = item.children();\n            list = children.filter(\"ul\");\n            children = children.filter(\":not(ul)\");\n\n            id = item.attr(\"data-id\");\n\n            if (id) {\n                record.id = id;\n            }\n\n            if (textChild) {\n                record[textField] = textChild.nodeType == 3 ? textChild.nodeValue : children.text();\n            }\n\n            if (urlField) {\n                record[urlField] = elements(children, \"a\").attr(\"href\");\n            }\n\n            if (imageUrlField) {\n                record[imageUrlField] = elements(children, \"img\").attr(\"src\");\n            }\n\n            if (spriteCssClassField) {\n                className = elements(children, \".k-sprite\").prop(\"className\");\n                record[spriteCssClassField] = className && kendo.trim(className.replace(\"k-sprite\", \"\"));\n            }\n\n            if (list.length) {\n                record.items = inferList(list.eq(0), fields);\n            }\n\n            if (item.attr(\"data-hasChildren\") == \"true\") {\n                record.hasChildren = true;\n            }\n\n            data.push(record);\n        }\n\n        return data;\n    }\n\n    HierarchicalDataSource.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data,\n            fields = dataSource.fields,\n            list = dataSource.list;\n\n        if (data && data._dataSource) {\n            return data._dataSource;\n        }\n\n        if (!data && fields && !dataSource.transport) {\n            if (list) {\n                data = inferList(list, fields);\n            }\n        }\n\n        dataSource.data = data;\n\n        return dataSource instanceof HierarchicalDataSource ? dataSource : new HierarchicalDataSource(dataSource);\n    };\n\n    var Buffer = kendo.Observable.extend({\n        init: function(dataSource, viewSize, disablePrefetch) {\n            kendo.Observable.fn.init.call(this);\n\n            this._prefetching = false;\n            this.dataSource = dataSource;\n            this.prefetch = !disablePrefetch;\n\n            var buffer = this;\n\n            dataSource.bind(\"change\", function() {\n                buffer._change();\n            });\n\n            dataSource.bind(\"reset\", function() {\n                buffer._reset();\n            });\n\n            this._syncWithDataSource();\n\n            this.setViewSize(viewSize);\n        },\n\n        setViewSize: function(viewSize) {\n            this.viewSize = viewSize;\n            this._recalculate();\n        },\n\n        at: function(index)  {\n            var pageSize = this.pageSize,\n                itemPresent = true;\n\n            if (index >= this.total()) {\n                this.trigger(\"endreached\", {index: index });\n                return null;\n            }\n\n            if (!this.useRanges) {\n               return this.dataSource.view()[index];\n            }\n            if (this.useRanges) {\n                // out of range request\n                if (index < this.dataOffset || index >= this.skip + pageSize) {\n                    itemPresent = this.range(Math.floor(index / pageSize) * pageSize);\n                }\n\n                // prefetch\n                if (index === this.prefetchThreshold) {\n                    this._prefetch();\n                }\n\n                // mid-range jump - prefetchThreshold and nextPageThreshold may be equal, do not change to else if\n                if (index === this.midPageThreshold) {\n                    this.range(this.nextMidRange, true);\n                }\n                // next range jump\n                else if (index === this.nextPageThreshold) {\n                    this.range(this.nextFullRange);\n                }\n                // pull-back\n                else if (index === this.pullBackThreshold) {\n                    if (this.offset === this.skip) { // from full range to mid range\n                        this.range(this.previousMidRange);\n                    } else { // from mid range to full range\n                        this.range(this.previousFullRange);\n                    }\n                }\n\n                if (itemPresent) {\n                    return this.dataSource.at(index - this.dataOffset);\n                } else {\n                    this.trigger(\"endreached\", { index: index });\n                    return null;\n                }\n            }\n        },\n\n        indexOf: function(item) {\n            return this.dataSource.data().indexOf(item) + this.dataOffset;\n        },\n\n        total: function() {\n            return parseInt(this.dataSource.total(), 10);\n        },\n\n        next: function() {\n            var buffer = this,\n                pageSize = buffer.pageSize,\n                offset = buffer.skip - buffer.viewSize + pageSize,\n                pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize;\n\n            this.offset = offset;\n            this.dataSource.prefetch(pageSkip, pageSize, function() {\n                buffer._goToRange(offset, true);\n            });\n        },\n\n        range: function(offset, nextRange) {\n            if (this.offset === offset) {\n                return true;\n            }\n\n            var buffer = this,\n                pageSize = this.pageSize,\n                pageSkip = math.max(math.floor(offset / pageSize), 0) * pageSize,\n                dataSource = this.dataSource;\n\n            if (nextRange) {\n                pageSkip += pageSize;\n            }\n\n            if (dataSource.inRange(offset, pageSize)) {\n                this.offset = offset;\n                this._recalculate();\n                this._goToRange(offset);\n                return true;\n            } else if (this.prefetch) {\n                dataSource.prefetch(pageSkip, pageSize, function() {\n                    buffer.offset = offset;\n                    buffer._recalculate();\n                    buffer._goToRange(offset, true);\n                });\n                return false;\n            }\n\n            return true;\n        },\n\n        syncDataSource: function() {\n            var offset = this.offset;\n            this.offset = null;\n            this.range(offset);\n        },\n\n        destroy: function() {\n            this.unbind();\n        },\n\n        _prefetch: function() {\n            var buffer = this,\n                pageSize = this.pageSize,\n                prefetchOffset = this.skip + pageSize,\n                dataSource = this.dataSource;\n\n            if (!dataSource.inRange(prefetchOffset, pageSize) && !this._prefetching && this.prefetch) {\n                this._prefetching = true;\n                this.trigger(\"prefetching\", { skip: prefetchOffset, take: pageSize });\n\n                dataSource.prefetch(prefetchOffset, pageSize, function() {\n                    buffer._prefetching = false;\n                    buffer.trigger(\"prefetched\", { skip: prefetchOffset, take: pageSize });\n                });\n            }\n        },\n\n        _goToRange: function(offset, expanding) {\n            if (this.offset !== offset) {\n                return;\n            }\n\n            this.dataOffset = offset;\n            this._expanding = expanding;\n            this.dataSource.range(offset, this.pageSize);\n            this.dataSource.enableRequestsInProgress();\n        },\n\n        _reset: function() {\n            this._syncPending = true;\n        },\n\n        _change: function() {\n            var dataSource = this.dataSource;\n\n            this.length = this.useRanges ? dataSource.lastRange().end : dataSource.view().length;\n\n            if (this._syncPending) {\n                this._syncWithDataSource();\n                this._recalculate();\n                this._syncPending = false;\n                this.trigger(\"reset\", { offset: this.offset });\n            }\n\n            this.trigger(\"resize\");\n\n            if (this._expanding) {\n                this.trigger(\"expand\");\n            }\n\n            delete this._expanding;\n        },\n\n        _syncWithDataSource: function() {\n            var dataSource = this.dataSource;\n\n            this._firstItemUid = dataSource.firstItemUid();\n            this.dataOffset = this.offset = dataSource.skip() || 0;\n            this.pageSize = dataSource.pageSize();\n            this.useRanges = dataSource.options.serverPaging;\n        },\n\n        _recalculate: function() {\n            var pageSize = this.pageSize,\n                offset = this.offset,\n                viewSize = this.viewSize,\n                skip = Math.ceil(offset / pageSize) * pageSize;\n\n            this.skip = skip;\n            this.midPageThreshold = skip + pageSize - 1;\n            this.nextPageThreshold = skip + viewSize - 1;\n            this.prefetchThreshold = skip + Math.floor(pageSize / 3 * 2);\n            this.pullBackThreshold = this.offset - 1;\n\n            this.nextMidRange = skip + pageSize - viewSize;\n            this.nextFullRange = skip;\n            this.previousMidRange = offset - viewSize;\n            this.previousFullRange = skip - pageSize;\n        }\n    });\n\n    var BatchBuffer = kendo.Observable.extend({\n        init: function(dataSource, batchSize) {\n            var batchBuffer = this;\n\n            kendo.Observable.fn.init.call(batchBuffer);\n\n            this.dataSource = dataSource;\n            this.batchSize = batchSize;\n            this._total = 0;\n\n            this.buffer = new Buffer(dataSource, batchSize * 3);\n\n            this.buffer.bind({\n                \"endreached\": function (e) {\n                    batchBuffer.trigger(\"endreached\", { index: e.index });\n                },\n                \"prefetching\": function (e) {\n                    batchBuffer.trigger(\"prefetching\", { skip: e.skip, take: e.take });\n                },\n                \"prefetched\": function (e) {\n                    batchBuffer.trigger(\"prefetched\", { skip: e.skip, take: e.take });\n                },\n                \"reset\": function () {\n                    batchBuffer._total = 0;\n                    batchBuffer.trigger(\"reset\");\n                },\n                \"resize\": function () {\n                    batchBuffer._total = Math.ceil(this.length / batchBuffer.batchSize);\n                    batchBuffer.trigger(\"resize\", { total: batchBuffer.total(), offset: this.offset });\n                }\n            });\n        },\n\n        syncDataSource: function() {\n            this.buffer.syncDataSource();\n        },\n\n        at: function(index) {\n            var buffer = this.buffer,\n                skip = index * this.batchSize,\n                take = this.batchSize,\n                view = [],\n                item;\n\n            if (buffer.offset > skip) {\n                buffer.at(buffer.offset - 1);\n            }\n\n            for (var i = 0; i < take; i++) {\n                item = buffer.at(skip + i);\n\n                if (item === null) {\n                    break;\n                }\n\n                view.push(item);\n            }\n\n            return view;\n        },\n\n        total: function() {\n            return this._total;\n        },\n\n        destroy: function() {\n            this.buffer.destroy();\n            this.unbind();\n        }\n    });\n\n    extend(true, kendo.data, {\n        readers: {\n            json: DataReader\n        },\n        Query: Query,\n        DataSource: DataSource,\n        HierarchicalDataSource: HierarchicalDataSource,\n        Node: Node,\n        Comparer: Comparer,\n        ObservableObject: ObservableObject,\n        ObservableArray: ObservableArray,\n        LazyObservableArray: LazyObservableArray,\n        LocalTransport: LocalTransport,\n        RemoteTransport: RemoteTransport,\n        Cache: Cache,\n        DataReader: DataReader,\n        Model: Model,\n        Buffer: Buffer,\n        BatchBuffer: BatchBuffer\n    });\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.popup',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"popup\",\n    name: \"Pop-up\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    advanced: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        Class = kendo.Class,\n        support = kendo.support,\n        getOffset = kendo.getOffset,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        DEACTIVATE = \"deactivate\",\n        ACTIVATE = \"activate\",\n        CENTER = \"center\",\n        LEFT = \"left\",\n        RIGHT = \"right\",\n        TOP = \"top\",\n        BOTTOM = \"bottom\",\n        ABSOLUTE = \"absolute\",\n        HIDDEN = \"hidden\",\n        BODY = \"body\",\n        LOCATION = \"location\",\n        POSITION = \"position\",\n        VISIBLE = \"visible\",\n        EFFECTS = \"effects\",\n        ACTIVE = \"k-state-active\",\n        ACTIVEBORDER = \"k-state-border\",\n        ACTIVEBORDERREGEXP = /k-state-border-(\\w+)/,\n        ACTIVECHILDREN = \".k-picker-wrap, .k-dropdown-wrap, .k-link\",\n        MOUSEDOWN = \"down\",\n        DOCUMENT_ELEMENT = $(document.documentElement),\n        proxy = $.proxy,\n        WINDOW = $(window),\n        SCROLL = \"scroll\",\n        cssPrefix = support.transitions.css,\n        TRANSFORM = cssPrefix + \"transform\",\n        extend = $.extend,\n        NS = \".kendoPopup\",\n        styles = [\"font-size\",\n                  \"font-family\",\n                  \"font-stretch\",\n                  \"font-style\",\n                  \"font-weight\",\n                  \"line-height\"];\n\n    function contains(container, target) {\n        if (!container || !target) {\n            return false;\n        }\n        return container === target || $.contains(container, target);\n    }\n\n    var Popup = Widget.extend({\n        init: function(element, options) {\n            var that = this, parentPopup;\n\n            options = options || {};\n\n            if (options.isRtl) {\n                options.origin = options.origin || BOTTOM + \" \" + RIGHT;\n                options.position = options.position || TOP + \" \" + RIGHT;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n\n            that.collisions = options.collision ? options.collision.split(\" \") : [];\n            that.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n\n            if (that.collisions.length === 1) {\n                that.collisions.push(that.collisions[0]);\n            }\n\n            parentPopup = $(that.options.anchor).closest(\".k-popup,.k-group\").filter(\":not([class^=km-])\"); // When popup is in another popup, make it relative.\n\n            options.appendTo = $($(options.appendTo)[0] || parentPopup[0] || document.body);\n\n            that.element.hide()\n                .addClass(\"k-popup k-group k-reset\")\n                .toggleClass(\"k-rtl\", !!options.isRtl)\n                .css({ position : ABSOLUTE })\n                .appendTo(options.appendTo)\n                .attr(\"aria-hidden\", true)\n                .on(\"mouseenter\" + NS, function() {\n                    that._hovered = true;\n                })\n                .on(\"wheel\" + NS, function(e) {\n                    var list = $(e.target).find(\".k-list\");\n                    var scrollArea = list.parent();\n                    if (list.length && list.is(\":visible\") && ((scrollArea.scrollTop() === 0 && e.originalEvent.deltaY < 0) ||\n                        (scrollArea.scrollTop() === scrollArea.prop('scrollHeight') - scrollArea.prop('offsetHeight') && e.originalEvent.deltaY > 0))) {\n                           e.preventDefault();\n                    }\n                })\n                .on(\"mouseleave\" + NS, function() {\n                    that._hovered = false;\n                });\n\n            that.wrapper = $();\n\n            if (options.animation === false) {\n                options.animation = { open: { effects: {} }, close: { hide: true, effects: {} } };\n            }\n\n            extend(options.animation.open, {\n                complete: function() {\n                    that.wrapper.css({ overflow: VISIBLE }); // Forcing refresh causes flickering in mobile.\n                    that._activated = true;\n                    that._trigger(ACTIVATE);\n                }\n            });\n\n            extend(options.animation.close, {\n                complete: function() {\n                    that._animationClose();\n                }\n            });\n\n            that._mousedownProxy = function(e) {\n                that._mousedown(e);\n            };\n\n            if (support.mobileOS.android) {\n                that._resizeProxy = function(e) {\n                    setTimeout(function() {\n                        that._resize(e);\n                    }, 600); //Logic from kendo.onResize\n                };\n            } else {\n                that._resizeProxy = function(e) {\n                    that._resize(e);\n                };\n            }\n\n            if (options.toggleTarget) {\n                $(options.toggleTarget).on(options.toggleEvent + NS, $.proxy(that.toggle, that));\n            }\n        },\n\n        events: [\n            OPEN,\n            ACTIVATE,\n            CLOSE,\n            DEACTIVATE\n        ],\n\n        options: {\n            name: \"Popup\",\n            toggleEvent: \"click\",\n            origin: BOTTOM + \" \" + LEFT,\n            position: TOP + \" \" + LEFT,\n            anchor: BODY,\n            appendTo: null,\n            collision: \"flip fit\",\n            viewport: window,\n            copyAnchorStyles: true,\n            autosize: false,\n            modal: false,\n            adjustSize: {\n                width: 0,\n                height: 0\n            },\n            animation: {\n                open: {\n                    effects: \"slideIn:down\",\n                    transition: true,\n                    duration: 200\n                },\n                close: { // if close animation effects are defined, they will be used instead of open.reverse\n                    duration: 100,\n                    hide: true\n                }\n            },\n            omitOriginOffsets: false\n        },\n\n        _animationClose: function() {\n            var that = this;\n            var location = that.wrapper.data(LOCATION);\n\n            that.wrapper.hide();\n\n            if (location) {\n                that.wrapper.css(location);\n            }\n\n            if (that.options.anchor != BODY) {\n                that._hideDirClass();\n            }\n\n            that._closing = false;\n            that._trigger(DEACTIVATE);\n        },\n\n        destroy: function() {\n            var that = this,\n                options = that.options,\n                element = that.element.off(NS),\n                parent;\n\n            Widget.fn.destroy.call(that);\n\n            if (options.toggleTarget) {\n                $(options.toggleTarget).off(NS);\n            }\n\n            if (!options.modal) {\n                DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy);\n                that._toggleResize(false);\n            }\n\n            kendo.destroy(that.element.children());\n            element.removeData();\n\n            if (options.appendTo[0] === document.body) {\n                parent = element.parent(\".k-animation-container\");\n\n                if (parent[0]) {\n                    parent.remove();\n                } else {\n                    element.remove();\n                }\n            }\n        },\n\n        open: function(x, y) {\n            var that = this,\n                fixed = { isFixed: !isNaN(parseInt(y,10)), x: x, y: y },\n                element = that.element,\n                options = that.options,\n                animation, wrapper,\n                anchor = $(options.anchor),\n                mobile = element[0] && element.hasClass(\"km-widget\");\n\n            if (!that.visible()) {\n                if (options.copyAnchorStyles) {\n                    if (mobile && styles[0] == \"font-size\") {\n                        styles.shift();\n                    }\n                    element.css(kendo.getComputedStyles(anchor[0], styles));\n                }\n\n                if (element.data(\"animating\") || that._trigger(OPEN)) {\n                    return;\n                }\n\n                that._activated = false;\n\n                if (!options.modal) {\n                    DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy)\n                                .on(that.downEvent, that._mousedownProxy);\n\n                    // this binding hangs iOS in editor\n                    // all elements in IE7/8 fire resize event, causing mayhem\n                    that._toggleResize(false);\n                    that._toggleResize(true);\n                }\n\n                that.wrapper = wrapper = kendo.wrap(element, options.autosize)\n                                        .css({\n                                            overflow: HIDDEN,\n                                            display: \"block\",\n                                            position: ABSOLUTE\n                                        })\n                                        .attr(\"aria-hidden\", false);\n\n                if (support.mobileOS.android) {\n                    wrapper.css(TRANSFORM, \"translatez(0)\"); // Android is VERY slow otherwise. Should be tested in other droids as well since it may cause blur.\n                }\n\n                wrapper.css(POSITION);\n\n                if ($(options.appendTo)[0] == document.body) {\n                    wrapper.css(TOP, \"-10000px\");\n                }\n\n                that.flipped = that._position(fixed);\n                animation = that._openAnimation();\n\n                if (options.anchor != BODY) {\n                    that._showDirClass(animation);\n                }\n\n                if (!element.is(\":visible\") && element.data(\"olddisplay\") === undefined) {\n                    element.show();\n                    element.data(\"olddisplay\", element.css(\"display\"));\n                    element.hide();\n                }\n\n                element.data(EFFECTS, animation.effects)\n                       .kendoStop(true)\n                       .kendoAnimate(animation)\n                       .attr(\"aria-hidden\", false);\n            }\n        },\n\n        _location: function(isFixed) {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                wrapper,\n                anchor = $(options.anchor),\n                mobile = element[0] && element.hasClass(\"km-widget\");\n\n            if (options.copyAnchorStyles) {\n                if (mobile && styles[0] == \"font-size\") {\n                    styles.shift();\n                }\n                element.css(kendo.getComputedStyles(anchor[0], styles));\n            }\n\n            that.wrapper = wrapper = kendo.wrap(element, options.autosize)\n                                    .css({\n                                        overflow: HIDDEN,\n                                        display: \"block\",\n                                        position: ABSOLUTE\n                                    });\n\n            if (support.mobileOS.android) {\n                wrapper.css(TRANSFORM, \"translatez(0)\"); // Android is VERY slow otherwise. Should be tested in other droids as well since it may cause blur.\n            }\n\n            wrapper.css(POSITION);\n\n            if ($(options.appendTo)[0] == document.body) {\n                wrapper.css(TOP, \"-10000px\");\n            }\n\n            that._position(isFixed || {});\n\n            var offset = wrapper.offset();\n            return {\n                width: kendo._outerWidth(wrapper),\n                height: kendo._outerHeight(wrapper),\n                left: offset.left,\n                top: offset.top\n            };\n        },\n\n        _openAnimation: function() {\n            var animation = extend(true, {}, this.options.animation.open);\n            animation.effects = kendo.parseEffects(animation.effects, this.flipped);\n\n            return animation;\n        },\n\n        _hideDirClass: function() {\n            var anchor = $(this.options.anchor);\n            var direction = ((anchor.attr(\"class\") || \"\").match(ACTIVEBORDERREGEXP) || [\"\", \"down\"])[1];\n            var dirClass = ACTIVEBORDER + \"-\" + direction;\n\n            anchor\n                .removeClass(dirClass)\n                .children(ACTIVECHILDREN)\n                .removeClass(ACTIVE)\n                .removeClass(dirClass);\n\n            this.element.removeClass(ACTIVEBORDER + \"-\" + kendo.directions[direction].reverse);\n        },\n\n        _showDirClass: function(animation) {\n            var direction = animation.effects.slideIn ? animation.effects.slideIn.direction : \"down\";\n            var dirClass = ACTIVEBORDER + \"-\" + direction;\n\n            $(this.options.anchor)\n                .addClass(dirClass)\n                .children(ACTIVECHILDREN)\n                .addClass(ACTIVE)\n                .addClass(dirClass);\n\n            this.element.addClass(ACTIVEBORDER + \"-\" + kendo.directions[direction].reverse);\n        },\n\n        position: function() {\n            if (this.visible()) {\n                this.flipped = this._position();\n                //this._hideDirClass();\n                //this._showDirClass(this._openAnimation());\n            }\n        },\n\n        toggle: function() {\n            var that = this;\n\n            that[that.visible() ? CLOSE : OPEN]();\n        },\n\n        visible: function() {\n            return this.element.is(\":\" + VISIBLE);\n        },\n\n        close: function(skipEffects) {\n            var that = this,\n                options = that.options, wrap,\n                animation, openEffects, closeEffects;\n\n            if (that.visible()) {\n                wrap = (that.wrapper[0] ? that.wrapper : kendo.wrap(that.element).hide());\n\n                that._toggleResize(false);\n\n                if (that._closing || that._trigger(CLOSE)) {\n                    that._toggleResize(true);\n                    return;\n                }\n\n                // Close all inclusive popups.\n                that.element.find(\".k-popup\").each(function () {\n                    var that = $(this),\n                        popup = that.data(\"kendoPopup\");\n\n                    if (popup) {\n                        popup.close(skipEffects);\n                    }\n                });\n\n                DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy);\n\n                if (skipEffects) {\n                    animation = { hide: true, effects: {} };\n                } else {\n                    animation = extend(true, {}, options.animation.close);\n                    openEffects = that.element.data(EFFECTS);\n                    closeEffects = animation.effects;\n\n                    if (!closeEffects && !kendo.size(closeEffects) && openEffects && kendo.size(openEffects)) {\n                        animation.effects = openEffects;\n                        animation.reverse = true;\n                    }\n\n                    that._closing = true;\n                }\n\n                that.element\n                        .kendoStop(true)\n                        .attr(\"aria-hidden\", true);\n                wrap\n                    .css({ overflow: HIDDEN }) // stop callback will remove hidden overflow\n                    .attr(\"aria-hidden\", true);\n                that.element.kendoAnimate(animation);\n\n                if (skipEffects) {\n                    that._animationClose();\n                }\n            }\n        },\n\n        _trigger: function(ev) {\n            return this.trigger(ev, { type: ev });\n        },\n\n        _resize: function(e) {\n            var that = this;\n\n            if (support.resize.indexOf(e.type) !== -1) {\n                clearTimeout(that._resizeTimeout);\n                that._resizeTimeout = setTimeout(function() {\n                    that._position();\n                    that._resizeTimeout = null;\n                }, 50);\n            } else {\n                if (!that._hovered || (that._activated && that.element.find(\".k-list\").length > 0)) {\n                    that.close();\n                }\n            }\n        },\n\n        _toggleResize: function(toggle) {\n            var method = toggle ? \"on\" : \"off\";\n            var eventNames = support.resize;\n\n            if (!(support.mobileOS.ios || support.mobileOS.android || support.browser.safari)) {\n                eventNames += \" \" + SCROLL;\n            }\n\n            if (toggle && !this.scrollableParents) {\n                this.scrollableParents = this._scrollableParents();\n            }\n\n            if (this.scrollableParents && this.scrollableParents.length) {\n                this.scrollableParents[method](SCROLL, this._resizeProxy);\n            }\n\n            WINDOW[method](eventNames, this._resizeProxy);\n        },\n\n        _mousedown: function(e) {\n            var that = this,\n                container = that.element[0],\n                options = that.options,\n                anchor = $(options.anchor)[0],\n                toggleTarget = options.toggleTarget,\n                target = kendo.eventTarget(e),\n                popup = $(target).closest(\".k-popup\"),\n                mobile = popup.parent().parent(\".km-shim\").length;\n\n            popup = popup[0];\n            if (!mobile && popup && popup !== that.element[0]){\n                return;\n            }\n\n            // This MAY result in popup not closing in certain cases.\n            if ($(e.target).closest(\"a\").data(\"rel\") === \"popover\") {\n                return;\n            }\n\n            if (!contains(container, target) && !contains(anchor, target) && !(toggleTarget && contains($(toggleTarget)[0], target))) {\n                that.close();\n            }\n        },\n\n        _fit: function(position, size, viewPortSize) {\n            var output = 0;\n\n            if (position + size > viewPortSize) {\n                output = viewPortSize - (position + size);\n            }\n\n            if (position < 0) {\n                output = -position;\n            }\n\n            return output;\n        },\n\n        _flip: function(offset, size, anchorSize, viewPortSize, origin, position, boxSize) {\n            var output = 0;\n                boxSize = boxSize || size;\n\n            if (position !== origin && position !== CENTER && origin !== CENTER) {\n                if (offset + boxSize > viewPortSize) {\n                    output += -(anchorSize + size);\n                }\n\n                if (offset + output < 0) {\n                    output += anchorSize + size;\n                }\n            }\n            return output;\n        },\n\n        _scrollableParents: function() {\n            return $(this.options.anchor)\n                       .parentsUntil(\"body\")\n                       .filter(function(index, element) {\n                           return kendo.isScrollable(element);\n                       });\n        },\n\n        _position: function(fixed) {\n            var that = this,\n                //element = that.element.css(POSITION, \"\"), /* fixes telerik/kendo-ui-core#790, comes from telerik/kendo#615 */\n                element = that.element,\n                wrapper = that.wrapper,\n                options = that.options,\n                viewport = $(options.viewport),\n                zoomLevel = support.zoomLevel(),\n                isWindow = !!((viewport[0] == window) && window.innerWidth && (zoomLevel <= 1.02)),\n                anchor = $(options.anchor),\n                origins = options.origin.toLowerCase().split(\" \"),\n                positions = options.position.toLowerCase().split(\" \"),\n                collisions = that.collisions,\n                siblingContainer, parents,\n                parentZIndex, zIndex = 10002,\n                idx = 0,\n                docEl = document.documentElement,\n                length, viewportOffset, viewportWidth, viewportHeight;\n\n            if (options.viewport === window) {\n                viewportOffset = {\n                    top: (window.pageYOffset || document.documentElement.scrollTop || 0),\n                    left: (window.pageXOffset || document.documentElement.scrollLeft || 0)\n                };\n            } else {\n                viewportOffset = viewport.offset();\n            }\n\n            if (isWindow) {\n                viewportWidth = window.innerWidth;\n                viewportHeight = window.innerHeight;\n            } else {\n                viewportWidth = viewport.width();\n                viewportHeight = viewport.height();\n            }\n\n            if (isWindow && docEl.scrollHeight - docEl.clientHeight > 0) {\n                 var sign = options.isRtl ? -1 : 1;\n\n                 viewportWidth -= sign * kendo.support.scrollbar();\n            }\n\n            siblingContainer = anchor.parents().filter(wrapper.siblings());\n\n            if (siblingContainer[0]) {\n                parentZIndex = Math.max(Number(siblingContainer.css(\"zIndex\")), 0);\n\n                // set z-index to be more than that of the container/sibling\n                // compensate with more units for window z-stack\n                if (parentZIndex) {\n                    zIndex = parentZIndex + 10;\n                } else {\n                    parents = anchor.parentsUntil(siblingContainer);\n                    for (length = parents.length; idx < length; idx++) {\n                        parentZIndex = Number($(parents[idx]).css(\"zIndex\"));\n                        if (parentZIndex && zIndex < parentZIndex) {\n                            zIndex = parentZIndex + 10;\n                        }\n                    }\n                }\n            }\n\n            wrapper.css(\"zIndex\", zIndex);\n\n            if (fixed && fixed.isFixed) {\n                wrapper.css({ left: fixed.x, top: fixed.y });\n            } else {\n                wrapper.css(that._align(origins, positions));\n            }\n\n            var pos = getOffset(wrapper, POSITION, anchor[0] === wrapper.offsetParent()[0]),\n                offset = getOffset(wrapper),\n                anchorParent = anchor.offsetParent().parent(\".k-animation-container,.k-popup,.k-group\"); // If the parent is positioned, get the current positions\n\n            if (anchorParent.length) {\n                pos = getOffset(wrapper, POSITION, true);\n                offset = getOffset(wrapper);\n            }\n\n            offset.top -= viewportOffset.top;\n            offset.left -= viewportOffset.left;\n\n            if (!that.wrapper.data(LOCATION)) { // Needed to reset the popup location after every closure - fixes the resize bugs.\n                wrapper.data(LOCATION, extend({}, pos));\n            }\n\n            var offsets = extend({}, offset),\n                location = extend({}, pos),\n                adjustSize = options.adjustSize;\n\n            if (collisions[0] === \"fit\") {\n                location.top += that._fit(offsets.top, outerHeight(wrapper) + adjustSize.height, viewportHeight / zoomLevel);\n            }\n\n            if (collisions[1] === \"fit\") {\n                location.left += that._fit(offsets.left, outerWidth(wrapper) + adjustSize.width, viewportWidth / zoomLevel);\n            }\n\n            var flipPos = extend({}, location);\n            var elementHeight = outerHeight(element);\n            var wrapperHeight =  outerHeight(wrapper);\n\n            if (!wrapper.height() && elementHeight) {\n                wrapperHeight = wrapperHeight + elementHeight;\n            }\n\n            if (collisions[0] === \"flip\") {\n                location.top += that._flip(offsets.top, elementHeight, outerHeight(anchor), viewportHeight / zoomLevel, origins[0], positions[0], wrapperHeight);\n            }\n\n            if (collisions[1] === \"flip\") {\n                location.left += that._flip(offsets.left, outerWidth(element), outerWidth(anchor), viewportWidth / zoomLevel, origins[1], positions[1], outerWidth(wrapper));\n            }\n\n            element.css(POSITION, ABSOLUTE);\n            wrapper.css(location);\n\n            return (location.left != flipPos.left || location.top != flipPos.top);\n        },\n\n        _align: function(origin, position) {\n            var that = this,\n                element = that.wrapper,\n                anchor = $(that.options.anchor),\n                verticalOrigin = origin[0],\n                horizontalOrigin = origin[1],\n                verticalPosition = position[0],\n                horizontalPosition = position[1],\n                anchorOffset = getOffset(anchor),\n                appendTo = $(that.options.appendTo),\n                appendToOffset,\n                width = outerWidth(element),\n                height = outerHeight(element) || outerHeight(element.children().first()),\n                anchorWidth = outerWidth(anchor),\n                anchorHeight = outerHeight(anchor),\n                top = that.options.omitOriginOffsets ? 0 : anchorOffset.top,\n                left = that.options.omitOriginOffsets ? 0 : anchorOffset.left,\n                round = Math.round;\n\n            if (appendTo[0] != document.body) {\n                appendToOffset = getOffset(appendTo);\n                top -= appendToOffset.top;\n                left -= appendToOffset.left;\n            }\n\n\n            if (verticalOrigin === BOTTOM) {\n                top += anchorHeight;\n            }\n\n            if (verticalOrigin === CENTER) {\n                top += round(anchorHeight / 2);\n            }\n\n            if (verticalPosition === BOTTOM) {\n                top -= height;\n            }\n\n            if (verticalPosition === CENTER) {\n                top -= round(height / 2);\n            }\n\n            if (horizontalOrigin === RIGHT) {\n                left += anchorWidth;\n            }\n\n            if (horizontalOrigin === CENTER) {\n                left += round(anchorWidth / 2);\n            }\n\n            if (horizontalPosition === RIGHT) {\n                left -= width;\n            }\n\n            if (horizontalPosition === CENTER) {\n                left -= round(width / 2);\n            }\n\n            return {\n                top: top,\n                left: left\n            };\n        }\n    });\n\n    ui.plugin(Popup);\n\n    var stableSort = kendo.support.stableSort;\n    var tabKeyTrapNS = \"kendoTabKeyTrap\";\n    var focusableNodesSelector = \"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]\";\n    var TabKeyTrap = Class.extend({\n        init: function(element) {\n            this.element = $(element);\n            this.element.autoApplyNS(tabKeyTrapNS);\n        },\n\n        trap: function() {\n            this.element.on(\"keydown\", proxy(this._keepInTrap, this));\n        },\n\n        removeTrap: function() {\n            this.element.kendoDestroy(tabKeyTrapNS);\n        },\n\n        destroy: function() {\n            this.element.kendoDestroy(tabKeyTrapNS);\n            this.element = undefined;\n        },\n\n        shouldTrap: function () {\n            return true;\n        },\n\n        _keepInTrap: function(e) {\n            if (e.which !== 9 || !this.shouldTrap() || e.isDefaultPrevented()) {\n                return;\n            }\n\n            var elements = this._focusableElements();\n            var sortedElements = this._sortFocusableElements(elements);\n            var next = this._nextFocusable(e, sortedElements);\n\n            this._focus(next);\n\n            e.preventDefault();\n        },\n        _focusableElements: function(){\n            var elements = this.element.find(focusableNodesSelector).filter(function(i, item){\n                return item.tabIndex >= 0 && $(item).is(':visible') && !$(item).is('[disabled]');\n            });\n\n            if (this.element.is(\"[tabindex]\")) {\n                elements.push(this.element[0]);\n            }\n\n            return elements;\n        },\n        _sortFocusableElements: function(elements){\n            var sortedElements;\n\n            if (stableSort) {\n                sortedElements = elements.sort(function(prev, next) {\n                    return prev.tabIndex - next.tabIndex;\n                });\n            } else {\n                var attrName = \"__k_index\";\n                elements.each(function(i, item){\n                    item.setAttribute(attrName, i);\n                });\n\n                sortedElements = elements.sort(function(prev, next) {\n                    return prev.tabIndex === next.tabIndex ?\n                        parseInt(prev.getAttribute(attrName), 10) - parseInt(next.getAttribute(attrName), 10) :\n                        prev.tabIndex - next.tabIndex;\n                });\n\n                elements.removeAttr(attrName);\n            }\n\n            return sortedElements;\n        },\n        _nextFocusable: function(e, elements){\n            var count = elements.length;\n            var current = elements.index(e.target);\n\n            return elements.get((current + (e.shiftKey ? -1 : 1)) % count);\n        },\n        _focus: function(element){\n            if (element.nodeName == \"IFRAME\") {\n                element.contentWindow.document.body.focus();\n                return;\n            }\n\n            element.focus();\n\n            if (element.nodeName == \"INPUT\" && element.setSelectionRange && this._haveSelectionRange(element)) {\n                element.setSelectionRange(0, element.value.length);\n            }\n        },\n        _haveSelectionRange: function(element){\n            var elementType = element.type.toLowerCase();\n\n            return elementType === \"text\" || elementType === \"search\" ||\n            elementType === \"url\" || elementType === \"tel\" ||\n            elementType === \"password\";\n        }\n    });\n    ui.Popup.TabKeyTrap = TabKeyTrap;\n})(window.kendo.jQuery);\n\n\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define) {\n    define('kendo.list',[ \"./kendo.data\", \"./kendo.popup\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"list\",\n    name: \"List\",\n    category: \"framework\",\n    depends: [ \"data\", \"popup\" ],\n    hidden: true\n};\n\n/*jshint evil: true*/\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        outerHeight = kendo._outerHeight,\n        percentageUnitsRegex = /^\\d+(\\.\\d+)?%$/i,\n        Widget = ui.Widget,\n        keys = kendo.keys,\n        support = kendo.support,\n        htmlEncode = kendo.htmlEncode,\n        activeElement = kendo._activeElement,\n        outerWidth = kendo._outerWidth,\n        ObservableArray = kendo.data.ObservableArray,\n        ID = \"id\",\n        CHANGE = \"change\",\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        KSELECTED = \"k-selected\",\n        LOADING = \"k-i-loading\",\n        LIST = \"k-list\",\n        TABLE = \"k-table\",\n        DATA_TABLE = \"k-data-table\",\n        TABLE_MD = \"k-table-md\",\n        LIST_UL = \"k-list-ul\",\n        TABLE_LIST = \"k-table-list\",\n        FIXED_GROUP_HEADER = \".k-list-group-sticky-header\",\n        GROUP_LABEL = \".k-list-item-group-label\",\n        ITEMSELECTOR = \".k-list-item\",\n        LABELIDPART = \"_label\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CASCADE = \"cascade\",\n        SELECT = \"select\",\n        CLICK = \"click\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEENTER = \"mouseenter\",\n        ACTIVATE = \"activate\",\n        DEACTIVATE = \"deactivate\",\n        DATA_BINDING = \"dataBinding\",\n        DATA_BOUND = \"dataBound\",\n        SELECTED_ITEM_CHANGE = \"selectedItemChange\",\n        SELECTED = \"selected\",\n        REQUESTSTART = \"requestStart\",\n        REQUESTEND = \"requestEnd\",\n        BLUR = \"blur\",\n        FOCUS = \"focus\",\n        FOCUSOUT = \"focusout\",\n        extend = $.extend,\n        proxy = $.proxy,\n        isArray = Array.isArray,\n        browser = support.browser,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        TEXT = \"text\",\n        VALUE = \"value\",\n        isIE = browser.msie,\n        quotRegExp = /\"/g,\n        alternativeNames = {\n            \"ComboBox\": [ \"DropDownList\", \"MultiColumnComboBox\" ],\n            \"DropDownList\": [ \"ComboBox\", \"MultiColumnComboBox\" ],\n            \"MultiColumnComboBox\": [ \"ComboBox\", \"DropDownList\" ]\n        },\n\n        UL_EL = '<ul unselectable=\"on\"/>',\n        LIST_EL = \"<div class='k-list'/>\",\n        NO_DATA_EL = '<div class=\"k-no-data\" style=\"display: none;\"></div>',\n        LIST_FOOTER_EL = '<div class=\"k-list-footer\"></div>',\n        TABLE_FOOTER_EL = '<div class=\"k-table-footer\">' +\n                '<span class=\"k-table-td\"></span>' +\n            '</div>',\n        MOUSEDOWN = \"mousedown\",\n        LIST_SUFFIX = \"-list\",\n        LISTBOX_SUFFIX = \"_listbox\",\n        ARIA_LABELLEDBY = \"aria-labelledby\",\n        ARIA_LABEL = \"aria-label\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ARIA_AUTOCOMPLETE = \"aria-autocomplete\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_LIVE = \"aria-live\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_BUSY = \"aria-busy\",\n        ARIA_MULTISELECTABLE = \"aria-multiselectable\",\n        ARIA_SELECTED = \"aria-selected\",\n        GROUP_ROW_SEL = \".k-table-group-row\";\n\n    var List = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this,\n                id;\n\n            Widget.fn.init.call(that, element, options);\n            element = that.element;\n            options = that.options;\n\n            that._isSelect = element.is(SELECT);\n\n            if (that._isSelect && that.element[0].length) {\n                if (!options.dataSource) {\n                    options.dataTextField = options.dataTextField || TEXT;\n                    options.dataValueField = options.dataValueField || VALUE;\n                }\n            }\n\n            that._listSize = kendo.cssProperties.getValidClass({\n                widget: \"List\",\n                propName: \"size\",\n                value: options.size\n            });\n\n            that.ul = $(UL_EL).attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            that.list = $(LIST_EL)\n                .addClass(that._listSize)\n                .append(that.ul);\n\n            id = element.attr(ID);\n\n            if (!id) {\n                id = kendo.guid();\n            }\n\n            that.list.attr(ID, id + LIST_SUFFIX);\n            that.ul.attr(ID, id + LISTBOX_SUFFIX);\n\n            if (options.columns && options.columns.length) {\n                that.list.removeClass(LIST).addClass(DATA_TABLE);\n                that.list.removeClass(that._listSize).addClass(TABLE_MD);\n\n                that.ul.removeClass(LIST_UL).addClass(TABLE);\n\n                that._columnsHeader();\n            }\n\n            that._header();\n            that._noData();\n            that._footer();\n            that._accessors();\n            that._initValue();\n        },\n\n        options: {\n            valuePrimitive: false,\n            footerTemplate: \"\",\n            headerTemplate: \"\",\n            noDataTemplate: true,\n            size: \"medium\",\n            messages: {\n                \"noData\": \"No data found.\",\n                \"clear\": \"clear\"\n            }\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            if (options && options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (options.columns && options.columns.length) {\n                this._columnsHeader();\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n        },\n\n        focus: function() {\n            this._focused.trigger(FOCUS);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            this._angularElement(header, \"cleanup\");\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n\n            if (list.list.parent.length > 0) {\n                list.list.before(header);\n            }\n\n            this._angularElement(list.header, \"compile\");\n        },\n\n        _columnsHeader: function() {\n            var list = this;\n            var columnsHeader = $(list.columnsHeader);\n\n            this._angularElement(columnsHeader, \"cleanup\");\n            kendo.destroy(columnsHeader);\n            columnsHeader.remove();\n\n            var header = \"<div class='k-table-header'><div class='k-table-header-wrap'><table class='k-table' role='presentation'>\";\n            var colGroup = \"<colgroup>\";\n            var row = \"<tr class='k-table-row'>\";\n\n            for (var idx = 0; idx < this.options.columns.length; idx++) {\n                var currentColumn = this.options.columns[idx];\n                var title = currentColumn.title || currentColumn.field || \"\";\n                var template = currentColumn.headerTemplate || title;\n                var columnsHeaderTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n                var currentWidth = currentColumn.width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n\n                if (currentWidth && !isNaN(currentWidthInt)) {\n                    widthStyle += \"style='width:\";\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                    widthStyle += \";'\";\n                }\n\n                colGroup += \"<col \" + widthStyle + \"/>\";\n\n                row += \"<th class='k-table-th'>\";\n                row += columnsHeaderTemplate(currentColumn);\n                row += \"</th>\";\n            }\n            colGroup += \"</colgroup>\";\n            row += \"</tr>\";\n            header += colGroup;\n            header += \"<thead class='k-table-thead'>\";\n            header += row;\n            header += \"</thead></table></div></div>\";\n\n            list.columnsHeader = columnsHeader = $(header);\n            list.list.prepend(columnsHeader);\n\n            this._angularElement(list.columnsHeader, \"compile\");\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ? list.options.messages.noData : list.options.noDataTemplate;\n\n            list.angular(\"cleanup\", function() { return { elements: noData }; });\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $(NO_DATA_EL).appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n            var footerEl = this.options.columns && this.options.columns.length ? TABLE_FOOTER_EL : LIST_FOOTER_EL;\n\n            this._angularElement(footer, \"cleanup\");\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $(footerEl).appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _listOptions: function(options) {\n            var that = this;\n            var currentOptions = that.options;\n            var virtual = currentOptions.virtual;\n            var changeEventOption = { change: proxy(that._listChange, that) };\n            var listBoundHandler = proxy(that._listBound, that);\n            var focusedElm = that._focused;\n            var inputId = that.element.attr(\"id\");\n            var labelElm = $(\"label[for=\\\"\" + that.element.attr(\"id\") + \"\\\"]\");\n            var labelledBy = focusedElm.attr(ARIA_LABELLEDBY);\n\n            if (!labelledBy && labelElm.length) {\n                labelledBy = labelElm.attr(\"id\") || that._generateLabelId(labelElm, inputId || kendo.guid());\n            }\n\n            virtual = typeof virtual === \"object\" ? virtual : {};\n\n            options = $.extend({\n                autoBind: false,\n                selectable: true,\n                dataSource: that.dataSource,\n                click: proxy(that._click, that),\n                activate: proxy(that._activateItem, that),\n                columns: currentOptions.columns,\n                deactivate: proxy(that._deactivateItem, that),\n                dataBinding: function() {\n                    that.trigger(DATA_BINDING);\n                },\n                dataBound: listBoundHandler,\n                height: currentOptions.height,\n                dataValueField: currentOptions.dataValueField,\n                dataTextField: currentOptions.dataTextField,\n                groupTemplate: currentOptions.groupTemplate,\n                fixedGroupTemplate: currentOptions.fixedGroupTemplate,\n                template: currentOptions.template,\n                ariaLabel: focusedElm.attr(ARIA_LABEL),\n                ariaLabelledBy: labelledBy,\n                listSize: that._listSize\n            }, options, virtual, changeEventOption);\n\n            if (!options.template) {\n                options.template = \"#:\" + kendo.expr(options.dataTextField, \"data\") + \"#\";\n            }\n\n            if (currentOptions.$angular) {\n                options.$angular = currentOptions.$angular;\n            }\n\n            return options;\n        },\n\n        _initList: function() {\n            var that = this;\n            var listOptions = that._listOptions({\n                selectedItemChange: proxy(that._listChange, that)\n            });\n\n            if (!that.options.virtual) {\n                that.listView = new kendo.ui.StaticList(that.ul, listOptions);\n            } else {\n                that.listView = new kendo.ui.VirtualList(that.ul, listOptions);\n                that.list.addClass(\"k-virtual-list\");\n            }\n\n            that.listView.bind(\"listBound\", proxy(that._listBound, that));\n            that._setListValue();\n        },\n\n        _setListValue: function(value) {\n            value = value || this.options.value;\n\n            if (value !== undefined) {\n                this.listView.value(value)\n                    .done(proxy(this._updateSelectionState, this));\n            }\n        },\n\n        _updateSelectionState: $.noop,\n\n        _listMousedown: function(e) {\n            if (!this.filterInput || this.filterInput[0] !== e.target) {\n                e.preventDefault();\n            }\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _hideClear: function() {\n            var list = this;\n\n            if (list._clear) {\n                list._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _showClear: function() {\n            if (this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _clearValue: function() {\n            this._clearText();\n            this._accessor(\"\");\n            this.listView.value([]);\n\n            if (this._isSelect) {\n                this._customOption = undefined;\n            }\n\n            if (this._isFilterEnabled() && !this.options.enforceMinLength) {\n                this._filter({ word: \"\", open: false });\n\n                if (this.options.highlightFirst) {\n                    this.listView.focus(0);\n                }\n            }\n            this._change();\n        },\n\n        _clearText: function() {\n            this.text(\"\");\n        },\n\n        _clearFilter: function() {\n            if (!this.options.virtual) {\n                this.listView.bound(false);\n            }\n\n            this._filterSource();\n        },\n\n        _filterSource: function(filter, force) {\n            var that = this;\n            var options = that.options;\n            var isMultiColumnFiltering = options.filterFields && filter && filter.logic && filter.filters && filter.filters.length;\n            var dataSource = that.dataSource;\n            var expression = extend({}, dataSource.filter() || {});\n            var resetPageSettings = filter || (expression.filters && expression.filters.length && !filter);\n\n            var removed = removeFiltersForField(expression, options.dataTextField);\n\n            this._clearFilterExpressions(expression);\n\n            if ((filter || removed) && that.trigger(\"filtering\", { filter: filter })) {\n                return $.Deferred().reject().promise();\n            }\n\n            var newExpression = {\n                filters: [],\n                logic: \"and\"\n            };\n\n            if (isMultiColumnFiltering) {\n                newExpression.filters.push(filter);\n            } else {\n                this._pushFilterExpression(newExpression, filter);\n            }\n\n            if (isValidFilterExpr(expression)) {\n                if (newExpression.logic === expression.logic) {\n                    newExpression.filters = newExpression.filters.concat(expression.filters);\n                } else {\n                    newExpression.filters.push(expression);\n                }\n            }\n\n            if (that._cascading) {\n                this.listView.setDSFilter(newExpression);\n            }\n\n            var dataSourceState = extend({}, {\n                page: resetPageSettings ? 1 : dataSource.page(),\n                pageSize: resetPageSettings ? dataSource.options.pageSize : dataSource.pageSize(),\n                sort: dataSource.sort(),\n                filter: dataSource.filter(),\n                group: dataSource.group(),\n                aggregate: dataSource.aggregate()\n            }, { filter: newExpression });\n\n            return dataSource[force ? \"read\" : \"query\"](dataSource._mergeState(dataSourceState));\n        },\n\n        _pushFilterExpression: function(newExpression, filter) {\n            if (isValidFilterExpr(filter) && filter.value !== \"\") {\n                newExpression.filters.push(filter);\n            }\n        },\n\n        _clearFilterExpressions: function(expression) {\n            if (!expression.filters) {\n                return;\n            }\n\n            var filtersToRemove;\n\n            for (var i = 0; i < expression.filters.length; i++) {\n                if (\"fromFilter\" in expression.filters[i]) {\n                    filtersToRemove = i;\n                }\n            }\n\n            if (!isNaN(filtersToRemove)) {\n                expression.filters.splice(filtersToRemove, 1);\n            }\n        },\n\n        _angularElement: function(element, action) {\n            if (!element) {\n                return;\n            }\n\n            this.angular(action, function() {\n                return { elements: element };\n            });\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            this._angularElement(noData, \"cleanup\");\n            noData.html(list.noDataTemplate({ instance: list }));\n            this._angularElement(noData, \"compile\");\n        },\n\n        _toggleNoData: function(show) {\n            $(this.noData).toggle(show);\n        },\n\n        _toggleHeader: function(show) {\n            var groupHeader = this.listView.content.prev(FIXED_GROUP_HEADER);\n            groupHeader.toggle(show);\n        },\n\n        _renderFooter: function() {\n            var list = this,\n                footer = list.footer ? this.options.columns && this.options.columns.length ? list.footer.children().first() : list.footer : null;\n\n            if (!footer) {\n                return;\n            }\n\n            this._angularElement(footer, \"cleanup\");\n            footer.html(list.footerTemplate({ instance: list }));\n            this._angularElement(footer, \"compile\");\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.dataSource.flatView().length;\n        },\n\n        _initValue: function() {\n            var that = this,\n                value = that.options.value;\n\n            if (value !== null) {\n                that.element.val(value);\n            } else {\n                value = that._accessor();\n                that.options.value = value;\n            }\n\n            that._old = value;\n        },\n\n        _ignoreCase: function() {\n            var that = this,\n                model = that.dataSource.reader.model,\n                field;\n\n            if (model && model.fields) {\n                field = model.fields[that.options.dataTextField];\n\n                if (field && field.type && field.type !== \"string\") {\n                    that.options.ignoreCase = false;\n                }\n            }\n        },\n\n        _focus: function(candidate) {\n            return this.listView.focus(candidate);\n        },\n\n        _filter: function(options) {\n            var that = this;\n            var widgetOptions = that.options;\n            var word = options.word;\n            var filterFields = widgetOptions.filterFields;\n            var field = widgetOptions.dataTextField;\n            var expression;\n\n            if (filterFields && filterFields.length) {\n                expression = {\n                    logic: \"or\",\n                    filters: [],\n                    fromFilter: true\n                };\n                for (var i = 0; i < filterFields.length; i++) {\n                    this._pushFilterExpression(expression, that._buildExpression(word, filterFields[i]));\n                }\n            } else {\n                expression = that._buildExpression(word, field);\n            }\n\n            that._open = options.open;\n            that._filterSource(expression);\n        },\n\n        _buildExpression: function(value, field) {\n            var that = this;\n            var widgetOptions = that.options;\n            var ignoreCase = widgetOptions.ignoreCase;\n            var accentFoldingFiltering = that.dataSource.options.accentFoldingFiltering;\n\n            return {\n                value: ignoreCase ? (accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase()) : value,\n                field: field,\n                operator: widgetOptions.filter,\n                ignoreCase: ignoreCase\n            };\n        },\n\n        _clearButton: function() {\n            var list = this;\n            var clearTitle = list.options.messages.clear;\n\n            if (!list._clear) {\n                list._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\"><span class=\"k-icon k-i-x\"></span></span>').attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (!list.options.clearButton) {\n                list._clear.remove();\n            }\n            this._hideClear();\n        },\n\n        search: function(word) {\n            var options = this.options;\n\n            word = typeof word === \"string\" ? word : this._inputValue();\n\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                this._state = \"filter\";\n                if (this.listView) {\n                    this.listView._emptySearch = !kendo.trim(word).length;\n                }\n\n                if (!this._isFilterEnabled()) {\n                    this._searchByWord(word);\n                } else {\n                    this._filter({ word: word, open: true });\n                }\n            }\n        },\n\n        current: function(candidate) {\n            return this._focus(candidate);\n        },\n\n        items: function() {\n            return this.ul[0].children;\n        },\n\n        destroy: function() {\n            var that = this;\n            var ns = that.ns;\n\n            Widget.fn.destroy.call(that);\n\n            that._unbindDataSource();\n\n            that.listView.destroy();\n            that.list.off(ns);\n\n            that.popup.destroy();\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n        },\n\n        dataItem: function(index) {\n            var that = this;\n\n            if (index === undefined) {\n                return that.listView.selectedDataItems()[0];\n            }\n\n            if (typeof index !== \"number\") {\n                if (that.options.virtual) {\n                    return that.dataSource.getByUid($(index).data(\"uid\"));\n                }\n\n                index = $(that.items()).index(index);\n            }\n\n            return that.dataSource.flatView()[index];\n        },\n\n        _activateItem: function() {\n            var current = this.listView.focus();\n            if (current) {\n                this._focused.add(this.filterInput).attr(ARIA_ACTIVEDESCENDANT, current.attr(\"id\"));\n            }\n        },\n\n        _deactivateItem: function() {\n            this._focused.add(this.filterInput).removeAttr(ARIA_ACTIVEDESCENDANT);\n        },\n\n        _accessors: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            that._text = getter(options.dataTextField);\n            that._value = getter(options.dataValueField);\n        },\n\n        _aria: function(id) {\n            var that = this,\n                options = that.options,\n                element = that._focused,\n                autocomplete;\n\n            if (options.suggest !== undefined) {\n                if (options.filter === \"none\") {\n                    if (options.suggest === true) {\n                        autocomplete = \"inline\";\n                    } else {\n                        autocomplete = \"none\";\n                    }\n                } else {\n                    if (options.suggest === true) {\n                        autocomplete = \"both\";\n                    } else {\n                        autocomplete = \"list\";\n                    }\n                }\n\n                element.attr(ARIA_AUTOCOMPLETE, autocomplete);\n            }\n\n            id = id ? id + \" \" + that.ul[0].id : that.ul[0].id;\n\n            element.attr({\n                \"aria-owns\": id,\n                \"aria-controls\": id\n            });\n\n            if (that.filterInput && that.filterInput.length > 0) {\n                that.filterInput.attr(ARIA_CONTROLS, id);\n            }\n\n            that.ul.attr(ARIA_LIVE, !that._isFilterEnabled() ? \"off\" : \"polite\");\n\n            that._ariaLabel();\n        },\n\n        _ariaLabel: function() {\n            var that = this;\n            var focusedElm = that._focused;\n            var inputElm = that.element;\n            var inputId = inputElm.attr(\"id\");\n            var labelElm = $(\"label[for=\\\"\" + inputId + \"\\\"]\");\n            var ariaLabel = inputElm.attr(ARIA_LABEL);\n            var ariaLabelledBy = inputElm.attr(ARIA_LABELLEDBY);\n\n            if (focusedElm === inputElm) {\n                return;\n            }\n\n            if (ariaLabel) {\n                focusedElm.attr(ARIA_LABEL, ariaLabel);\n            } else if (ariaLabelledBy) {\n                focusedElm.attr(ARIA_LABELLEDBY, ariaLabelledBy);\n            } else if (labelElm.length) {\n                var labelId = labelElm.attr(\"id\") || that._generateLabelId(labelElm, inputId || kendo.guid());\n                focusedElm.attr(ARIA_LABELLEDBY, labelId);\n            }\n        },\n\n        _generateLabelId: function(label, inputId) {\n            var labelId = inputId + LABELIDPART;\n            label.attr(\"id\", labelId);\n\n            return labelId;\n        },\n\n        _blur: function() {\n            var that = this;\n\n            that._change();\n            that.close();\n            that._userTriggered = false;\n        },\n\n        _isValueChanged: function(value) {\n            return value !== unifyType(this._old, typeof value);\n        },\n\n        _change: function() {\n            var that = this;\n            var index = that.selectedIndex;\n            var optionValue = that.options.value;\n            var value = that.value();\n            var trigger;\n\n            if (that._isSelect && !that.listView.bound() && optionValue) {\n                value = optionValue;\n            }\n\n            if (that._isValueChanged(value)) {\n                trigger = true;\n            } else if (that._valueBeforeCascade !== undefined && that._valueBeforeCascade !== unifyType(that._old, typeof that._valueBeforeCascade) && that._userTriggered) {\n                trigger = true;\n            } else if (index !== undefined && index !== that._oldIndex && !that.listView.isFiltered()) {\n                trigger = true;\n            }\n\n            if (trigger) {\n\n                if (that._old === null || that._old === \"\" || value === \"\") {\n                    that._valueBeforeCascade = that._old = value;\n                } else {\n                    if (that.dataItem()) {\n                        that._valueBeforeCascade = that._old = that.options.dataValueField ? that.dataItem()[that.options.dataValueField] : that.dataItem();\n                    } else {\n                        that._valueBeforeCascade = that._old = null;\n                    }\n                }\n                that._oldIndex = index;\n\n                if (!that._typing) {\n                    // trigger the DOM change event so any subscriber gets notified\n                    that.element.trigger(CHANGE);\n                }\n\n                that.trigger(CHANGE);\n            }\n\n            that.typing = false;\n        },\n\n        _data: function() {\n            return this.dataSource.view();\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _dataValue: function(dataItem) {\n            var value = this._value(dataItem);\n\n            if (value === undefined) {\n                value = this._text(dataItem);\n            }\n\n            return value;\n        },\n\n        _offsetHeight: function() {\n            var offsetHeight = 0;\n            var siblings = this.listView.content.parent().prevAll(\":visible\");\n\n            siblings.each(function() {\n                var element = $(this);\n\n                offsetHeight += outerHeight(element, true);\n            });\n\n            return offsetHeight;\n        },\n\n        _height: function(length) {\n            var that = this;\n            var list = that.list;\n            var height = that.options.height;\n            var visible = that.popup.visible();\n            var isMccb = this.options.columns && this.options.columns.length;\n            var offsetTop, popups;\n\n            if (length || that.options.noDataTemplate) {\n                // Check where animation container stays\n                popups = list.parent().add(list.closest(\".k-animation-container\")).show();\n\n                if (!list.parent().is(\":visible\")) {\n                    popups.hide();\n                    return;\n                }\n\n                height = that.listView.content[0].scrollHeight > height ? height : \"auto\";\n\n                popups.height(height);\n\n                if (height !== \"auto\") {\n                    offsetTop = that._offsetHeight();\n\n                    height = height - offsetTop;\n\n                    if (isMccb) {\n                        height = height - (outerHeight($(that.footer)) || 0) - (outerHeight($(that.columnsHeader)) || 0);\n                    }\n                }\n\n                if (isMccb) {\n                    that.listView.content.outerHeight(height);\n                } else {\n                    that.listView.content.parent().outerHeight(height);\n                }\n\n                if (!visible) {\n                    popups.hide();\n                }\n            }\n\n            return height;\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                this._focused.attr(ARIA_EXPANDED, true);\n                this.ul.attr(ARIA_HIDDEN, false);\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list.parent(),\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                this._focused.attr(ARIA_EXPANDED, false);\n                this.ul.attr(ARIA_HIDDEN, true);\n            }\n        },\n\n        _focusItem: function() {\n            var listView = this.listView;\n            var noFocusedItem = !listView.focus();\n            var index = last(listView.select());\n\n            if (index === undefined && this.options.highlightFirst && noFocusedItem) {\n                index = 0;\n            }\n\n            if (index !== undefined) {\n                listView.focus(index);\n            } else if (noFocusedItem) {\n                listView.scrollToIndex(0);\n            }\n        },\n\n        _calculateGroupPadding: function(height) {\n            var li = this.ul.children(\".k-first\").first();\n            var groupHeader = this.listView.content.prev(FIXED_GROUP_HEADER);\n            var padding = 0;\n            var direction = 'right';\n\n            if (groupHeader[0] && groupHeader[0].style.display !== \"none\") {\n                if (height !== \"auto\") {\n                    padding = kendo.support.scrollbar();\n                }\n\n                if (this.element.parents('.k-rtl').length) {\n                    direction = 'left';\n                }\n\n                padding += parseFloat(li.css(\"border-\" + direction + \"-width\"), 10) + parseFloat(li.children(GROUP_LABEL).css(\"padding-\" + direction), 10);\n                groupHeader.css(\"padding-\" + direction, padding);\n            }\n        },\n\n        _calculatePopupHeight: function(force) {\n            var height = this._height(this.dataSource.flatView().length || force);\n            this._calculateGroupPadding(height);\n            this._calculateColumnsHeaderPadding(height);\n        },\n\n        _calculateColumnsHeaderPadding: function(height) {\n            if (this.options.columns && this.options.columns.length) {\n                var list = this;\n                var isRtl = support.isRtl(list.wrapper);\n                var scrollbar = kendo.support.scrollbar();\n\n                list.columnsHeader.css((isRtl ? \"padding-left\" : \"padding-right\"), height !== \"auto\" ? scrollbar : 0);\n            }\n        },\n\n        _refreshScroll: function() {\n            var listView = this.listView;\n            var enableYScroll = listView.element.height() > listView.content.height();\n\n            if (this.options.autoWidth) {\n                listView.content.css({\n                    overflowX: \"hidden\",\n                    overflowY: enableYScroll ? \"scroll\" : \"auto\"\n                });\n            }\n        },\n\n        _resizePopup: function(force) {\n            if (this.options.virtual) {\n                return;\n            }\n\n            if (!this.popup.element.is(\":visible\")) {\n                this.popup.one(\"open\", (function(force) {\n                    return proxy(function() {\n                        this._calculatePopupHeight(force);\n                    }, this);\n                }).call(this, force));\n\n                this.popup.one(ACTIVATE, proxy(this._refreshScroll, this));\n            } else {\n                this._calculatePopupHeight(force);\n            }\n        },\n\n        _popup: function() {\n            var list = this;\n\n            list.list.wrap(\"<div>\");\n\n            list.popup = new ui.Popup(list.list.parent(), extend({}, list.options.popup, {\n                anchor: list.wrapper,\n                open: proxy(list._openHandler, list),\n                close: proxy(list._closeHandler, list),\n                animation: list.options.animation,\n                isRtl: support.isRtl(list.wrapper),\n                autosize: list.options.autoWidth\n            }));\n\n            list.popup.element.prepend(list.header)\n                .on(MOUSEDOWN + this.ns, proxy(this._listMousedown, this));\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === MOUSEENTER);\n        },\n\n        _toggle: function(open, preventFocus) {\n            var that = this;\n            var touchEnabled = support.mobileOS && (support.touch || support.MSPointers || support.pointers);\n\n            open = open !== undefined ? open : !that.popup.visible();\n\n            if (!preventFocus && !touchEnabled && that._focused[0] !== activeElement()) {\n                that._prevent = true;\n                that._focused.trigger(FOCUS);\n                that._prevent = false;\n            }\n\n            that[open ? OPEN : CLOSE]();\n        },\n\n        _triggerCascade: function() {\n            var that = this;\n\n            if (!that._cascadeTriggered || that.value() !== unifyType(that._cascadedValue, typeof that.value())) {\n                that._cascadedValue = that.value();\n                that._cascadeTriggered = true;\n                that.trigger(CASCADE, { userTriggered: that._userTriggered });\n            }\n        },\n\n        _triggerChange: function() {\n            if (this._valueBeforeCascade !== this.value()) {\n                this.trigger(CHANGE);\n            }\n        },\n\n        _unbindDataSource: function() {\n            var that = this;\n\n            that.dataSource.unbind(REQUESTSTART, that._requestStartHandler)\n                           .unbind(REQUESTEND, that._requestEndHandler)\n                           .unbind(\"error\", that._errorHandler);\n        },\n\n        requireValueMapper: function(options, value) {\n            var hasValue = (options.value instanceof Array ? options.value.length : options.value) || (value instanceof Array ? value.length : value);\n            if (hasValue && options.virtual && typeof options.virtual.valueMapper !== \"function\") {\n                throw new Error(\"ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function\");\n            }\n        }\n    });\n\n    function unifyType(value, type) {\n        if (value !== undefined && value !== \"\" && value !== null) {\n            if (type === \"boolean\") {\n                if (typeof value !== \"boolean\") {\n                    value = value.toString().toLowerCase() === \"true\";\n                }\n                value = Boolean(value);\n            } else if (type === \"number\") {\n                value = Number(value);\n            } else if (type === \"string\") {\n                value = value.toString();\n            }\n        }\n\n        return value;\n    }\n\n    extend(List, {\n        inArray: function(node, parentNode) {\n            var idx, length, siblings = parentNode.children;\n\n            if (!node || node.parentNode !== parentNode) {\n                return -1;\n            }\n\n            for (idx = 0, length = siblings.length; idx < length; idx++) {\n                if (node === siblings[idx]) {\n                    return idx;\n                }\n            }\n\n            return -1;\n        },\n        unifyType: unifyType\n    });\n\n    kendo.ui.List = List;\n\n    ui.Select = List.extend({\n        init: function(element, options) {\n            List.fn.init.call(this, element, options);\n            this._initial = this.element.val();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var parent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            if (that.listView.bound()) {\n                that._initialIndex = null;\n                that.listView._current = null;\n            }\n\n            that.listView.setDataSource(that.dataSource);\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            parent = that._parentWidget();\n\n            if (parent) {\n                that._cascadeSelect(parent);\n            }\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        select: function(candidate) {\n            var that = this;\n\n            if (candidate === undefined) {\n                return that.selectedIndex;\n            } else {\n                return that._select(candidate).done(function() {\n                    that._cascadeValue = that._old = that._accessor();\n                    that._oldIndex = that.selectedIndex;\n                });\n            }\n        },\n\n        _accessor: function(value, idx) {\n            return this[this._isSelect ? \"_accessorSelect\" : \"_accessorInput\"](value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _accessorSelect: function(value, idx) {\n            var element = this.element[0];\n            var hasValue;\n\n            if (value === undefined) {\n                return getSelectedOption(element).value || \"\";\n            }\n\n            getSelectedOption(element).selected = false;\n\n            if (idx === undefined) {\n                idx = -1;\n            }\n\n            hasValue = (value !== null && value !== \"\");\n\n            if (hasValue && idx == -1) {\n                this._custom(value);\n            } else {\n                if (value) {\n                    element.value = value;\n                } else {\n                    element.selectedIndex = idx;\n                }\n            }\n        },\n\n        _syncValueAndText: function() {\n            return true;\n        },\n\n        _custom: function(value) {\n            var that = this;\n            var element = that.element;\n            var custom = that._customOption;\n\n            if (!custom) {\n                custom = $(\"<option/>\");\n                that._customOption = custom;\n\n                element.append(custom);\n            }\n\n            custom.text(value);\n            custom[0].selected = true;\n        },\n\n        _hideBusy: function() {\n            var that = this;\n            clearTimeout(that._busy);\n            that._arrowIcon.removeClass(LOADING);\n            that._focused.attr(ARIA_BUSY, false);\n            that._busy = null;\n            that._showClear();\n        },\n\n        _showBusy: function(e) {\n            var that = this;\n\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            that._request = true;\n\n            if (that._busy) {\n                return;\n            }\n\n            that._busy = setTimeout(function() {\n                if (that._arrowIcon) { //destroyed after request start\n                    that._focused.attr(ARIA_BUSY, true);\n                    that._arrowIcon.addClass(LOADING);\n                    that._hideClear();\n                }\n            }, 100);\n        },\n\n        _requestEnd: function() {\n            this._request = false;\n            this._hideBusy();\n        },\n\n        _dataSource: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                dataSource = options.dataSource || {},\n                idx;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that._isSelect) {\n                idx = element[0].selectedIndex;\n                if (idx > -1) {\n                    options.index = idx;\n                }\n\n                dataSource.select = element;\n                dataSource.fields = [{ field: options.dataTextField },\n                                     { field: options.dataValueField }];\n            }\n\n            if (that.dataSource) {\n                that._unbindDataSource();\n            } else {\n                that._requestStartHandler = proxy(that._showBusy, that);\n                that._requestEndHandler = proxy(that._requestEnd, that);\n                that._errorHandler = proxy(that._hideBusy, that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(dataSource)\n                                   .bind(REQUESTSTART, that._requestStartHandler)\n                                   .bind(REQUESTEND, that._requestEndHandler)\n                                   .bind(\"error\", that._errorHandler);\n        },\n\n        _firstItem: function() {\n            this.listView.focusFirst();\n        },\n\n        _lastItem: function() {\n            this.listView.focusLast();\n        },\n\n        _nextItem: function() {\n            return this.listView.focusNext();\n        },\n\n        _prevItem: function() {\n            return this.listView.focusPrev();\n        },\n\n        _getNormalizedDataItem: function(candidate) {\n            var that = this,\n                listView = that.listView,\n                isIndex = typeof candidate === \"number\",\n                hasOptionLabel = that.optionLabel && that.optionLabel.length,\n                index;\n\n            if (isIndex) {\n                index = hasOptionLabel ? --candidate : candidate;\n            } else {\n                index = listView.getElementIndex(candidate);\n            }\n\n            return listView.dataItemByIndex(index);\n        },\n\n        _getNormalizedSelectCandidate: function(candidate) {\n            var that = this,\n                hasOptionLabel = that.optionLabel && that.optionLabel.length,\n                isIndex = typeof candidate === \"number\",\n                normalizedCandidate = candidate;\n\n            if (hasOptionLabel && isIndex) {\n                normalizedCandidate++;\n            }\n\n            return normalizedCandidate;\n        },\n\n        _move: function(e) {\n            var that = this;\n            var listView = that.listView;\n            var key = e.keyCode;\n            var down = key === keys.DOWN;\n            var isVirtual = that.options.virtual;\n            var dataItem;\n            var pressed;\n            var current;\n            var moveIndex;\n            var selectCandidate;\n\n            if (key === keys.UP || down) {\n                if (e.altKey) {\n                    that.toggle(down);\n                } else {\n                    if (!listView.bound() && !that.ul[0].firstChild) {\n                        if (!that._fetch) {\n                            that.dataSource.one(CHANGE, function() {\n                                that._fetch = false;\n                                that._move(e);\n                            });\n\n                            that._fetch = true;\n                            that._filterSource();\n                        }\n\n                        e.preventDefault();\n\n                        return true; //pressed\n                    }\n\n                    current = that._focus();\n\n                    if (!that._fetch && (!current || current.hasClass(KSELECTED))) {\n                        if (down) {\n                            moveIndex = that._nextItem();\n\n                            if ((isVirtual && moveIndex <= 0) || (!that._focus() && !moveIndex) ) {\n                                that._lastItem();\n                            }\n                        } else {\n                            moveIndex = that._prevItem();\n\n                            if ((isVirtual && moveIndex >= listView.dataSource.total() - 1) || (!that._focus() && !moveIndex)) {\n                                that._firstItem();\n                            }\n                        }\n                    }\n\n                    selectCandidate = that._getNormalizedSelectCandidate(that._get(that._focus()) || moveIndex || 0);\n\n                    that._select(selectCandidate, true).done(function() {\n                        var done = function() {\n                            if (!that.popup.visible()) {\n                                that._blur();\n                            }\n\n                            if (that._cascadedValue === null) {\n                                that._cascadedValue = that.value();\n                            } else {\n                                that._cascadedValue = that.dataItem() ? that.dataItem()[that.options.dataValueField] || that.dataItem() : null;\n                            }\n                        };\n\n                        if (that.trigger(SELECT, { dataItem: that._getNormalizedDataItem(selectCandidate), item: that._focus() })) {\n                            that._select(current).done(done);\n                        } else {\n                            done();\n                        }\n                    });\n                }\n\n                e.preventDefault();\n                pressed = true;\n            } else if (key === keys.ENTER || key === keys.TAB) {\n                if (that.popup.visible()) {\n                    e.preventDefault();\n                }\n\n                current = that._focus();\n                dataItem = that.dataItem();\n\n                if (!that.popup.visible() && (!dataItem || that.text() !== that._text(dataItem))) {\n                    current = null;\n                }\n\n                var activeFilter = that.filterInput && that.filterInput[0] === activeElement();\n                var selection;\n\n                if (current) {\n                    dataItem = listView.dataItemByIndex(listView.getElementIndex(current));\n                    var shouldTrigger = true;\n\n                    if (dataItem) {\n                        shouldTrigger = that._value(dataItem) !== List.unifyType(that.value(), typeof that._value(dataItem));\n                    }\n\n                    if (shouldTrigger && that.trigger(SELECT, { dataItem: dataItem, item: current })) {\n                        return;\n                    }\n\n                    selection = that._select(current);\n                } else if (that.input) {\n                    if (that._syncValueAndText() || that._isSelect) {\n                        that._accessor(that.input.val());\n                    }\n                    that.listView.value(that.input.val());\n                }\n\n                if (that._focusElement) {\n                    that._focusElement(that.wrapper);\n                }\n\n                if (activeFilter && key === keys.TAB) {\n                    that.wrapper.focusout();\n                } else {\n                    if (selection && typeof selection.done === \"function\") {\n                        selection.done(function() {\n                            that._blur();\n                        });\n                    } else {\n                        that._blur();\n                    }\n                }\n\n                that.close();\n                pressed = true;\n            } else if (key === keys.ESC) {\n                if (that.popup.visible()) {\n                    e.preventDefault();\n                }\n                that.close();\n                pressed = true;\n            } else if (that.popup.visible() && (key === keys.PAGEDOWN || key === keys.PAGEUP)) {\n                e.preventDefault();\n\n                var direction = key === keys.PAGEDOWN ? 1 : -1;\n                listView.scrollWith(direction * listView.screenHeight());\n\n                pressed = true;\n            }\n\n            return pressed;\n        },\n\n        _fetchData: function() {\n            var that = this;\n            var hasItems = !!that.dataSource.view().length;\n\n            if (that._request || that.options.cascadeFrom) {\n                return;\n            }\n\n            if (!that.listView.bound() && !that._fetch && !hasItems) {\n                that._fetch = true;\n                that.dataSource.fetch().done(function() {\n                    that._fetch = false;\n                });\n            }\n        },\n\n        _options: function(data, optionLabel, value) {\n            var that = this,\n                element = that.element,\n                htmlElement = element[0],\n                length = data.length,\n                options = \"\",\n                option,\n                dataItem,\n                dataText,\n                dataValue,\n                idx = 0;\n\n            if (optionLabel) {\n                options = optionLabel;\n            }\n\n            for (; idx < length; idx++) {\n                option = \"<option\";\n                dataItem = data[idx];\n                dataText = that._text(dataItem);\n                dataValue = that._value(dataItem);\n\n                if (dataValue !== undefined) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n\n                option += \">\";\n\n                if (dataText !== undefined) {\n                    option += htmlEncode(dataText);\n                }\n\n                option += \"</option>\";\n                options += option;\n            }\n\n            element.html(options);\n\n            if (value !== undefined) {\n                htmlElement.value = value;\n                if (htmlElement.value && !value) {\n                    htmlElement.selectedIndex = -1;\n                }\n            }\n\n            if (htmlElement.selectedIndex !== -1) {\n                option = getSelectedOption(htmlElement);\n\n                if (option) {\n                    option.setAttribute(SELECTED, SELECTED);\n                }\n            }\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _parentWidget: function() {\n            var name = this.options.name;\n\n            if (!this.options.cascadeFrom) {\n                return;\n            }\n\n            var parentElement = $(\"#\" + this.options.cascadeFrom);\n            var parent = parentElement.data(\"kendo\" + name);\n\n            if (!parent) {\n                for (var i = 0; i < alternativeNames[name].length; i += 1) {\n                    parent = parentElement.data(\"kendo\" + alternativeNames[name][i]);\n\n                    if (!!parent) {\n                        break;\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        _cascade: function() {\n            var that = this;\n            var options = that.options;\n            var cascade = options.cascadeFrom;\n            var parent;\n\n            if (cascade) {\n                parent = that._parentWidget();\n\n                if (!parent) {\n                    return;\n                }\n\n                that._cascadeHandlerProxy = proxy(that._cascadeHandler, that);\n                that._cascadeFilterRequests = [];\n\n                options.autoBind = false;\n\n                parent.bind(\"set\", function() { //will cascade\n                    that.one(\"set\", function(e) { //get your value\n                        that._selectedValue = e.value || that._accessor();\n                    });\n                });\n\n                parent.first(CASCADE, that._cascadeHandlerProxy);\n\n                //refresh was called\n                if (parent.listView.bound()) {\n                    that._toggleCascadeOnFocus();\n                    that._cascadeSelect(parent);\n                } else {\n                    parent.one(DATA_BOUND, function() {\n                        that._toggleCascadeOnFocus();\n                        if (parent.popup.visible()) {\n                            parent._focused.trigger(FOCUS);\n                        }\n                    });\n\n                    if (!parent.value()) {\n                        that.enable(false);\n                    }\n                }\n            }\n        },\n\n        _toggleCascadeOnFocus: function() {\n            var that = this;\n            var parent = that._parentWidget();\n            var focusout = isIE && parent instanceof ui.DropDownList ? BLUR : FOCUSOUT;\n\n            parent._focused.add(parent.filterInput).on(FOCUS, function() {\n                parent.unbind(CASCADE, that._cascadeHandlerProxy);\n                parent.unbind(CHANGE, that._cascadeHandlerProxy);\n                parent.first(CHANGE, that._cascadeHandlerProxy);\n            });\n\n            parent._focused.add(parent.filterInput).on(focusout, function() {\n                parent.unbind(CHANGE, that._cascadeHandlerProxy);\n                parent.unbind(CASCADE, that._cascadeHandlerProxy);\n                parent.first(CASCADE, that._cascadeHandlerProxy);\n            });\n        },\n\n        _cascadeHandler: function(e) {\n            var parent = this._parentWidget();\n            var valueBeforeCascade = this.value();\n\n            this._userTriggered = e.userTriggered || parent._userTriggered;\n\n            if (this.listView.bound()) {\n                this._clearSelection(parent, true);\n            }\n\n            this._cascadeSelect(parent, valueBeforeCascade);\n        },\n\n        _cascadeChange: function(parent) {\n            var that = this;\n            var value = that._accessor() || that._selectedValue;\n\n            if (!that._cascadeFilterRequests.length) {\n                that._selectedValue = null;\n            }\n\n            if (that._userTriggered) {\n                that._clearSelection(parent, true);\n            } else if (value) {\n                if (value !== unifyType(that.listView.value()[0], typeof value)) {\n                    that.value(value);\n                }\n\n                if (!that.dataSource.view()[0] || that.selectedIndex === -1) {\n                    that._clearSelection(parent, true);\n                }\n            } else if (that.dataSource.flatView().length) {\n                that.select(that.options.index);\n            }\n\n            that.enable();\n            that._triggerCascade();\n            that._triggerChange();\n            that._userTriggered = false;\n        },\n\n        _cascadeSelect: function(parent, valueBeforeCascade) {\n            var that = this;\n            var dataItem = parent.dataItem();\n            var filterValue = dataItem ? dataItem[that.options.cascadeFromParentField] || parent._value(dataItem) : null;\n            var valueField = that.options.cascadeFromField || parent.options.dataValueField;\n            var expressions;\n\n            that._valueBeforeCascade = valueBeforeCascade !== undefined ? valueBeforeCascade : that.value();\n\n            if (filterValue || filterValue === 0) {\n                expressions = that.dataSource.filter() || {};\n                removeFiltersForField(expressions, valueField);\n\n                var handler = function() {\n                    var currentHandler = that._cascadeFilterRequests.shift();\n                    if (currentHandler) {\n                        that.unbind('dataBound', currentHandler);\n                    }\n\n                    currentHandler = that._cascadeFilterRequests[0];\n                    if (currentHandler) {\n                        that.first('dataBound', currentHandler);\n                    }\n\n                    that._cascadeChange(parent);\n                };\n\n                that._cascadeFilterRequests.push(handler);\n\n                if (that._cascadeFilterRequests.length === 1) {\n                    that.first('dataBound', handler);\n                }\n\n                that._cascading = true;\n                that._filterSource({\n                    field: valueField,\n                    operator: \"eq\",\n                    value: filterValue\n                });\n                that._cascading = false;\n            } else {\n                that.enable(false);\n                that._clearSelection(parent);\n                that._triggerCascade();\n                that._triggerChange();\n                that._userTriggered = false;\n            }\n        }\n    });\n\n    var STATIC_LIST_NS = \".StaticList\";\n\n    var StaticList = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.element.attr(\"role\", \"listbox\")\n                        .on(CLICK + STATIC_LIST_NS, \"li\", proxy(this._click, this))\n                        .on(MOUSEENTER + STATIC_LIST_NS, \"li\", function() { $(this).addClass(HOVER); })\n                        .on(MOUSELEAVE + STATIC_LIST_NS, \"li\", function() { $(this).removeClass(HOVER); });\n\n            if (options && options.ariaLabel) {\n                this.element.attr(ARIA_LABEL, options.ariaLabel);\n            } else if (options && options.ariaLabelledBy) {\n                this.element.attr(ARIA_LABELLEDBY, options.ariaLabelledBy);\n            }\n\n            if (support.touch) {\n                this._touchHandlers();\n            }\n\n            if (this.options.selectable === \"multiple\") {\n                this.element.attr(ARIA_MULTISELECTABLE, true);\n            }\n\n            if (this.options.columns && this.options.columns.length) {\n                var thead = this.element.parent().find('.k-table-thead');\n                var row = $('<tr class=\"k-table-group-row\">' +\n                    '<th class=\"k-table-th\" colspan=\"' + this.options.columns.length + '\"></th>' +\n                '</tr>');\n\n                thead.append(row);\n\n                this.header = row.find(\".k-table-th\");\n\n                this.content = this.element.wrap(\"<div class='k-table-body k-table-scroller' unselectable='on'></div>\").parent();\n\n                this.element.addClass(TABLE_LIST);\n            } else {\n                this.content = this.element.wrap(\"<div class='k-list-content k-list-scroller' unselectable='on'></div>\").parent();\n                this.header = this.content.before('<div class=\"k-list-group-sticky-header\" style=\"display:none\"></div>').prev();\n                this.element.addClass(LIST_UL);\n            }\n\n            this.bound(false);\n\n            this._optionID = kendo.guid();\n\n            this._selectedIndices = [];\n\n            this._view = [];\n            this._dataItems = [];\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value) {\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            this._getter();\n            this._templates();\n\n            this.setDataSource(this.options.dataSource);\n\n            this._onScroll = proxy(function() {\n                var that = this;\n                clearTimeout(that._scrollId);\n\n                that._scrollId = setTimeout(function() {\n                    that._renderHeader();\n                }, 50);\n            }, this);\n        },\n\n        options: {\n            name: \"StaticList\",\n            dataValueField: null,\n            valuePrimitive: false,\n            selectable: true,\n            template: null,\n            groupTemplate: null,\n            fixedGroupTemplate: null,\n            ariaLabel: null,\n            ariaLabelledBy: null\n        },\n\n        events: [\n           CLICK,\n            CHANGE,\n           ACTIVATE,\n           DEACTIVATE,\n           DATA_BINDING,\n           DATA_BOUND,\n           SELECTED_ITEM_CHANGE\n        ],\n\n        setDataSource: function(source) {\n            var that = this;\n            var dataSource = source || {};\n            var value;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n            dataSource = kendo.data.DataSource.create(dataSource);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n\n                value = that.value();\n\n                that.value([]);\n                that.bound(false);\n\n                that.value(value);\n            } else {\n                that._refreshHandler = proxy(that.refresh, that);\n            }\n\n            that.setDSFilter(dataSource.filter());\n\n            that.dataSource = dataSource.bind(CHANGE, that._refreshHandler);\n            that._fixedHeader();\n        },\n\n        _touchHandlers: function() {\n            var that = this;\n            var startY;\n            var endY;\n            var tapPosition = function(event) {\n                return (event.originalEvent || event).changedTouches[0].pageY;\n            };\n\n            that.element.on(\"touchstart\" + STATIC_LIST_NS, function(e) {\n                startY = tapPosition(e);\n            });\n\n            that.element.on(\"touchend\" + STATIC_LIST_NS, function(e) {\n                if (e.isDefaultPrevented()) {\n                    return;\n                }\n\n                endY = tapPosition(e);\n\n                if (Math.abs(endY - startY) < 10) {\n                    that._touchTriggered = true;\n                    that._triggerClick($(e.target).closest(ITEMSELECTOR).get(0));\n                }\n            });\n        },\n\n        skip: function() {\n            return this.dataSource.skip();\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._getter();\n            this._templates();\n            this._render();\n        },\n\n        destroy: function() {\n            this.element.off(STATIC_LIST_NS);\n\n            if (this._refreshHandler) {\n                this.dataSource.unbind(CHANGE, this._refreshHandler);\n            }\n\n            clearTimeout(this._scrollId);\n\n            Widget.fn.destroy.call(this);\n        },\n\n        dataItemByIndex: function(index) {\n            return this.dataSource.flatView()[index];\n        },\n\n        screenHeight: function() {\n            return this.content[0].clientHeight;\n        },\n\n        scrollToIndex: function(index) {\n            var item = this.element[0].children[index];\n\n            if (item) {\n                this.scroll(item);\n            }\n        },\n\n        scrollWith: function(value) {\n            this.content.scrollTop(this.content.scrollTop() + value);\n        },\n\n        scroll: function(item) {\n            if (!item) {\n                return;\n            }\n\n            if (item[0]) {\n                item = item[0];\n            }\n\n            var content = this.content[0],\n                itemOffsetTop = item.offsetTop,\n                itemOffsetHeight = item.offsetHeight,\n                contentScrollTop = content.scrollTop,\n                contentOffsetHeight = content.clientHeight,\n                bottomDistance = itemOffsetTop + itemOffsetHeight;\n\n                if (contentScrollTop > itemOffsetTop) {\n                    contentScrollTop = itemOffsetTop;\n                } else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {\n                    contentScrollTop = (bottomDistance - contentOffsetHeight);\n                }\n\n                content.scrollTop = contentScrollTop;\n        },\n\n        selectedDataItems: function(dataItems) {\n            if (dataItems === undefined) {\n                return this._dataItems.slice();\n            }\n\n            this._dataItems = dataItems;\n            this._values = this._getValues(dataItems);\n        },\n\n        _getValues: function(dataItems) {\n            var getter = this._valueGetter;\n\n            return $.map(dataItems, function(dataItem) {\n                return getter(dataItem);\n            });\n        },\n\n        focusNext: function() {\n            var current = this.focus();\n\n            if (!current) {\n                current = 0;\n            } else {\n                current = current.next();\n            }\n\n            this.focus(current);\n        },\n\n        focusPrev: function() {\n            var current = this.focus();\n\n            if (!current) {\n                current = this.element[0].children.length - 1;\n            } else {\n                current = current.prev();\n            }\n\n            this.focus(current);\n        },\n\n        focusFirst: function() {\n            this.focus(this.element[0].children[0]);\n        },\n\n        focusLast: function() {\n            this.focus(last(this.element[0].children));\n        },\n\n        focus: function(candidate) {\n            var that = this;\n            var id = that._optionID;\n            var hasCandidate;\n\n            if (candidate === undefined) {\n                return that._current;\n            }\n\n            candidate = last(that._get(candidate));\n            candidate = $(this.element[0].children[candidate]);\n\n            if (that._current) {\n                that._current\n                    .removeClass(FOCUSED)\n                    .removeAttr(ID);\n\n                that.trigger(DEACTIVATE);\n            }\n\n            hasCandidate = !!candidate[0];\n\n            if (hasCandidate) {\n                candidate.addClass(FOCUSED);\n                that.scroll(candidate);\n\n                candidate.attr(\"id\", id);\n            }\n\n            that._current = hasCandidate ? candidate : null;\n            that.trigger(ACTIVATE);\n        },\n\n        focusIndex: function() {\n            return this.focus() ? this.focus().index() : undefined;\n        },\n\n        skipUpdate: function(skipUpdate) {\n            this._skipUpdate = skipUpdate;\n        },\n\n        select: function(indices) {\n            var that = this;\n            var selectable = that.options.selectable;\n            var singleSelection = selectable !== \"multiple\" && selectable !== false;\n            var selectedIndices = that._selectedIndices;\n            var uiSelectedIndices = [this.element.find(\".k-selected\").index()];\n\n            var added = [];\n            var removed = [];\n            var result;\n\n            if (indices === undefined) {\n                return selectedIndices.slice();\n            }\n\n            indices = that._get(indices);\n\n            if (indices.length === 1 && indices[0] === -1) {\n                indices = [];\n            }\n\n            var deferred = $.Deferred().resolve();\n            var filtered = that.isFiltered();\n\n            if (filtered && !singleSelection && that._deselectFiltered(indices)) {\n                return deferred;\n            }\n\n            if (singleSelection && !filtered &&\n                $.inArray(last(indices), selectedIndices) !== -1 && $.inArray(last(indices), uiSelectedIndices) !== -1) {\n\n                if (that._dataItems.length && that._view.length) {\n                    that._dataItems = [that._view[selectedIndices[0]].item];\n                }\n\n                return deferred;\n            }\n\n            result = that._deselect(indices);\n\n            removed = result.removed;\n            indices = result.indices;\n\n            if (indices.length) {\n                if (singleSelection) {\n                    indices = [last(indices)];\n                }\n\n                added = that._select(indices);\n            }\n\n            if (added.length || removed.length) {\n                that._valueComparer = null;\n                that.trigger(CHANGE, {\n                    added: added,\n                    removed: removed\n                });\n            }\n\n            return deferred;\n        },\n\n        removeAt: function(position) {\n            this._selectedIndices.splice(position, 1);\n            this._values.splice(position, 1);\n            this._valueComparer = null;\n\n            return {\n                position: position,\n                dataItem: this._dataItems.splice(position, 1)[0]\n            };\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n\n            this._valueComparer = null;\n        },\n\n        value: function(value) {\n            var that = this;\n            var deferred = that._valueDeferred;\n            var indices;\n\n            if (value === undefined) {\n                return that._values.slice();\n            }\n\n            that.setValue(value);\n\n            if (!deferred || deferred.state() === \"resolved\") {\n                that._valueDeferred = deferred = $.Deferred();\n            }\n\n            if (that.bound()) {\n                indices = that._valueIndices(that._values);\n\n                if (that.options.selectable === \"multiple\") {\n                    that.select(-1);\n                }\n\n                that.select(indices);\n\n                deferred.resolve();\n            }\n\n            that._skipUpdate = false;\n\n            return deferred;\n        },\n\n        items: function() {\n            return this.element.children(ITEMSELECTOR);\n        },\n\n        _click: function(e) {\n            if (this._touchTriggered)\n            {\n                this._touchTriggered = false;\n                return;\n            }\n\n            if (!e.isDefaultPrevented()) {\n                this._triggerClick(e.currentTarget);\n            }\n        },\n\n        _triggerClick: function(item) {\n            if (!this.trigger(CLICK, { item: $(item) })) {\n                this.select(item);\n            }\n        },\n\n        _valueExpr: function(type, values) {\n            var that = this;\n            var idx = 0;\n\n            var body;\n            var comparer;\n            var normalized = [];\n\n            if (!that._valueComparer || that._valueType !== type) {\n                that._valueType = type;\n\n                for (; idx < values.length; idx++) {\n                    normalized.push(unifyType(values[idx], type));\n                }\n\n                body = \"for (var idx = 0; idx < \" + normalized.length + \"; idx++) {\" +\n                        \" if (current === values[idx]) {\" +\n                        \"   return idx;\" +\n                        \" }\" +\n                        \"} \" +\n                        \"return -1;\";\n\n                comparer = new Function(\"current\", \"values\", body);\n\n                that._valueComparer = function(current) {\n                    return comparer(current, normalized);\n                };\n            }\n\n            return that._valueComparer;\n        },\n\n        _dataItemPosition: function(dataItem, values) {\n            var value = this._valueGetter(dataItem);\n\n            var valueExpr = this._valueExpr(typeof value, values);\n\n            return valueExpr(value);\n        },\n\n        _getter: function() {\n            this._valueGetter = kendo.getter(this.options.dataValueField);\n        },\n\n        _deselect: function(indices) {\n            var that = this;\n            var children = that.element[0].children;\n            var selectable = that.options.selectable;\n            var selectedIndices = that._selectedIndices;\n            var dataItems = that._dataItems;\n            var values = that._values;\n            var removed = [];\n            var i = 0;\n            var j;\n\n            var index, selectedIndex;\n            var removedIndices = 0;\n\n            indices = indices.slice();\n\n            if (selectable === true || !indices.length) {\n                for (; i < selectedIndices.length; i++) {\n                    $(children[selectedIndices[i]]).removeClass(KSELECTED).attr(ARIA_SELECTED, false);\n\n                    removed.push({\n                        position: i,\n                        dataItem: dataItems[i]\n                    });\n                }\n\n                that._values = [];\n                that._dataItems = [];\n                that._selectedIndices = [];\n            } else if (selectable === \"multiple\") {\n                for (; i < indices.length; i++) {\n                    index = indices[i];\n\n                    if (!$(children[index]).hasClass(KSELECTED)) {\n                        continue;\n                    }\n\n                    for (j = 0; j < selectedIndices.length; j++) {\n                        selectedIndex = selectedIndices[j];\n\n                        if (selectedIndex === index) {\n                            $(children[selectedIndex]).removeClass(KSELECTED).attr(ARIA_SELECTED, false);\n                            var dataItem = this._view[index].item;\n                            var position = this._dataItemPosition(dataItem, this._values);\n\n                            removed.push({\n                                position: position,\n                                dataItem: dataItem\n                            });\n\n                            dataItems.splice(j, 1);\n                            selectedIndices.splice(j, 1);\n                            indices.splice(i, 1);\n                            values.splice(j, 1);\n\n                            removedIndices += 1;\n                            i -= 1;\n                            j -= 1;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            return {\n                indices: indices,\n                removed: removed\n            };\n        },\n\n        _deselectFiltered: function(indices) {\n            var children = this.element[0].children;\n            var dataItem, index, position;\n            var removed = [];\n            var idx = 0;\n\n            for (; idx < indices.length; idx++) {\n                index = indices[idx];\n\n                dataItem = this._view[index].item;\n                position = this._dataItemPosition(dataItem, this._values);\n\n                if (position > -1) {\n                    removed.push(this.removeAt(position));\n                    $(children[index]).removeClass(KSELECTED);\n                }\n            }\n\n            if (removed.length) {\n                this.trigger(CHANGE, {\n                    added: [],\n                    removed: removed\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _select: function(indices) {\n            var that = this;\n            var children = that.element[0].children;\n            var data = that._view;\n            var dataItem, index;\n            var added = [];\n            var idx = 0;\n\n            if (last(indices) !== -1) {\n                that.focus(indices);\n            }\n\n            for (; idx < indices.length; idx++) {\n                index = indices[idx];\n                dataItem = data[index];\n\n                if (index === -1 || !dataItem) {\n                    continue;\n                }\n\n                dataItem = dataItem.item;\n\n                that._selectedIndices.push(index);\n                that._dataItems.push(dataItem);\n                that._values.push(that._valueGetter(dataItem));\n\n                $(children[index]).addClass(KSELECTED).attr(ARIA_SELECTED, true);\n\n                added.push({\n                    dataItem: dataItem\n                });\n            }\n\n            return added;\n        },\n\n        getElementIndex: function(element) {\n            return $(element).data(\"offset-index\");\n        },\n\n        _get: function(candidate) {\n            if (typeof candidate === \"number\") {\n                candidate = [candidate];\n            } else if (!isArray(candidate)) {\n                candidate = this.getElementIndex(candidate);\n                candidate = [candidate !== undefined ? candidate : -1];\n            }\n\n            return candidate;\n        },\n\n        _template: function() {\n            var that = this;\n            var options = that.options;\n            var template = options.template;\n\n            if (!template) {\n                template = kendo.template('<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-list-item\"><span class=\"k-list-item-text\">${' + kendo.expr(options.dataTextField, \"data\") + \"}</span></li>\", { useWithBlock: false });\n            } else {\n                template = kendo.template(template);\n                template = function(data) {\n                    return '<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-list-item\">' + template(data) + \"</li>\";\n                };\n            }\n\n            return template;\n        },\n\n        _templates: function() {\n            var template;\n            var options = this.options;\n            var templates = {\n                template: options.template,\n                groupTemplate: options.groupTemplate,\n                fixedGroupTemplate: options.fixedGroupTemplate\n            };\n\n            if (options.columns) {\n                for (var i = 0; i < options.columns.length; i++) {\n                    var currentColumn = options.columns[i];\n                    var templateText = currentColumn.field ? currentColumn.field.toString() : TEXT;\n\n                    templates[\"column\" + i] = currentColumn.template || \"#: \" + templateText + \"#\";\n                }\n            }\n\n            for (var key in templates) {\n                template = templates[key];\n                if (template && typeof template !== \"function\") {\n                    templates[key] = kendo.template(template);\n                }\n            }\n\n            this.templates = templates;\n        },\n\n        _normalizeIndices: function(indices) {\n            var newIndices = [];\n            var idx = 0;\n\n            for (; idx < indices.length; idx++) {\n                if (indices[idx] !== undefined) {\n                    newIndices.push(indices[idx]);\n                }\n            }\n\n            return newIndices;\n        },\n\n        _valueIndices: function(values, indices) {\n            var data = this._view;\n            var idx = 0;\n            var index;\n\n            indices = indices ? indices.slice() : [];\n\n            if (!values.length) {\n                return [];\n            }\n\n            for (; idx < data.length; idx++) {\n                index = this._dataItemPosition(data[idx].item, values);\n\n                if (index !== -1) {\n                    indices[index] = idx;\n                }\n            }\n\n            return this._normalizeIndices(indices);\n        },\n\n        _firstVisibleItem: function() {\n            var element = this.element[0];\n            var content = this.content[0];\n            var scrollTop = content.scrollTop;\n            var itemHeight = $(element.children[0]).height();\n            var itemIndex = Math.floor(scrollTop / itemHeight) || 0;\n            var item = element.children[itemIndex] || element.lastChild;\n            var forward = item.offsetTop < scrollTop;\n\n            while (item) {\n                if (forward) {\n                    if ((item.offsetTop + itemHeight) > scrollTop || !item.nextSibling) {\n                        break;\n                    }\n\n                    item = item.nextSibling;\n                } else {\n                    if (item.offsetTop <= scrollTop || !item.previousSibling) {\n                        break;\n                    }\n\n                    item = item.previousSibling;\n                }\n            }\n\n            return this._view[$(item).data(\"offset-index\")];\n        },\n\n        _fixedHeader: function() {\n            if (this.isGrouped() && this.templates.fixedGroupTemplate) {\n                if (this.header.closest(GROUP_ROW_SEL).length) {\n                    this.header.closest(GROUP_ROW_SEL).show();\n                } else {\n                    this.header.show();\n                }\n\n                this.content.scroll(this._onScroll);\n            } else {\n                if (this.header.closest(GROUP_ROW_SEL).length) {\n                    this.header.closest(GROUP_ROW_SEL).hide();\n                } else {\n                    this.header.hide();\n                }\n\n                this.content.off(\"scroll\", this._onScroll);\n            }\n        },\n\n        _renderHeader: function() {\n            var template = this.templates.fixedGroupTemplate;\n            if (!template) {\n                return;\n            }\n\n            var visibleItem = this._firstVisibleItem();\n\n            if (visibleItem && visibleItem.group.toString().length) {\n                this.header.html(template(visibleItem.group));\n            }\n        },\n\n        _renderItem: function(context) {\n            var item = '<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" ';\n\n            var dataItem = context.item;\n            var notFirstItem = context.index !== 0;\n            var selected = context.selected;\n            var isGrouped = this.isGrouped();\n            var hasColumns = this.options.columns && this.options.columns.length;\n            var altRow = context.index % 2 === 1 ? \" k-table-alt-row\" : \"\";\n\n            if (hasColumns) {\n                item += ('class=\"k-table-row' + altRow);\n            } else {\n                item += 'class=\"k-list-item';\n            }\n\n            if (notFirstItem && context.newGroup) {\n                item += ' k-first';\n            }\n\n            if (context.isLastGroupedItem && hasColumns) {\n                item += ' k-last';\n            }\n\n            if (selected) {\n                item += ' k-selected';\n            }\n\n            item += '\" aria-selected=\"' + (selected ? \"true\" : \"false\") + '\" data-offset-index=\"' + context.index + '\">';\n            if (hasColumns) {\n                item += this._renderColumns(dataItem);\n            } else {\n                item += '<span class=\"k-list-item-text\">';\n                item += this.templates.template(dataItem);\n                item += '</span>';\n            }\n\n            if (notFirstItem && context.newGroup) {\n                if (hasColumns) {\n                    item += '<span class=\"k-table-td k-table-group-td\"><span>' + this.templates.groupTemplate(context.group) + '</span></span>';\n                } else {\n                    item += '<div class=\"k-list-item-group-label\">' + this.templates.groupTemplate(context.group) + '</div>';\n                }\n            } else if (isGrouped && hasColumns) {\n                item += '<span class=\"k-table-td k-table-spacer-td\"></span>';\n            }\n\n            return item + \"</li>\";\n        },\n\n        _renderColumns: function(dataItem) {\n            var item = \"\";\n\n            for (var i = 0; i < this.options.columns.length; i++) {\n                var currentWidth = this.options.columns[i].width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n\n                if (currentWidth && !isNaN(currentWidthInt)) {\n                    widthStyle += \"style='width:\";\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                    widthStyle += \";'\";\n                }\n                item += \"<span class='k-table-td' \" + widthStyle + \">\";\n                item += this.templates[\"column\" + i](dataItem);\n                item += \"</span>\";\n            }\n\n            return item;\n        },\n\n        _render: function() {\n            var html = \"\";\n\n            var i = 0;\n            var idx = 0;\n            var context;\n            var dataContext = [];\n            var view = this.dataSource.view();\n            var values = this.value();\n\n            var group, newGroup, j;\n            var isGrouped = this.isGrouped();\n\n            if (isGrouped) {\n                for (i = 0; i < view.length; i++) {\n                    group = view[i];\n                    newGroup = true;\n\n                    for (j = 0; j < group.items.length; j++) {\n                        context = {\n                            selected: this._selected(group.items[j], values),\n                            item: group.items[j],\n                            group: group.value,\n                            newGroup: newGroup,\n                            isLastGroupedItem: j === group.items.length - 1,\n                            index: idx };\n                        dataContext[idx] = context;\n                        idx += 1;\n\n                        html += this._renderItem(context);\n                        newGroup = false;\n                    }\n                }\n            } else {\n                for (i = 0; i < view.length; i++) {\n                    context = { selected: this._selected(view[i], values), item: view[i], index: i };\n\n                    dataContext[i] = context;\n\n                    html += this._renderItem(context);\n                }\n            }\n\n            this._view = dataContext;\n\n            this.element[0].innerHTML = html;\n\n            if (isGrouped && dataContext.length) {\n                this._renderHeader();\n            }\n        },\n\n        _selected: function(dataItem, values) {\n            var select = !this.isFiltered() || this.options.selectable === \"multiple\";\n            return select && this._dataItemPosition(dataItem, values) !== -1;\n        },\n\n        setDSFilter: function(filter) {\n            this._lastDSFilter = extend({}, filter);\n        },\n\n        isFiltered: function() {\n            if (!this._lastDSFilter) {\n                this.setDSFilter(this.dataSource.filter());\n            }\n\n            return !kendo.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter);\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var action = e && e.action;\n            var skipUpdateOnBind = that.options.skipUpdateOnBind;\n            var isItemChange = action === \"itemchange\";\n            var result;\n\n            that.trigger(DATA_BINDING);\n            that._angularItems(\"cleanup\");\n\n            that._fixedHeader();\n\n            that._render();\n\n            that.bound(true);\n\n            if (isItemChange || action === \"remove\") {\n                result = mapChangedItems(that._dataItems, e.items);\n\n                if (result.changed.length) {\n                    if (isItemChange) {\n                        that.trigger(SELECTED_ITEM_CHANGE, {\n                            items: result.changed\n                        });\n                    } else {\n                        that.value(that._getValues(result.unchanged));\n                    }\n                }\n            } else if (that.isFiltered() || that._skipUpdate || that._emptySearch) {\n                that.focus(0);\n                if (that._skipUpdate) {\n                    that._skipUpdate = false;\n                    that._selectedIndices = that._valueIndices(that._values, that._selectedIndices);\n                }\n            } else if (!skipUpdateOnBind && (!action || action === \"add\")) {\n                that.value(that._values);\n            }\n\n            if (that._valueDeferred) {\n                that._valueDeferred.resolve();\n            }\n\n            that._angularItems(\"compile\");\n            that.trigger(DATA_BOUND);\n        },\n\n        bound: function(bound) {\n            if (bound === undefined) {\n                return this._bound;\n            }\n\n            this._bound = bound;\n        },\n\n        isGrouped: function() {\n            return (this.dataSource.group() || []).length;\n        }\n    });\n\n    ui.plugin(StaticList);\n\n    function last(list) {\n        return list[list.length - 1];\n    }\n\n    function getSelectedOption(select) {\n        var index = select.selectedIndex;\n        return index > -1 ? select.options[index] : {};\n    }\n\n    function mapChangedItems(selected, itemsToMatch) {\n        var itemsLength = itemsToMatch.length;\n        var selectedLength = selected.length;\n        var dataItem;\n        var found;\n        var i, j;\n\n        var changed = [];\n        var unchanged = [];\n\n        if (selectedLength) {\n            for (i = 0; i < selectedLength; i++) {\n                dataItem = selected[i];\n                found = false;\n\n                for (j = 0; j < itemsLength; j++) {\n                    if (dataItem === itemsToMatch[j]) {\n                        found = true;\n                        changed.push({ index: i, item: dataItem });\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    unchanged.push(dataItem);\n                }\n            }\n        }\n\n        return {\n            changed: changed,\n            unchanged: unchanged\n        };\n    }\n\n    function isValidFilterExpr(expression) {\n        if (!expression || $.isEmptyObject(expression)) {\n            return false;\n        }\n\n        if (expression.filters && !expression.filters.length) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function removeFiltersForField(expression, field) {\n        var filters;\n        var found = false;\n\n        if (expression.filters) {\n            filters = $.grep(expression.filters, function(filter) {\n                found = removeFiltersForField(filter, field);\n                if (filter.filters) {\n                    return filter.filters.length;\n                } else {\n                    return filter.field != field;\n                }\n            });\n\n            if (!found && expression.filters.length !== filters.length) {\n                found = true;\n            }\n\n            expression.filters = filters;\n        }\n\n        return found;\n    }\n\n    kendo.cssProperties.registerPrefix(\"List\", \"k-list-\");\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.fx',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"fx\",\n    name: \"Effects\",\n    category: \"framework\",\n    description: \"Required for animation effects in all Kendo UI widgets.\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        fx = kendo.effects,\n        each = $.each,\n        extend = $.extend,\n        proxy = $.proxy,\n        support = kendo.support,\n        browser = support.browser,\n        transforms = support.transforms,\n        transitions = support.transitions,\n        scaleProperties = { scale: 0, scalex: 0, scaley: 0, scale3d: 0 },\n        translateProperties = { translate: 0, translatex: 0, translatey: 0, translate3d: 0 },\n        hasZoom = (typeof document.documentElement.style.zoom !== \"undefined\") && !transforms,\n        matrix3dRegExp = /matrix3?d?\\s*\\(.*,\\s*([\\d\\.\\-]+)\\w*?,\\s*([\\d\\.\\-]+)\\w*?,\\s*([\\d\\.\\-]+)\\w*?,\\s*([\\d\\.\\-]+)\\w*?/i,\n        cssParamsRegExp = /^(-?[\\d\\.\\-]+)?[\\w\\s]*,?\\s*(-?[\\d\\.\\-]+)?[\\w\\s]*/i,\n        translateXRegExp = /translatex?$/i,\n        oldEffectsRegExp = /(zoom|fade|expand)(\\w+)/,\n        singleEffectRegExp = /(zoom|fade|expand)/,\n        unitRegExp = /[xy]$/i,\n        transformProps = [\"perspective\", \"rotate\", \"rotatex\", \"rotatey\", \"rotatez\", \"rotate3d\", \"scale\", \"scalex\", \"scaley\", \"scalez\", \"scale3d\", \"skew\", \"skewx\", \"skewy\", \"translate\", \"translatex\", \"translatey\", \"translatez\", \"translate3d\", \"matrix\", \"matrix3d\"],\n        transform2d = [\"rotate\", \"scale\", \"scalex\", \"scaley\", \"skew\", \"skewx\", \"skewy\", \"translate\", \"translatex\", \"translatey\", \"matrix\"],\n        transform2units = { \"rotate\": \"deg\", scale: \"\", skew: \"px\", translate: \"px\" },\n        cssPrefix = transforms.css,\n        round = Math.round,\n        BLANK = \"\",\n        PX = \"px\",\n        NONE = \"none\",\n        AUTO = \"auto\",\n        WIDTH = \"width\",\n        HEIGHT = \"height\",\n        HIDDEN = \"hidden\",\n        ORIGIN = \"origin\",\n        ABORT_ID = \"abortId\",\n        OVERFLOW = \"overflow\",\n        TRANSLATE = \"translate\",\n        POSITION = \"position\",\n        COMPLETE_CALLBACK = \"completeCallback\",\n        TRANSITION = cssPrefix + \"transition\",\n        TRANSFORM = cssPrefix + \"transform\",\n        BACKFACE = cssPrefix + \"backface-visibility\",\n        PERSPECTIVE = cssPrefix + \"perspective\",\n        DEFAULT_PERSPECTIVE = \"1500px\",\n        TRANSFORM_PERSPECTIVE = \"perspective(\" + DEFAULT_PERSPECTIVE + \")\",\n        directions = {\n            left: {\n                reverse: \"right\",\n                property: \"left\",\n                transition: \"translatex\",\n                vertical: false,\n                modifier: -1\n            },\n            right: {\n                reverse: \"left\",\n                property: \"left\",\n                transition: \"translatex\",\n                vertical: false,\n                modifier: 1\n            },\n            down: {\n                reverse: \"up\",\n                property: \"top\",\n                transition: \"translatey\",\n                vertical: true,\n                modifier: 1\n            },\n            up: {\n                reverse: \"down\",\n                property: \"top\",\n                transition: \"translatey\",\n                vertical: true,\n                modifier: -1\n            },\n            top: {\n                reverse: \"bottom\"\n            },\n            bottom: {\n                reverse: \"top\"\n            },\n            \"in\": {\n                reverse: \"out\",\n                modifier: -1\n            },\n            out: {\n                reverse: \"in\",\n                modifier: 1\n            },\n\n            vertical: {\n                reverse: \"vertical\"\n            },\n\n            horizontal: {\n                reverse: \"horizontal\"\n            }\n        };\n\n    kendo.directions = directions;\n\n    extend($.fn, {\n        kendoStop: function(clearQueue, gotoEnd) {\n            if (transitions) {\n                return fx.stopQueue(this, clearQueue || false, gotoEnd || false);\n            } else {\n                return this.stop(clearQueue, gotoEnd);\n            }\n        }\n    });\n\n    /* jQuery support for all transform animations (FF 3.5/3.6, Opera 10.x, IE9 */\n\n    if (transforms && !transitions) {\n        each(transform2d, function(idx, value) {\n            $.fn[value] = function(val) {\n                if (typeof val == \"undefined\") {\n                    return animationProperty(this, value);\n                } else {\n                    var that = $(this)[0],\n                        transformValue = value + \"(\" + val + transform2units[value.replace(unitRegExp, \"\")] + \")\";\n\n                    if (that.style.cssText.indexOf(TRANSFORM) == -1) {\n                        $(this).css(TRANSFORM, transformValue);\n                    } else {\n                        that.style.cssText = that.style.cssText.replace(new RegExp(value + \"\\\\(.*?\\\\)\", \"i\"), transformValue);\n                    }\n                }\n                return this;\n            };\n\n            $.fx.step[value] = function (fx) {\n                $(fx.elem)[value](fx.now);\n            };\n        });\n\n        var curProxy = $.fx.prototype.cur;\n        $.fx.prototype.cur = function () {\n            if (transform2d.indexOf(this.prop) != -1) {\n                return parseFloat($(this.elem)[this.prop]());\n            }\n\n            return curProxy.apply(this, arguments);\n        };\n    }\n\n    kendo.toggleClass = function(element, classes, options, add) {\n        if (classes) {\n            classes = classes.split(\" \");\n\n            if (transitions) {\n                options = extend({\n                    exclusive: \"all\",\n                    duration: 400,\n                    ease: \"ease-out\"\n                }, options);\n\n                element.css(TRANSITION, options.exclusive + \" \" + options.duration + \"ms \" + options.ease);\n                setTimeout(function() {\n                    element.css(TRANSITION, \"\").css(HEIGHT);\n                }, options.duration); // TODO: this should fire a kendoAnimate session instead.\n            }\n\n            each(classes, function(idx, value) {\n                element.toggleClass(value, add);\n            });\n        }\n\n        return element;\n    };\n\n    kendo.parseEffects = function(input, mirror) {\n        var effects = {};\n\n        if (typeof input === \"string\") {\n            each(input.split(\" \"), function(idx, value) {\n                var redirectedEffect = !singleEffectRegExp.test(value),\n                    resolved = value.replace(oldEffectsRegExp, function(match, $1, $2) {\n                        return $1 + \":\" + $2.toLowerCase();\n                    }), // Support for old zoomIn/fadeOut style, now deprecated.\n                    effect = resolved.split(\":\"),\n                    direction = effect[1],\n                    effectBody = {};\n\n                if (effect.length > 1) {\n                    effectBody.direction = (mirror && redirectedEffect ? directions[direction].reverse : direction);\n                }\n\n                effects[effect[0]] = effectBody;\n            });\n        } else {\n            each(input, function(idx) {\n                var direction = this.direction;\n\n                if (direction && mirror && !singleEffectRegExp.test(idx)) {\n                    this.direction = directions[direction].reverse;\n                }\n\n                effects[idx] = this;\n            });\n        }\n\n        return effects;\n    };\n\n    function parseInteger(value) {\n        return parseInt(value, 10);\n    }\n\n    function parseCSS(element, property) {\n        return parseInteger(element.css(property));\n    }\n\n    function keys(obj) {\n        var acc = [];\n        for (var propertyName in obj) {\n            acc.push(propertyName);\n        }\n        return acc;\n    }\n\n    function strip3DTransforms(properties) {\n        for (var key in properties) {\n            if (transformProps.indexOf(key) != -1 && transform2d.indexOf(key) == -1) {\n                delete properties[key];\n            }\n        }\n\n        return properties;\n    }\n\n    function normalizeCSS(element, properties) {\n        var transformation = [], cssValues = {}, lowerKey, key, value, isTransformed;\n\n        for (key in properties) {\n            lowerKey = key.toLowerCase();\n            isTransformed = transforms && transformProps.indexOf(lowerKey) != -1;\n\n            if (!support.hasHW3D && isTransformed && transform2d.indexOf(lowerKey) == -1) {\n                delete properties[key];\n            } else {\n                value = properties[key];\n\n                if (isTransformed) {\n                    transformation.push(key + \"(\" + value + \")\");\n                } else {\n                    cssValues[key] = value;\n                }\n            }\n        }\n\n        if (transformation.length) {\n            cssValues[TRANSFORM] = transformation.join(\" \");\n        }\n\n        return cssValues;\n    }\n\n    if (transitions) {\n        extend(fx, {\n            transition: function(element, properties, options) {\n                var css,\n                    delay = 0,\n                    oldKeys = element.data(\"keys\") || [],\n                    timeoutID;\n\n                options = extend({\n                        duration: 200,\n                        ease: \"ease-out\",\n                        complete: null,\n                        exclusive: \"all\"\n                    },\n                    options\n                );\n\n                var stopTransitionCalled = false;\n\n                var stopTransition = function() {\n                    if (!stopTransitionCalled) {\n                        stopTransitionCalled = true;\n\n                        if (timeoutID) {\n                            clearTimeout(timeoutID);\n                            timeoutID = null;\n                        }\n\n                        element\n                        .removeData(ABORT_ID)\n                        .dequeue()\n                        .css(TRANSITION, \"\")\n                        .css(TRANSITION);\n\n                        options.complete.call(element);\n                    }\n                };\n\n                options.duration = $.fx ? $.fx.speeds[options.duration] || options.duration : options.duration;\n\n                css = normalizeCSS(element, properties);\n\n                $.merge(oldKeys, keys(css));\n\n                if ($.hasOwnProperty(\"uniqueSort\")) {\n                    element\n                        .data(\"keys\", $.uniqueSort(oldKeys))\n                        .height();\n                } else {\n                    element\n                        .data(\"keys\", $.unique(oldKeys))\n                        .height();\n                }\n\n                element.css(TRANSITION, options.exclusive + \" \" + options.duration + \"ms \" + options.ease).css(TRANSITION);\n                element.css(css).css(TRANSFORM);\n\n                /**\n                 * Use transitionEnd event for browsers who support it - but duplicate it with setTimeout, as the transitionEnd event will not be triggered if no CSS properties change.\n                 * This should be cleaned up at some point (widget by widget), and refactored to widgets not relying on the complete callback if no transition occurs.\n                 *\n                 * For IE9 and below, resort to setTimeout.\n                 */\n                if (transitions.event) {\n                    element.one(transitions.event, stopTransition);\n                    if (options.duration !== 0) {\n                        delay = 500;\n                    }\n                }\n\n                timeoutID = setTimeout(stopTransition, options.duration + delay);\n                element.data(ABORT_ID, timeoutID);\n                element.data(COMPLETE_CALLBACK, stopTransition);\n            },\n\n            stopQueue: function(element, clearQueue, gotoEnd) {\n                var cssValues,\n                    taskKeys = element.data(\"keys\"),\n                    retainPosition = (!gotoEnd && taskKeys),\n                    completeCallback = element.data(COMPLETE_CALLBACK);\n\n                if (retainPosition) {\n                    cssValues = kendo.getComputedStyles(element[0], taskKeys);\n                }\n\n                if (completeCallback) {\n                    completeCallback();\n                }\n\n                if (retainPosition) {\n                    element.css(cssValues);\n                }\n\n                return element\n                        .removeData(\"keys\")\n                        .stop(clearQueue);\n            }\n        });\n    }\n\n    function animationProperty(element, property) {\n        if (transforms) {\n            var transform = element.css(TRANSFORM);\n            if (transform == NONE) {\n                return property == \"scale\" ? 1 : 0;\n            }\n\n            var match = transform.match(new RegExp(property + \"\\\\s*\\\\(([\\\\d\\\\w\\\\.]+)\")),\n                computed = 0;\n\n            if (match) {\n                computed = parseInteger(match[1]);\n            } else {\n                match = transform.match(matrix3dRegExp) || [0, 0, 0, 0, 0];\n                property = property.toLowerCase();\n\n                if (translateXRegExp.test(property)) {\n                    computed = parseFloat(match[3] / match[2]);\n                } else if (property == \"translatey\") {\n                    computed = parseFloat(match[4] / match[2]);\n                } else if (property == \"scale\") {\n                    computed = parseFloat(match[2]);\n                } else if (property == \"rotate\") {\n                    computed = parseFloat(Math.atan2(match[2], match[1]));\n                }\n            }\n\n            return computed;\n        } else {\n            return parseFloat(element.css(property));\n        }\n    }\n\n    var EffectSet = kendo.Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.element = element;\n            that.effects = [];\n            that.options = options;\n            that.restore = [];\n        },\n\n        run: function(effects) {\n            var that = this,\n                effect,\n                idx, jdx,\n                length = effects.length,\n                element = that.element,\n                options = that.options,\n                deferred = $.Deferred(),\n                start = {},\n                end = {},\n                target,\n                children,\n                childrenLength;\n\n            that.effects = effects;\n\n            deferred.done($.proxy(that, \"complete\"));\n\n            element.data(\"animating\", true);\n\n            for (idx = 0; idx < length; idx ++) {\n                effect = effects[idx];\n\n                effect.setReverse(options.reverse);\n                effect.setOptions(options);\n\n                that.addRestoreProperties(effect.restore);\n\n                effect.prepare(start, end);\n\n                children = effect.children();\n\n                for (jdx = 0, childrenLength = children.length; jdx < childrenLength; jdx ++) {\n                    children[jdx].duration(options.duration).run();\n                }\n            }\n\n            // legacy support for options.properties\n            for (var effectName in options.effects) {\n                extend(end, options.effects[effectName].properties);\n            }\n\n            // Show the element initially\n            if (!element.is(\":visible\")) {\n                extend(start, { display: element.data(\"olddisplay\") || \"block\" });\n            }\n\n            if (transforms && !options.reset) {\n                target = element.data(\"targetTransform\");\n\n                if (target) {\n                    start = extend(target, start);\n                }\n            }\n\n            start = normalizeCSS(element, start);\n\n            if (transforms && !transitions) {\n                start = strip3DTransforms(start);\n            }\n\n            element.css(start)\n                   .css(TRANSFORM); // Nudge\n\n            for (idx = 0; idx < length; idx ++) {\n                effects[idx].setup();\n            }\n\n            if (options.init) {\n                options.init();\n            }\n\n            element.data(\"targetTransform\", end);\n            fx.animate(element, end, extend({}, options, { complete: deferred.resolve }));\n\n            return deferred.promise();\n        },\n\n        stop: function() {\n            $(this.element).kendoStop(true, true);\n        },\n\n        addRestoreProperties: function(restore) {\n            var element = this.element,\n                value,\n                i = 0,\n                length = restore.length;\n\n            for (; i < length; i ++) {\n                value = restore[i];\n\n                this.restore.push(value);\n\n                if (!element.data(value)) {\n                    element.data(value, element.css(value));\n                }\n            }\n        },\n\n        restoreCallback: function() {\n            var element = this.element;\n\n            for (var i = 0, length = this.restore.length; i < length; i ++) {\n                var value = this.restore[i];\n                element.css(value, element.data(value));\n            }\n        },\n\n        complete: function() {\n            var that = this,\n                idx = 0,\n                element = that.element,\n                options = that.options,\n                effects = that.effects,\n                length = effects.length;\n\n            element\n                .removeData(\"animating\")\n                .dequeue(); // call next animation from the queue\n\n            if (options.hide) {\n                element.data(\"olddisplay\", element.css(\"display\")).hide();\n            }\n\n            this.restoreCallback();\n\n            if (hasZoom && !transforms) {\n                setTimeout($.proxy(this, \"restoreCallback\"), 0); // Again jQuery callback in IE8-\n            }\n\n            for (; idx < length; idx ++) {\n                effects[idx].teardown();\n            }\n\n            if (options.completeCallback) {\n                options.completeCallback(element);\n            }\n        }\n    });\n\n    fx.promise = function(element, options) {\n        var effects = [],\n            effectClass,\n            effectSet = new EffectSet(element, options),\n            parsedEffects = kendo.parseEffects(options.effects),\n            effect;\n\n        options.effects = parsedEffects;\n\n        for (var effectName in parsedEffects) {\n            effectClass = fx[capitalize(effectName)];\n\n            if (effectClass) {\n                effect = new effectClass(element, parsedEffects[effectName].direction);\n                effects.push(effect);\n           }\n        }\n\n        if (effects[0]) {\n            effectSet.run(effects);\n        } else { // Not sure how would an fx promise reach this state - means that you call kendoAnimate with no valid effects? Why?\n            if (!element.is(\":visible\")) {\n                element.css({ display: element.data(\"olddisplay\") || \"block\" }).css(\"display\");\n            }\n\n            if (options.init) {\n                options.init();\n            }\n\n            element.dequeue();\n            effectSet.complete();\n        }\n    };\n\n    extend(fx, {\n        animate: function(elements, properties, options) {\n            var useTransition = options.transition !== false;\n            delete options.transition;\n\n            if (transitions && \"transition\" in fx && useTransition) {\n                fx.transition(elements, properties, options);\n            } else {\n                if (transforms) {\n                    elements.animate(strip3DTransforms(properties), { queue: false, show: false, hide: false, duration: options.duration, complete: options.complete }); // Stop animate from showing/hiding the element to be able to hide it later on.\n                } else {\n                    elements.each(function() {\n                        var element = $(this),\n                            multiple = {};\n\n                        each(transformProps, function(idx, value) { // remove transforms to avoid IE and older browsers confusion\n                            var params,\n                                currentValue = properties ? properties[value]+ \" \" : null; // We need to match\n\n                            if (currentValue) {\n                                var single = properties;\n\n                                if (value in scaleProperties && properties[value] !== undefined) {\n                                    params = currentValue.match(cssParamsRegExp);\n                                    if (transforms) {\n                                        extend(single, { scale: +params[0] });\n                                    }\n                                } else {\n                                    if (value in translateProperties && properties[value] !== undefined) {\n                                        var position = element.css(POSITION),\n                                            isFixed = (position == \"absolute\" || position == \"fixed\");\n\n                                        if (!element.data(TRANSLATE)) {\n                                            if (isFixed) {\n                                                element.data(TRANSLATE, {\n                                                    top: parseCSS(element, \"top\") || 0,\n                                                    left: parseCSS(element, \"left\") || 0,\n                                                    bottom: parseCSS(element, \"bottom\"),\n                                                    right: parseCSS(element, \"right\")\n                                                });\n                                            } else {\n                                                element.data(TRANSLATE, {\n                                                    top: parseCSS(element, \"marginTop\") || 0,\n                                                    left: parseCSS(element, \"marginLeft\") || 0\n                                                });\n                                            }\n                                        }\n\n                                        var originalPosition = element.data(TRANSLATE);\n\n                                        params = currentValue.match(cssParamsRegExp);\n                                        if (params) {\n\n                                            var dX = value == TRANSLATE + \"y\" ? +null : +params[1],\n                                                dY = value == TRANSLATE + \"y\" ? +params[1] : +params[2];\n\n                                            if (isFixed) {\n                                                if (!isNaN(originalPosition.right)) {\n                                                    if (!isNaN(dX)) { extend(single, { right: originalPosition.right - dX }); }\n                                                } else {\n                                                    if (!isNaN(dX)) { extend(single, { left: originalPosition.left + dX }); }\n                                                }\n\n                                                if (!isNaN(originalPosition.bottom)) {\n                                                    if (!isNaN(dY)) { extend(single, { bottom: originalPosition.bottom - dY }); }\n                                                } else {\n                                                    if (!isNaN(dY)) { extend(single, { top: originalPosition.top + dY }); }\n                                                }\n                                            } else {\n                                                if (!isNaN(dX)) { extend(single, { marginLeft: originalPosition.left + dX }); }\n                                                if (!isNaN(dY)) { extend(single, { marginTop: originalPosition.top + dY }); }\n                                            }\n                                        }\n                                    }\n                                }\n\n                                if (!transforms && value != \"scale\" && value in single) {\n                                    delete single[value];\n                                }\n\n                                if (single) {\n                                    extend(multiple, single);\n                                }\n                            }\n                        });\n\n                        if (browser.msie) {\n                            delete multiple.scale;\n                        }\n\n                        element.animate(multiple, { queue: false, show: false, hide: false, duration: options.duration, complete: options.complete }); // Stop animate from showing/hiding the element to be able to hide it later on.\n                    });\n                }\n            }\n        }\n    });\n\n    fx.animatedPromise = fx.promise;\n\n    var Effect = kendo.Class.extend({\n        init: function(element, direction) {\n            var that = this;\n            that.element = element;\n            that._direction = direction;\n            that.options = {};\n            that._additionalEffects = [];\n\n            if (!that.restore) {\n                that.restore = [];\n            }\n        },\n\n// Public API\n        reverse: function() {\n            this._reverse = true;\n            return this.run();\n        },\n\n        play: function() {\n            this._reverse = false;\n            return this.run();\n        },\n\n        add: function(additional) {\n            this._additionalEffects.push(additional);\n            return this;\n        },\n\n        direction: function(value) {\n            this._direction = value;\n            return this;\n        },\n\n        duration: function(duration) {\n            this._duration = duration;\n            return this;\n        },\n\n        compositeRun: function() {\n            var that = this,\n                effectSet = new EffectSet(that.element, { reverse: that._reverse, duration: that._duration }),\n                effects = that._additionalEffects.concat([ that ]);\n\n            return effectSet.run(effects);\n        },\n\n        run: function() {\n            if (this._additionalEffects && this._additionalEffects[0]) {\n                return this.compositeRun();\n            }\n\n            var that = this,\n                element = that.element,\n                idx = 0,\n                restore = that.restore,\n                length = restore.length,\n                value,\n                deferred = $.Deferred(),\n                start = {},\n                end = {},\n                target,\n                children = that.children(),\n                childrenLength = children.length;\n\n            deferred.done($.proxy(that, \"_complete\"));\n\n            element.data(\"animating\", true);\n\n            for (idx = 0; idx < length; idx ++) {\n                value = restore[idx];\n\n                if (!element.data(value)) {\n                    element.data(value, element.css(value));\n                }\n            }\n\n            for (idx = 0; idx < childrenLength; idx ++) {\n                children[idx].duration(that._duration).run();\n            }\n\n            that.prepare(start, end);\n\n            if (!element.is(\":visible\")) {\n                extend(start, { display: element.data(\"olddisplay\") || \"block\" });\n            }\n\n            if (transforms) {\n                target = element.data(\"targetTransform\");\n\n                if (target) {\n                    start = extend(target, start);\n                }\n            }\n\n            start = normalizeCSS(element, start);\n\n            if (transforms && !transitions) {\n                start = strip3DTransforms(start);\n            }\n\n            element.css(start).css(TRANSFORM); // Trick webkit into re-rendering\n\n            that.setup();\n\n            element.data(\"targetTransform\", end);\n            fx.animate(element, end, { duration: that._duration, complete: deferred.resolve });\n\n            return deferred.promise();\n        },\n\n        stop: function() {\n            var idx = 0,\n                children = this.children(),\n                childrenLength = children.length;\n\n            for (idx = 0; idx < childrenLength; idx ++) {\n                children[idx].stop();\n            }\n\n            $(this.element).kendoStop(true, true);\n            return this;\n        },\n\n        restoreCallback: function() {\n            var element = this.element;\n\n            for (var i = 0, length = this.restore.length; i < length; i ++) {\n                var value = this.restore[i];\n                element.css(value, element.data(value));\n            }\n        },\n\n        _complete: function() {\n            var that = this,\n                element = that.element;\n\n            element\n                .removeData(\"animating\")\n                .dequeue(); // call next animation from the queue\n\n            that.restoreCallback();\n\n            if (that.shouldHide()) {\n                element.data(\"olddisplay\", element.css(\"display\")).hide();\n            }\n\n            if (hasZoom && !transforms) {\n                setTimeout($.proxy(that, \"restoreCallback\"), 0); // Again jQuery callback in IE8-\n            }\n\n            that.teardown();\n        },\n\n        /////////////////////////// Support for kendo.animate;\n        setOptions: function(options) {\n            extend(true, this.options, options);\n        },\n\n        children: function() {\n            return [];\n        },\n\n        shouldHide: $.noop,\n\n        setup: $.noop,\n        prepare: $.noop,\n        teardown: $.noop,\n        directions: [],\n\n        setReverse: function(reverse) {\n            this._reverse = reverse;\n            return this;\n        }\n    });\n\n    function capitalize(word) {\n        return word.charAt(0).toUpperCase() + word.substring(1);\n    }\n\n    function createEffect(name, definition) {\n        var effectClass = Effect.extend(definition),\n            directions = effectClass.prototype.directions;\n\n        fx[capitalize(name)] = effectClass;\n\n        fx.Element.prototype[name] = function(direction, opt1, opt2, opt3) {\n            return new effectClass(this.element, direction, opt1, opt2, opt3);\n        };\n\n        each(directions, function(idx, theDirection) {\n            fx.Element.prototype[name + capitalize(theDirection)] = function(opt1, opt2, opt3) {\n                return new effectClass(this.element, theDirection, opt1, opt2, opt3);\n            };\n        });\n    }\n\n    var FOUR_DIRECTIONS = [\"left\", \"right\", \"up\", \"down\"],\n        IN_OUT = [\"in\", \"out\"];\n\n    createEffect(\"slideIn\", {\n        directions: FOUR_DIRECTIONS,\n\n        divisor: function(value) {\n            this.options.divisor = value;\n            return this;\n        },\n\n        prepare: function(start, end) {\n            var that = this,\n                tmp,\n                element = that.element,\n                outerWidth = kendo._outerWidth,\n                outerHeight = kendo._outerHeight,\n                direction = directions[that._direction],\n                offset = -direction.modifier * (direction.vertical ? outerHeight(element) : outerWidth(element)),\n                startValue = offset / (that.options && that.options.divisor || 1) + PX,\n                endValue = \"0px\";\n\n            if (that._reverse) {\n                tmp = start;\n                start = end;\n                end = tmp;\n            }\n\n            if (transforms) {\n                start[direction.transition] = startValue;\n                end[direction.transition] = endValue;\n            } else {\n                start[direction.property] = startValue;\n                end[direction.property] = endValue;\n            }\n        }\n    });\n\n    createEffect(\"tile\", {\n        directions: FOUR_DIRECTIONS,\n\n        init: function(element, direction, previous) {\n            Effect.prototype.init.call(this, element, direction);\n            this.options = { previous: previous };\n        },\n\n        previousDivisor: function(value) {\n            this.options.previousDivisor = value;\n            return this;\n        },\n\n        children: function() {\n            var that = this,\n                reverse = that._reverse,\n                previous = that.options.previous,\n                divisor = that.options.previousDivisor || 1,\n                dir = that._direction;\n\n            var children = [ kendo.fx(that.element).slideIn(dir).setReverse(reverse) ];\n\n            if (previous) {\n                children.push( kendo.fx(previous).slideIn(directions[dir].reverse).divisor(divisor).setReverse(!reverse) );\n            }\n\n            return children;\n        }\n    });\n\n    function createToggleEffect(name, property, defaultStart, defaultEnd) {\n        createEffect(name, {\n            directions: IN_OUT,\n\n            startValue: function(value) {\n                this._startValue = value;\n                return this;\n            },\n\n            endValue: function(value) {\n                this._endValue = value;\n                return this;\n            },\n\n            shouldHide: function() {\n               return this._shouldHide;\n            },\n\n            prepare: function(start, end) {\n                var that = this,\n                    startValue,\n                    endValue,\n                    out = this._direction === \"out\",\n                    startDataValue = that.element.data(property),\n                    startDataValueIsSet = !(isNaN(startDataValue) || startDataValue == defaultStart);\n\n                if (startDataValueIsSet) {\n                    startValue = startDataValue;\n                } else if (typeof this._startValue !== \"undefined\") {\n                    startValue = this._startValue;\n                } else {\n                    startValue = out ? defaultStart : defaultEnd;\n                }\n\n                if (typeof this._endValue !== \"undefined\") {\n                    endValue = this._endValue;\n                } else {\n                    endValue = out ? defaultEnd : defaultStart;\n                }\n\n                if (this._reverse) {\n                    start[property] = endValue;\n                    end[property] = startValue;\n                } else {\n                    start[property] = startValue;\n                    end[property] = endValue;\n                }\n\n                that._shouldHide = end[property] === defaultEnd;\n            }\n        });\n    }\n\n    createToggleEffect(\"fade\", \"opacity\", 1, 0);\n    createToggleEffect(\"zoom\", \"scale\", 1, 0.01);\n\n    createEffect(\"slideMargin\", {\n        prepare: function(start, end) {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                origin = element.data(ORIGIN),\n                offset = options.offset,\n                margin,\n                reverse = that._reverse;\n\n            if (!reverse && origin === null) {\n                element.data(ORIGIN, parseFloat(element.css(\"margin-\" + options.axis)));\n            }\n\n            margin = (element.data(ORIGIN) || 0);\n            end[\"margin-\" + options.axis] = !reverse ? margin + offset : margin;\n        }\n    });\n\n    createEffect(\"slideTo\", {\n        prepare: function(start, end) {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                offset = options.offset.split(\",\"),\n                reverse = that._reverse;\n\n            if (transforms) {\n                end.translatex = !reverse ? offset[0] : 0;\n                end.translatey = !reverse ? offset[1] : 0;\n            } else {\n                end.left = !reverse ? offset[0] : 0;\n                end.top = !reverse ? offset[1] : 0;\n            }\n            element.css(\"left\");\n        }\n    });\n\n    createEffect(\"expand\", {\n        directions: [\"horizontal\", \"vertical\"],\n\n        restore: [ OVERFLOW ],\n\n        prepare: function(start, end) {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                reverse = that._reverse,\n                property = that._direction === \"vertical\" ? HEIGHT : WIDTH,\n                setLength = element[0].style[property],\n                oldLength = element.data(property),\n                length = parseFloat(oldLength || setLength),\n                realLength = round(element.css(property, AUTO)[property]());\n\n            start.overflow = HIDDEN;\n\n            length = (options && options.reset) ? realLength || length : length || realLength;\n\n            end[property] = (reverse ? 0 : length) + PX;\n            start[property] = (reverse ? length : 0) + PX;\n\n            if (oldLength === undefined) {\n                element.data(property, setLength);\n            }\n        },\n\n        shouldHide: function() {\n           return this._reverse;\n        },\n\n        teardown: function() {\n            var that = this,\n                element = that.element,\n                property = that._direction === \"vertical\" ? HEIGHT : WIDTH,\n                length = element.data(property);\n\n            if (length == AUTO || length === BLANK) {\n                setTimeout(function() { element.css(property, AUTO).css(property); }, 0); // jQuery animate complete callback in IE is called before the last animation step!\n            }\n        }\n    });\n\n    var TRANSFER_START_STATE = { position: \"absolute\", marginLeft: 0, marginTop: 0, scale: 1 };\n    /**\n     * Intersection point formulas are taken from here - http://zonalandeducation.com/mmts/intersections/intersectionOfTwoLines1/intersectionOfTwoLines1.html\n     * Formula for a linear function from two points from here - http://demo.activemath.org/ActiveMath2/search/show.cmd?id=mbase://AC_UK_calculus/functions/ex_linear_equation_two_points\n     * The transform origin point is the intersection point of the two lines from the top left corners/top right corners of the element and target.\n     * The math and variables below MAY BE SIMPLIFIED (zeroes removed), but this would make the formula too cryptic.\n     */\n    createEffect(\"transfer\", {\n        init: function(element, target) {\n            this.element = element;\n            this.options = { target: target };\n            this.restore = [];\n        },\n\n        setup: function() {\n            this.element.appendTo(document.body);\n        },\n\n        prepare: function(start, end) {\n            var that = this,\n                element = that.element,\n                outerBox = fx.box(element),\n                innerBox = fx.box(that.options.target),\n                currentScale = animationProperty(element, \"scale\"),\n                scale = fx.fillScale(innerBox, outerBox),\n                transformOrigin = fx.transformOrigin(innerBox, outerBox);\n\n            extend(start, TRANSFER_START_STATE);\n            end.scale = 1;\n\n            element.css(TRANSFORM, \"scale(1)\").css(TRANSFORM);\n            element.css(TRANSFORM, \"scale(\" + currentScale + \")\");\n\n            start.top = outerBox.top;\n            start.left = outerBox.left;\n            start.transformOrigin = transformOrigin.x + PX + \" \" + transformOrigin.y + PX;\n\n            if (that._reverse) {\n                start.scale = scale;\n            } else {\n                end.scale = scale;\n            }\n        }\n    });\n\n\n    var CLIPS = {\n        top: \"rect(auto auto $size auto)\",\n        bottom: \"rect($size auto auto auto)\",\n        left: \"rect(auto $size auto auto)\",\n        right: \"rect(auto auto auto $size)\"\n    };\n\n    var ROTATIONS = {\n        top:    { start: \"rotatex(0deg)\", end: \"rotatex(180deg)\" },\n        bottom: { start: \"rotatex(-180deg)\", end: \"rotatex(0deg)\" },\n        left:   { start: \"rotatey(0deg)\", end: \"rotatey(-180deg)\" },\n        right:  { start: \"rotatey(180deg)\", end: \"rotatey(0deg)\" }\n    };\n\n    function clipInHalf(container, direction) {\n        var vertical = kendo.directions[direction].vertical,\n            size = (container[vertical ? HEIGHT : WIDTH]() / 2) + \"px\";\n\n        return CLIPS[direction].replace(\"$size\", size);\n    }\n\n    createEffect(\"turningPage\", {\n        directions: FOUR_DIRECTIONS,\n\n        init: function(element, direction, container) {\n            Effect.prototype.init.call(this, element, direction);\n            this._container = container;\n        },\n\n        prepare: function(start, end) {\n            var that = this,\n                reverse = that._reverse,\n                direction = reverse ? directions[that._direction].reverse : that._direction,\n                rotation = ROTATIONS[direction];\n\n            start.zIndex = 1;\n\n            if (that._clipInHalf) {\n               start.clip = clipInHalf(that._container, kendo.directions[direction].reverse);\n            }\n\n            start[BACKFACE] = HIDDEN;\n\n            end[TRANSFORM] = TRANSFORM_PERSPECTIVE + (reverse ? rotation.start : rotation.end);\n            start[TRANSFORM] = TRANSFORM_PERSPECTIVE + (reverse ? rotation.end : rotation.start);\n        },\n\n        setup: function() {\n            this._container.append(this.element);\n        },\n\n        face: function(value) {\n            this._face = value;\n            return this;\n        },\n\n        shouldHide: function() {\n            var that = this,\n                reverse = that._reverse,\n                face = that._face;\n\n            return (reverse && !face) || (!reverse && face);\n        },\n\n        clipInHalf: function(value) {\n            this._clipInHalf = value;\n            return this;\n        },\n\n        temporary: function() {\n            this.element.addClass('temp-page');\n            return this;\n        }\n    });\n\n    createEffect(\"staticPage\", {\n        directions: FOUR_DIRECTIONS,\n\n        init: function(element, direction, container) {\n            Effect.prototype.init.call(this, element, direction);\n            this._container = container;\n        },\n\n        restore: [\"clip\"],\n\n        prepare: function(start, end) {\n            var that = this,\n                direction = that._reverse ? directions[that._direction].reverse : that._direction;\n\n            start.clip = clipInHalf(that._container, direction);\n            start.opacity = 0.999;\n            end.opacity = 1;\n        },\n\n        shouldHide: function() {\n            var that = this,\n                reverse = that._reverse,\n                face = that._face;\n\n            return (reverse && !face) || (!reverse && face);\n        },\n\n        face: function(value) {\n            this._face = value;\n            return this;\n        }\n    });\n\n    createEffect(\"pageturn\", {\n        directions: [\"horizontal\", \"vertical\"],\n\n        init: function(element, direction, face, back) {\n            Effect.prototype.init.call(this, element, direction);\n            this.options = {};\n            this.options.face = face;\n            this.options.back = back;\n        },\n\n        children: function() {\n            var that = this,\n                options = that.options,\n                direction = that._direction === \"horizontal\" ? \"left\" : \"top\",\n                reverseDirection = kendo.directions[direction].reverse,\n                reverse = that._reverse,\n                temp,\n                faceClone = options.face.clone(true).removeAttr(\"id\"),\n                backClone = options.back.clone(true).removeAttr(\"id\"),\n                element = that.element;\n\n            if (reverse) {\n                temp = direction;\n                direction = reverseDirection;\n                reverseDirection = temp;\n            }\n\n            return [\n                kendo.fx(options.face).staticPage(direction, element).face(true).setReverse(reverse),\n                kendo.fx(options.back).staticPage(reverseDirection, element).setReverse(reverse),\n                kendo.fx(faceClone).turningPage(direction, element).face(true).clipInHalf(true).temporary().setReverse(reverse),\n                kendo.fx(backClone).turningPage(reverseDirection, element).clipInHalf(true).temporary().setReverse(reverse)\n            ];\n        },\n\n        prepare: function(start, end) {\n            start[PERSPECTIVE] = DEFAULT_PERSPECTIVE;\n            start.transformStyle = \"preserve-3d\";\n            // hack to trigger transition end.\n            start.opacity = 0.999;\n            end.opacity = 1;\n        },\n\n        teardown: function() {\n            this.element.find(\".temp-page\").remove();\n        }\n    });\n\n    createEffect(\"flip\", {\n        directions: [\"horizontal\", \"vertical\"],\n\n        init: function(element, direction, face, back) {\n            Effect.prototype.init.call(this, element, direction);\n            this.options = {};\n            this.options.face = face;\n            this.options.back = back;\n        },\n\n        children: function() {\n            var that = this,\n                options = that.options,\n                direction = that._direction === \"horizontal\" ? \"left\" : \"top\",\n                reverseDirection = kendo.directions[direction].reverse,\n                reverse = that._reverse,\n                temp,\n                element = that.element;\n\n            if (reverse) {\n                temp = direction;\n                direction = reverseDirection;\n                reverseDirection = temp;\n            }\n\n            return [\n                kendo.fx(options.face).turningPage(direction, element).face(true).setReverse(reverse),\n                kendo.fx(options.back).turningPage(reverseDirection, element).setReverse(reverse)\n            ];\n        },\n\n        prepare: function(start) {\n            start[PERSPECTIVE] = DEFAULT_PERSPECTIVE;\n            start.transformStyle = \"preserve-3d\";\n        }\n    });\n\n    var RESTORE_OVERFLOW = !support.mobileOS.android;\n    var IGNORE_TRANSITION_EVENT_SELECTOR = \".km-touch-scrollbar, .km-actionsheet-wrapper\";\n\n    createEffect(\"replace\", {\n        _before: $.noop,\n        _after: $.noop,\n        init: function(element, previous, transitionClass) {\n            Effect.prototype.init.call(this, element);\n            this._previous = $(previous);\n            this._transitionClass = transitionClass;\n        },\n\n        duration: function() {\n            throw new Error(\"The replace effect does not support duration setting; the effect duration may be customized through the transition class rule\");\n        },\n\n        beforeTransition: function(callback) {\n            this._before = callback;\n            return this;\n        },\n\n        afterTransition: function(callback) {\n            this._after = callback;\n            return this;\n        },\n\n        _both: function() {\n            return $().add(this._element).add(this._previous);\n        },\n\n        _containerClass: function() {\n            var direction = this._direction,\n                containerClass = \"k-fx k-fx-start k-fx-\" + this._transitionClass;\n\n            if (direction) {\n                containerClass += \" k-fx-\" + direction;\n            }\n\n            if (this._reverse) {\n                containerClass += \" k-fx-reverse\";\n            }\n\n            return containerClass;\n        },\n\n        complete: function(e) {\n            if (!this.deferred || (e && $(e.target).is(IGNORE_TRANSITION_EVENT_SELECTOR))) {\n                return;\n            }\n\n            var container = this.container;\n\n            container\n                .removeClass(\"k-fx-end\")\n                .removeClass(this._containerClass())\n                .off(transitions.event, this.completeProxy);\n\n            this._previous.hide().removeClass(\"k-fx-current\");\n            this.element.removeClass(\"k-fx-next\");\n\n            if (RESTORE_OVERFLOW) {\n                container.css(OVERFLOW, \"\");\n            }\n\n            if (!this.isAbsolute) {\n                this._both().css(POSITION, \"\");\n            }\n\n            this.deferred.resolve();\n            delete this.deferred;\n        },\n\n        run: function() {\n            if (this._additionalEffects && this._additionalEffects[0]) {\n                return this.compositeRun();\n            }\n\n            var that = this,\n                element = that.element,\n                previous = that._previous,\n                container = element.parents().filter(previous.parents()).first(),\n                both = that._both(),\n                deferred = $.Deferred(),\n                originalPosition = element.css(POSITION),\n                originalOverflow;\n\n            // edge case for grid/scheduler, where the previous is already destroyed.\n            if (!container.length) {\n                container = element.parent();\n            }\n\n            this.container = container;\n            this.deferred = deferred;\n            this.isAbsolute = originalPosition  == \"absolute\";\n\n            if (!this.isAbsolute) {\n                both.css(POSITION, \"absolute\");\n            }\n\n            if (RESTORE_OVERFLOW) {\n                originalOverflow = container.css(OVERFLOW);\n                container.css(OVERFLOW, \"hidden\");\n            }\n\n            if (!transitions) {\n                this.complete();\n            } else {\n                element.addClass(\"k-fx-hidden\");\n\n                container.addClass(this._containerClass());\n\n                this.completeProxy = $.proxy(this, \"complete\");\n                container.on(transitions.event, this.completeProxy);\n\n                kendo.animationFrame(function() {\n                    element.removeClass(\"k-fx-hidden\").addClass(\"k-fx-next\");\n                    previous.css(\"display\", \"\").addClass(\"k-fx-current\");\n                    that._before(previous, element);\n                    kendo.animationFrame(function() {\n                        container.removeClass(\"k-fx-start\").addClass(\"k-fx-end\");\n                        that._after(previous, element);\n                    });\n                });\n            }\n\n            return deferred.promise();\n        },\n\n        stop: function() {\n            this.complete();\n        }\n    });\n\n    var Animation = kendo.Class.extend({\n        init: function() {\n            var that = this;\n            that._tickProxy = proxy(that._tick, that);\n            that._started = false;\n        },\n\n        tick: $.noop,\n        done: $.noop,\n        onEnd: $.noop,\n        onCancel: $.noop,\n\n        start: function() {\n            if (!this.enabled()) {\n                return;\n            }\n\n            if (!this.done()) {\n                this._started = true;\n                kendo.animationFrame(this._tickProxy);\n            } else {\n                this.onEnd();\n            }\n        },\n\n        enabled: function() {\n            return true;\n        },\n\n        cancel: function() {\n            this._started = false;\n            this.onCancel();\n        },\n\n        _tick: function() {\n            var that = this;\n            if (!that._started) { return; }\n\n            that.tick();\n\n            if (!that.done()) {\n                kendo.animationFrame(that._tickProxy);\n            } else {\n                that._started = false;\n                that.onEnd();\n            }\n        }\n    });\n\n    var Transition = Animation.extend({\n        init: function(options) {\n            var that = this;\n            extend(that, options);\n            Animation.fn.init.call(that);\n        },\n\n        done: function() {\n            return this.timePassed() >= this.duration;\n        },\n\n        timePassed: function() {\n            return Math.min(this.duration, (new Date()) - this.startDate);\n        },\n\n        moveTo: function(options) {\n            var that = this,\n                movable = that.movable;\n\n            that.initial = movable[that.axis];\n            that.delta = options.location - that.initial;\n\n            that.duration = typeof options.duration == \"number\" ? options.duration : 300;\n\n            that.tick = that._easeProxy(options.ease);\n\n            that.startDate = new Date();\n            that.start();\n        },\n\n        _easeProxy: function(ease) {\n            var that = this;\n\n            return function() {\n                that.movable.moveAxis(that.axis, ease(that.timePassed(), that.initial, that.delta, that.duration));\n            };\n        }\n    });\n\n    extend(Transition, {\n        easeOutExpo: function (t, b, c, d) {\n            return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n        },\n\n        easeOutBack: function (t, b, c, d, s) {\n            s = 1.70158;\n            return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n        }\n    });\n\n    fx.Animation = Animation;\n    fx.Transition = Transition;\n    fx.createEffect = createEffect;\n\n    fx.box = function(element) {\n        element = $(element);\n        var result = element.offset();\n        result.width = kendo._outerWidth(element);\n        result.height = kendo._outerHeight(element);\n        return result;\n    };\n\n    fx.transformOrigin = function(inner, outer) {\n        var x = (inner.left - outer.left) * outer.width / (outer.width - inner.width),\n            y = (inner.top - outer.top) * outer.height / (outer.height - inner.height);\n\n        return {\n            x: isNaN(x) ? 0 : x,\n            y: isNaN(y) ? 0 : y\n        };\n    };\n\n    fx.fillScale = function(inner, outer) {\n        return Math.min(inner.width / outer.width, inner.height / outer.height);\n    };\n\n    fx.fitScale = function(inner, outer) {\n        return Math.max(inner.width / outer.width, inner.height / outer.height);\n    };\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.userevents',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"userevents\",\n    name: \"User Events\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    hidden: true\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        support = kendo.support,\n        Class = kendo.Class,\n        Observable = kendo.Observable,\n        now = Date.now,\n        extend = $.extend,\n        OS = support.mobileOS,\n        invalidZeroEvents = OS && OS.android,\n        DEFAULT_MIN_HOLD = 800,\n        CLICK_DELAY = 300,\n        DEFAULT_THRESHOLD = support.browser.msie ? 5 : 0, // WP8 and W8 are very sensitive and always report move.\n\n        // UserEvents events\n        PRESS = \"press\",\n        HOLD = \"hold\",\n        SELECT = \"select\",\n        START = \"start\",\n        MOVE = \"move\",\n        END = \"end\",\n        CANCEL = \"cancel\",\n        TAP = \"tap\",\n        DOUBLETAP = \"doubleTap\",\n        RELEASE = \"release\",\n        GESTURESTART = \"gesturestart\",\n        GESTURECHANGE = \"gesturechange\",\n        GESTUREEND = \"gestureend\",\n        GESTURETAP = \"gesturetap\";\n\n    var THRESHOLD = {\n        \"api\": 0,\n        \"touch\": 0,\n        \"mouse\": 9,\n        \"pointer\": 9\n    };\n\n    var ENABLE_GLOBAL_SURFACE = (!support.touch || support.mouseAndTouchPresent);\n\n    function touchDelta(touch1, touch2) {\n        var x1 = touch1.x.location,\n            y1 = touch1.y.location,\n            x2 = touch2.x.location,\n            y2 = touch2.y.location,\n            dx = x1 - x2,\n            dy = y1 - y2;\n\n        return {\n            center: {\n               x: (x1 + x2) / 2,\n               y: (y1 + y2) / 2\n            },\n\n            distance: Math.sqrt(dx*dx + dy*dy)\n        };\n    }\n\n    function getTouches(e) {\n        var touches = [],\n            originalEvent = e.originalEvent,\n            currentTarget = e.currentTarget,\n            idx = 0, length,\n            changedTouches,\n            touch;\n\n        if (e.api) {\n            touches.push({\n                id: 2,  // hardcoded ID for API call;\n                event: e,\n                target: e.target,\n                currentTarget: e.target,\n                location: e,\n                type: \"api\"\n            });\n        }\n        else if (e.type.match(/touch/)) {\n            changedTouches = originalEvent ? originalEvent.changedTouches : [];\n            for (length = changedTouches.length; idx < length; idx ++) {\n                touch = changedTouches[idx];\n                touches.push({\n                    location: touch,\n                    event: e,\n                    target: touch.target,\n                    currentTarget: currentTarget,\n                    id: touch.identifier,\n                    type: \"touch\"\n                });\n            }\n        }\n        else if (support.pointers || support.msPointers) {\n            touches.push({\n                location: originalEvent,\n                event: e,\n                target: e.target,\n                currentTarget: currentTarget,\n                id: originalEvent.pointerId,\n                type: \"pointer\"\n            });\n        } else {\n            touches.push({\n                id: 1, // hardcoded ID for mouse event;\n                event: e,\n                target: e.target,\n                currentTarget: currentTarget,\n                location: e,\n                type: \"mouse\"\n            });\n        }\n\n        return touches;\n    }\n\n    var TouchAxis = Class.extend({\n        init: function(axis, location) {\n            var that = this;\n\n            that.axis = axis;\n\n            that._updateLocationData(location);\n\n            that.startLocation = that.location;\n            that.velocity = that.delta = 0;\n            that.timeStamp = now();\n        },\n\n        move: function(location) {\n            var that = this,\n                offset = location[\"page\" + that.axis],\n                timeStamp = now(),\n                timeDelta = (timeStamp - that.timeStamp) || 1; // Firing manually events in tests can make this 0;\n\n            if (!offset && invalidZeroEvents) {\n                return;\n            }\n\n            that.delta = offset - that.location;\n\n            that._updateLocationData(location);\n\n            that.initialDelta = offset - that.startLocation;\n            that.velocity = that.delta / timeDelta;\n            that.timeStamp = timeStamp;\n        },\n\n        _updateLocationData: function(location) {\n            var that = this, axis = that.axis;\n\n            that.location = location[\"page\" + axis];\n            that.client = location[\"client\" + axis];\n            that.screen = location[\"screen\" + axis];\n        }\n    });\n\n    var Touch = Class.extend({\n        init: function(userEvents, target, touchInfo) {\n            extend(this, {\n                x: new TouchAxis(\"X\", touchInfo.location),\n                y: new TouchAxis(\"Y\", touchInfo.location),\n                type: touchInfo.type,\n                useClickAsTap: userEvents.useClickAsTap,\n                threshold: userEvents.threshold || THRESHOLD[touchInfo.type],\n                userEvents: userEvents,\n                target: target,\n                currentTarget: touchInfo.currentTarget,\n                initialTouch: touchInfo.target,\n                id: touchInfo.id,\n                pressEvent: touchInfo,\n                _clicks: userEvents._clicks,\n                supportDoubleTap: userEvents.supportDoubleTap,\n                _moved: false,\n                _finished: false\n            });\n        },\n\n        press: function() {\n            this._holdTimeout = setTimeout($.proxy(this, \"_hold\"), this.userEvents.minHold);\n            this._trigger(PRESS, this.pressEvent);\n        },\n\n        _tap: function(touchInfo) {\n            var that = this;\n            that.userEvents._clicks++;\n            if (that.userEvents._clicks == 1) {\n                that._clickTimeout = setTimeout(function() {\n                    if (that.userEvents._clicks == 1) {\n                        that._trigger(TAP, touchInfo);\n                    }\n                    else {\n                        that._trigger(DOUBLETAP, touchInfo);\n                    }\n                    that.userEvents._clicks = 0;\n                }, CLICK_DELAY);\n            }\n        },\n\n        _hold: function() {\n            this._trigger(HOLD, this.pressEvent);\n        },\n\n        move: function(touchInfo) {\n            var that = this;\n            var preventMove = touchInfo.type !== \"api\" && that.userEvents._shouldNotMove;\n\n            if (that._finished || preventMove) { return; }\n\n            that.x.move(touchInfo.location);\n            that.y.move(touchInfo.location);\n\n            if (!that._moved) {\n                if (that._withinIgnoreThreshold()) {\n                    return;\n                }\n\n                if (!UserEvents.current || UserEvents.current === that.userEvents) {\n                    that._start(touchInfo);\n                } else {\n                    return that.dispose();\n                }\n            }\n\n            // Event handlers may cancel the drag in the START event handler, hence the double check for pressed.\n            if (!that._finished) {\n                that._trigger(MOVE, touchInfo);\n            }\n        },\n\n        end: function(touchInfo) {\n            this.endTime = now();\n\n            if (this._finished) { return; }\n\n            // Mark the object as finished if there are blocking operations in the event handlers (alert/confirm)\n            this._finished = true;\n\n            this._trigger(RELEASE, touchInfo); // Release should be fired before TAP (as click is after mouseup/touchend)\n\n            if (this._moved) {\n                this._trigger(END, touchInfo);\n            } else {\n                if (!this.useClickAsTap) {\n                    if (this.supportDoubleTap) {\n                        this._tap(touchInfo);\n                    }\n                    else {\n                        this._trigger(TAP, touchInfo);\n                    }\n                }\n            }\n\n            clearTimeout(this._holdTimeout);\n\n            this.dispose();\n        },\n\n        dispose: function() {\n            var userEvents = this.userEvents,\n                activeTouches = userEvents.touches;\n\n            this._finished = true;\n            this.pressEvent = null;\n            clearTimeout(this._holdTimeout);\n\n            activeTouches.splice($.inArray(this, activeTouches), 1);\n        },\n\n        skip: function() {\n            this.dispose();\n        },\n\n        cancel: function() {\n            this.dispose();\n        },\n\n        isMoved: function() {\n            return this._moved;\n        },\n\n        _start: function(touchInfo) {\n            clearTimeout(this._holdTimeout);\n\n            this.startTime = now();\n            this._moved = true;\n            this._trigger(START, touchInfo);\n        },\n\n        _trigger: function(name, touchInfo) {\n            var that = this,\n                jQueryEvent = touchInfo.event,\n                data = {\n                    touch: that,\n                    x: that.x,\n                    y: that.y,\n                    target: that.target,\n                    event: jQueryEvent\n                };\n\n            if(that.userEvents.notify(name, data)) {\n                jQueryEvent.preventDefault();\n            }\n        },\n\n        _withinIgnoreThreshold: function() {\n            var xDelta = this.x.initialDelta,\n                yDelta = this.y.initialDelta;\n\n            return Math.sqrt(xDelta * xDelta + yDelta * yDelta) <= this.threshold;\n        }\n    });\n\n    function withEachUpEvent(callback) {\n        var downEvents = kendo.eventMap.up.split(\" \"),\n            idx = 0,\n            length = downEvents.length;\n\n        for(; idx < length; idx ++) {\n            callback(downEvents[idx]);\n        }\n    }\n\n    var UserEvents = Observable.extend({\n        init: function(element, options) {\n            var that = this,\n                filter,\n                ns = kendo.guid();\n\n            options = options || {};\n            filter = that.filter = options.filter;\n            that.threshold = options.threshold || DEFAULT_THRESHOLD;\n            that.minHold = options.minHold || DEFAULT_MIN_HOLD;\n            that.touches = [];\n            that._maxTouches = options.multiTouch ? 2 : 1;\n            that.allowSelection = options.allowSelection;\n            that.captureUpIfMoved = options.captureUpIfMoved;\n            that.useClickAsTap = !options.fastTap && !support.delayedClick();\n            that.eventNS = ns;\n            that._clicks = 0;\n            that.supportDoubleTap = options.supportDoubleTap;\n\n            element = $(element).handler(that);\n            Observable.fn.init.call(that);\n\n            extend(that, {\n                element: element,\n                // the touch events lock to the element anyway, so no need for the global setting\n                surface: options.global && ENABLE_GLOBAL_SURFACE ? $(element[0].ownerDocument.documentElement) : $(options.surface || element),\n                stopPropagation: options.stopPropagation,\n                pressed: false\n            });\n\n            that.surface.handler(that)\n                .on(kendo.applyEventMap(\"move\", ns), \"_move\")\n                .on(kendo.applyEventMap(\"up cancel\", ns), \"_end\");\n\n            element.on(kendo.applyEventMap(\"down\", ns), filter, \"_start\");\n\n            if (that.useClickAsTap) {\n                element.on(kendo.applyEventMap(\"click\", ns), filter, \"_click\");\n            }\n\n            if (support.pointers || support.msPointers) {\n                //touch-action:none will not work for IE10\n                if (support.browser.version < 11) {\n                    var defaultAction = \"pinch-zoom double-tap-zoom\";\n                    element.css(\"-ms-touch-action\", options.touchAction && options.touchAction != \"none\" ? defaultAction + \" \" + options.touchAction : defaultAction);\n                } else {\n                    element.css(\"touch-action\", options.touchAction || \"none\");\n                }\n            }\n\n            if (options.preventDragEvent) {\n                element.on(kendo.applyEventMap(\"dragstart\", ns), kendo.preventDefault);\n            }\n\n            element.on(kendo.applyEventMap(\"mousedown\", ns), filter, { root: element }, \"_select\");\n\n            if (that.captureUpIfMoved && support.eventCapture) {\n                var surfaceElement = that.surface[0],\n                    preventIfMovingProxy = $.proxy(that.preventIfMoving, that);\n\n                withEachUpEvent(function(eventName) {\n                    surfaceElement.addEventListener(eventName, preventIfMovingProxy, true);\n                });\n            }\n\n            that.bind([\n            PRESS,\n            HOLD,\n            TAP,\n            DOUBLETAP,\n            START,\n            MOVE,\n            END,\n            RELEASE,\n            CANCEL,\n            GESTURESTART,\n            GESTURECHANGE,\n            GESTUREEND,\n            GESTURETAP,\n            SELECT\n            ], options);\n        },\n\n        preventIfMoving: function(e) {\n            if (this._isMoved()) {\n                e.preventDefault();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that._destroyed) {\n                return;\n            }\n\n            that._destroyed = true;\n\n            if (that.captureUpIfMoved && support.eventCapture) {\n                var surfaceElement = that.surface[0];\n                withEachUpEvent(function(eventName) {\n                    surfaceElement.removeEventListener(eventName, that.preventIfMoving);\n                });\n            }\n\n            that.element.kendoDestroy(that.eventNS);\n            that.surface.kendoDestroy(that.eventNS);\n            that.element.removeData(\"handler\");\n            that.surface.removeData(\"handler\");\n            that._disposeAll();\n\n            that.unbind();\n            delete that.surface;\n            delete that.element;\n            delete that.currentTarget;\n        },\n\n        capture: function() {\n            UserEvents.current = this;\n        },\n\n        cancel: function() {\n            this._disposeAll();\n            this.trigger(CANCEL);\n        },\n\n        notify: function(eventName, data) {\n            var that = this,\n                touches = that.touches;\n\n            if (this._isMultiTouch()) {\n                switch(eventName) {\n                    case MOVE:\n                        eventName = GESTURECHANGE;\n                        break;\n                    case END:\n                        eventName = GESTUREEND;\n                        break;\n                    case TAP:\n                        eventName = GESTURETAP;\n                        break;\n                }\n\n                extend(data, {touches: touches}, touchDelta(touches[0], touches[1]));\n            }\n\n            return this.trigger(eventName, extend(data, {type: eventName}));\n        },\n\n        // API\n        press: function(x, y, target) {\n            this._apiCall(\"_start\", x, y, target);\n        },\n\n        move: function(x, y) {\n            this._apiCall(\"_move\", x, y);\n        },\n\n        end: function(x, y) {\n            this._apiCall(\"_end\", x, y);\n        },\n\n        _isMultiTouch: function() {\n            return this.touches.length > 1;\n        },\n\n        _maxTouchesReached: function() {\n            return this.touches.length >= this._maxTouches;\n        },\n\n        _disposeAll: function() {\n            var touches = this.touches;\n            while (touches.length > 0) {\n                touches.pop().dispose();\n            }\n        },\n\n        _isMoved: function() {\n            return $.grep(this.touches, function(touch) {\n                return touch.isMoved();\n            }).length;\n        },\n\n        _select: function(e) {\n           if (!this.allowSelection || this.trigger(SELECT, { event: e })) {\n               e.preventDefault();\n           }\n        },\n\n        _start: function(e) {\n            var that = this,\n                idx = 0,\n                filter = that.filter,\n                target,\n                touches = getTouches(e),\n                length = touches.length,\n                touch,\n                which = e.which;\n\n            if ((which && which > 1) || (that._maxTouchesReached())){\n                return;\n            }\n\n            UserEvents.current = null;\n\n            that.currentTarget = e.currentTarget;\n\n            if (that.stopPropagation) {\n                e.stopPropagation();\n            }\n\n            for (; idx < length; idx ++) {\n                if (that._maxTouchesReached()) {\n                    break;\n                }\n\n                touch = touches[idx];\n\n                if (filter) {\n                    target = $(touch.currentTarget); // target.is(filter) ? target : target.closest(filter, that.element);\n                } else {\n                    target = that.element;\n                }\n\n                if (!target.length) {\n                    continue;\n                }\n\n                touch = new Touch(that, target, touch);\n                that.touches.push(touch);\n                touch.press();\n\n                if (that._isMultiTouch()) {\n                    that.notify(\"gesturestart\", {});\n                }\n            }\n        },\n\n        _move: function(e) {\n            this._eachTouch(\"move\", e);\n        },\n\n        _end: function(e) {\n            this._eachTouch(\"end\", e);\n        },\n\n        _click: function(e) {\n            var data = {\n                touch: {\n                    initialTouch: e.target,\n                    target: $(e.currentTarget),\n                    endTime: now(),\n                    x: {\n                        location: e.pageX,\n                        client: e.clientX\n                    },\n                    y: {\n                        location: e.pageY,\n                        client: e.clientY\n                    }\n                },\n                x: e.pageX,\n                y: e.pageY,\n                target: $(e.currentTarget),\n                event: e,\n                type: \"tap\"\n            };\n\n            if (this.trigger(\"tap\", data)) {\n                e.preventDefault();\n            }\n        },\n\n        _eachTouch: function(methodName, e) {\n            var that = this,\n                dict = {},\n                touches = getTouches(e),\n                activeTouches = that.touches,\n                idx,\n                touch,\n                touchInfo,\n                matchingTouch;\n\n            for (idx = 0; idx < activeTouches.length; idx ++) {\n                touch = activeTouches[idx];\n                dict[touch.id] = touch;\n            }\n\n            for (idx = 0; idx < touches.length; idx ++) {\n                touchInfo = touches[idx];\n                matchingTouch = dict[touchInfo.id];\n\n                if (matchingTouch) {\n                    matchingTouch[methodName](touchInfo);\n                }\n            }\n        },\n\n        _apiCall: function(type, x, y, target) {\n            this[type]({\n                api: true,\n                pageX: x,\n                pageY: y,\n                clientX: x,\n                clientY: y,\n                target: $(target || this.element)[0],\n                stopPropagation: $.noop,\n                preventDefault: $.noop\n            });\n        }\n    });\n\n    UserEvents.defaultThreshold = function(value) {\n        DEFAULT_THRESHOLD = value;\n    };\n\n    UserEvents.minHold = function(value) {\n        DEFAULT_MIN_HOLD = value;\n    };\n\n    kendo.getTouches = getTouches;\n    kendo.touchDelta = touchDelta;\n    kendo.UserEvents = UserEvents;\n })(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.draganddrop',[ \"./kendo.core\", \"./kendo.userevents\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"draganddrop\",\n    name: \"Drag & drop\",\n    category: \"framework\",\n    description: \"Drag & drop functionality for any DOM element.\",\n    depends: [ \"core\", \"userevents\" ]\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        support = kendo.support,\n        document = window.document,\n        $window = $(window),\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        Observable = kendo.Observable,\n        UserEvents = kendo.UserEvents,\n        proxy = $.proxy,\n        extend = $.extend,\n        getOffset = kendo.getOffset,\n        draggables = {},\n        dropTargets = {},\n        dropAreas = {},\n        lastDropTarget,\n        elementUnderCursor = kendo.elementUnderCursor,\n        KEYUP = \"keyup\",\n        CHANGE = \"change\",\n\n        // Draggable events\n        DRAGSTART = \"dragstart\",\n        HOLD = \"hold\",\n        DRAG = \"drag\",\n        DRAGEND = \"dragend\",\n        DRAGCANCEL = \"dragcancel\",\n        HINTDESTROYED = \"hintDestroyed\",\n\n        // DropTarget events\n        DRAGENTER = \"dragenter\",\n        DRAGLEAVE = \"dragleave\",\n        DROP = \"drop\";\n\n    function contains(parent, child) {\n        try {\n            return $.contains(parent, child) || parent == child;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function numericCssPropery(element, property) {\n        return parseInt(element.css(property), 10) || 0;\n    }\n\n    function within(value, range) {\n        return Math.min(Math.max(value, range.min), range.max);\n    }\n\n    function containerBoundaries(container, element) {\n        var offset = getOffset(container),\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            minX = offset.left + numericCssPropery(container, \"borderLeftWidth\") + numericCssPropery(container, \"paddingLeft\"),\n            minY = offset.top + numericCssPropery(container, \"borderTopWidth\") + numericCssPropery(container, \"paddingTop\"),\n            maxX = minX + container.width() - outerWidth(element, true),\n            maxY = minY + container.height() - outerHeight(element, true);\n\n        return {\n            x: { min: minX, max: maxX },\n            y: { min: minY, max: maxY }\n        };\n    }\n\n    function checkTarget(target, targets, areas) {\n        var theTarget, theFilter, i = 0,\n            targetLen = targets && targets.length,\n            areaLen = areas && areas.length;\n\n        while (target && target.parentNode) {\n            for (i = 0; i < targetLen; i ++) {\n                theTarget = targets[i];\n                if (theTarget.element[0] === target) {\n                    return { target: theTarget, targetElement: target };\n                }\n            }\n\n            for (i = 0; i < areaLen; i ++) {\n                theFilter = areas[i];\n                if ($.contains(theFilter.element[0], target) && support.matchesSelector.call(target, theFilter.options.filter)) {\n                    return { target: theFilter, targetElement: target };\n                }\n            }\n\n            target = target.parentNode;\n        }\n\n        return undefined;\n    }\n\n    var TapCapture = Observable.extend({\n        init: function(element, options) {\n            var that = this,\n                domElement = element[0];\n\n            that.capture = false;\n\n            if (domElement.addEventListener) {\n                $.each(kendo.eventMap.down.split(\" \"), function() {\n                    domElement.addEventListener(this, proxy(that._press, that), true);\n                });\n                $.each(kendo.eventMap.up.split(\" \"), function() {\n                    domElement.addEventListener(this, proxy(that._release, that), true);\n                });\n            } else {\n                $.each(kendo.eventMap.down.split(\" \"), function() {\n                    domElement.attachEvent(this, proxy(that._press, that));\n                });\n                $.each(kendo.eventMap.up.split(\" \"), function() {\n                    domElement.attachEvent(this, proxy(that._release, that));\n                });\n            }\n\n            Observable.fn.init.call(that);\n\n            that.bind([\"press\", \"release\"], options || {});\n        },\n\n        captureNext: function() {\n            this.capture = true;\n        },\n\n        cancelCapture: function() {\n            this.capture = false;\n        },\n\n        _press: function(e) {\n            var that = this;\n            that.trigger(\"press\");\n            if (that.capture) {\n                e.preventDefault();\n            }\n        },\n\n        _release: function(e) {\n            var that = this;\n            that.trigger(\"release\");\n\n            if (that.capture) {\n                e.preventDefault();\n                that.cancelCapture();\n            }\n        }\n    });\n\n    var PaneDimension = Observable.extend({\n        init: function(options) {\n            var that = this;\n            Observable.fn.init.call(that);\n\n            that.forcedEnabled = false;\n\n            $.extend(that, options);\n\n            that.scale = 1;\n\n            if (that.horizontal) {\n                that.measure = \"offsetWidth\";\n                that.scrollSize = \"scrollWidth\";\n                that.axis = \"x\";\n            } else {\n                that.measure = \"offsetHeight\";\n                that.scrollSize = \"scrollHeight\";\n                that.axis = \"y\";\n            }\n        },\n\n        makeVirtual: function() {\n            $.extend(this, {\n                virtual: true,\n                forcedEnabled: true,\n                _virtualMin: 0,\n                _virtualMax: 0\n            });\n        },\n\n        virtualSize: function(min, max) {\n            if (this._virtualMin !== min || this._virtualMax !== max) {\n                this._virtualMin = min;\n                this._virtualMax = max;\n                this.update();\n            }\n        },\n\n        outOfBounds: function(offset) {\n            return offset > this.max || offset < this.min;\n        },\n\n        forceEnabled: function() {\n            this.forcedEnabled = true;\n        },\n\n        getSize: function() {\n            return this.container[0][this.measure];\n        },\n\n        getTotal: function() {\n            return this.element[0][this.scrollSize];\n        },\n\n        rescale: function(scale) {\n            this.scale = scale;\n        },\n\n        update: function(silent) {\n            var that = this,\n                total = that.virtual ? that._virtualMax : that.getTotal(),\n                scaledTotal = total * that.scale,\n                size = that.getSize();\n\n            if (total === 0 && !that.forcedEnabled) {\n                return; // we are not visible.\n            }\n\n            that.max = that.virtual ? -that._virtualMin : 0;\n            that.size = size;\n            that.total = scaledTotal;\n            that.min = Math.min(that.max, size - scaledTotal);\n            that.minScale = size / total;\n            that.centerOffset = (scaledTotal - size) / 2;\n\n            that.enabled = that.forcedEnabled || (scaledTotal > size);\n\n            if (!silent) {\n                that.trigger(CHANGE, that);\n            }\n        }\n    });\n\n    var PaneDimensions = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.x = new PaneDimension(extend({horizontal: true}, options));\n            that.y = new PaneDimension(extend({horizontal: false}, options));\n            that.container = options.container;\n            that.forcedMinScale = options.minScale;\n            that.maxScale = options.maxScale || 100;\n\n            that.bind(CHANGE, options);\n        },\n\n        rescale: function(newScale) {\n            this.x.rescale(newScale);\n            this.y.rescale(newScale);\n            this.refresh();\n        },\n\n        centerCoordinates: function() {\n            return { x: Math.min(0, -this.x.centerOffset), y: Math.min(0, -this.y.centerOffset) };\n        },\n\n        refresh: function() {\n            var that = this;\n            that.x.update();\n            that.y.update();\n            that.enabled = that.x.enabled || that.y.enabled;\n            that.minScale = that.forcedMinScale || Math.min(that.x.minScale, that.y.minScale);\n            that.fitScale = Math.max(that.x.minScale, that.y.minScale);\n            that.trigger(CHANGE);\n        }\n    });\n\n    var PaneAxis = Observable.extend({\n        init: function(options) {\n            var that = this;\n            extend(that, options);\n            Observable.fn.init.call(that);\n        },\n\n        outOfBounds: function() {\n            return this.dimension.outOfBounds(this.movable[this.axis]);\n        },\n\n        dragMove: function(delta) {\n            var that = this,\n                dimension = that.dimension,\n                axis = that.axis,\n                movable = that.movable,\n                position = movable[axis] + delta;\n\n            if (!dimension.enabled) {\n                return;\n            }\n\n            if ((position < dimension.min && delta < 0) || (position > dimension.max && delta > 0)) {\n                delta *= that.resistance;\n            }\n\n            movable.translateAxis(axis, delta);\n            that.trigger(CHANGE, that);\n        }\n    });\n\n    var Pane = Class.extend({\n\n        init: function(options) {\n            var that = this,\n                x,\n                y,\n                resistance,\n                movable;\n\n            extend(that, {elastic: true}, options);\n\n            resistance = that.elastic ? 0.5 : 0;\n            movable = that.movable;\n\n            that.x = x = new PaneAxis({\n                axis: \"x\",\n                dimension: that.dimensions.x,\n                resistance: resistance,\n                movable: movable\n            });\n\n            that.y = y = new PaneAxis({\n                axis: \"y\",\n                dimension: that.dimensions.y,\n                resistance: resistance,\n                movable: movable\n            });\n\n            that.userEvents.bind([\"press\", \"move\", \"end\", \"gesturestart\", \"gesturechange\"], {\n                gesturestart: function(e) {\n                    that.gesture = e;\n                    that.offset = that.dimensions.container.offset();\n                },\n\n                press: function(e) {\n                    if ($(e.event.target).closest(\"a\").is(\"[data-navigate-on-press=true]\")) {\n                        e.sender.cancel();\n                    }\n                },\n\n                gesturechange: function(e) {\n                    var previousGesture = that.gesture,\n                        previousCenter = previousGesture.center,\n\n                        center = e.center,\n\n                        scaleDelta = e.distance / previousGesture.distance,\n\n                        minScale = that.dimensions.minScale,\n                        maxScale = that.dimensions.maxScale,\n                        coordinates;\n\n                    if (movable.scale <= minScale && scaleDelta < 1) {\n                        // Resist shrinking. Instead of shrinking from 1 to 0.5, it will shrink to 0.5 + (1 /* minScale */ - 0.5) * 0.8 = 0.9;\n                        scaleDelta += (1 - scaleDelta) * 0.8;\n                    }\n\n                    if (movable.scale * scaleDelta >= maxScale) {\n                        scaleDelta = maxScale / movable.scale;\n                    }\n\n                    var offsetX = movable.x + that.offset.left,\n                        offsetY = movable.y + that.offset.top;\n\n                    coordinates = {\n                        x: (offsetX - previousCenter.x) * scaleDelta + center.x - offsetX,\n                        y: (offsetY - previousCenter.y) * scaleDelta + center.y - offsetY\n                    };\n\n                    movable.scaleWith(scaleDelta);\n\n                    x.dragMove(coordinates.x);\n                    y.dragMove(coordinates.y);\n\n                    that.dimensions.rescale(movable.scale);\n                    that.gesture = e;\n                    e.preventDefault();\n                },\n\n                move: function(e) {\n                    if (e.event.target.tagName.match(/textarea|input/i)) {\n                        return;\n                    }\n\n                    if (x.dimension.enabled || y.dimension.enabled) {\n                        x.dragMove(e.x.delta);\n                        y.dragMove(e.y.delta);\n                        e.preventDefault();\n                    } else {\n                        e.touch.skip();\n                    }\n                },\n\n                end: function(e) {\n                    e.preventDefault();\n                }\n            });\n        }\n    });\n\n    var TRANSFORM_STYLE = support.transitions.prefix + \"Transform\",\n        translate;\n\n\n    if (support.hasHW3D) {\n        translate = function(x, y, scale) {\n            return \"translate3d(\" + x + \"px,\" + y +\"px,0) scale(\" + scale + \")\";\n        };\n    } else {\n        translate = function(x, y, scale) {\n            return \"translate(\" + x + \"px,\" + y +\"px) scale(\" + scale + \")\";\n        };\n    }\n\n    var Movable = Observable.extend({\n        init: function(element) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.element = $(element);\n            that.element[0].style.webkitTransformOrigin = \"left top\";\n            that.x = 0;\n            that.y = 0;\n            that.scale = 1;\n            that._saveCoordinates(translate(that.x, that.y, that.scale));\n        },\n\n        translateAxis: function(axis, by) {\n            this[axis] += by;\n            this.refresh();\n        },\n\n        scaleTo: function(scale) {\n            this.scale = scale;\n            this.refresh();\n        },\n\n        scaleWith: function(scaleDelta) {\n            this.scale *= scaleDelta;\n            this.refresh();\n        },\n\n        translate: function(coordinates) {\n            this.x += coordinates.x;\n            this.y += coordinates.y;\n            this.refresh();\n        },\n\n        moveAxis: function(axis, value) {\n            this[axis] = value;\n            this.refresh();\n        },\n\n        moveTo: function(coordinates) {\n            extend(this, coordinates);\n            this.refresh();\n        },\n\n        refresh: function() {\n            var that = this,\n                x = that.x,\n                y = that.y,\n                newCoordinates;\n\n            if (that.round) {\n                x = Math.round(x);\n                y = Math.round(y);\n            }\n\n            newCoordinates = translate(x, y, that.scale);\n\n            if (newCoordinates != that.coordinates) {\n                if (kendo.support.browser.msie && kendo.support.browser.version < 10) {\n                    that.element[0].style.position = \"absolute\";\n                    that.element[0].style.left = that.x + \"px\";\n                    that.element[0].style.top = that.y + \"px\";\n\n                } else {\n                    that.element[0].style[TRANSFORM_STYLE] = newCoordinates;\n                }\n                that._saveCoordinates(newCoordinates);\n                that.trigger(CHANGE);\n            }\n        },\n\n        _saveCoordinates: function(coordinates) {\n            this.coordinates = coordinates;\n        }\n    });\n\n    function destroyDroppable(collection, widget) {\n        var groupName = widget.options.group,\n        droppables = collection[groupName],\n        i;\n\n        Widget.fn.destroy.call(widget);\n\n        if (droppables.length > 1) {\n            for (i = 0; i < droppables.length; i++) {\n                if (droppables[i] == widget) {\n                    droppables.splice(i, 1);\n                    break;\n                }\n            }\n        } else {\n            droppables.length = 0; // WTF, porting this from the previous destroyGroup\n            delete collection[groupName];\n        }\n    }\n\n    var DropTarget = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            var group = that.options.group;\n\n            if (!(group in dropTargets)) {\n                dropTargets[group] = [ that ];\n            } else {\n                dropTargets[group].push( that );\n            }\n        },\n\n        events: [\n            DRAGENTER,\n            DRAGLEAVE,\n            DROP\n        ],\n\n        options: {\n            name: \"DropTarget\",\n            group: \"default\"\n        },\n\n        destroy: function() {\n            destroyDroppable(dropTargets, this);\n        },\n\n        _trigger: function(eventName, e) {\n            var that = this,\n                draggable = draggables[that.options.group];\n\n            if (draggable) {\n                return that.trigger(eventName, extend({}, e.event, {\n                           draggable: draggable,\n                           dropTarget: e.dropTarget\n                       }));\n            }\n        },\n\n        _over: function(e) {\n            this._trigger(DRAGENTER, e);\n        },\n\n        _out: function(e) {\n            this._trigger(DRAGLEAVE, e);\n        },\n\n        _drop: function(e) {\n            var that = this,\n                draggable = draggables[that.options.group];\n\n            if (draggable) {\n                draggable.dropped = !that._trigger(DROP, e);\n            }\n        }\n    });\n\n    DropTarget.destroyGroup = function(groupName) {\n        var group = dropTargets[groupName] || dropAreas[groupName],\n            i;\n\n        if (group) {\n            for (i = 0; i < group.length; i++) {\n                Widget.fn.destroy.call(group[i]);\n            }\n\n            group.length = 0;\n            delete dropTargets[groupName];\n            delete dropAreas[groupName];\n        }\n    };\n\n    DropTarget._cache = dropTargets;\n\n    var DropTargetArea = DropTarget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            var group = that.options.group;\n\n            if (!(group in dropAreas)) {\n                dropAreas[group] = [ that ];\n            } else {\n                dropAreas[group].push( that );\n            }\n        },\n\n        destroy: function() {\n            destroyDroppable(dropAreas, this);\n        },\n\n        options: {\n            name: \"DropTargetArea\",\n            group: \"default\",\n            filter: null\n        }\n    });\n\n    var Draggable = Widget.extend({\n        init: function (element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._activated = false;\n\n            that.userEvents = new UserEvents(that.element, {\n                global: true,\n                allowSelection: true,\n                filter: that.options.filter,\n                threshold: that.options.distance,\n                start: proxy(that._start, that),\n                hold: proxy(that._hold, that),\n                move: proxy(that._drag, that),\n                end: proxy(that._end, that),\n                cancel: proxy(that._cancel, that),\n                select: proxy(that._select, that)\n            });\n\n            if (kendo.support.touch) {\n                that.element.find(that.options.filter).css('touch-action', 'none');\n            }\n\n            that._afterEndHandler = proxy(that._afterEnd, that);\n            that._captureEscape = proxy(that._captureEscape, that);\n        },\n\n        events: [\n            HOLD,\n            DRAGSTART,\n            DRAG,\n            DRAGEND,\n            DRAGCANCEL,\n            HINTDESTROYED\n        ],\n\n        options: {\n            name: \"Draggable\",\n            distance: ( kendo.support.touch ? 0 : 5),\n            group: \"default\",\n            cursorOffset: null,\n            axis: null,\n            container: null,\n            filter: null,\n            ignore: null,\n            holdToDrag: false,\n            autoScroll: false,\n            dropped: false\n        },\n\n        cancelHold: function() {\n            this._activated = false;\n        },\n\n        _captureEscape: function(e) {\n            var that = this;\n\n            if (e.keyCode === kendo.keys.ESC) {\n                that._trigger(DRAGCANCEL, { event: e });\n                that.userEvents.cancel();\n            }\n        },\n\n        _updateHint: function(e) {\n            var that = this,\n                coordinates,\n                options = that.options,\n                boundaries = that.boundaries,\n                axis = options.axis,\n                cursorOffset = that.options.cursorOffset;\n\n            if (cursorOffset) {\n               coordinates = { left: e.x.location + cursorOffset.left, top: e.y.location + cursorOffset.top };\n            } else {\n                that.hintOffset.left += e.x.delta;\n                that.hintOffset.top += e.y.delta;\n                coordinates = $.extend({}, that.hintOffset);\n            }\n\n            if (boundaries) {\n                coordinates.top = within(coordinates.top, boundaries.y);\n                coordinates.left = within(coordinates.left, boundaries.x);\n            }\n\n            if (axis === \"x\") {\n                delete coordinates.top;\n            } else if (axis === \"y\") {\n                delete coordinates.left;\n            }\n\n            that.hint.css(coordinates);\n        },\n\n        _shouldIgnoreTarget: function(target) {\n            var ignoreSelector = this.options.ignore;\n            return ignoreSelector && $(target).is(ignoreSelector);\n        },\n\n        _select: function(e) {\n            if (!this._shouldIgnoreTarget(e.event.target)) {\n                e.preventDefault();\n            }\n        },\n\n        _start: function(e) {\n            var that = this,\n                options = that.options,\n                container = options.container ? $(options.container): null,\n                hint = options.hint;\n\n            if (this._shouldIgnoreTarget(e.touch.initialTouch) || (options.holdToDrag && !that._activated)) {\n                that.userEvents.cancel();\n                return;\n            }\n\n            that.currentTarget = e.target;\n            that.currentTargetOffset = getOffset(that.currentTarget);\n\n            if (hint) {\n                if (that.hint) {\n                    that.hint.stop(true, true).remove();\n                }\n\n                that.hint = kendo.isFunction(hint) ? $(hint.call(that, that.currentTarget)) : hint;\n\n                var offset = getOffset(that.currentTarget);\n                that.hintOffset = offset;\n\n                that.hint.css( {\n                    position: \"absolute\",\n                    zIndex: 20000, // the Window's z-index is 10000 and can be raised because of z-stacking\n                    left: offset.left,\n                    top: offset.top\n                })\n                .appendTo(document.body);\n\n                that.angular(\"compile\", function(){\n                    that.hint.removeAttr(\"ng-repeat\");\n                    var scopeTarget = $(e.target);\n\n                    while (!scopeTarget.data(\"$$kendoScope\") && scopeTarget.length) {\n                        scopeTarget = scopeTarget.parent();\n                    }\n\n                    return {\n                        elements: that.hint.get(),\n                        scopeFrom: scopeTarget.data(\"$$kendoScope\")\n                    };\n                });\n            }\n\n            draggables[options.group] = that;\n\n            that.dropped = false;\n\n            if (container) {\n                that.boundaries = containerBoundaries(container, that.hint);\n            }\n\n            $(document).on(KEYUP, that._captureEscape);\n\n            if (that._trigger(DRAGSTART, e)) {\n                that.userEvents.cancel();\n                that._afterEnd();\n            }\n\n            that.userEvents.capture();\n        },\n\n        _hold: function(e) {\n            this.currentTarget = e.target;\n\n            if (this._trigger(HOLD, e)) {\n                this.userEvents.cancel();\n            } else {\n                this._activated = true;\n            }\n        },\n\n        _drag: function(e) {\n            e.preventDefault();\n\n            var cursorElement = this._elementUnderCursor(e);\n\n            if (this.options.autoScroll && this._cursorElement !== cursorElement) {\n                this._scrollableParent = findScrollableParent(cursorElement);\n                this._cursorElement = cursorElement;\n            }\n\n            this._lastEvent = e;\n            this._processMovement(e, cursorElement);\n\n            if (this.options.autoScroll) {\n                // chrome seems to trigger mousemove when mouse is moved outside of the window (over the Chrome), too.\n                if (this._scrollableParent[0]) {\n                    var velocity = autoScrollVelocity(e.x.location, e.y.location, scrollableViewPort(this._scrollableParent));\n\n\n                    this._scrollCompenstation = $.extend({}, this.hintOffset);\n                    this._scrollVelocity = velocity;\n\n                    if (velocity.y === 0 && velocity.x === 0) {\n                        clearInterval(this._scrollInterval);\n                        this._scrollInterval = null;\n                    } else if(!this._scrollInterval) {\n                        this._scrollInterval = setInterval($.proxy(this, \"_autoScroll\"), 50);\n                    }\n                }\n            }\n\n            if (this.hint) {\n                this._updateHint(e);\n            }\n        },\n\n        _processMovement: function(e, cursorElement) {\n            this._withDropTarget(cursorElement, function(target, targetElement) {\n                if (!target) {\n                    if (lastDropTarget) {\n                        lastDropTarget._trigger(DRAGLEAVE, extend(e, { dropTarget: $(lastDropTarget.targetElement) }));\n                        lastDropTarget = null;\n                    }\n                    return;\n                }\n\n                if (lastDropTarget) {\n                    if (targetElement === lastDropTarget.targetElement) {\n                        return;\n                    }\n\n                    lastDropTarget._trigger(DRAGLEAVE, extend(e, { dropTarget: $(lastDropTarget.targetElement) }));\n                }\n\n                target._trigger(DRAGENTER, extend(e, { dropTarget: $(targetElement) }));\n                lastDropTarget = extend(target, { targetElement: targetElement });\n            });\n\n            this._trigger(DRAG, extend(e, { dropTarget: lastDropTarget, elementUnderCursor: cursorElement }));\n        },\n\n        _autoScroll: function() {\n            var parent = this._scrollableParent[0],\n                velocity = this._scrollVelocity,\n                compensation = this._scrollCompenstation;\n\n            if (!parent) {\n                return;\n            }\n\n            var cursorElement = this._elementUnderCursor(this._lastEvent);\n            this._processMovement(this._lastEvent, cursorElement);\n\n            var yIsScrollable, xIsScrollable;\n\n            var isRootNode = parent === scrollableRoot()[0];\n\n            if (isRootNode) {\n                yIsScrollable = document.body.scrollHeight > $window.height();\n                xIsScrollable = document.body.scrollWidth > $window.width();\n            } else {\n                yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n                xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n            }\n\n            var yDelta = parent.scrollTop + velocity.y;\n            var yInBounds = yIsScrollable && yDelta > 0 && yDelta < parent.scrollHeight;\n\n            var xDelta = parent.scrollLeft + velocity.x;\n            var xInBounds = xIsScrollable && xDelta > 0 && xDelta < parent.scrollWidth;\n\n            if (yInBounds) {\n                parent.scrollTop += velocity.y;\n            } else if (yIsScrollable && yDelta < 0) {\n                parent.scrollTop = 0;\n            }\n\n            if (xInBounds) {\n                parent.scrollLeft += velocity.x;\n            } else if (xIsScrollable && xDelta < 0) {\n                parent.scrollLeft = 0;\n            }\n\n            if (this.hint && isRootNode && (xInBounds || yInBounds)) {\n                if (yInBounds) {\n                    compensation.top += velocity.y;\n                }\n\n                if (xInBounds) {\n                    compensation.left += velocity.x;\n                }\n\n                this.hint.css(compensation);\n            }\n        },\n\n        _end: function(e) {\n            this._withDropTarget(this._elementUnderCursor(e), function(target, targetElement) {\n                if (target) {\n                    target._drop(extend({}, e, { dropTarget: $(targetElement) }));\n                    lastDropTarget = null;\n                }\n            });\n\n            clearInterval(this._scrollInterval);\n            this._scrollInterval = null;\n            this._cancel(this._trigger(DRAGEND, e));\n        },\n\n        _cancel: function(isDefaultPrevented) {\n            var that = this;\n\n            that._scrollableParent = null;\n            this._cursorElement = null;\n            clearInterval(this._scrollInterval);\n            that._activated = false;\n\n            if (that.hint && !that.dropped) {\n                setTimeout(function() {\n                    that.hint.stop(true, true);\n\n                    if (isDefaultPrevented) {\n                        that._afterEndHandler();\n                    } else {\n                        that.hint.animate(that.currentTargetOffset, \"fast\", that._afterEndHandler);\n                    }\n                }, 0);\n\n            } else {\n                that._afterEnd();\n            }\n        },\n\n        _trigger: function(eventName, e) {\n            var that = this;\n\n            return that.trigger(\n                eventName, extend(\n                {},\n                e.event,\n                {\n                    x: e.x,\n                    y: e.y,\n                    currentTarget: that.currentTarget,\n                    initialTarget: e.touch ? e.touch.initialTouch : null,\n                    dropTarget: e.dropTarget,\n                    elementUnderCursor: e.elementUnderCursor\n                }\n            ));\n        },\n\n        _elementUnderCursor: function(e) {\n            var target = elementUnderCursor(e),\n                hint = this.hint;\n\n            if (hint && contains(hint[0], target)) {\n                hint.hide();\n                target = elementUnderCursor(e);\n                // IE8 does not return the element in iframe from first attempt\n                if (!target) {\n                    target = elementUnderCursor(e);\n                }\n                hint.show();\n            }\n\n            return target;\n        },\n\n        _withDropTarget: function(element, callback) {\n            var result,\n                group = this.options.group,\n                targets = dropTargets[group],\n                areas = dropAreas[group];\n\n            if (targets && targets.length || areas && areas.length) {\n                result = checkTarget(element, targets, areas);\n\n                if (result) {\n                    callback(result.target, result.targetElement);\n                } else {\n                    callback();\n                }\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that._afterEnd();\n\n            that.userEvents.destroy();\n\n            this._scrollableParent = null;\n            this._cursorElement = null;\n            clearInterval(this._scrollInterval);\n\n            that.currentTarget = null;\n        },\n\n        _afterEnd: function() {\n            var that = this;\n\n            if (that.hint) {\n                that.hint.remove();\n            }\n\n            delete draggables[that.options.group];\n\n            that.trigger(\"destroy\");\n            that.trigger(HINTDESTROYED);\n            $(document).off(KEYUP, that._captureEscape);\n        }\n    });\n\n    kendo.ui.plugin(DropTarget);\n    kendo.ui.plugin(DropTargetArea);\n    kendo.ui.plugin(Draggable);\n    kendo.TapCapture = TapCapture;\n    kendo.containerBoundaries = containerBoundaries;\n\n    extend(kendo.ui, {\n        Pane: Pane,\n        PaneDimensions: PaneDimensions,\n        Movable: Movable\n    });\n\n    function scrollableViewPort(element) {\n        var root = scrollableRoot()[0],\n            offset,\n            top,\n            left;\n\n        if (element[0] === root) {\n            top = root.scrollTop;\n            left = root.scrollLeft;\n\n            return {\n                top: top,\n                left: left,\n                bottom: top + $window.height(),\n                right: left + $window.width()\n            };\n        } else {\n            offset = element.offset();\n            offset.bottom = offset.top + element.height();\n            offset.right =  offset.left + element.width();\n            return offset;\n        }\n    }\n\n    function scrollableRoot() {\n        return $(kendo.support.browser.edge || kendo.support.browser.safari ? document.body : document.documentElement);\n    }\n\n    function findScrollableParent(element) {\n        var root = scrollableRoot();\n\n        if (!element || element === document.body || element === document.documentElement) {\n            return root;\n        }\n\n        var parent = $(element)[0];\n\n        while (parent && !kendo.isScrollable(parent) && parent !== document.body) {\n            parent = parent.parentNode;\n        }\n\n        if (parent === document.body) {\n            return root;\n        }\n\n        return $(parent);\n    }\n\n    function autoScrollVelocity(mouseX, mouseY, rect) {\n        var velocity = { x: 0, y: 0 };\n\n        var AUTO_SCROLL_AREA = 50;\n\n        if (mouseX - rect.left < AUTO_SCROLL_AREA) {\n            velocity.x = -(AUTO_SCROLL_AREA - (mouseX - rect.left));\n        } else if (rect.right - mouseX < AUTO_SCROLL_AREA) {\n            velocity.x = AUTO_SCROLL_AREA - (rect.right - mouseX);\n        }\n\n        if (mouseY - rect.top < AUTO_SCROLL_AREA) {\n            velocity.y = -(AUTO_SCROLL_AREA - (mouseY - rect.top));\n        } else if (rect.bottom - mouseY < AUTO_SCROLL_AREA) {\n            velocity.y = AUTO_SCROLL_AREA - (rect.bottom - mouseY);\n        }\n\n        return velocity;\n    }\n\n    // export for testing\n    kendo.ui.Draggable.utils = {\n        autoScrollVelocity: autoScrollVelocity,\n        scrollableViewPort: scrollableViewPort,\n        findScrollableParent: findScrollableParent\n    };\n\n })(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.mobile.scroller',[ \"./kendo.fx\", \"./kendo.draganddrop\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"mobile.scroller\",\n    name: \"Scroller\",\n    category: \"mobile\",\n    description: \"The Kendo Mobile Scroller widget enables touch friendly kinetic scrolling for the contents of a given DOM element.\",\n    depends: [ \"fx\", \"draganddrop\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        mobile = kendo.mobile,\n        fx = kendo.effects,\n        ui = mobile.ui,\n        proxy = $.proxy,\n        extend = $.extend,\n        Widget = ui.Widget,\n        Class = kendo.Class,\n        Movable = kendo.ui.Movable,\n        Pane = kendo.ui.Pane,\n        PaneDimensions = kendo.ui.PaneDimensions,\n        Transition = fx.Transition,\n        Animation = fx.Animation,\n        abs = Math.abs,\n        SNAPBACK_DURATION = 500,\n        SCROLLBAR_OPACITY = 0.7,\n        FRICTION = 0.96,\n        VELOCITY_MULTIPLIER = 10,\n        MAX_VELOCITY = 55,\n        OUT_OF_BOUNDS_FRICTION = 0.5,\n        ANIMATED_SCROLLER_PRECISION = 5,\n        RELEASECLASS = \"km-scroller-release\",\n        REFRESHCLASS = \"km-scroller-refresh\",\n        PULL = \"pull\",\n        CHANGE = \"change\",\n        RESIZE = \"resize\",\n        SCROLL = \"scroll\",\n        MOUSE_WHEEL_ID = 2;\n\n    var ZoomSnapBack = Animation.extend({\n        init: function(options) {\n            var that = this;\n            Animation.fn.init.call(that);\n            extend(that, options);\n\n            that.userEvents.bind(\"gestureend\", proxy(that.start, that));\n            that.tapCapture.bind(\"press\", proxy(that.cancel, that));\n        },\n\n        enabled: function() {\n          return this.movable.scale < this.dimensions.minScale;\n        },\n\n        done: function() {\n            return this.dimensions.minScale - this.movable.scale < 0.01;\n        },\n\n        tick: function() {\n            var movable = this.movable;\n            movable.scaleWith(1.1);\n            this.dimensions.rescale(movable.scale);\n        },\n\n        onEnd: function() {\n            var movable = this.movable;\n            movable.scaleTo(this.dimensions.minScale);\n            this.dimensions.rescale(movable.scale);\n        }\n    });\n\n    var DragInertia = Animation.extend({\n        init: function(options) {\n            var that = this;\n\n            Animation.fn.init.call(that);\n\n            extend(that, options, {\n                transition: new Transition({\n                    axis: options.axis,\n                    movable: options.movable,\n                    onEnd: function() { that._end(); }\n                })\n            });\n\n            that.tapCapture.bind(\"press\", function() { that.cancel(); });\n            that.userEvents.bind(\"end\", proxy(that.start, that));\n            that.userEvents.bind(\"gestureend\", proxy(that.start, that));\n            that.userEvents.bind(\"tap\", proxy(that.onEnd, that));\n        },\n\n        onCancel: function() {\n            this.transition.cancel();\n        },\n\n        freeze: function(location) {\n            var that = this;\n            that.cancel();\n            that._moveTo(location);\n        },\n\n        onEnd: function() {\n            var that = this;\n            if (that.paneAxis.outOfBounds()) {\n                that._snapBack();\n            } else {\n                that._end();\n            }\n        },\n\n        done: function() {\n            return abs(this.velocity) < 1;\n        },\n\n        start: function(e) {\n            var that = this,\n                velocity;\n\n            if (!that.dimension.enabled) { return; }\n\n            if (that.paneAxis.outOfBounds()) {\n                if(that.transition._started){\n                    that.transition.cancel();\n                    that.velocity = Math.min(e.touch[that.axis].velocity * that.velocityMultiplier, MAX_VELOCITY);\n\n                    Animation.fn.start.call(that);\n                }else{\n                    that._snapBack();\n                }\n            } else {\n                velocity = e.touch.id === MOUSE_WHEEL_ID ? 0 : e.touch[that.axis].velocity;\n                that.velocity = Math.max(Math.min(velocity * that.velocityMultiplier, MAX_VELOCITY), -MAX_VELOCITY);\n\n                that.tapCapture.captureNext();\n                Animation.fn.start.call(that);\n            }\n        },\n\n        tick: function() {\n            var that = this,\n                dimension = that.dimension,\n                friction = that.paneAxis.outOfBounds() ? OUT_OF_BOUNDS_FRICTION : that.friction,\n                delta = (that.velocity *= friction),\n                location = that.movable[that.axis] + delta;\n\n                if (!that.elastic && dimension.outOfBounds(location)) {\n                    location = Math.max(Math.min(location, dimension.max), dimension.min);\n                    that.velocity = 0;\n                }\n\n            that.movable.moveAxis(that.axis, location);\n        },\n\n        _end: function() {\n            this.tapCapture.cancelCapture();\n            this.end();\n        },\n\n        _snapBack: function() {\n            var that = this,\n                dimension = that.dimension,\n                snapBack = that.movable[that.axis] > dimension.max ? dimension.max : dimension.min;\n            that._moveTo(snapBack);\n        },\n\n        _moveTo: function(location) {\n            this.transition.moveTo({ location: location, duration: SNAPBACK_DURATION, ease: Transition.easeOutExpo });\n        }\n    });\n\n    var AnimatedScroller = Animation.extend({\n        init: function(options) {\n            var that = this;\n\n            kendo.effects.Animation.fn.init.call(this);\n\n            extend(that, options, {\n                origin: {},\n                destination: {},\n                offset: {}\n            });\n        },\n\n        tick: function() {\n            this._updateCoordinates();\n            this.moveTo(this.origin);\n        },\n\n        done: function() {\n            return abs(this.offset.y) < ANIMATED_SCROLLER_PRECISION && abs(this.offset.x) < ANIMATED_SCROLLER_PRECISION;\n        },\n\n        onEnd: function() {\n            this.moveTo(this.destination);\n            if (this.callback) {\n                this.callback.call();\n            }\n        },\n\n        setCoordinates: function(from, to) {\n            this.offset = {};\n            this.origin = from;\n            this.destination = to;\n        },\n\n        setCallback: function(callback) {\n            if (callback && kendo.isFunction(callback)) {\n                this.callback = callback;\n            } else {\n                callback = undefined;\n            }\n        },\n\n        _updateCoordinates: function() {\n            this.offset = {\n                x: (this.destination.x - this.origin.x) / 4,\n                y: (this.destination.y - this.origin.y) / 4\n            };\n\n            this.origin = {\n                y: this.origin.y + this.offset.y,\n                x: this.origin.x + this.offset.x\n            };\n        }\n    });\n\n    var ScrollBar = Class.extend({\n        init: function(options) {\n            var that = this,\n                horizontal = options.axis === \"x\",\n                element = $('<div role=\"scrollbar\" aria-controls=\"' + options.controlsId + '\" class=\"km-touch-scrollbar km-' + (horizontal ? \"horizontal\" : \"vertical\") + '-scrollbar\" />');\n\n            if(horizontal) {\n                element.attr(\"aria-orientation\", \"horizontal\");\n            }\n\n            extend(that, options, {\n                element: element,\n                elementSize: 0,\n                movable: new Movable(element),\n                scrollMovable: options.movable,\n                alwaysVisible: options.alwaysVisible,\n                size: horizontal ? \"width\" : \"height\"\n            });\n\n            that.scrollMovable.bind(CHANGE, proxy(that.refresh, that));\n            that.container.append(element);\n            if (options.alwaysVisible) {\n                that.show();\n            }\n        },\n\n        refresh: function() {\n            var that = this,\n                axis = that.axis,\n                dimension = that.dimension,\n                paneSize = dimension.size,\n                scrollMovable = that.scrollMovable,\n                sizeRatio = paneSize / dimension.total,\n                position = Math.round(-scrollMovable[axis] * sizeRatio),\n                size = Math.round(paneSize * sizeRatio);\n\n                if (sizeRatio >= 1) {\n                    this.element.css(\"display\", \"none\");\n                } else {\n                    this.element.css(\"display\", \"\");\n                }\n\n                if (position + size > paneSize) {\n                    size = paneSize - position;\n                } else if (position < 0) {\n                    size += position;\n                    position = 0;\n                }\n\n            if (that.elementSize != size) {\n                that.element.css(that.size, size + \"px\");\n                that.elementSize = size;\n            }\n\n            that._ariaValue(position, dimension.size - that.elementSize);\n\n            that.movable.moveAxis(axis, position);\n        },\n\n        show: function() {\n            this.element.css({opacity: SCROLLBAR_OPACITY, visibility: \"visible\"});\n        },\n\n        hide: function() {\n            if (!this.alwaysVisible) {\n                this.element.css({opacity: 0});\n            }\n        },\n\n        _ariaValue: function(current, total) {\n            var element = this.element;\n\n            if(current > total) {\n                current = total;\n            }\n\n            element.attr(\"aria-valuemax\", total);\n            element.attr(\"aria-valuenow\", current);\n        }\n    });\n\n    var Scroller = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n\n            that._native = that.options.useNative && kendo.support.hasNativeScrolling;\n            if (that._native) {\n                element.addClass(\"km-native-scroller\")\n                    .prepend('<div class=\"km-scroll-header\"/>');\n\n                extend(that, {\n                    scrollElement: element,\n                    fixedContainer: element.children().first()\n                });\n\n                return;\n            }\n\n            element\n                .css(\"overflow\", \"hidden\")\n                .addClass(\"km-scroll-wrapper\")\n                .wrapInner('<div class=\"km-scroll-container\"/>')\n                .prepend('<div class=\"km-scroll-header\"/>');\n\n            var inner = element.children().eq(1),\n\n                tapCapture = new kendo.TapCapture(element),\n\n                movable = new Movable(inner),\n\n                dimensions = new PaneDimensions({\n                    element: inner,\n                    container: element,\n                    forcedEnabled: that.options.zoom\n                }),\n\n                avoidScrolling = this.options.avoidScrolling,\n\n                userEvents = new kendo.UserEvents(element, {\n                    touchAction: \"pan-y\",\n                    fastTap: true,\n                    allowSelection: true,\n                    preventDragEvent: true,\n                    captureUpIfMoved: true,\n                    multiTouch: that.options.zoom,\n                    supportDoubleTap: that.options.supportDoubleTap,\n                    start: function(e) {\n                        dimensions.refresh();\n\n                        var velocityX = abs(e.x.velocity),\n                            velocityY = abs(e.y.velocity),\n                            horizontalSwipe  = velocityX * 2 >= velocityY,\n                            originatedFromFixedContainer = $.contains(that.fixedContainer[0], e.event.target),\n                            verticalSwipe = velocityY * 2 >= velocityX;\n\n\n                        if (!originatedFromFixedContainer && !avoidScrolling(e) && that.enabled && (dimensions.x.enabled && horizontalSwipe || dimensions.y.enabled && verticalSwipe)) {\n                            userEvents.capture();\n                        } else {\n                            userEvents.cancel();\n                        }\n                    }\n                }),\n\n                pane = new Pane({\n                    movable: movable,\n                    dimensions: dimensions,\n                    userEvents: userEvents,\n                    elastic: that.options.elastic\n                }),\n\n                zoomSnapBack = new ZoomSnapBack({\n                    movable: movable,\n                    dimensions: dimensions,\n                    userEvents: userEvents,\n                    tapCapture: tapCapture\n                }),\n\n                animatedScroller = new AnimatedScroller({\n                    moveTo: function(coordinates) {\n                        that.scrollTo(coordinates.x, coordinates.y);\n                    }\n                });\n\n            movable.bind(CHANGE, function() {\n                that.scrollTop = - movable.y;\n                that.scrollLeft = - movable.x;\n\n                that.trigger(SCROLL, {\n                    scrollTop: that.scrollTop,\n                    scrollLeft: that.scrollLeft\n                });\n            });\n\n            if (that.options.mousewheelScrolling) {\n                element.on(\"DOMMouseScroll mousewheel\",  proxy(this, \"_wheelScroll\"));\n            }\n\n            extend(that, {\n                movable: movable,\n                dimensions: dimensions,\n                zoomSnapBack: zoomSnapBack,\n                animatedScroller: animatedScroller,\n                userEvents: userEvents,\n                pane: pane,\n                tapCapture: tapCapture,\n                pulled: false,\n                enabled: true,\n                scrollElement: inner,\n                scrollTop: 0,\n                scrollLeft: 0,\n                fixedContainer: element.children().first()\n            });\n\n            that._initAxis(\"x\");\n            that._initAxis(\"y\");\n\n            // build closure\n            that._wheelEnd = function() {\n                that._wheel = false;\n                that.userEvents.end(0, that._wheelY);\n            };\n\n            dimensions.refresh();\n\n            if (that.options.pullToRefresh) {\n                that._initPullToRefresh();\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            if (!this._wheel) {\n                this._wheel = true;\n                this._wheelY = 0;\n                this.userEvents.press(0, this._wheelY);\n            }\n\n            clearTimeout(this._wheelTimeout);\n            this._wheelTimeout = setTimeout(this._wheelEnd, 50);\n\n            var delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                this._wheelY += delta;\n                this.userEvents.move(0, this._wheelY);\n            }\n\n            e.preventDefault();\n        },\n\n        makeVirtual: function() {\n            this.dimensions.y.makeVirtual();\n        },\n\n        virtualSize: function(min, max) {\n            this.dimensions.y.virtualSize(min, max);\n        },\n\n        height: function() {\n            return this.dimensions.y.size;\n        },\n\n        scrollHeight: function() {\n            return this.scrollElement[0].scrollHeight;\n        },\n\n        scrollWidth: function() {\n            return this.scrollElement[0].scrollWidth;\n        },\n\n        options: {\n            name: \"Scroller\",\n            zoom: false,\n            pullOffset: 140,\n            visibleScrollHints: false,\n            elastic: true,\n            useNative: false,\n            mousewheelScrolling: true,\n            avoidScrolling: function() { return false; },\n            pullToRefresh: false,\n            messages: {\n                pullTemplate: \"Pull to refresh\",\n                releaseTemplate: \"Release to refresh\",\n                refreshTemplate: \"Refreshing\"\n            }\n        },\n\n        events: [\n            PULL,\n            SCROLL,\n            RESIZE\n        ],\n\n        _resize: function() {\n            if (!this._native) {\n                this.contentResized();\n            }\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            Widget.fn.setOptions.call(that, options);\n            if (options.pullToRefresh) {\n                that._initPullToRefresh();\n            }\n        },\n\n        reset: function() {\n            if (this._native) {\n                this.scrollElement.scrollTop(0);\n            } else {\n                this.movable.moveTo({x: 0, y: 0});\n                this._scale(1);\n            }\n        },\n\n        contentResized: function() {\n            this.dimensions.refresh();\n            if (this.pane.x.outOfBounds()) {\n                this.movable.moveAxis(\"x\", this.dimensions.x.min);\n            }\n\n            if (this.pane.y.outOfBounds()) {\n                this.movable.moveAxis(\"y\", this.dimensions.y.min);\n            }\n        },\n\n        zoomOut: function() {\n            var dimensions = this.dimensions;\n            dimensions.refresh();\n            this._scale(dimensions.fitScale);\n            this.movable.moveTo(dimensions.centerCoordinates());\n        },\n\n        enable: function() {\n            this.enabled = true;\n        },\n\n        disable: function() {\n            this.enabled = false;\n        },\n\n        scrollTo: function(x, y) {\n            if (this._native) {\n                kendo.scrollLeft(this.scrollElement, abs(x));\n                this.scrollElement.scrollTop(abs(y));\n            } else {\n                this.dimensions.refresh();\n                this.movable.moveTo({x: x, y: y});\n            }\n        },\n\n        animatedScrollTo: function(x, y, callback) {\n            var from,\n                to;\n\n            if(this._native) {\n                this.scrollTo(x, y);\n            } else {\n                from = { x: this.movable.x, y: this.movable.y };\n                to = { x: x, y: y };\n\n                this.animatedScroller.setCoordinates(from, to);\n                this.animatedScroller.setCallback(callback);\n                this.animatedScroller.start();\n            }\n        },\n\n        pullHandled: function() {\n            var that = this;\n            that.refreshHint.removeClass(REFRESHCLASS);\n            that.hintContainer.html(that.pullTemplate({}));\n            that.yinertia.onEnd();\n            that.xinertia.onEnd();\n            that.userEvents.cancel();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            if (this.userEvents) {\n                this.userEvents.destroy();\n            }\n        },\n\n        _scale: function(scale) {\n            this.dimensions.rescale(scale);\n            this.movable.scaleTo(scale);\n        },\n\n        _initPullToRefresh: function() {\n            var that = this;\n\n            that.dimensions.y.forceEnabled();\n            that.pullTemplate = kendo.template(that.options.messages.pullTemplate);\n            that.releaseTemplate = kendo.template(that.options.messages.releaseTemplate);\n            that.refreshTemplate = kendo.template(that.options.messages.refreshTemplate);\n\n            that.scrollElement.prepend('<span class=\"km-scroller-pull\"><span class=\"km-icon\"></span><span class=\"km-loading-left\"></span><span class=\"km-loading-right\"></span><span class=\"km-template\">' + that.pullTemplate({}) + '</span></span>');\n            that.refreshHint = that.scrollElement.children().first();\n            that.hintContainer = that.refreshHint.children(\".km-template\");\n\n            that.pane.y.bind(\"change\", proxy(that._paneChange, that));\n            that.userEvents.bind(\"end\", proxy(that._dragEnd, that));\n        },\n\n        _dragEnd: function() {\n            var that = this;\n\n            if(!that.pulled) {\n                return;\n            }\n\n            that.pulled = false;\n            that.refreshHint.removeClass(RELEASECLASS).addClass(REFRESHCLASS);\n            that.hintContainer.html(that.refreshTemplate({}));\n            that.yinertia.freeze(that.options.pullOffset / 2);\n            that.trigger(\"pull\");\n        },\n\n        _paneChange: function() {\n            var that = this;\n\n            if (that.movable.y / OUT_OF_BOUNDS_FRICTION > that.options.pullOffset) {\n                if (!that.pulled) {\n                    that.pulled = true;\n                    that.refreshHint.removeClass(REFRESHCLASS).addClass(RELEASECLASS);\n                    that.hintContainer.html(that.releaseTemplate({}));\n                }\n            } else if (that.pulled) {\n                that.pulled = false;\n                that.refreshHint.removeClass(RELEASECLASS);\n                that.hintContainer.html(that.pullTemplate({}));\n            }\n        },\n\n        _initAxis: function(axis) {\n            var that = this,\n                elementId = that.element.attr(\"id\"),\n                movable = that.movable,\n                dimension = that.dimensions[axis],\n                tapCapture = that.tapCapture,\n                paneAxis = that.pane[axis],\n                scrollBar;\n\n            if(!elementId) {\n                elementId = kendo.guid();\n                that.element.attr(\"id\", elementId);\n            }\n\n            scrollBar = new ScrollBar({\n                axis: axis,\n                movable: movable,\n                dimension: dimension,\n                container: that.element,\n                alwaysVisible: that.options.visibleScrollHints,\n                controlsId: elementId\n            });\n\n            dimension.bind(CHANGE, function() {\n                scrollBar.refresh();\n            });\n\n            paneAxis.bind(CHANGE, function() {\n                scrollBar.show();\n            });\n\n            that[axis + \"inertia\"] = new DragInertia({\n                axis: axis,\n                paneAxis: paneAxis,\n                movable: movable,\n                tapCapture: tapCapture,\n                userEvents: that.userEvents,\n                dimension: dimension,\n                elastic: that.options.elastic,\n                friction: that.options.friction || FRICTION,\n                velocityMultiplier: that.options.velocityMultiplier || VELOCITY_MULTIPLIER,\n                end: function() {\n                    scrollBar.hide();\n                    that.trigger(\"scrollEnd\", {\n                        axis: axis,\n                        scrollTop: that.scrollTop,\n                        scrollLeft: that.scrollLeft\n                    });\n                }\n            });\n        }\n    });\n\n    ui.plugin(Scroller);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.virtuallist',[ \"./kendo.data\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"virtuallist\",\n    name: \"VirtualList\",\n    category: \"framework\",\n    depends: [ \"data\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DataBoundWidget = ui.DataBoundWidget,\n        proxy = $.proxy,\n        percentageUnitsRegex = /^\\d+(\\.\\d+)?%$/i,\n        LIST_CONTENT = \"k-list-content k-virtual-content\",\n        TABLE_CONTENT = \"k-table-body k-table-scroller\",\n        HEADER = \"k-list-group-sticky-header\",\n        LIST_ITEM = \"k-list-item\",\n        TABLE_ITEM = \"k-table-row\",\n        HEIGHTCONTAINER = \"k-height-container\",\n        GROUPITEM = \"k-list-item-group-label\",\n        LIST_UL = \"k-list-ul\",\n        TABLE_LIST = \"k-table-list\",\n\n        SELECTED = \"k-selected\",\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        CHANGE = \"change\",\n        CLICK = \"click\",\n        LISTBOUND = \"listBound\",\n        ITEMCHANGE = \"itemChange\",\n\n        ACTIVATE = \"activate\",\n        DEACTIVATE = \"deactivate\",\n\n        GROUP_ROW_SEL = \".k-table-group-row\",\n\n        VIRTUAL_LIST_NS = \".VirtualList\";\n\n    function lastFrom(array) {\n        return array[array.length - 1];\n    }\n\n    function toArray(value) {\n        return value instanceof Array ? value : [value];\n    }\n\n    function isPrimitive(dataItem) {\n        return typeof dataItem === \"string\" || typeof dataItem === \"number\" || typeof dataItem === \"boolean\";\n    }\n\n    function getItemCount(screenHeight, listScreens, itemHeight) {\n        return Math.ceil(screenHeight * listScreens / itemHeight);\n    }\n\n    function appendChild(parent, className, tagName) {\n        var element = document.createElement(tagName || \"div\");\n        if (className) {\n            element.className = className;\n        }\n        parent.appendChild(element);\n\n        return element;\n    }\n\n    function getDefaultItemHeight(listSize) {\n        var mockList = $('<div class=\"k-list ' + listSize + ' k-virtual-list\">' +\n                '<div class=\"k-list-content k-virtual-content\">' +\n                    '<ul class=\"k-list-ul\">' +\n                        '<li class=\"k-list-item\">' +\n                            '<span class=\"k-list-item-text\">test</span>' +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>');\n        var lineHeight;\n\n        mockList.css({\n            position: \"absolute\",\n            left: \"-200000px\",\n            visibility: \"hidden\"\n        });\n        mockList.appendTo(document.body);\n        lineHeight = parseFloat(kendo.getComputedStyles(mockList.find(\".k-list-item\")[0], [\"height\"]).height);\n        mockList.remove();\n\n        return lineHeight;\n    }\n\n    function bufferSizes(screenHeight, listScreens, opposite) { //in pixels\n        return {\n            down: screenHeight * opposite,\n            up: screenHeight * (listScreens - 1 - opposite)\n        };\n    }\n\n    function listValidator(options, screenHeight) {\n        var downThreshold = (options.listScreens - 1 - options.threshold) * screenHeight;\n        var upThreshold = options.threshold * screenHeight;\n\n        return function(list, scrollTop, lastScrollTop) {\n            if (scrollTop > lastScrollTop) {\n                return scrollTop - list.top < downThreshold;\n            } else {\n                return list.top === 0 || scrollTop - list.top > upThreshold;\n            }\n        };\n    }\n\n    function scrollCallback(element, callback) {\n        return function(force) {\n            return callback(element.scrollTop, force);\n        };\n    }\n\n    function syncList(reorder) {\n        return function(list, force) {\n            reorder(list.items, list.index, force);\n            return list;\n        };\n    }\n\n    function position(element, y) {\n        element.style.webkitTransform = 'translateY(' + y + \"px)\";\n        element.style.transform = 'translateY(' + y + \"px)\";\n    }\n\n    function map2(callback, templates) {\n        return function(arr1, arr2) {\n            for (var i = 0, len = arr1.length; i < len; i++) {\n                callback(arr1[i], arr2[i], templates);\n                if (arr2[i].item) {\n                    this.trigger(ITEMCHANGE, { item: $(arr1[i]), data: arr2[i].item, ns: kendo.ui });\n                }\n            }\n        };\n    }\n\n    function reshift(items, diff) {\n        var range;\n\n        if (diff > 0) { // down\n            range = items.splice(0, diff);\n            items.push.apply(items, range);\n        } else { // up\n            range = items.splice(diff, -diff);\n            items.unshift.apply(items, range);\n        }\n\n        return range;\n    }\n\n    function render(element, data, templates) {\n        var itemTemplate = templates.template,\n            hasColumns = this.options.columns && this.options.columns.length,\n            altRow = data.index % 2 === 1 ? \"k-table-alt-row\" : \"\";\n\n        element = $(element);\n\n        if (!data.item) {\n            itemTemplate = templates.placeholderTemplate;\n        }\n\n        if (data.index === 0 && this.header && data.group) {\n            this.header.html(templates.fixedGroupTemplate(data.group));\n        }\n\n        this.angular(\"cleanup\", function() {\n            return { elements: [ element ]};\n        });\n\n        element\n            .attr(\"data-uid\", data.item ? data.item.uid : \"\")\n            .attr(\"data-offset-index\", data.index);\n\n        if (hasColumns && data.item) {\n            if (altRow.length > 0) {\n                element.addClass(altRow);\n            } else {\n                element.removeClass(\"k-table-alt-row\");\n            }\n            element.html(renderColumns(this.options, data.item, templates));\n        } else {\n            element.find(\".\" + GROUPITEM).remove();\n            element.find(\".k-list-item-text\").html(itemTemplate(data.item || {}));\n        }\n\n        element.toggleClass(FOCUSED, data.current);\n        element.toggleClass(SELECTED, data.selected);\n        element.toggleClass(\"k-first\", data.newGroup);\n        element.toggleClass(\"k-last\", data.isLastGroupedItem);\n        element.toggleClass(\"k-loading-item\", !data.item);\n\n        if (data.index !== 0 && data.newGroup) {\n            if (hasColumns) {\n                $('<span class=\"k-table-td k-table-group-td\"><span>' + templates.groupTemplate(data.group) + '</span></span>')\n                    .appendTo(element);\n            } else {\n                $(\"<div class=\" + GROUPITEM + \"></div>\")\n                    .appendTo(element)\n                    .html(templates.groupTemplate(data.group));\n            }\n        } else if (data.group && hasColumns) {\n            element.append($('<span class=\"k-table-td k-table-spacer-td\"></span>'));\n        }\n\n        if (data.top !== undefined) {\n            position(element[0], data.top);\n        }\n\n        this.angular(\"compile\", function() {\n            return { elements: [ element ], data: [ { dataItem: data.item, group: data.group, newGroup: data.newGroup } ]};\n        });\n    }\n\n    function renderColumns(options, dataItem, templates) {\n        var item = \"\";\n\n        for (var i = 0; i < options.columns.length; i++) {\n            var currentWidth = options.columns[i].width;\n            var currentWidthInt = parseInt(currentWidth, 10);\n            var widthStyle = '';\n\n            if(currentWidth){\n                widthStyle += \"style='width:\";\n                widthStyle += currentWidthInt;\n                widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                widthStyle += \";'\";\n            }\n            item += \"<span class='k-table-td' \" + widthStyle + \">\";\n            item += templates[\"column\"+ i](dataItem);\n            item += \"</span>\";\n        }\n\n        return item;\n    }\n\n    function mapChangedItems(selected, itemsToMatch) {\n        var itemsLength = itemsToMatch.length;\n        var selectedLength = selected.length;\n        var dataItem;\n        var found;\n        var i, j;\n\n        var changed = [];\n        var unchanged = [];\n\n        if (selectedLength) {\n            for (i = 0; i < selectedLength; i++) {\n                dataItem = selected[i];\n                found = false;\n\n                for (j = 0; j < itemsLength; j++) {\n                    if (dataItem === itemsToMatch[j]) {\n                        found = true;\n                        changed.push({ index: i, item: dataItem });\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    unchanged.push(dataItem);\n                }\n            }\n        }\n\n        return {\n            changed: changed,\n            unchanged: unchanged\n        };\n    }\n\n    function isActivePromise(promise) {\n        return promise && promise.state() !== \"resolved\";\n    }\n\n    var VirtualList = DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this,\n                contentClasses = options.columns && options.columns.length ? TABLE_CONTENT : LIST_CONTENT;\n\n            that.bound(false);\n            that._fetching = false;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (!that.options.itemHeight) {\n                that.options.itemHeight = getDefaultItemHeight(options.listSize);\n            }\n\n            options = that.options;\n\n            that.element.attr(\"role\", \"listbox\");\n\n            that.content = that.wrapper = that.element.wrap(\"<div unselectable='on' class='\" + contentClasses + \"'></div>\").parent();\n\n            if(that.options.columns && that.options.columns.length) {\n                var thead = that.element.closest(\".k-data-table\").find('.k-table-thead');\n                var row = $('<tr class=\"k-table-group-row\">' +\n                    '<th class=\"k-table-th\" colspan=\"' + that.options.columns.length + '\"></th>' +\n                '</tr>');\n\n                thead.append(row);\n\n                that.header = row.find(\".k-table-th\");\n                that.element.addClass(TABLE_LIST + \" k-virtual-table\");\n            } else {\n                that.header = that.content.before(\"<div class='\" + HEADER + \"'></div>\").prev();\n                that.element.addClass(LIST_UL);\n            }\n\n            if(options.ariaLabel) {\n                this.element.attr(\"aria-label\", options.ariaLabel);\n            } else if(options.ariaLabelledBy) {\n                this.element.attr(\"aria-labelledby\", options.ariaLabelledBy);\n            }\n\n            that.element.on(\"mouseenter\" + VIRTUAL_LIST_NS, \"li:not(.k-loading-item)\", function() { $(this).addClass(HOVER); })\n                        .on(\"mouseleave\" + VIRTUAL_LIST_NS, \"li\", function() { $(this).removeClass(HOVER); });\n\n            that._values = toArray(that.options.value);\n            that._selectedDataItems = [];\n            that._selectedIndexes = [];\n            that._rangesList = {};\n            that._promisesList = [];\n            that._optionID = kendo.guid();\n\n            that._templates();\n\n            that.setDataSource(options.dataSource);\n\n            that.content.on(\"scroll\" + VIRTUAL_LIST_NS, kendo.throttle(function() {\n                that._renderItems();\n                that._triggerListBound();\n            }, options.delay));\n\n            that._selectable();\n        },\n\n        options: {\n            name: \"VirtualList\",\n            autoBind: true,\n            delay: 100,\n            height: null,\n            listScreens: 4,\n            threshold: 0.5,\n            itemHeight: null,\n            oppositeBuffer: 1,\n            type: \"flat\",\n            selectable: false,\n            value: [],\n            dataValueField: null,\n            template: \"#:data#\",\n            placeholderTemplate: \"loading...\",\n            groupTemplate: \"#:data#\",\n            fixedGroupTemplate: \"#:data#\",\n            mapValueTo: \"index\",\n            valueMapper: null,\n            ariaLabel: null,\n            ariaLabelledBy: null\n        },\n\n        events: [\n            CHANGE,\n            CLICK,\n            LISTBOUND,\n            ITEMCHANGE,\n            ACTIVATE,\n            DEACTIVATE\n        ],\n\n        setOptions: function(options) {\n            var itemClass = this.options.columns && this.options.columns.length ? TABLE_ITEM : LIST_ITEM;\n\n            Widget.fn.setOptions.call(this, options);\n\n            if (this._selectProxy && this.options.selectable === false) {\n                this.element.off(CLICK, \".\" + itemClass, this._selectProxy);\n            } else if (!this._selectProxy && this.options.selectable) {\n                this._selectable();\n            }\n\n            this._templates();\n            this.refresh();\n        },\n\n        items: function() {\n            return $(this._items);\n        },\n\n        destroy: function() {\n            this.wrapper.off(VIRTUAL_LIST_NS);\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            Widget.fn.destroy.call(this);\n        },\n\n        setDataSource: function(source) {\n            var that = this;\n            var dataSource = source || {};\n            var value;\n\n            dataSource = Array.isArray(dataSource) ? {data: dataSource} : dataSource;\n            dataSource = kendo.data.DataSource.create(dataSource);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n\n                that._clean();\n                that.bound(false);\n\n                that._deferValueSet = true;\n                value = that.value();\n\n                that.value([]);\n                that.mute(function() {\n                    that.value(value);\n                });\n            } else {\n                that._refreshHandler = $.proxy(that.refresh, that);\n            }\n\n            that.dataSource = dataSource.bind(CHANGE, that._refreshHandler);\n\n            that.setDSFilter(dataSource.filter());\n\n            if (dataSource.view().length !== 0) {\n                that.refresh();\n            } else if (that.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        skip: function() {\n            return this.dataSource.currentRangeStart();\n        },\n\n        _triggerListBound: function () {\n            var that = this;\n            var skip = that.skip();\n\n            if (that.bound() && !that._selectingValue && that._skip !== skip) {\n                that._skip = skip;\n                that.trigger(LISTBOUND);\n            }\n        },\n\n        _getValues: function(dataItems) {\n            var getter = this._valueGetter;\n\n            return $.map(dataItems, function(dataItem) {\n                return getter(dataItem);\n            });\n        },\n\n        _highlightSelectedItems: function () {\n            for (var i = 0; i < this._selectedDataItems.length; i++) {\n                var item = this._getElementByDataItem(this._selectedDataItems[i]);\n                if(item.length){\n                    item.addClass(SELECTED);\n                }\n            }\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var action = e && e.action;\n            var isItemChange = action === \"itemchange\";\n            var filtered = this.isFiltered();\n            var result;\n\n            if (that._mute) { return; }\n\n            that._deferValueSet = false;\n\n            if (!that._fetching) {\n                if (filtered) {\n                    that.focus(0);\n                }\n\n                that._createList();\n                if (!action && that._values.length && !filtered &&\n                     !that.options.skipUpdateOnBind && !that._emptySearch) {\n                    that._selectingValue = true;\n\n                    that.bound(true);\n                    that.value(that._values, true).done(function () {\n                        that._selectingValue = false;\n                        that._triggerListBound();\n                    });\n                } else {\n                    that.bound(true);\n                    that._highlightSelectedItems();\n                    that._triggerListBound();\n                }\n            } else {\n                if (that._renderItems) {\n                    that._renderItems(true);\n                }\n\n                that._triggerListBound();\n            }\n\n            if (isItemChange || action === \"remove\") {\n                result = mapChangedItems(that._selectedDataItems, e.items);\n                if (result.changed.length) {\n                    if (isItemChange) {\n                        that.trigger(\"selectedItemChange\", {\n                            items: result.changed\n                        });\n                    } else {\n                        that.value(that._getValues(result.unchanged));\n                    }\n                }\n            }\n\n            that._fetching = false;\n        },\n\n        removeAt: function(position) {\n            var value = this._values.splice(position, 1)[0];\n\n            return {\n                position: position,\n                dataItem: this._removeSelectedDataItem(value)\n            };\n        },\n\n        _removeSelectedDataItem: function (value) {\n            var that = this,\n                valueGetter = that._valueGetter;\n\n            for (var idx in that._selectedDataItems) {\n                if(valueGetter(that._selectedDataItems[idx]) === value) {\n                    that._selectedIndexes.splice(idx, 1);\n                    return that._selectedDataItems.splice(idx, 1)[0];\n                }\n            }\n        },\n\n        setValue: function(value) {\n            this._values = toArray(value);\n        },\n\n        value: function(value, _forcePrefetch) {\n            var that = this;\n\n            if (value === undefined) {\n                return that._values.slice();\n            }\n\n            if (value === null) {\n                value = [];\n            }\n\n            value = toArray(value);\n\n            if (!that._valueDeferred || that._valueDeferred.state() === \"resolved\") {\n                that._valueDeferred = $.Deferred();\n            }\n\n            var shouldClear = that.options.selectable === \"multiple\" && that.select().length && value.length;\n\n            if (shouldClear || !value.length) {\n                that.select(-1);\n            }\n\n            that._values = value;\n\n            if ((that.bound() && !that._mute && !that._deferValueSet) || _forcePrefetch) {\n                that._prefetchByValue(value);\n            }\n\n            return that._valueDeferred;\n        },\n\n        _checkValuesOrder: function (value) {\n            if (this._removedAddedIndexes &&\n                this._removedAddedIndexes.length === value.length) {\n                    var newValue = this._removedAddedIndexes.slice();\n                    this._removedAddedIndexes = null;\n                return newValue;\n            }\n\n            return value;\n        },\n\n        _prefetchByValue: function(value) {\n            var that = this,\n                dataView = that._dataView,\n                valueGetter = that._valueGetter,\n                mapValueTo = that.options.mapValueTo,\n                item, match = false,\n                forSelection = [];\n\n            //try to find the items in the loaded data\n            for (var i = 0; i < value.length; i++) {\n                for (var idx = 0; idx < dataView.length; idx++) {\n                    item = dataView[idx].item;\n                    if (item) {\n                        match = isPrimitive(item) ? value[i] === item : value[i] === valueGetter(item);\n\n                        if (match) {\n                            forSelection.push(dataView[idx].index);\n                        }\n                    }\n                }\n            }\n\n            if (forSelection.length === value.length) {\n                that._values = [];\n                that.select(forSelection);\n                return;\n            }\n\n            //prefetch the items\n            if (typeof that.options.valueMapper === \"function\") {\n                that.options.valueMapper({\n                    value: (this.options.selectable === \"multiple\") ? value : value[0],\n                    success: function(response) {\n                        if (mapValueTo === \"index\") {\n                            that.mapValueToIndex(response);\n                        } else if (mapValueTo === \"dataItem\") {\n                            that.mapValueToDataItem(response);\n                        }\n                    }\n                });\n            } else {\n                 if (!that.value()[0]) {\n                     that.select([-1]);\n                 } else {\n                    that._selectingValue = false;\n                    that._triggerListBound();\n                 }\n            }\n        },\n\n        mapValueToIndex: function(indexes) {\n            if (indexes === undefined || indexes === -1 || indexes === null) {\n                indexes = [];\n            } else {\n                indexes = toArray(indexes);\n            }\n\n            if (!indexes.length) {\n                indexes = [-1];\n            } else {\n                var removed = this._deselect([]).removed;\n                if (removed.length) {\n                    this._triggerChange(removed, []);\n                }\n            }\n\n            this.select(indexes);\n        },\n\n        mapValueToDataItem: function(dataItems) {\n            var removed, added;\n\n            if (dataItems === undefined || dataItems === null) {\n                dataItems = [];\n            } else {\n                dataItems = toArray(dataItems);\n            }\n\n            if (!dataItems.length) {\n                this.select([-1]);\n            } else {\n                removed = $.map(this._selectedDataItems, function(item, index) {\n                    return { index: index, dataItem: item };\n                });\n\n                added = $.map(dataItems, function(item, index) {\n                    return { index: index, dataItem: item };\n                });\n\n                this._selectedDataItems = dataItems;\n\n                this._selectedIndexes = [];\n\n                for (var i = 0; i < this._selectedDataItems.length; i++) {\n                    var item = this._getElementByDataItem(this._selectedDataItems[i]);\n                    this._selectedIndexes.push(this._getIndecies(item)[0]);\n                    item.addClass(SELECTED);\n                }\n\n                this._triggerChange(removed, added);\n\n                if (this._valueDeferred) {\n                    this._valueDeferred.resolve();\n                }\n            }\n        },\n\n        deferredRange: function(index) {\n            var dataSource = this.dataSource;\n            var take = this.itemCount;\n            var ranges = this._rangesList;\n            var result = $.Deferred();\n            var defs = [];\n\n            var low = Math.floor(index / take) * take;\n            var high = Math.ceil(index / take) * take;\n\n            var pages = high === low ? [ high ] : [ low, high ];\n\n            $.each(pages, function(_, skip) {\n                var end = skip + take;\n                var existingRange = ranges[skip];\n                var deferred;\n\n                if (!existingRange || (existingRange.end !== end)) {\n                    deferred = $.Deferred();\n                    ranges[skip] = { end: end, deferred: deferred };\n\n                    dataSource._multiplePrefetch(skip, take, function() {\n                        deferred.resolve();\n                    });\n                } else {\n                    deferred = existingRange.deferred;\n                }\n\n                defs.push(deferred);\n            });\n\n            $.when.apply($, defs).then(function() {\n                result.resolve();\n            });\n\n            return result;\n        },\n\n        prefetch: function(indexes) {\n            var that = this,\n                take = this.itemCount,\n                isEmptyList = !that._promisesList.length;\n\n            if (!isActivePromise(that._activeDeferred)) {\n                that._activeDeferred = $.Deferred();\n                that._promisesList = [];\n            }\n\n            $.each(indexes, function(_, index) {\n                that._promisesList.push(that.deferredRange(that._getSkip(index, take)));\n            });\n\n            if (isEmptyList) {\n                $.when.apply($, that._promisesList).done(function() {\n                    that._promisesList = [];\n                    that._activeDeferred.resolve();\n                });\n            }\n\n            return that._activeDeferred;\n        },\n\n        _findDataItem: function(view, index) {\n            var group;\n\n            //find in grouped view\n            if (this.options.type === \"group\") {\n                for (var i = 0; i < view.length; i++) {\n                    group = view[i].items;\n                    if (group.length <= index) {\n                        index = index - group.length;\n                    } else {\n                        return group[index];\n                    }\n                }\n            }\n\n            //find in flat view\n            return view[index];\n        },\n\n        _getRange: function(skip, take) {\n            return this.dataSource._findRange(skip, Math.min(skip + take, this.dataSource.total()));\n        },\n\n        dataItemByIndex: function(index) {\n            var that = this;\n            var take = that.itemCount;\n            var skip = that._getSkip(index, take);\n            var view = this._getRange(skip, take);\n\n            //should not return item if data is not loaded\n            if (!that._getRange(skip, take).length) {\n                return null;\n            }\n\n            if (that.options.type === \"group\") {\n                kendo.ui.progress($(that.wrapper), true);\n                that.mute(function() {\n                    that.dataSource.range(skip, take, function () {\n                        kendo.ui.progress($(that.wrapper), false);\n                    });\n                    view = that.dataSource.view();\n                });\n            }\n\n            return that._findDataItem(view, [index - skip]);\n        },\n\n        selectedDataItems: function() {\n            return this._selectedDataItems.slice();\n        },\n\n        scrollWith: function(value) {\n            this.content.scrollTop(this.content.scrollTop() + value);\n        },\n\n        scrollTo: function(y) {\n            this.content.scrollTop(y); //works only if the element is visible\n        },\n\n        scrollToIndex: function(index) {\n            this.scrollTo(index * this.options.itemHeight);\n        },\n\n        focus: function(candidate) {\n            var element,\n                index,\n                data,\n                current,\n                itemHeight = this.options.itemHeight,\n                id = this._optionID,\n                triggerEvent = true;\n\n            if (candidate === undefined) {\n                current = this.element.find(\".\" + FOCUSED);\n                return current.length ? current : null;\n            }\n\n            if (typeof candidate === \"function\") {\n                data = this.dataSource.flatView();\n                for (var idx = 0; idx < data.length; idx++) {\n                    if (candidate(data[idx])) {\n                        candidate = idx;\n                        break;\n                    }\n                }\n            }\n\n            if (candidate instanceof Array) {\n                candidate = lastFrom(candidate);\n            }\n\n            if (isNaN(candidate)) {\n                element = $(candidate);\n                index = parseInt($(element).attr(\"data-offset-index\"), 10);\n            } else {\n                index = candidate;\n                element = this._getElementByIndex(index);\n            }\n\n            if (index === -1) {\n                this.element.find(\".\" + FOCUSED).removeClass(FOCUSED);\n                this._focusedIndex = undefined;\n                return;\n            }\n\n            if (element.length) { /*focus rendered item*/\n                if (element.hasClass(FOCUSED)) {\n                    triggerEvent = false;\n                }\n                if (this._focusedIndex !== undefined) {\n                    current = this._getElementByIndex(this._focusedIndex);\n                    current\n                        .removeClass(FOCUSED)\n                        .removeAttr(\"id\");\n\n                    if (triggerEvent) {\n                        this.trigger(DEACTIVATE);\n                    }\n                }\n\n                this._focusedIndex = index;\n\n                element\n                    .addClass(FOCUSED)\n                    .attr(\"id\", id);\n\n                var position = this._getElementLocation(index);\n\n                if (position === \"top\") {\n                    this.scrollTo(index * itemHeight);\n                } else if (position === \"bottom\") {\n                    this.scrollTo((index * itemHeight + itemHeight) - this._screenHeight);\n                } else if (position === \"outScreen\") {\n                    this.scrollTo(index * itemHeight);\n                }\n\n                if (triggerEvent) {\n                    this.trigger(ACTIVATE);\n                }\n            } else { /*focus non rendered item*/\n                this._focusedIndex = index;\n                this.items().removeClass(FOCUSED);\n                this.scrollToIndex(index);\n            }\n        },\n\n        focusIndex: function() {\n            return this._focusedIndex;\n        },\n\n        focusFirst: function() {\n            this.scrollTo(0);\n            this.focus(0);\n        },\n\n        focusLast: function() {\n            var lastIndex = this.dataSource.total();\n            this.scrollTo(this.heightContainer.offsetHeight);\n            this.focus(lastIndex - 1);\n        },\n\n        focusPrev: function() {\n            var index = this._focusedIndex;\n            var current;\n\n            if (!isNaN(index) && index > 0) {\n                index -= 1;\n                this.focus(index);\n\n                current = this.focus();\n                if (current && current.hasClass(\"k-loading-item\")) {\n                    index += 1;\n                    this.focus(index);\n                }\n\n                return index;\n            } else {\n                index = this.dataSource.total() - 1;\n                this.focus(index);\n                return index;\n            }\n        },\n\n        focusNext: function() {\n            var index = this._focusedIndex;\n            var lastIndex = this.dataSource.total() - 1;\n            var current;\n\n            if (!isNaN(index) && index < lastIndex) {\n                index += 1;\n                this.focus(index);\n\n                current = this.focus();\n                if (current && current.hasClass(\"k-loading-item\")) {\n                    index -= 1;\n                    this.focus(index);\n                }\n\n                return index;\n            } else {\n                index = 0;\n                this.focus(index);\n                return index;\n            }\n        },\n\n        _triggerChange: function(removed, added) {\n            removed = removed || [];\n            added = added || [];\n\n            if (removed.length || added.length) {\n                this.trigger(CHANGE, {\n                    removed: removed,\n                    added: added\n                });\n            }\n        },\n\n        select: function(candidate) {\n            var that = this,\n                indices,\n                initialIndices,\n                singleSelection = that.options.selectable !== \"multiple\",\n                prefetchStarted = isActivePromise(that._activeDeferred),\n                filtered = this.isFiltered(),\n                isAlreadySelected,\n                deferred,\n                result,\n                removed = [];\n\n            if (candidate === undefined) {\n                return that._selectedIndexes.slice();\n            }\n\n            if (!that._selectDeferred || that._selectDeferred.state() === \"resolved\") {\n                that._selectDeferred = $.Deferred();\n            }\n\n            indices = that._getIndecies(candidate);\n            isAlreadySelected = singleSelection && !filtered && lastFrom(indices) === lastFrom(this._selectedIndexes);\n            removed = that._deselectCurrentValues(indices);\n\n            if (removed.length || !indices.length || isAlreadySelected) {\n                that._triggerChange(removed);\n\n                if (that._valueDeferred) {\n                    that._valueDeferred.resolve().promise();\n                }\n\n                return that._selectDeferred.resolve().promise();\n            }\n\n            if (indices.length === 1 && indices[0] === -1) {\n                indices = [];\n            }\n\n            initialIndices = indices;\n            result = that._deselect(indices);\n            removed = result.removed;\n            indices = result.indices;\n\n            if (singleSelection) {\n                prefetchStarted = false;\n                if (indices.length) {\n                    indices = [lastFrom(indices)];\n                }\n            }\n\n            var done = function() {\n                var added = that._select(indices);\n\n                if (initialIndices.length === indices.length || singleSelection) {\n                    that.focus(indices);\n                }\n\n                that._triggerChange(removed, added);\n\n                if (that._valueDeferred) {\n                    that._valueDeferred.resolve();\n                }\n\n                that._selectDeferred.resolve();\n            };\n\n            deferred = that.prefetch(indices);\n\n            if (!prefetchStarted) {\n                if (deferred) {\n                    deferred.done(done);\n                } else {\n                    done();\n                }\n            }\n\n            return that._selectDeferred.promise();\n        },\n\n        bound: function(bound) {\n            if (bound === undefined) {\n                return this._listCreated;\n            }\n\n            this._listCreated = bound;\n        },\n\n        mute: function(callback) {\n            this._mute = true;\n            proxy(callback(), this);\n            this._mute = false;\n        },\n\n        setDSFilter: function(filter) {\n            this._lastDSFilter = $.extend({}, filter);\n        },\n\n        isFiltered: function() {\n            if (!this._lastDSFilter) {\n                this.setDSFilter(this.dataSource.filter());\n            }\n\n            return !kendo.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter);\n        },\n\n        skipUpdate: $.noop,\n\n        _getElementByIndex: function(index) {\n            return this.items().filter(function(idx, element) {\n                return index === parseInt($(element).attr(\"data-offset-index\"), 10);\n            });\n        },\n\n        _getElementByDataItem: function(dataItem) {\n            var dataView = this._dataView,\n            valueGetter = this._valueGetter,\n                element, match;\n\n            for (var i = 0; i < dataView.length; i++) {\n                match = dataView[i].item && isPrimitive(dataView[i].item) ? dataView[i].item === dataItem : dataView[i].item && dataItem && valueGetter(dataView[i].item) == valueGetter(dataItem);\n                if (match) {\n                    element = dataView[i];\n                    break;\n                }\n            }\n\n            return element ? this._getElementByIndex(element.index) : $();\n        },\n\n        _clean: function() {\n            this.result = undefined;\n            this._lastScrollTop = undefined;\n            this._skip = undefined;\n            $(this.heightContainer).remove();\n            this.heightContainer = undefined;\n            this.element.empty();\n        },\n\n        _height: function() {\n            var hasData = !!this.dataSource.view().length,\n                height = this.options.height,\n                itemHeight = this.options.itemHeight,\n                total = this.dataSource.total();\n\n            if (!hasData) {\n                height = 0;\n            } else if (height/itemHeight > total) {\n                height = total * itemHeight;\n            }\n\n            return height;\n        },\n\n        setScreenHeight: function() {\n            var height = this._height();\n\n            this.content.height(height);\n            this._screenHeight = height;\n        },\n\n        screenHeight: function() {\n            return this._screenHeight;\n        },\n\n        _getElementLocation: function(index) {\n            var scrollTop = this.content.scrollTop(),\n                screenHeight = this._screenHeight,\n                itemHeight = this.options.itemHeight,\n                yPosition = index * itemHeight,\n                yDownPostion = yPosition + itemHeight,\n                screenEnd = scrollTop + screenHeight,\n                position;\n\n            if (yPosition === (scrollTop - itemHeight) || (yDownPostion > scrollTop && yPosition < scrollTop)) {\n                position = \"top\";\n            } else if (yPosition === screenEnd || (yPosition < screenEnd && screenEnd < yDownPostion)) {\n                position = \"bottom\";\n            } else if ((yPosition >= scrollTop) && (yPosition <= scrollTop + (screenHeight - itemHeight))) {\n                position = \"inScreen\";\n            } else {\n                position = \"outScreen\";\n            }\n\n            return position;\n        },\n\n        _templates: function() {\n            var options = this.options;\n            var templates = {\n                template: options.template,\n                placeholderTemplate: options.placeholderTemplate,\n                groupTemplate: options.groupTemplate,\n                fixedGroupTemplate: options.fixedGroupTemplate\n            };\n\n            if (options.columns) {\n                for (var i = 0; i < options.columns.length; i++) {\n                    var currentColumn = options.columns[i];\n                    var templateText = currentColumn.field ? currentColumn.field.toString(): \"text\";\n\n                    templates[\"column\"+ i] = currentColumn.template || \"#: \" + templateText + \"#\";\n                }\n            }\n\n            for (var key in templates) {\n                if (typeof templates[key] !== \"function\") {\n                    templates[key] = kendo.template(templates[key] || \"\");\n                }\n            }\n\n            this.templates = templates;\n        },\n\n        _generateItems: function(element, count) {\n            var items = [],\n                item, text,\n                itemHeight = this.options.itemHeight + \"px\",\n                itemClass = this.options.columns && this.options.columns.length ? TABLE_ITEM : LIST_ITEM;\n\n            while(count-- > 0) {\n                text = document.createElement(\"span\");\n                text.className = \"k-list-item-text\";\n\n                item = document.createElement(\"li\");\n                item.tabIndex = -1;\n                item.className = itemClass;\n                item.setAttribute(\"role\", \"option\");\n                item.style.height = itemHeight;\n                item.style.minHeight = itemHeight;\n                item.appendChild(text);\n\n                element.appendChild(item);\n\n                items.push(item);\n            }\n\n            return items;\n        },\n\n        _saveInitialRanges: function() {\n            var ranges = this.dataSource._ranges;\n            var deferred = $.Deferred();\n            deferred.resolve();\n\n            this._rangesList = {};\n            for (var i = 0; i < ranges.length; i++) {\n                this._rangesList[ranges[i].start] = { end: ranges[i].end, deferred: deferred };\n            }\n        },\n\n        _createList: function() {\n            var that = this,\n                content = that.content.get(0),\n                options = that.options,\n                dataSource = that.dataSource;\n\n            if (that.bound()) {\n                that._clean();\n            }\n\n            that._saveInitialRanges();\n            that._buildValueGetter();\n            that.setScreenHeight();\n            that.itemCount = getItemCount(that._screenHeight, options.listScreens, options.itemHeight);\n\n            if (that.itemCount > dataSource.total()) {\n                that.itemCount = dataSource.total();\n            }\n\n            that._items = that._generateItems(that.element[0], that.itemCount);\n\n            that._setHeight(options.itemHeight * dataSource.total());\n            that.options.type = (dataSource.group() || []).length ? \"group\" : \"flat\";\n\n            if (that.options.type === \"flat\") {\n                if (that.header.closest(GROUP_ROW_SEL).length) {\n                    that.header.closest(GROUP_ROW_SEL).hide();\n                } else {\n                    that.header.hide();\n                }\n            } else {\n                if (that.header.closest(GROUP_ROW_SEL).length) {\n                    that.header.closest(GROUP_ROW_SEL).show();\n                } else {\n                    that.header.show();\n                }\n            }\n\n            that.getter = that._getter(function() {\n                that._renderItems(true);\n            });\n\n            that._onScroll = function(scrollTop, force) {\n                var getList = that._listItems(that.getter);\n                return that._fixedHeader(scrollTop, getList(scrollTop, force));\n            };\n\n            that._renderItems = that._whenChanged(\n                scrollCallback(content, that._onScroll),\n                syncList(that._reorderList(that._items, $.proxy(render, that)))\n            );\n\n            that._renderItems();\n            that._calculateGroupPadding(that._screenHeight);\n            that._calculateColumnsHeaderPadding();\n        },\n\n        _setHeight: function(height) {\n            var currentHeight,\n                heightContainer = this.heightContainer;\n\n            if (!heightContainer) {\n                heightContainer = this.heightContainer = appendChild(this.content[0], HEIGHTCONTAINER);\n            } else {\n                currentHeight = heightContainer.offsetHeight;\n            }\n\n            if (height !== currentHeight) {\n                heightContainer.innerHTML = \"\";\n\n                while (height > 0) {\n                    var padHeight = Math.min(height, 250000); //IE workaround, should not create elements with height larger than 250000px\n                    appendChild(heightContainer).style.height = padHeight + \"px\";\n                    height -= padHeight;\n                }\n            }\n        },\n\n        _getter: function() {\n            var lastRequestedRange = null,\n                dataSource = this.dataSource,\n                lastRangeStart = dataSource.skip(),\n                type = this.options.type,\n                pageSize = this.itemCount,\n                flatGroups = {};\n\n            if (dataSource.pageSize() < pageSize) {\n                this.mute(function() {\n                    dataSource.pageSize(pageSize);\n                });\n            }\n\n            return function(index, rangeStart) {\n                var that = this;\n                if (!dataSource.inRange(rangeStart, pageSize)) {\n                    if (lastRequestedRange !== rangeStart) {\n                        lastRequestedRange = rangeStart;\n                        lastRangeStart = rangeStart;\n\n                        if (that._getterDeferred) {\n                            that._getterDeferred.reject();\n                        }\n\n                        that._getterDeferred = that.deferredRange(rangeStart);\n                        that._getterDeferred.then(function() {\n                            var firstItemIndex = that._indexConstraint(that.content[0].scrollTop);\n\n                            that._getterDeferred = null;\n\n                            if (rangeStart <= firstItemIndex && firstItemIndex <= (rangeStart + pageSize)) {\n                                that._fetching = true;\n                                dataSource.range(rangeStart, pageSize);\n                            }\n                        });\n                    }\n\n                    return null;\n                } else {\n                    if (lastRangeStart !== rangeStart) {\n                        this.mute(function() {\n                            dataSource.range(rangeStart, pageSize);\n                            lastRangeStart = rangeStart;\n                        });\n                    }\n\n                    var result;\n                    if (type === \"group\") { //grouped list\n                        if (!flatGroups[rangeStart]) {\n                            var flatGroup = flatGroups[rangeStart] = [];\n                            var groups = dataSource.view();\n                            for (var i = 0, len = groups.length; i < len; i++) {\n                                var group = groups[i];\n                                for (var j = 0, groupLength = group.items.length; j < groupLength; j++) {\n                                    flatGroup.push({ item: group.items[j], group: group.value });\n                                }\n                            }\n                        }\n\n                        result = flatGroups[rangeStart][index - rangeStart];\n                    } else { //flat list\n                        result = dataSource.view()[index - rangeStart];\n                    }\n\n                    return result;\n                }\n            };\n        },\n\n        _fixedHeader: function(scrollTop, list) {\n            var group = this.currentVisibleGroup,\n                itemHeight = this.options.itemHeight,\n                firstVisibleDataItemIndex = Math.floor((scrollTop - list.top) / itemHeight),\n                firstVisibleDataItem = list.items[firstVisibleDataItemIndex];\n\n            if (firstVisibleDataItem && firstVisibleDataItem.item) {\n                var firstVisibleGroup = firstVisibleDataItem.group;\n\n                if (firstVisibleGroup !== group) {\n                    var fixedGroupText = firstVisibleGroup || \"\";\n                    this.header.html(this.templates.fixedGroupTemplate(fixedGroupText));\n                    this.currentVisibleGroup = firstVisibleGroup;\n                }\n            }\n\n            return list;\n        },\n\n        _itemMapper: function(item, index, value) {\n            var listType = this.options.type,\n                itemHeight = this.options.itemHeight,\n                currentIndex = this._focusedIndex,\n                selected = false,\n                current = false,\n                newGroup = false,\n                group = null,\n                match = false,\n                valueGetter = this._valueGetter;\n\n            if (listType === \"group\") {\n                if (item) {\n                    newGroup = index === 0 || (this._currentGroup !== false && this._currentGroup !== item.group);\n                    this._currentGroup = item.group;\n                }\n\n                group = item ? item.group : null;\n                item = item ? item.item : null;\n            }\n\n            if (this.options.mapValueTo === \"dataItem\" && this._selectedDataItems.length && item) {\n                for (var i = 0; i < this._selectedDataItems.length; i++) {\n                    match = valueGetter(this._selectedDataItems[i]) === valueGetter(item);\n                    if (match) {\n                        selected = true;\n                        break;\n                    }\n                }\n            } else if (!this.isFiltered() && value.length && item) {\n                for (var j = 0; j < value.length; j++) {\n                    match = isPrimitive(item) ? value[j] === item : value[j] === valueGetter(item);\n                    if (match) {\n                        value.splice(j , 1);\n                        selected = true;\n                        break;\n                    }\n                }\n            }\n\n            if (currentIndex === index) {\n                current = true;\n            }\n\n            return {\n                item: item ? item : null,\n                group: group,\n                newGroup: newGroup,\n                selected: selected,\n                current: current,\n                index: index,\n                top: index * itemHeight\n            };\n        },\n\n        _range: function(index) {\n            var itemCount = this.itemCount,\n                value = this._values.slice(),\n                items = [],\n                item;\n\n            this._view = {};\n            this._currentGroup = false;\n\n            for (var i = index, length = index + itemCount; i < length; i++) {\n                item = this._itemMapper(this.getter(i, index), i, value);\n                if(items[items.length - 1]){\n                    items[items.length - 1].isLastGroupedItem = item.newGroup;\n                }\n                items.push(item);\n                this._view[item.index] = item;\n            }\n\n            this._dataView = items;\n            return items;\n        },\n\n        _getDataItemsCollection: function(scrollTop, lastScrollTop) {\n            var items = this._range(this._listIndex(scrollTop, lastScrollTop));\n            return {\n                index: items.length ? items[0].index : 0,\n                top: items.length ? items[0].top : 0,\n                items: items\n            };\n        },\n\n        _listItems: function() {\n            var screenHeight = this._screenHeight,\n                options = this.options;\n\n            var theValidator = listValidator(options, screenHeight);\n\n            return $.proxy(function(value, force) {\n                var result = this.result,\n                    lastScrollTop = this._lastScrollTop;\n\n                if (force || !result || !theValidator(result, value, lastScrollTop)) {\n                    result = this._getDataItemsCollection(value, lastScrollTop);\n                }\n\n                this._lastScrollTop = value;\n                this.result = result;\n\n                return result;\n            }, this);\n        },\n\n        _whenChanged: function(getter, callback) {\n            var current;\n\n            return function(force) {\n                var theNew = getter(force);\n\n                if (theNew !== current) {\n                    current = theNew;\n                    callback(theNew, force);\n                }\n            };\n        },\n\n        _reorderList: function(list, reorder) {\n            var that = this;\n            var length = list.length;\n            var currentOffset = -Infinity;\n            reorder = $.proxy(map2(reorder, this.templates), this);\n\n            return function(list2, offset, force) {\n                var diff = offset - currentOffset;\n                var range, range2;\n\n                if (force || Math.abs(diff) >= length) { // full reorder\n                    range = list;\n                    range2 = list2;\n                } else { // partial reorder\n                    range = reshift(list, diff);\n                    range2 = diff > 0 ? list2.slice(-diff) : list2.slice(0, -diff);\n                }\n\n                reorder(range, range2, that.bound());\n\n                currentOffset = offset;\n            };\n        },\n\n        _bufferSizes: function() {\n            var options = this.options;\n\n            return bufferSizes(this._screenHeight, options.listScreens, options.oppositeBuffer);\n        },\n\n        _indexConstraint: function(position) {\n            var itemCount = this.itemCount,\n                itemHeight = this.options.itemHeight,\n                total = this.dataSource.total();\n\n            return Math.min(Math.max(total - itemCount, 0), Math.max(0, Math.floor(position / itemHeight )));\n        },\n\n        _listIndex: function(scrollTop, lastScrollTop) {\n            var buffers = this._bufferSizes(),\n                position;\n\n            position = scrollTop - ((scrollTop > lastScrollTop) ? buffers.down : buffers.up);\n\n            return this._indexConstraint(position);\n        },\n\n        _selectable: function() {\n            var itemClass = this.options.columns && this.options.columns.length ? TABLE_ITEM : LIST_ITEM;\n\n            if (this.options.selectable) {\n                this._selectProxy = $.proxy(this, \"_clickHandler\");\n                this.element.on(CLICK + VIRTUAL_LIST_NS, \".\" + itemClass, this._selectProxy);\n            }\n        },\n\n        getElementIndex: function(element) {\n            if (!(element instanceof jQuery)) {\n                return undefined;\n            }\n\n            return parseInt(element.attr(\"data-offset-index\"), 10);\n        },\n\n        _getIndecies: function(candidate) {\n            var result = [], data;\n\n            if (typeof candidate === \"function\") {\n                data = this.dataSource.flatView();\n                for (var idx = 0; idx < data.length; idx++) {\n                    if (candidate(data[idx])) {\n                        result.push(idx);\n                        break;\n                    }\n                }\n            }\n\n            if (typeof candidate === \"number\") {\n                result.push(candidate);\n            }\n\n            var elementIndex = this.getElementIndex(candidate);\n            if (!isNaN(elementIndex)) {\n                result.push(elementIndex);\n            }\n\n            if (candidate instanceof Array) {\n                result = candidate;\n            }\n\n            return result;\n        },\n\n        _deselect: function(indices) {\n            var removed = [],\n                selectedIndex,\n                dataItem,\n                selectedIndexes = this._selectedIndexes,\n                selectedDataItems = this._selectedDataItems,\n                position = 0,\n                selectable = this.options.selectable,\n                removedindexesCounter = 0,\n                valueGetter = this._valueGetter,\n                item, match,\n                result = null;\n\n            indices = indices.slice();\n\n            if (selectable === true || !indices.length) { //deselect everything\n                for (var idx = 0; idx < selectedIndexes.length; idx++) {\n                    if (selectedIndexes[idx] !== undefined) {\n                        this._getElementByIndex(selectedIndexes[idx]).removeClass(SELECTED);\n                    } else if (selectedDataItems[idx]) {\n                        this._getElementByDataItem(selectedDataItems[idx]).removeClass(SELECTED);\n                    }\n\n                    removed.push({\n                        index: selectedIndexes[idx],\n                        position: idx,\n                        dataItem: selectedDataItems[idx]\n                    });\n                }\n\n                this._values = [];\n                this._selectedDataItems = [];\n                this._selectedIndexes = [];\n            } else if (selectable === \"multiple\") {\n                for (var i = 0; i < indices.length; i++) {\n                    result = null;\n                    position = $.inArray(indices[i], selectedIndexes);\n                    dataItem = this.dataItemByIndex(indices[i]);\n\n                    if (position === -1 && dataItem) {\n                        for (var j = 0; j < selectedDataItems.length; j++) {\n                            match = isPrimitive(dataItem) ? selectedDataItems[j] === dataItem : valueGetter(selectedDataItems[j]) === valueGetter(dataItem);\n                            if (match) {\n                                item = this._getElementByIndex(indices[i]);\n                                result = this._deselectSingleItem(item, j, indices[i], removedindexesCounter);\n                            }\n                        }\n                    } else {\n                        selectedIndex = selectedIndexes[position];\n\n                        if (selectedIndex !== undefined) {\n                            item = this._getElementByIndex(selectedIndex);\n                            result = this._deselectSingleItem(item, position, selectedIndex, removedindexesCounter);\n                        }\n                    }\n\n                    if (result) {\n                        indices.splice(i, 1);\n                        removed.push(result);\n\n                        removedindexesCounter++;\n                        i--;\n                    }\n                }\n            }\n\n            return {\n                indices: indices,\n                removed: removed\n            };\n        },\n\n        _deselectSingleItem: function(item, position, selectedIndex, removedindexesCounter) {\n            var dataItem;\n\n            if (!item.hasClass(SELECTED)) {\n                return;\n            }\n\n            item.removeClass(SELECTED);\n            this._values.splice(position, 1);\n            this._selectedIndexes.splice(position, 1);\n            dataItem = this._selectedDataItems.splice(position, 1)[0];\n\n            return {\n                index: selectedIndex,\n                position: position + removedindexesCounter,\n                dataItem: dataItem\n            };\n        },\n\n        _deselectCurrentValues: function(indices) {\n            var children = this.element[0].children;\n            var value, index, position;\n            var values = this._values;\n            var removed = [];\n            var idx = 0;\n            var j;\n\n            if (this.options.selectable !== \"multiple\" || !this.isFiltered()) {\n                return [];\n            }\n\n            if (indices[0] === -1) {\n                $(children).removeClass(SELECTED);\n                removed = $.map(this._selectedDataItems.slice(0), function(dataItem, idx) {\n                   return {\n                      dataItem: dataItem,\n                      position: idx\n                   };\n                });\n                this._selectedIndexes = [];\n                this._selectedDataItems = [];\n                this._values = [];\n                return removed;\n            }\n\n            for (; idx < indices.length; idx++) {\n                position = -1;\n                index = indices[idx];\n                if (this.dataItemByIndex(index)) {\n                    value = this._valueGetter(this.dataItemByIndex(index));\n                }\n\n                for (j = 0; j < values.length; j++) {\n                    if (value == values[j]) {\n                        position = j;\n                        break;\n                    }\n                }\n\n                if (position > -1) {\n                    removed.push(this.removeAt(position));\n                    $(children[index]).removeClass(SELECTED);\n                }\n            }\n\n            return removed;\n        },\n\n        _getSkip: function(index, take) {\n            var page = index < take ? 1 : Math.floor(index / take) + 1;\n\n            return (page - 1) * take;\n        },\n\n        _select: function(indexes) {\n            var that = this,\n                singleSelection = this.options.selectable !== \"multiple\",\n                dataSource = this.dataSource,\n                dataItem, oldSkip,\n                take = this.itemCount,\n                valueGetter = this._valueGetter,\n                added = [];\n\n            if (singleSelection) {\n                that._selectedIndexes = [];\n                that._selectedDataItems = [];\n                that._values = [];\n            }\n\n            oldSkip = dataSource.skip();\n\n            $.each(indexes, function(_, index) {\n                var skip = that._getSkip(index, take);\n\n                that.mute(function() {\n                    dataSource.range(skip, take); //switch the range to get the dataItem\n\n                    dataItem = that._findDataItem(dataSource.view(), [index - skip]);\n                    that._selectedIndexes.push(index);\n                    that._selectedDataItems.push(dataItem);\n                    that._values.push(isPrimitive(dataItem) ? dataItem : valueGetter(dataItem));\n\n                    added.push({\n                        index: index,\n                        dataItem: dataItem\n                    });\n\n                    that._getElementByIndex(index).addClass(SELECTED);\n\n                    dataSource.range(oldSkip, take); //switch back the range\n                });\n            });\n\n            that._values = that._checkValuesOrder(that._values);\n\n            return added;\n        },\n\n        _clickHandler: function(e) {\n            var item = $(e.currentTarget);\n\n            if (!e.isDefaultPrevented() && item.attr(\"data-uid\")) {\n                this.trigger(CLICK, { item: item });\n            }\n        },\n\n        _buildValueGetter: function() {\n            this._valueGetter = kendo.getter(this.options.dataValueField);\n        },\n\n        _calculateGroupPadding: function (height) {\n            var firstItem = this.items().first(),\n                groupHeader = this.header,\n                padding = 0;\n\n            if (groupHeader[0] && groupHeader[0].style.display !== \"none\") {\n                if (height !== \"auto\") {\n                    padding = kendo.support.scrollbar();\n                }\n\n                padding += parseFloat(firstItem.css(\"border-right-width\"), 10) + parseFloat(firstItem.children(\".k-group\").css(\"right\"), 10);\n\n                groupHeader.css(\"padding-right\", padding);\n            }\n        },\n\n        _calculateColumnsHeaderPadding: function () {\n            if(this.options.columns && this.options.columns.length){\n                var isRtl = kendo.support.isRtl(this.wrapper);\n                var scrollbar = kendo.support.scrollbar();\n                var columnsHeader = this.content.parent().parent().find(\".k-table-header\");\n                var total = this.dataSource.total();\n\n                columnsHeader.css((isRtl ? \"padding-left\" : \"padding-right\"), total ? scrollbar : 0);\n            }\n        }\n\n    });\n\n    kendo.ui.VirtualList = VirtualList;\n    kendo.ui.plugin(VirtualList);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.html.base',[\n        \"./kendo.core\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"html.base\",\n    name: \"Html.Base\",\n    category: \"web\",\n    description: \"\",\n    depends: [\"core\"],\n    features: []\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Class = kendo.Class;\n\n    kendo.html = kendo.html || {};\n\n    var HTMLBase = Class.extend({\n        init: function (element, options) {\n            var that = this;\n            that.element = $(element);\n            options = options || {};\n            delete options.name;\n            that._initOptions(options);\n        },\n        options: {\n            stylingOptions: []\n        },\n        _addClasses: function () {\n            var that = this,\n                options = that.options,\n                stylingOptions = options.stylingOptions;\n\n            stylingOptions = stylingOptions.map(function(option){\n                var validFill;\n\n                if (option === \"themeColor\") {\n                    validFill = kendo.cssProperties.getValidClass({\n                        widget: options.name,\n                        propName: \"fillMode\",\n                        value: options.fillMode\n                    });\n\n                    if (!validFill || validFill.length === 0) {\n                        return \"\";\n                    }\n                }\n\n                return kendo.cssProperties.getValidClass({\n                    widget: options.name,\n                    propName: option,\n                    value: options[option],\n                    fill: options.fillMode\n                });\n            });\n\n            that.wrapper.addClass(stylingOptions.join(\" \"));\n        },\n        html: function () {\n            var that = this;\n\n            return that.wrapper[0].outerHTML;\n        }\n    });\n\n    $.extend(kendo.html, {\n        HTMLBase: HTMLBase\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.html.button',[\n        \"./kendo.html.base\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"html.button\",\n    name: \"Html.Button\",\n    category: \"web\",\n    description: \"HTML rendering utility for Kendo UI for jQuery.\",\n    depends: [ \"html.base\" ],\n    features: []\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        HTMLBase = kendo.html.HTMLBase,\n\n        KBUTTON = \"k-button\",\n        KBUTTONICON = \"k-button-icon\",\n        KBUTTONTEXT = \"k-button-text\";\n\n    var renderButton = function (element, options) {\n        if (arguments[0] === undefined || $.isPlainObject(arguments[0])) {\n            options = element;\n            element = $(\"<button></button>\");\n        }\n\n        return (new HTMLButton(element, options)).html();\n    };\n\n    var HTMLButton = HTMLBase.extend({\n        init: function (element, options) {\n            var that = this;\n            HTMLBase.fn.init.call(that, element, options);\n            that.wrapper = that.element.addClass(KBUTTON);\n\n            if (!that.element.attr(\"type\")) {\n                that.element.attr(\"type\", that.options.type);\n            }\n\n            that._addClasses();\n            that.iconElement();\n            that._textElement();\n        },\n        options: {\n            name: \"HTMLButton\",\n            type: \"button\",\n            icon: \"\",\n            iconClass: \"\",\n            spriteCssClass: \"\",\n            imageUrl: \"\",\n            size: \"medium\",\n            shape: \"rectangle\",\n            rounded: \"medium\",\n            fillMode: \"solid\",\n            themeColor: \"base\",\n            stylingOptions: [ \"size\", \"shape\", \"rounded\", \"fillMode\", \"themeColor\" ]\n        },\n        iconElement: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                icon = options.icon,\n                iconClass = options.iconClass,\n                spriteCssClass = options.spriteCssClass,\n                imageUrl = options.imageUrl,\n                span, img, isEmpty;\n\n            if (spriteCssClass || imageUrl || icon || iconClass) {\n                isEmpty = true;\n\n                element.contents().filter(function() {\n                    return (!$(this).hasClass(\"k-sprite\") && !$(this).hasClass(\"k-icon\") && !$(this).hasClass(\"k-image\"));\n                }).each(function(idx, el){\n                    if (el.nodeType == 1 || el.nodeType == 3 && kendo.trim(el.nodeValue).length > 0) {\n                        isEmpty = false;\n                    }\n                });\n            }\n\n            if (isEmpty) {\n                that.element.addClass(\"k-icon-button\");\n            }\n\n            if (imageUrl) {\n                img = element.children(\"img.k-image\").first();\n                if (!img[0]) {\n                    img = $('<img alt=\"icon\" class=\"k-image\" />').prependTo(element);\n                }\n                img.attr(\"src\", imageUrl);\n                img.addClass(KBUTTONICON);\n            } else if (icon || iconClass) {\n                span = element.children(\"span.k-icon\").first();\n                if (!span[0]) {\n                    span = $('<span></span>').prependTo(element);\n                }\n                span.attr(\"class\", icon ? \"k-icon k-i-\" + icon : iconClass);\n                span.addClass(KBUTTONICON);\n            } else if (spriteCssClass) {\n                span = element.children(\"span.k-sprite\").first();\n                if (!span[0]) {\n                    span = $('<span class=\"k-sprite\"></span>').prependTo(element);\n                }\n                span.addClass(spriteCssClass + \" \" + KBUTTONICON);\n            }\n        },\n        _textElement: function() {\n            var element = this.element;\n\n            element.contents().filter(function() {\n                return (!$(this).hasClass(KBUTTONICON) && !$(this).hasClass(\"k-sprite\") && !$(this).hasClass(\"k-icon\") && !$(this).hasClass(\"k-image\"));\n            }).each(function(idx, el){\n                if (el.nodeType == 1 || el.nodeType == 3 && kendo.trim(el.nodeValue).length > 0) {\n                    if (el.nodeType === 3) {\n                        var parent = el.parentNode;\n                        var newSpan = document.createElement('span');\n\n                        newSpan.appendChild(document.createTextNode(el.nodeValue));\n                        parent.replaceChild(newSpan, el);\n\n                        el = newSpan;\n                    }\n\n                    el.classList.add(KBUTTONTEXT);\n                }\n            });\n        }\n    });\n\n    $.extend(kendo.html, {\n        renderButton: renderButton,\n        HTMLButton: HTMLButton\n    });\n\n    kendo.cssProperties.registerPrefix(\"HTMLButton\", \"k-button-\");\n\n    kendo.cssProperties.registerValues(\"HTMLButton\", [{\n        prop: \"fillMode\",\n        values: kendo.cssProperties.fillModeValues.concat([\"link\"])\n    }, {\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.combobox',[ \"./kendo.list\", \"./kendo.mobile.scroller\", \"./kendo.virtuallist\", \"./kendo.html.button\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"combobox\",\n    name: \"ComboBox\",\n    category: \"web\",\n    description: \"The ComboBox widget allows the selection from pre-defined values or entering a new value.\",\n    depends: [ \"list\", \"html.button\" ],\n    features: [ {\n        id: \"mobile-scroller\",\n        name: \"Mobile scroller\",\n        description: \"Support for kinetic scrolling in mobile device\",\n        depends: [ \"mobile.scroller\" ]\n    }, {\n        id: \"virtualization\",\n        name: \"VirtualList\",\n        description: \"Support for virtualization\",\n        depends: [ \"virtuallist\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        List = ui.List,\n        Select = ui.Select,\n        caret = kendo.caret,\n        support = kendo.support,\n        placeholderSupported = support.placeholder,\n        activeElement = kendo._activeElement,\n        keys = kendo.keys,\n        ns = \".kendoComboBox\",\n        nsFocusEvent = ns + \"FocusEvent\",\n        CLICK = \"click\" + ns,\n        MOUSEDOWN = \"mousedown\" + ns,\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        CHANGE = \"change\",\n        LOADING = \"k-i-loading\",\n        FOCUSED = \"k-focus\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_READONLY = \"aria-readonly\",\n        AUTOCOMPLETEVALUE = \"off\",\n        STATE_FILTER = \"filter\",\n        STATE_ACCEPT = \"accept\",\n        STATE_REBIND = \"rebind\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        proxy = $.proxy,\n        newLineRegEx = /(\\r\\n|\\n|\\r)/gm,\n        NON_PRINTABLE_KEYS = [16,17,18,19,20,33,34,37,39,45,91,92,144,145];\n\n    var ComboBox = Select.extend({\n        init: function(element, options) {\n            var that = this, text, disabled;\n\n            that.ns = ns;\n\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Select.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element.on(\"focus\" + ns, proxy(that._focusHandler, that));\n\n            options.placeholder = options.placeholder || element.attr(\"placeholder\");\n\n            that._reset();\n\n            that._wrapper();\n\n            that._input();\n\n            that._clearButton();\n\n            that._tabindex(that.input);\n\n            that._popup();\n\n            that._dataSource();\n            that._ignoreCase();\n\n            that._enable();\n\n            that._attachFocusEvents();\n\n            that._oldIndex = that.selectedIndex = -1;\n\n            that._aria();\n\n            that._initialIndex = options.index;\n\n            that.requireValueMapper(that.options);\n            that._initList();\n\n            that._cascade();\n\n            if (options.autoBind) {\n                that._filterSource();\n            } else {\n                text = options.text;\n\n                if (!text && that._isSelect) {\n                    text = element.children(\":selected\").text();\n                }\n\n                if (text) {\n                    that._setText(text);\n                }\n            }\n\n            if (!text) {\n                that._placeholder();\n            }\n\n            disabled = $(that.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                that.enable(false);\n            }\n\n            kendo.notify(that);\n            that._toggleCloseVisibility();\n            that._applyCssClasses();\n        },\n\n        options: {\n            name: \"ComboBox\",\n            enabled: true,\n            index: -1,\n            text: null,\n            value: null,\n            autoBind: true,\n            delay: 200,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            minLength: 1,\n            enforceMinLength: false,\n            height: 200,\n            highlightFirst: true,\n            filter: \"none\",\n            placeholder: \"\",\n            suggest: false,\n            cascadeFrom: \"\",\n            cascadeFromField: \"\",\n            cascadeFromParentField: \"\",\n            ignoreCase: true,\n            animation: {},\n            virtual: false,\n            template: null,\n            groupTemplate: \"#:data#\",\n            fixedGroupTemplate: \"#:data#\",\n            clearButton: true,\n            syncValueAndText: true,\n            autoWidth: false,\n            popup: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events:[\n            \"open\",\n            \"close\",\n            CHANGE,\n            \"select\",\n            \"filtering\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"cascade\",\n            \"set\"\n        ],\n\n        setOptions: function(options) {\n            var listOptions = this._listOptions(options);\n\n            Select.fn.setOptions.call(this, options);\n\n            this.listView.setOptions(listOptions);\n\n            this._accessors();\n            this._aria();\n            this._clearButton();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.input.off(ns);\n            that.input.off(nsFocusEvent);\n            that.element.off(ns);\n            that.wrapper.off(ns);\n            clearTimeout(that._pasteTimeout);\n\n            that._arrow.off(CLICK + \" \" + MOUSEDOWN);\n            that._clear.off(CLICK + \" \" + MOUSEDOWN);\n\n            Select.fn.destroy.call(that);\n        },\n\n        _isValueChanged: function(value) {\n            return value !== List.unifyType(this._old, typeof value) &&\n                value !== List.unifyType(this._oldText, typeof value);\n        },\n\n        _change: function() {\n            var that = this;\n            var text = that.text();\n            var hasText = text && text !== that._oldText && text !== that.options.placeholder;\n            var index = that.selectedIndex;\n            var isCustom = index === -1;\n\n            if (!that.options.syncValueAndText && !that.value() && isCustom && hasText) {\n                that._old = \"\";\n                that._oldIndex = index;\n                that._oldText = text;\n\n                if (!that._typing) {\n                    // trigger the DOM change event so any subscriber gets notified\n                    that.element.trigger(CHANGE);\n                }\n\n                that.trigger(CHANGE);\n                that._typing = false;\n                return;\n            }\n\n            Select.fn._change.call(that);\n\n            that._oldText = that.text && that.text();\n\n            that._toggleCloseVisibility();\n        },\n\n        _attachFocusEvents: function() {\n            var that = this;\n            that.input.on(\"focus\" + nsFocusEvent, proxy(that._inputFocus, that))\n                      .on(\"focusout\" + nsFocusEvent, proxy(that._inputFocusout, that));\n        },\n\n        _focusHandler: function(e) {\n            if(e.target === this.element[0]) {\n                this.input.trigger(\"focus\");\n            }\n        },\n\n        _arrowClick: function() {\n            this._toggle();\n        },\n\n        _inputFocus: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._placeholder(false);\n        },\n\n        _inputFocusout: function(e) {\n            var that = this;\n            var value = that.value();\n            var isClearButton = !$(e.relatedTarget).closest('.k-clear-value').length;\n\n            that._userTriggered = true;\n            that.wrapper.removeClass(FOCUSED);\n            clearTimeout(that._typingTimeout);\n            that._typingTimeout = null;\n\n            if (isClearButton) {\n              that.text(that.text());\n            }\n\n            var item = that._focus();\n            var dataItem = this.listView.dataItemByIndex(this.listView.getElementIndex(item));\n\n            if (value !== that.value() && that.trigger(\"select\", { dataItem: dataItem, item: item })) {\n                that.value(value);\n                return;\n            }\n\n            that._placeholder();\n            that._valueBeforeCascade = that._old;\n\n            if (isClearButton) {\n                that._blur();\n\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _inputPaste: function() {\n            var that = this;\n            clearTimeout(that._pasteTimeout);\n            that._pasteTimeout = null;\n\n            that._pasteTimeout = setTimeout(function() {\n                that.search();\n            });\n        },\n\n        _editable: function(options) {\n            var that = this,\n                disable = options.disable,\n                readonly = options.readonly,\n                wrapper = that.wrapper.off(ns),\n                input = that.element.add(that.input.off(ns)),\n                arrow = that._arrow.off(CLICK + \" \" + MOUSEDOWN),\n                clear = that._clear;\n\n            if (!readonly && !disable) {\n                wrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                input.prop(DISABLED, false)\n                     .prop(READONLY, false)\n                     .attr(ARIA_DISABLED, false)\n                     .attr(ARIA_READONLY, false);\n\n                arrow.on(CLICK, proxy(that._arrowClick, that))\n                     .on(MOUSEDOWN, function(e) { e.preventDefault(); });\n\n                clear.on(CLICK + \" touchend\" + ns, proxy(that._clearValue, that));\n\n                that.input\n                    .on(\"keydown\" + ns, proxy(that._keydown, that))\n                    .on(\"input\" + ns, proxy(that._search, that))\n                    .on(\"paste\" + ns, proxy(that._inputPaste, that));\n\n                that.wrapper.on(CLICK + ns, proxy(that._focusHandler, that));\n            } else {\n                wrapper\n                    .addClass(disable ? STATEDISABLED : \"\")\n                    .removeClass(disable ? \"\" : STATEDISABLED);\n\n                input.attr(DISABLED, disable)\n                     .attr(READONLY, readonly)\n                     .attr(ARIA_DISABLED, disable)\n                     .attr(ARIA_READONLY, readonly);\n            }\n\n            that._toggleCloseVisibility();\n        },\n\n        open: function() {\n            var that = this;\n            var state = that._state;\n            var isFiltered = that.dataSource.filter() ? that.dataSource.filter().filters.length > 0 : false;\n            var reinitialized = !that.ul.find(that.listView.focus()).length;\n\n            if (that.popup.visible()) {\n                return;\n            }\n\n            if ((!that.listView.bound() && state !== STATE_FILTER) || state === STATE_ACCEPT) {\n                that._open = true;\n                that._state = STATE_REBIND;\n\n                if ((that.options.minLength !== 1 && !isFiltered) || (isFiltered && that.value() && that.selectedIndex === -1 )) {\n                    that.refresh();\n                    that._openPopup();\n                    if (!this.options.virtual) {\n                        that.listView.bound(false);\n                    }\n                } else {\n                    that._filterSource();\n                }\n            } else if (that._allowOpening()) {\n                // In some cases when the popup is opened resize is triggered which will cause it to close\n                // Setting the below flag will prevent this from happening\n                that.popup._hovered = true;\n                that._openPopup();\n                if(that.options.virtual) {\n                    that._focusItem();\n                } else if (reinitialized && that.options.highlightFirst) {\n                    that.listView.focus(0);\n                }\n            }\n        },\n\n        _scrollToFocusedItem: function() {\n            var listView = this.listView;\n\n            listView.scrollToIndex(listView.getElementIndex(listView.focus()));\n        },\n\n        _openPopup: function() {\n            this.popup.one(\"activate\", proxy(this._scrollToFocusedItem, this));\n            this.popup.open();\n        },\n\n        _updateSelectionState: function() {\n            var that = this;\n            var text = that.options.text;\n            var value = that.options.value;\n\n            if (that.listView.isFiltered()) {\n                return;\n            }\n\n            if (that.selectedIndex === -1) {\n                if (text === undefined || text === null) {\n                    text = value;\n                }\n\n                that._accessor(value);\n                that.input.val(text || that.input.val());\n                that._placeholder();\n            } else if (that._oldIndex === -1) {\n                that._oldIndex = that.selectedIndex;\n            }\n        },\n\n        _buildOptions: function(data) {\n            var that = this;\n            if (!that._isSelect) {\n                return;\n            }\n\n            var custom = that._customOption;\n\n            if (that._state === STATE_REBIND) {\n                that._state = \"\";\n            }\n\n            that._customOption = undefined;\n            that._options(data, \"\", that.value());\n\n            if (custom && custom[0].selected && !that.listView._emptySearch) {\n                that._custom(custom.val());\n            }\n        },\n\n        _updateSelection: function() {\n            var that = this;\n            var listView = that.listView;\n            var initialIndex = that._initialIndex;\n            var hasInitialIndex = initialIndex !== null && initialIndex > -1;\n            var filtered = that._state === STATE_FILTER;\n\n            if (filtered) {\n                $(listView.focus()).removeClass(\"k-selected\");\n                return;\n            }\n\n            if (that._fetch) {\n                return;\n            }\n\n            if (!listView.value().length) {\n                if (hasInitialIndex) {\n                    that.select(initialIndex);\n                } else if (that._accessor()) {\n                    listView.value(that._accessor());\n                }\n            }\n\n            that._initialIndex = null;\n            var dataItem = listView.selectedDataItems()[0];\n\n            if (!dataItem) {\n                return;\n            }\n\n            if (that._value(dataItem) !== that.value()) {\n                that._custom(that._value(dataItem));\n            } else if (that._value(dataItem) !== that.element[0].value){\n                that._accessor(that._value(dataItem));\n            }\n\n            if (that.text() && that.text() !== that._text(dataItem)) {\n                that._selectValue(dataItem);\n            }\n        },\n\n        _updateItemFocus: function() {\n            var listView = this.listView;\n\n            if (!this.options.highlightFirst) {\n                listView.focus(-1);\n            } else if (!listView.focus() && !listView.focusIndex()) {\n                listView.focus(0);\n            }\n        },\n\n        _listBound: function() {\n            var that = this;\n            var isActive = that.input[0] === activeElement();\n\n            var data = that.dataSource.flatView();\n            var skip = that.listView.skip();\n            var length = data.length;\n            var groupsLength = that.dataSource._group ? that.dataSource._group.length : 0;\n            var isFirstPage = skip === undefined || skip === 0;\n\n            that._presetValue = false;\n\n            that._renderFooter();\n            that._renderNoData();\n            that._toggleNoData(!length);\n            that._toggleHeader(!!groupsLength && !!length);\n\n            that._resizePopup();\n\n            that.popup.position();\n\n            that._buildOptions(data);\n\n            that._updateSelection();\n\n            if (data.length && isFirstPage) {\n                that._updateItemFocus();\n\n                if (that.options.suggest && isActive && that.input.val()) {\n                    that.suggest(data[0]);\n                }\n            }\n\n            if (that._open) {\n                that._open = false;\n\n                if (that._typingTimeout && !isActive) {\n                    that.popup.close();\n                } else {\n                    that.toggle(that._allowOpening());\n                }\n\n                that._typingTimeout = null;\n            }\n\n            that._hideBusy();\n            that.trigger(\"dataBound\");\n        },\n\n        _listChange: function() {\n            this._selectValue(this.listView.selectedDataItems()[0]);\n\n            if (this._presetValue) {\n                this._oldIndex = this.selectedIndex;\n            }\n        },\n\n        _get: function(candidate) {\n            var data, found, idx;\n\n            if (typeof candidate === \"function\") {\n                data = this.dataSource.flatView();\n\n                for (idx = 0; idx < data.length; idx++) {\n                    if (candidate(data[idx])) {\n                        candidate = idx;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    candidate = -1;\n                }\n            }\n\n            if (!this.dataSource.total() && !candidate) {\n                candidate = -1;\n            }\n\n            return candidate;\n        },\n\n        _select: function(candidate, keepState) {\n            var that = this;\n\n            candidate = that._get(candidate);\n\n            if (candidate === -1) {\n                that.input[0].value = \"\";\n                that._accessor(\"\");\n            }\n\n            return that.listView.select(candidate).done(function() {\n                if (!keepState && that._state === STATE_FILTER) {\n                    that._state = STATE_ACCEPT;\n                }\n                that._toggleCloseVisibility();\n            });\n        },\n\n        _selectValue: function(dataItem) {\n            var idx = this.listView.select();\n            var value = \"\";\n            var text = \"\";\n\n            idx = idx[idx.length - 1];\n            if (idx === undefined) {\n                idx = -1;\n            }\n\n            this.selectedIndex = idx;\n\n            if (this.listView.isFiltered() && idx !== -1) {\n                this._valueBeforeCascade = this._old;\n            }\n\n            if (idx === -1 && !dataItem) {\n                if (this.options.syncValueAndText) {\n                    if (this.options.dataTextField === this.options.dataValueField) {\n                        text = this._accessor();\n                    } else {\n                        text = this.input[0].value;\n                    }\n                    value = text;\n                }\n                else {\n                    text = this.text();\n                }\n                this.listView.focus(-1);\n            } else {\n                if (dataItem || dataItem === 0) {\n                    value = this._dataValue(dataItem);\n                    text = this._text(dataItem);\n                }\n\n                if (value === null) {\n                    value = \"\";\n                }\n            }\n\n            this._setDomInputValue(text);\n            this._accessor(value !== undefined ? value : text, idx);\n\n            this._placeholder();\n            this._triggerCascade();\n        },\n\n        _setDomInputValue: function(text){\n            var that = this;\n            var currentCaret = caret(this.input);\n            var caretStart;\n\n            if(currentCaret && currentCaret.length){\n                caretStart = currentCaret[0];\n            }\n\n            this._prev = this.input[0].value = text;\n\n            if(caretStart && this.selectedIndex === -1){\n                var mobile = support.mobileOS;\n                if(mobile.wp || mobile.android) {// without the timeout the caret is at the end of the input\n                    setTimeout(function() { that.input[0].setSelectionRange(caretStart, caretStart); }, 0);\n                }\n                else {\n                    this.input[0].setSelectionRange(caretStart, caretStart);\n                }\n            }\n        },\n\n        refresh: function() {\n            this.listView.refresh();\n        },\n\n        _toggleCloseVisibility: function() {\n            var preventShow = this.element.is(\":disabled\") || this.element.is(\"[readonly]\");\n\n            if (this.text() && !preventShow) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        suggest: function(word) {\n            var that = this;\n            var element = that.input[0];\n            var value = that.text();\n            var caretIdx = caret(element)[0];\n            var key = that._last;\n            var idx;\n            var accentFoldingFiltering = that.dataSource.options.accentFoldingFiltering;\n\n            if (key == keys.BACKSPACE || key == keys.DELETE) {\n                that._last = undefined;\n                return;\n            }\n\n            word = word || \"\";\n\n            if (typeof word !== \"string\") {\n                if (word[0]) {\n                    word = that.dataSource.view()[List.inArray(word[0], that.ul[0])];\n                }\n\n                word = word ? that._text(word) : \"\";\n            }\n\n            if (caretIdx <= 0) {\n                caretIdx = (accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase()).indexOf(accentFoldingFiltering ? word.toLocaleLowerCase(accentFoldingFiltering) : word.toLowerCase()) + 1;\n            }\n\n            if (word) {\n                word = word.toString();\n                idx = (accentFoldingFiltering ? word.toLocaleLowerCase(accentFoldingFiltering) : word.toLowerCase()).indexOf(accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase());\n                if (idx > -1) {\n                    value += word.substring(idx + value.length);\n                }\n            } else {\n                value = value.substring(0, caretIdx);\n            }\n\n            if (value.length !== caretIdx || !word) {\n                element.value = value;\n                if (element === activeElement()) {\n                    caret(element, caretIdx, value.length);\n                }\n            }\n        },\n\n        text: function (text) {\n            text = text === null ? \"\" : text;\n\n            var that = this;\n            var input = that.input[0];\n            var ignoreCase = that.options.ignoreCase;\n            var loweredText = text;\n            var dataItem;\n            var value;\n\n            if (text === undefined) {\n                return input.value;\n            }\n\n            if (that.options.autoBind === false && !that.listView.bound()) {\n                that._setText(text);\n                return;\n            }\n\n            dataItem = that.dataItem();\n\n            if (dataItem && that._text(dataItem).replace && that._text(dataItem).replace(newLineRegEx,\"\") === text) {\n                value = that._value(dataItem);\n\n                if (value === List.unifyType(that._old, typeof value)) {\n                    that._triggerCascade();\n                    return;\n                }\n            }\n\n            if (ignoreCase) {\n                loweredText = loweredText.toLowerCase();\n            }\n\n            if(that.dataItem() && that._text(that.dataItem()) === text){\n                return;\n            }\n\n            that._select(function(data) {\n                data = that._text(data);\n                if (ignoreCase) {\n                    data = (data + \"\").toLowerCase();\n                }\n\n                return data === loweredText;\n            }).done(function() {\n                if (that.selectedIndex < 0) {\n                    input.value = text;\n\n                    if (that.options.syncValueAndText) {\n                        that._accessor(text);\n                    }\n\n                    that._cascadeTriggered = true;\n                    that._triggerCascade();\n                }\n\n                that._prev = input.value;\n            });\n\n            that._toggleCloseVisibility();\n        },\n\n        toggle: function(toggle) {\n            this._toggle(toggle, true);\n        },\n\n        value: function(value) {\n            var that = this;\n            var options = that.options;\n            var listView = that.listView;\n\n            if (value === undefined) {\n                value = that._accessor() || that.listView.value()[0];\n                return value === undefined || value === null ? \"\" : value;\n            }\n\n            that.requireValueMapper(that.options, value);\n\n            that.trigger(\"set\", { value: value });\n\n            if (value === options.value && that.input.val() === options.text &&\n            !that.options.cascadeFrom) {\n                return;\n            }\n\n            that._accessor(value);\n\n            if (that._isFilterEnabled() && listView.bound() && listView.isFiltered()) {\n                that._clearFilter();\n            } else {\n                that._fetchData();\n            }\n\n            listView\n                .value(value)\n                .done(function() {\n                    if (that.selectedIndex === -1 && (!listView._selectedDataItems || !listView._selectedDataItems.length)) {\n                        that._accessor(value);\n                        that.input.val(value);\n                        that._placeholder(true);\n                    }\n\n                    if(that._userTriggered) {\n                         that._old = that._accessor();\n                    } else {\n                         that._old = that._valueBeforeCascade = that._accessor();\n                    }\n\n                    that._oldIndex = that.selectedIndex;\n\n                    that._prev = that._oldText = that.input.val();\n\n                    if (that._state === STATE_FILTER) {\n                        that._state = STATE_ACCEPT;\n                    }\n                    that._toggleCloseVisibility();\n                });\n        },\n\n        _hideBusy: function () {\n            var that = this;\n            clearTimeout(that._busy);\n            that._arrowIcon.removeClass(LOADING);\n            that._focused.attr(\"aria-busy\", false);\n            that._busy = null;\n            that._toggleCloseVisibility();\n        },\n\n        _click: function(e) {\n            var that = this;\n            var item = e.item;\n            var dataItem = that.listView.dataItemByIndex(that.listView.getElementIndex(item));\n            var shouldTrigger = true;\n            e.preventDefault();\n\n            if(dataItem){\n                shouldTrigger = that._value(dataItem) !==  List.unifyType(that.value(), typeof that._value(dataItem));\n\n                if(!shouldTrigger){\n                   that.input.val(that._text(dataItem));\n                }\n            }\n\n            if (shouldTrigger && that.trigger(\"select\", { dataItem: dataItem, item: item })) {\n                that.close();\n                return;\n            }\n\n            that._userTriggered = true;\n\n            that._select(item).done(function() {\n                that._blur();\n            });\n        },\n\n        _syncValueAndText: function () {\n            return this.options.syncValueAndText;\n        },\n\n        _inputValue: function() {\n            return this.text();\n        },\n\n        _searchByWord: function(word) {\n            var that = this;\n            var options = that.options;\n            var dataSource = that.dataSource;\n            var ignoreCase = options.ignoreCase;\n            var predicate = function (dataItem) {\n                var text = that._text(dataItem);\n                if (text !== undefined) {\n                    text = text + \"\";\n                    if (text !== \"\" && word === \"\") {\n                        return false;\n                    }\n\n                    if (ignoreCase) {\n                        text = text.toLowerCase();\n                    }\n\n                    return text.indexOf(word) === 0;\n                }\n            };\n\n            if (ignoreCase) {\n                word = word.toLowerCase();\n            }\n\n            if (!that.ul[0].firstChild) {\n                dataSource.one(CHANGE, function () {\n                    if (dataSource.view()[0]) {\n                        that.search(word);\n                    }\n                }).fetch();\n                return;\n            }\n\n            this.listView.focus(this._get(predicate));\n\n            var current = this.listView.focus();\n\n            if (current) {\n                if (options.suggest) {\n                    that.suggest(current);\n                }\n\n                this.open();\n            }\n\n            if (this.options.highlightFirst && !word) {\n                this.listView.focusFirst();\n            }\n        },\n\n        _input: function() {\n            var that = this,\n                element = that.element.removeClass(\"k-input-inner\")[0],\n                accessKey = element.accessKey,\n                wrapper = that.wrapper,\n                SELECTOR = \"input.k-input-inner\",\n                name = element.name || \"\",\n                options = that.options,\n                input,\n                maxLength,\n                arrowBtn;\n\n            if (name) {\n                name = 'name=\"' + name + '_input\" ';\n            }\n\n            input = wrapper.find(SELECTOR);\n\n            if (!input[0]) {\n                arrowBtn = html.renderButton('<button type=\"button\" class=\"k-select k-input-button\" aria-label=\"expand combobox\"></button>', {\n                    icon: \"arrow-s\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null,\n                });\n\n                wrapper.append('<input ' + name + 'class=\"k-input-inner\" type=\"text\" autocomplete=\"' + AUTOCOMPLETEVALUE +'\"/>')\n                    .append(arrowBtn)\n                    .append(that.element);\n\n                input = wrapper.find(SELECTOR);\n            }\n\n            input[0].style.cssText = element.style.cssText;\n            input[0].title = element.title;\n\n            maxLength = parseInt(this.element.prop(\"maxlength\") || this.element.attr(\"maxlength\"), 10);\n            if (maxLength > -1) {\n                input[0].maxLength = maxLength;\n            }\n\n            input.addClass(element.className)\n                .css({\n                    width: \"\",\n                    height: element.style.height,\n                    position: \"\"\n                })\n                .attr({\n                    \"role\": \"combobox\",\n                    \"aria-expanded\": false\n                })\n                .show();\n\n            if (placeholderSupported) {\n                input.attr(\"placeholder\", that.options.placeholder);\n            }\n\n            if (accessKey) {\n                element.accessKey = \"\";\n                input[0].accessKey = accessKey;\n            }\n\n            that._focused = that.input = input;\n            that._arrow = wrapper.find(\".k-select\")\n                .attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            that._arrowIcon = that._arrow.find(\".k-icon\");\n\n            if (element.id) {\n                that._arrow.attr(\"aria-controls\", that.ul[0].id);\n            }\n        },\n\n        _clearButton: function() {\n            List.fn._clearButton.call(this);\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.input);\n                this.wrapper.addClass(\"k-combobox-clearable\");\n            }\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                textField = that.options.dataTextField || \"text\",\n                isFkey = key >= 112 && key <= 135,\n                isNonPrintableKey = NON_PRINTABLE_KEYS.indexOf(key) > -1;\n\n            that._last = key;\n\n            clearTimeout(that._typingTimeout);\n            that._typingTimeout = null;\n\n            if (key === keys.HOME) {\n                that._firstItem();\n            } else if (key === keys.END) {\n                that._lastItem();\n            } else if (key === keys.ENTER || (key === keys.TAB && that.popup.visible())) {\n                var current = that.listView.focus();\n                var dataItem = that.dataItem();\n                var shouldTrigger = true;\n\n                if (!that.popup.visible() && (!dataItem || that.text() !== that._text(dataItem))) {\n                    current = null;\n                }\n\n                if (current) {\n                    if (that.popup.visible()) {\n                        e.preventDefault();\n                    }\n\n                    dataItem = that.listView.dataItemByIndex(that.listView.getElementIndex(current));\n\n                    if(dataItem){\n                        shouldTrigger = that._value(dataItem) !==  List.unifyType(that.value(), typeof that._value(dataItem));\n                    }\n\n                    if (shouldTrigger && that.trigger(\"select\", { dataItem: dataItem, item: current })) {\n                        return;\n                    }\n\n                    that._userTriggered = true;\n\n                    that._select(current).done(function() {\n                        that._blur();\n                        that._valueBeforeCascade = that._old = that.value();\n                    });\n                } else {\n                    if(that._syncValueAndText() || that._isSelect){\n                        if(!that.dataItem() || that.dataItem()[textField] !== that.input.val()) {\n                            that._accessor(that.input.val());\n                        }\n                    }\n\n                    if (that.options.highlightFirst) {\n                        that.listView.value(that.input.val());\n                        that._blur();\n                    } else {\n                        that._oldText = that.text();\n                    }\n                }\n            } else if (key != keys.TAB && !that._move(e) && !isNonPrintableKey && !isFkey && !e.ctrlKey) {\n               that._search();\n            } else if (key === keys.ESC && !that.popup.visible() && that.text()) {\n                that._clearValue();\n            }\n        },\n\n        _placeholder: function(show) {\n            if (placeholderSupported) {\n                return;\n            }\n\n            var that = this,\n                input = that.input,\n                placeholder = that.options.placeholder,\n                value;\n\n            if (placeholder) {\n                value = that.value();\n\n                if (show === undefined) {\n                    show = !value;\n                }\n\n                input.toggleClass(\"k-readonly\", show);\n\n                if (!show) {\n                    if (!value) {\n                        placeholder = \"\";\n                    } else {\n                        return;\n                    }\n                }\n\n                input.val(placeholder);\n\n                if (!placeholder && input[0] === activeElement()) {\n                    caret(input[0], 0, 0);\n                }\n            }\n        },\n\n        _search: function() {\n            var that = this;\n\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.text();\n\n                if (value !== \"\" && that._prev !== value) {\n                    that._prev = value;\n\n                    if (that.options.filter === \"none\" && that.options.virtual) {\n                        that.listView.select(-1);\n                    }\n\n                    that.search(value);\n\n                    that._toggleCloseVisibility();\n                }\n                else if (value === \"\" && that._prev !== \"\" && that._prev !== undefined) {\n                    that._clearValue();\n                    that._open = true;\n                    that._state = STATE_REBIND;\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _setText: function(text) {\n            this.input.val(text);\n            this._prev = text;\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-input\")) {\n                wrapper = element.hide().wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n            }\n\n            that.wrapper = wrapper.addClass(\"k-input k-combobox k-widget\")\n                .addClass(element[0].className)\n                .removeClass('input-validation-error')\n                .css(\"display\", \"\");\n        },\n\n        _clearSelection: function(parent, isFiltered) {\n            var that = this;\n            var hasValue = parent.value();\n            var custom = hasValue && parent.selectedIndex === -1;\n\n            if (this.selectedIndex == -1 && this.value()) {\n                return;\n            }\n\n            if (isFiltered || !hasValue || custom) {\n                that.options.value = \"\";\n                that.value(\"\");\n            }\n        },\n\n        _preselect: function(value, text) {\n            this.input.val(text);\n            this._accessor(value);\n\n            this._old = this._accessor();\n            this._oldIndex = this.selectedIndex;\n\n            this.listView.setValue(value);\n            this._placeholder();\n\n            this._initialIndex = null;\n            this._presetValue = true;\n            this._toggleCloseVisibility();\n        },\n\n        _clearText: function() {\n            this._old = this.value();\n            this.text(\"\");\n        },\n\n        _clearValue: function() {\n            Select.fn._clearValue.call(this);\n            this.input.trigger(\"focus\");\n        }\n    });\n\n    ui.plugin(ComboBox);\n\n    kendo.cssProperties.registerPrefix(\"ComboBox\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"ComboBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.dropdownlist',[ \"./kendo.list\", \"./kendo.mobile.scroller\", \"./kendo.virtuallist\", \"./kendo.html.button\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dropdownlist\",\n    name: \"DropDownList\",\n    category: \"web\",\n    description: \"The DropDownList widget displays a list of values and allows the selection of a single value from the list.\",\n    depends: [ \"list\", \"html.button\" ],\n    features: [ {\n        id: \"mobile-scroller\",\n        name: \"Mobile scroller\",\n        description: \"Support for kinetic scrolling in mobile device\",\n        depends: [ \"mobile.scroller\" ]\n    }, {\n        id: \"virtualization\",\n        name: \"VirtualList\",\n        description: \"Support for virtualization\",\n        depends: [ \"virtuallist\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        List = ui.List,\n        Select = ui.Select,\n        support = kendo.support,\n        activeElement = kendo._activeElement,\n        ObservableObject = kendo.data.ObservableObject,\n        keys = kendo.keys,\n        ns = \".kendoDropDownList\",\n        nsFocusEvent = ns + \"FocusEvent\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        CHANGE = \"change\",\n        FOCUSED = \"k-focus\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_READONLY = \"aria-readonly\",\n        CLICKEVENTS = \"click\" + ns + \" touchend\" + ns,\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        STATE_FILTER = \"filter\",\n        STATE_ACCEPT = \"accept\",\n        MSG_INVALID_OPTION_LABEL = \"The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel\",\n        proxy = $.proxy,\n        OPEN = \"open\",\n        CLOSE = \"close\";\n\n    var DropDownList = Select.extend( {\n        init: function(element, options) {\n            var that = this;\n            var index = options && options.index;\n            var optionLabel, text, disabled;\n\n            that.ns = ns;\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Select.fn.init.call(that, element, options);\n\n            options = that.options;\n            element = that.element.on(\"focus\" + ns, proxy(that._focusHandler, that));\n\n            that._focusInputHandler = $.proxy(that._focusInput, that);\n\n            that.optionLabel = $();\n            that._optionLabel();\n\n            that._inputTemplate();\n\n            that._reset();\n\n            that._prev = \"\";\n            that._word = \"\";\n\n            that._wrapper();\n\n            that._tabindex();\n            that.wrapper.data(TABINDEX, that.wrapper.attr(TABINDEX));\n\n            that._span();\n\n            that._popup();\n\n            that._mobile();\n\n            that._dataSource();\n\n            that._ignoreCase();\n\n            that._filterHeader();\n\n            that._aria();\n\n            //should read changed value of closed dropdownlist\n            that.wrapper.attr(\"aria-live\", \"polite\");\n\n            that._enable();\n\n            that._attachFocusHandlers();\n\n            that._oldIndex = that.selectedIndex = -1;\n\n            if (index !== undefined) {\n                options.index = index;\n            }\n\n            that._initialIndex = options.index;\n\n            that.requireValueMapper(that.options);\n            that._initList();\n            that.listView.one(\"dataBound\", proxy(that._attachAriaActiveDescendant, that));\n\n            that._cascade();\n\n            that.one(\"set\", function(e) {\n                if (!e.sender.listView.bound() && that.hasOptionLabel()) {\n                    that._textAccessor(that._optionLabelText());\n                }\n            });\n\n            if (options.autoBind) {\n                that.dataSource.fetch();\n            } else if (that.selectedIndex === -1) { //selectedIndex !== -1 when cascade functionality happens instantly\n                text = options.text || \"\";\n                if (!text) {\n                    optionLabel = options.optionLabel;\n\n                    if (optionLabel && options.index === 0) {\n                        text = optionLabel;\n                    } else if (that._isSelect) {\n                        text = element.children(\":selected\").text();\n                    }\n                }\n\n                that._textAccessor(text);\n            }\n\n            disabled = $(that.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                that.enable(false);\n            }\n\n            that.listView.bind(\"click\", function(e) { e.preventDefault(); });\n\n            kendo.notify(that);\n            that._applyCssClasses();\n        },\n\n        options: {\n            name: \"DropDownList\",\n            enabled: true,\n            autoBind: true,\n            index: 0,\n            text: null,\n            value: null,\n            delay: 500,\n            height: 200,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            optionLabel: \"\",\n            cascadeFrom: \"\",\n            cascadeFromField: \"\",\n            cascadeFromParentField: \"\",\n            ignoreCase: true,\n            animation: {},\n            filter: \"none\",\n            minLength: 1,\n            enforceMinLength: false,\n            virtual: false,\n            template: null,\n            valueTemplate: null,\n            optionLabelTemplate: null,\n            groupTemplate: \"#:data#\",\n            fixedGroupTemplate: \"#:data#\",\n            autoWidth: false,\n            popup: null,\n            filterTitle: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            CHANGE,\n            \"select\",\n            \"filtering\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"cascade\",\n            \"set\",\n            \"kendoKeydown\"\n        ],\n\n        setOptions: function(options) {\n            Select.fn.setOptions.call(this, options);\n\n            this.listView.setOptions(this._listOptions(options));\n\n            this._optionLabel();\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._enable();\n            this._aria();\n\n            if (!this.value() && this.hasOptionLabel()) {\n                this.select(0);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Select.fn.destroy.call(that);\n\n            that.wrapper.off(ns);\n            that.wrapper.off(nsFocusEvent);\n            that.element.off(ns);\n\n            that._arrow.off();\n            that._arrow = null;\n            that._arrowIcon = null;\n\n            that.optionLabel.off();\n\n            if(that.filterInput){\n                that.filterInput.off(nsFocusEvent);\n            }\n        },\n\n        open: function() {\n            var that = this;\n            var isFiltered = that.dataSource.filter() ? that.dataSource.filter().filters.length > 0 : false;\n            var listView = this.listView;\n\n            if (that.popup.visible()) {\n                return;\n            }\n\n            if (!that.listView.bound() || that._state === STATE_ACCEPT) {\n                that._open = true;\n                that._state = \"rebind\";\n\n                if (that.filterInput) {\n                    that.filterInput.val(\"\");\n                    that._prev = \"\";\n                }\n\n                if (that.filterInput && that.options.minLength !== 1 && !isFiltered) {\n                    that.refresh();\n                    that.popup.one(\"activate\", that._focusInputHandler);\n                    that.wrapper.attr(\"aria-activedescendant\", listView._optionID);\n                    that.popup.open();\n                    that._resizeFilterInput();\n                } else {\n                    that._filterSource();\n                }\n            } else if (that._allowOpening()) {\n                that._focusFilter = true;\n                that.popup.one(\"activate\", that._focusInputHandler);\n                // In some cases when the popup is opened resize is triggered which will cause it to close\n                // Setting the below flag will prevent this from happening\n                that.popup._hovered = true;\n                that.wrapper.attr(\"aria-activedescendant\", listView._optionID);\n                that.popup.open();\n                that._resizeFilterInput();\n                that._focusItem();\n            }\n        },\n\n        close: function() {\n            this._attachAriaActiveDescendant();\n            this.popup.close();\n        },\n\n        _attachAriaActiveDescendant: function() {\n            var wrapper = this.wrapper,\n                inputId = wrapper.find(\".k-input-inner\").attr('id');\n\n            wrapper.attr(\"aria-activedescendant\", inputId);\n        },\n\n        _focusInput: function () {\n            this._focusElement(this.filterInput);\n        },\n\n        _resizeFilterInput: function () {\n            var filterInput = this.filterInput;\n            var originalPrevent = this._prevent;\n\n            if (!filterInput) {\n                return;\n            }\n\n            var isInputActive = this.filterInput[0] === activeElement();\n            var caret = kendo.caret(this.filterInput[0])[0];\n\n            this._prevent = true;\n\n            filterInput.addClass(\"k-hidden\");\n            filterInput.closest(\".k-list-filter\").css(\"width\", this.popup.element.css(\"width\"));\n            filterInput.removeClass(\"k-hidden\");\n\n            if (isInputActive) {\n                filterInput.trigger(\"focus\");\n                kendo.caret(filterInput[0], caret);\n            }\n\n            this._prevent = originalPrevent;\n        },\n\n        _allowOpening: function() {\n            return this.hasOptionLabel() || this.filterInput || Select.fn._allowOpening.call(this);\n        },\n\n        toggle: function(toggle) {\n            this._toggle(toggle, true);\n        },\n\n        current: function(candidate) {\n            var current;\n\n            if (candidate === undefined) {\n                current = this.listView.focus();\n\n                if (!current && this.selectedIndex === 0 && this.hasOptionLabel()) {\n                    return this.optionLabel;\n                }\n\n                return current;\n            }\n\n            this._focus(candidate);\n        },\n\n        dataItem: function(index) {\n            var that = this;\n            var dataItem = null;\n\n            if (index === null) { return index; }\n\n            if (index === undefined) {\n                dataItem = that.listView.selectedDataItems()[0];\n            } else {\n                if (typeof index !== \"number\") {\n                    if (that.options.virtual) {\n                        return that.dataSource.getByUid($(index).data(\"uid\"));\n                    }\n                    if (index.hasClass(\"k-list-optionlabel\")) {\n                        index = -1;\n                    } else {\n                        index = $(that.items()).index(index);\n                    }\n                } else if (that.hasOptionLabel()) {\n                    index -= 1;\n                }\n\n                dataItem = that.dataSource.flatView()[index];\n            }\n\n            if (!dataItem) {\n                dataItem = that._optionLabelDataItem();\n            }\n\n            return dataItem;\n        },\n\n        refresh: function() {\n            this.listView.refresh();\n        },\n\n        text: function (text) {\n            var that = this;\n            var loweredText;\n            var ignoreCase = that.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined) {\n                if (typeof text !== \"string\") {\n                    that._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text.toLowerCase() : text;\n\n                that._select(function(data) {\n                    data = that._text(data);\n\n                    if (ignoreCase) {\n                        data = (data + \"\").toLowerCase();\n                    }\n\n                    return data === loweredText;\n                }).done(function() {\n                    that._textAccessor(that.dataItem() || text);\n                });\n\n            } else {\n                return that._textAccessor();\n            }\n        },\n\n        _clearFilter: function() {\n            $(this.filterInput).val(\"\");\n            Select.fn._clearFilter.call(this);\n        },\n\n        value: function(value) {\n            var that = this;\n            var listView = that.listView;\n            var dataSource = that.dataSource;\n\n            if (value === undefined) {\n                value = that._accessor() || that.listView.value()[0];\n                return value === undefined || value === null ? \"\" : value;\n            }\n\n            that.requireValueMapper(that.options, value);\n\n            if (value || !that.hasOptionLabel()) {\n                that._initialIndex = null;\n            }\n\n            this.trigger(\"set\", { value: value });\n\n            if (that._request && that.options.cascadeFrom && that.listView.bound()) {\n                if (that._valueSetter) {\n                    dataSource.unbind(CHANGE, that._valueSetter);\n                }\n\n                that._valueSetter = proxy(function() { that.value(value); }, that);\n\n                dataSource.one(CHANGE, that._valueSetter);\n                return;\n            }\n\n            if (that._isFilterEnabled() && listView.bound() && listView.isFiltered()) {\n                that._clearFilter();\n            } else {\n                that._fetchData();\n            }\n\n            listView.value(value).done(function() {\n                that._old = that._valueBeforeCascade = that._accessor();\n                that._oldIndex = that.selectedIndex;\n            });\n        },\n\n        hasOptionLabel: function() {\n            return this.optionLabel && !!this.optionLabel[0];\n        },\n\n        _optionLabel: function() {\n            var that = this;\n            var options = that.options;\n            var optionLabel = options.optionLabel;\n            var template = options.optionLabelTemplate;\n\n            if (!optionLabel) {\n                that.optionLabel.off().remove();\n                that.optionLabel = $();\n                return;\n            }\n\n            if (!template) {\n                template = \"#:\";\n\n                if (typeof optionLabel === \"string\") {\n                    template += \"data\";\n                } else {\n                    template += kendo.expr(options.dataTextField, \"data\");\n                }\n\n                template += \"#\";\n            }\n\n            if (typeof template !== \"function\") {\n                template = kendo.template(template);\n            }\n\n            that.optionLabelTemplate = template;\n\n            if (!that.hasOptionLabel()) {\n                that.optionLabel = $('<div class=\"k-list-optionlabel\"></div>').prependTo(that.list);\n            }\n\n            that.optionLabel.html(template(optionLabel))\n                            .off()\n                            .on(CLICKEVENTS, proxy(that._click, that))\n                            .on(HOVEREVENTS, that._toggleHover);\n\n            that.angular(\"compile\", function() {\n                return { elements: that.optionLabel, data: [{ dataItem: that._optionLabelDataItem() }] };\n            });\n        },\n\n        _optionLabelText: function() {\n            var optionLabel = this.options.optionLabel;\n            return (typeof optionLabel === \"string\") ? optionLabel : this._text(optionLabel);\n        },\n\n        _optionLabelDataItem: function() {\n            var that = this;\n            var optionLabel = that.options.optionLabel;\n\n            if (that.hasOptionLabel()) {\n                return $.isPlainObject(optionLabel) ? new ObservableObject(optionLabel) : that._assignInstance(that._optionLabelText(), \"\");\n            }\n\n            return undefined;\n        },\n\n        _buildOptions: function(data) {\n            var that = this;\n            if (!that._isSelect) {\n                return;\n            }\n\n            var value = that.listView.value()[0];\n            var optionLabel = that._optionLabelDataItem();\n            var optionLabelValue = optionLabel && that._value(optionLabel);\n\n            if (value === undefined || value === null) {\n                value = \"\";\n            }\n\n            if (optionLabel) {\n                if (optionLabelValue === undefined || optionLabelValue === null) {\n                    optionLabelValue = \"\";\n                }\n\n                optionLabel = '<option value=\"' + optionLabelValue + '\">' + that._text(optionLabel) + \"</option>\";\n            }\n\n            that._options(data, optionLabel, value);\n\n            if (value !== List.unifyType(that._accessor(), typeof value)) {\n                that._customOption = null;\n                that._custom(value);\n            }\n        },\n\n        _listBound: function() {\n\n            var that = this;\n            var initialIndex = that._initialIndex;\n            var filtered = that._state === STATE_FILTER;\n\n            var data = that.dataSource.flatView();\n            var dataItem;\n\n            that._presetValue = false;\n\n            that._renderFooter();\n            that._renderNoData();\n            that._toggleNoData(!data.length);\n\n            that._resizePopup(true);\n\n            that.popup.position();\n\n            that._buildOptions(data);\n\n            if (!filtered) {\n                if (that._open) {\n                    that.toggle(that._allowOpening());\n                }\n\n                that._open = false;\n\n                if (!that._fetch) {\n                    if (data.length) {\n                        if (!that.listView.value().length && initialIndex > -1 && initialIndex !== null) {\n                            that.select(initialIndex);\n                        }\n\n                        that._initialIndex = null;\n                        dataItem = that.listView.selectedDataItems()[0];\n                        if (dataItem && that.text() !== that._text(dataItem)) {\n                            that._selectValue(dataItem);\n                        }\n                    } else if (that._textAccessor() !== that._optionLabelText()) {\n                        that.listView.value(\"\");\n                        that._selectValue(null);\n                        that._oldIndex = that.selectedIndex;\n                    }\n                }\n            }\n\n            that._hideBusy();\n            that.trigger(\"dataBound\");\n        },\n\n        _listChange: function() {\n            this._selectValue(this.listView.selectedDataItems()[0]);\n\n            if (this._presetValue || (this._old && this._oldIndex === -1)) {\n                this._oldIndex = this.selectedIndex;\n            }\n        },\n\n        _filterPaste: function() {\n            this._search();\n        },\n\n        _attachFocusHandlers: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            wrapper.on(\"focusin\" + nsFocusEvent, proxy(that._focusinHandler, that))\n                   .on(\"focusout\" + nsFocusEvent, proxy(that._focusoutHandler, that));\n            if(that.filterInput) {\n                that.filterInput.on(\"focusin\" + nsFocusEvent, proxy(that._focusinHandler, that))\n                   .on(\"focusout\" + nsFocusEvent, proxy(that._focusoutHandler, that));\n            }\n        },\n\n        _focusHandler: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n            var isIFrame = window.self !== window.top;\n\n            if (!that._prevent) {\n                clearTimeout(that._typingTimeout);\n\n                if (support.mobileOS.ios && isIFrame) {\n                    that._change();\n                } else {\n                    that._blur();\n                }\n\n                that.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that._open = false;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _wrapperMousedown: function() {\n            this._prevent = !!this.filterInput;\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .attr(ARIA_READONLY, false)\n                    .on(\"keydown\" + ns, that, proxy(that._keydown, that))\n                    .on(kendo.support.mousedown + ns, proxy(that._wrapperMousedown, that))\n                    .on(\"paste\" + ns, proxy(that._filterPaste, that));\n\n                that.wrapper.on(\"click\" + ns, proxy(that._wrapperClick, that));\n\n                if (!that.filterInput) {\n                    wrapper.on(\"keypress\" + ns, proxy(that._keypress, that));\n                } else {\n                    wrapper.on(\"input\" + ns, proxy(that._search, that));\n                }\n\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper.addClass(STATEDISABLED);\n            } else {\n                dropDownWrapper.removeClass(STATEDISABLED);\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable)\n                    .attr(ARIA_READONLY, readonly);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isInputActive;\n            var handled;\n\n            var isPopupVisible = that.popup.visible();\n\n            if (that.filterInput) {\n                isInputActive = that.filterInput[0] === activeElement();\n            }\n\n            if (key === keys.LEFT) {\n                key = keys.UP;\n                handled = true;\n            } else if (key === keys.RIGHT) {\n                key = keys.DOWN;\n                handled = true;\n            }\n\n            if (handled && isInputActive) {\n                return;\n            }\n\n            e.keyCode = key;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                that._focusElement(that.wrapper);\n            }\n\n            if (that._state === STATE_FILTER && key === keys.ESC) {\n                that._clearFilter();\n                that._open = false;\n                that._state = STATE_ACCEPT;\n            }\n\n            if (key === keys.ENTER && that._typingTimeout && that.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isInputActive) {\n                that.toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            handled = that._move(e);\n\n            if (handled) {\n                return;\n            }\n\n            if (!isPopupVisible || !that.filterInput) {\n                var current = that._focus();\n\n                if (key === keys.HOME) {\n                    handled = true;\n                    that._firstItem();\n                } else if (key === keys.END) {\n                    handled = true;\n                    that._lastItem();\n                }\n\n                if (handled) {\n                    if (that.trigger(\"select\", { dataItem: that._getElementDataItem(that._focus()), item: that._focus() })) {\n                        that._focus(current);\n                        return;\n                    }\n\n                    that._select(that._focus(), true).done(function() {\n                        if (!isPopupVisible) {\n                            that._blur();\n                        }\n                    });\n                    e.preventDefault();\n                }\n            }\n\n            if (!altKey && !handled && that.filterInput) {\n                that._search();\n            }\n        },\n\n        _matchText: function(text, word) {\n            var ignoreCase = this.options.ignoreCase;\n\n            if (text === undefined || text === null) {\n                return false;\n            }\n\n            text = text + \"\";\n\n            if (ignoreCase) {\n                text = text.toLowerCase();\n            }\n\n            return text.indexOf(word) === 0;\n        },\n\n        _shuffleData: function(data, splitIndex) {\n            var optionDataItem = this._optionLabelDataItem();\n\n            if (optionDataItem) {\n                data = [optionDataItem].concat(data);\n            }\n\n            return data.slice(splitIndex).concat(data.slice(0, splitIndex));\n        },\n\n        _selectNext: function() {\n            var that = this;\n            var data = that.dataSource.flatView();\n            var dataLength = data.length + (that.hasOptionLabel() ? 1 : 0);\n            var isInLoop = sameCharsOnly(that._word, that._last);\n            var startIndex = that.selectedIndex;\n            var oldFocusedItem;\n            var text;\n\n            if (startIndex === -1) {\n                startIndex = 0;\n            } else {\n                startIndex += isInLoop ? 1 : 0;\n                startIndex = normalizeIndex(startIndex, dataLength);\n            }\n\n            data = data.toJSON ? data.toJSON() : data.slice();\n            data = that._shuffleData(data, startIndex);\n\n            for (var idx = 0; idx < dataLength; idx++) {\n                text = that._text(data[idx]);\n\n                if (isInLoop && that._matchText(text, that._last)) {\n                    break;\n                } else if (that._matchText(text, that._word)) {\n                    break;\n                }\n            }\n\n            if (idx !== dataLength) {\n                oldFocusedItem = that._focus();\n\n                that._select(normalizeIndex(startIndex + idx, dataLength)).done(function() {\n                    var done = function() {\n                        if (!that.popup.visible()) {\n                            that._change();\n                        }\n                    };\n\n                    if (that.trigger(\"select\", { dataItem: that._getElementDataItem(that._focus()), item: that._focus() })) {\n                        that._select(oldFocusedItem).done(done);\n                    } else {\n                        done();\n                    }\n                });\n            }\n        },\n\n        _keypress: function(e) {\n            var that = this;\n\n            if (e.which === 0 || e.keyCode === kendo.keys.ENTER) {\n                return;\n            }\n\n            var character = String.fromCharCode(e.charCode || e.keyCode);\n\n            if (that.options.ignoreCase) {\n                character = character.toLowerCase();\n            }\n\n            if (character === \" \") {\n                e.preventDefault();\n            }\n\n            that._word += character;\n            that._last = character;\n\n            that._search();\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n\n            popup.wrapper = kendo.wrap(popup.element);\n\n            if (popup.element.closest(\".km-root\")[0]) {\n                popup.wrapper.addClass(\"km-popup km-widget\");\n                this.wrapper.addClass(\"km-widget\");\n            }\n        },\n\n        _popup: function() {\n            Select.fn._popup.call(this);\n            this.popup.one(\"open\", proxy(this._popupOpen, this));\n        },\n\n        _getElementDataItem: function(element) {\n            if (!element || !element[0]) {\n                return null;\n            }\n\n            if (element[0] === this.optionLabel[0]) {\n                return this._optionLabelDataItem();\n            }\n\n            return this.listView.dataItemByIndex(this.listView.getElementIndex(element));\n        },\n\n        _click: function (e) {\n            var that = this;\n            var item = e.item || $(e.currentTarget);\n\n            e.preventDefault();\n\n            if (that.trigger(\"select\", { dataItem: that._getElementDataItem(item), item: item })) {\n                that.close();\n                return;\n            }\n\n            that._userTriggered = true;\n\n            that._select(item).done(function() {\n                that._blur();\n                that._focusElement(that.wrapper);\n            });\n        },\n\n        _focusElement: function(element) {\n            var active = activeElement();\n            var wrapper = this.wrapper;\n            var filterInput = this.filterInput;\n            var compareElement = element === filterInput ? wrapper : filterInput;\n            var touchEnabled = support.mobileOS && (support.touch || support.MSPointers || support.pointers);\n\n            if (filterInput && filterInput[0] === element[0] && touchEnabled) {\n                return;\n            }\n\n            if (filterInput && (compareElement[0] === active || this._focusFilter)) {\n                this._focusFilter = false;\n                this._prevent = true;\n                this._focused = element.trigger(\"focus\");\n            }\n        },\n\n        _searchByWord: function(word) {\n            if (!word) {\n                return;\n            }\n\n            var that = this;\n            var ignoreCase = that.options.ignoreCase;\n\n            if (ignoreCase) {\n                word = word.toLowerCase();\n            }\n\n            that._select(function(dataItem) {\n                return that._matchText(that._text(dataItem), word);\n            });\n        },\n\n        _inputValue: function() {\n            return this.text();\n        },\n\n        _search: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n\n            clearTimeout(that._typingTimeout);\n\n            if (that._isFilterEnabled()) {\n                that._typingTimeout = setTimeout(function() {\n                    var value = that.filterInput.val();\n\n                    if (that._prev !== value) {\n                        that._prev = value;\n                        that.search(value);\n                        that._resizeFilterInput();\n                    }\n\n                    that._typingTimeout = null;\n                }, that.options.delay);\n            } else {\n                that._typingTimeout = setTimeout(function() {\n                    that._word = \"\";\n                }, that.options.delay);\n\n                if (!that.listView.bound()) {\n                    dataSource.fetch().done(function () {\n                        that._selectNext();\n                    });\n                    return;\n                }\n\n                that._selectNext();\n            }\n        },\n\n        _get: function(candidate) {\n            var data, found, idx;\n            var isFunction = typeof candidate === \"function\";\n            var jQueryCandidate = !isFunction ? $(candidate) : $();\n\n            if (this.hasOptionLabel()) {\n                if (typeof candidate === \"number\") {\n                    if (candidate > -1) {\n                        candidate -= 1;\n                    }\n                } else if (jQueryCandidate.hasClass(\"k-list-optionlabel\")) {\n                    candidate = -1;\n                }\n            }\n\n            if (isFunction) {\n                data = this.dataSource.flatView();\n\n                for (idx = 0; idx < data.length; idx++) {\n                    if (candidate(data[idx])) {\n                        candidate = idx;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    candidate = -1;\n                }\n            }\n\n            return candidate;\n        },\n\n        _firstItem: function() {\n            if (this.hasOptionLabel()) {\n                this._focus(this.optionLabel);\n            } else {\n                this.listView.focusFirst();\n            }\n        },\n\n        _lastItem: function() {\n            this._resetOptionLabel();\n            this.listView.focusLast();\n        },\n\n        _nextItem: function() {\n            var focusIndex;\n\n            if (this.optionLabel.hasClass(\"k-focus\")) {\n                this._resetOptionLabel();\n                this.listView.focusFirst();\n                focusIndex = 1;\n            } else {\n                focusIndex = this.listView.focusNext();\n            }\n\n            return focusIndex;\n        },\n\n        _prevItem: function() {\n            var focusIndex;\n\n            if (this.optionLabel.hasClass(\"k-focus\")) {\n                return;\n            }\n\n            focusIndex = this.listView.focusPrev();\n\n            if (!this.listView.focus() && !this.options.virtual) {\n                this._focus(this.optionLabel);\n            }\n\n            return focusIndex;\n        },\n\n        _focusItem: function() {\n            var options = this.options;\n            var listView = this.listView;\n            var focusedItem = listView.focus();\n            var index = listView.select();\n\n            index = index[index.length - 1];\n\n            if (index === undefined && options.highlightFirst && !focusedItem) {\n                index = 0;\n            }\n\n            if (index !== undefined) {\n                listView.focus(index);\n            } else {\n                if (options.optionLabel && (!options.virtual || options.virtual.mapValueTo !== \"dataItem\")) {\n                    this._focus(this.optionLabel);\n                    this._select(this.optionLabel);\n                    this.listView.content.scrollTop(0);\n                } else {\n                    listView.scrollToIndex(0);\n                }\n            }\n        },\n\n        _resetOptionLabel: function(additionalClass) {\n            this.optionLabel.removeClass(\"k-focus\" + (additionalClass || \"\")).removeAttr(\"id\");\n        },\n\n        _focus: function(candidate) {\n            var listView = this.listView;\n            var optionLabel = this.optionLabel;\n\n            if (candidate === undefined) {\n                candidate = listView.focus();\n\n                if (!candidate && optionLabel.hasClass(\"k-focus\")) {\n                    candidate = optionLabel;\n                }\n\n                return candidate;\n            }\n\n            this._resetOptionLabel();\n\n            candidate = this._get(candidate);\n\n            listView.focus(candidate);\n\n            if (candidate === -1) {\n                optionLabel.addClass(\"k-focus\")\n                           .attr(\"id\", listView._optionID);\n\n                this._focused.add(this.filterInput)\n                    .removeAttr(\"aria-activedescendant\")\n                    .attr(\"aria-activedescendant\", listView._optionID);\n            }\n        },\n\n        _select: function(candidate, keepState) {\n            var that = this;\n\n            candidate = that._get(candidate);\n\n            return that.listView.select(candidate).done(function() {\n                if (!keepState && that._state === STATE_FILTER) {\n                    that._state = STATE_ACCEPT;\n                }\n\n                if (candidate === -1) {\n                    that._selectValue(null);\n                }\n            });\n        },\n\n        _selectValue: function(dataItem) {\n            var that = this;\n            var optionLabel = that.options.optionLabel;\n            var idx = that.listView.select();\n\n            var value = \"\";\n            var text = \"\";\n\n            idx = idx[idx.length - 1];\n            if (idx === undefined) {\n                idx = -1;\n            }\n\n            this._resetOptionLabel(\" k-selected\");\n\n            if (dataItem || dataItem === 0) {\n                text = dataItem;\n                value = that._dataValue(dataItem);\n                if (optionLabel) {\n                    idx += 1;\n                }\n            } else if (optionLabel) {\n                that._focus(that.optionLabel.addClass(\"k-selected\"));\n\n                text = that._optionLabelText();\n\n                if (typeof optionLabel === \"string\") {\n                    value = \"\";\n                } else {\n                    value = that._value(optionLabel);\n                }\n\n                idx = 0;\n            }\n\n            that.selectedIndex = idx;\n\n            if (value === null) {\n                value = \"\";\n            }\n\n            that._textAccessor(text);\n            that._accessor(value, idx);\n\n            that._triggerCascade();\n        },\n\n        _mobile: function() {\n            var that = this,\n                popup = that.popup,\n                mobileOS = support.mobileOS,\n                root = popup.element.parents(\".km-root\").eq(0);\n\n            if (root.length && mobileOS) {\n                popup.options.animation.open.effects = (mobileOS.android || mobileOS.meego) ? \"fadeIn\" : (mobileOS.ios || mobileOS.wp) ? \"slideIn:up\" : popup.options.animation.open.effects;\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-searchbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    '<span class=\"k-input-icon k-icon k-i-search\"></span>' +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .closest(\".k-list-filter\")\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.options.filterTitle || this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-label\": this.options.filterTitle,\n                        \"aria-haspopup\": \"listbox\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.list\n                    .parent()\n                    .prepend($(filterTemplate))\n                    .find(\".k-searchbox\")\n                    .append(this.filterInput);\n            }\n        },\n\n        _span: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                id = kendo.guid(),\n                options = that.options,\n                span, arrowBtn;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                arrowBtn = html.renderButton('<button type=\"button\" tabindex=\"-1\" unselectable=\"on\" class=\"k-select k-input-button\" aria-label=\"select\"></button>', {\n                    icon: \"arrow-s\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null\n                });\n\n                wrapper.append('<span id=\"' + id + '\" unselectable=\"on\" role=\"option\" aria-selected=\"true\" class=\"k-input-inner\">' +\n                            '<span class=\"k-input-value-text\"></span>' +\n                        '</span>')\n                    .append(arrowBtn)\n                    .append(that.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            that.span = span;\n            that._arrow = wrapper.find(\".k-select\");\n            that._arrowIcon = that._arrow.find(\".k-icon\");\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-picker\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            that._focused = that.wrapper = wrapper\n                .addClass(\"k-picker k-dropdown k-widget\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\",\n                    role: \"listbox\",\n                    \"aria-haspopup\": \"listbox\",\n                    \"aria-expanded\": false\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _clearSelection: function(parent) {\n            this.select(parent.value() ? 0 : -1);\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                this.wrapper.attr(\"aria-expanded\", true);\n                this.ul.attr(\"aria-hidden\", false);\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                this.wrapper.attr(\"aria-expanded\", false);\n                this.ul.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _inputTemplate: function() {\n            var that = this,\n                template = that.options.valueTemplate;\n\n\n            if (!template) {\n                template = $.proxy(kendo.template('#:this._text(data)#', { useWithBlock: false }), that);\n            } else {\n                template = kendo.template(template);\n            }\n\n            that.valueTemplate = template;\n\n            if (that.hasOptionLabel() && !that.options.optionLabelTemplate) {\n                try {\n                    that.valueTemplate(that._optionLabelDataItem());\n                } catch(e) {\n                    throw new Error(MSG_INVALID_OPTION_LABEL);\n                }\n            }\n        },\n\n        _textAccessor: function(text) {\n            var dataItem = null;\n            var template = this.valueTemplate;\n            var optionLabelText = this._optionLabelText();\n            var span = this.span;\n\n            if (text === undefined) {\n                return span.text();\n            }\n\n            if ($.isPlainObject(text) || text instanceof ObservableObject) {\n                dataItem = text;\n            } else if (optionLabelText && optionLabelText === text) {\n                dataItem = this.options.optionLabel;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            if (this.hasOptionLabel()) {\n                if (dataItem === optionLabelText || this._text(dataItem) === optionLabelText) {\n                    template = this.optionLabelTemplate;\n\n                    if (typeof this.options.optionLabel === \"string\" && !this.options.optionLabelTemplate) {\n                        dataItem = optionLabelText;\n                    }\n                }\n            }\n\n            var getElements = function(){\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            this.angular(\"cleanup\", getElements);\n\n            try {\n                span.html(template(dataItem));\n            } catch(e) {\n                //dataItem has missing fields required in custom template\n                span.html(\"\");\n            }\n\n            this.angular(\"compile\", getElements);\n        },\n\n        _preselect: function(value, text) {\n            if (!value && !text) {\n                text = this._optionLabelText();\n            }\n\n            this._accessor(value);\n            this._textAccessor(text);\n\n            this._old = this._accessor();\n            this._oldIndex = this.selectedIndex;\n\n            this.listView.setValue(value);\n\n            this._initialIndex = null;\n            this._presetValue = true;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(\".\"), text);\n                assign(dataItem, this.options.dataValueField.split(\".\"), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    function normalizeIndex(index, length) {\n        if (index >= length) {\n            index -= length;\n        }\n        return index;\n    }\n\n    function sameCharsOnly(word, character) {\n        for (var idx = 0; idx < word.length; idx++) {\n            if (word.charAt(idx) !== character) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    ui.plugin(DropDownList);\n\n    kendo.cssProperties.registerPrefix(\"DropDownList\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownList\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\r\n    define('kendo.resizable',[ \"./kendo.core\", \"./kendo.draganddrop\" ], f);\r\n})(function(){\r\n\r\nvar __meta__ = { // jshint ignore:line\r\n    id: \"resizable\",\r\n    name: \"Resizable\",\r\n    category: \"framework\",\r\n    depends: [ \"core\", \"draganddrop\" ],\r\n    advanced: true\r\n};\r\n\r\n(function($, undefined) {\r\n    var kendo = window.kendo,\r\n        ui = kendo.ui,\r\n        Widget = ui.Widget,\r\n        proxy = $.proxy,\r\n        isFunction = kendo.isFunction,\r\n        extend = $.extend,\r\n        HORIZONTAL = \"horizontal\",\r\n        VERTICAL = \"vertical\",\r\n        START = \"start\",\r\n        RESIZE = \"resize\",\r\n        RESIZEEND = \"resizeend\";\r\n\r\n    var Resizable = Widget.extend({\r\n        init: function(element, options) {\r\n            var that = this;\r\n\r\n            Widget.fn.init.call(that, element, options);\r\n\r\n            that.orientation = that.options.orientation.toLowerCase() != VERTICAL ? HORIZONTAL : VERTICAL;\r\n            that._positionMouse = that.orientation == HORIZONTAL ? \"x\" : \"y\";\r\n            that._position = that.orientation == HORIZONTAL ? \"left\" : \"top\";\r\n            that._sizingDom = that.orientation == HORIZONTAL ? \"outerWidth\" : \"outerHeight\";\r\n\r\n            that.draggable = new ui.Draggable(options.draggableElement || element, {\r\n                distance: 1,\r\n                filter: options.handle,\r\n                drag: proxy(that._resize, that),\r\n                dragcancel: proxy(that._cancel, that),\r\n                dragstart: proxy(that._start, that),\r\n                dragend: proxy(that._stop, that)\r\n            });\r\n\r\n            that.userEvents = that.draggable.userEvents;\r\n        },\r\n\r\n        events: [\r\n            RESIZE,\r\n            RESIZEEND,\r\n            START\r\n        ],\r\n\r\n        options: {\r\n            name: \"Resizable\",\r\n            orientation: HORIZONTAL\r\n        },\r\n\r\n        resize: function() {\r\n            // Overrides base widget resize\r\n        },\r\n\r\n        _max: function(e) {\r\n            var that = this,\r\n                hintSize = that.hint ? that.hint[that._sizingDom]() : 0,\r\n                size = that.options.max;\r\n\r\n            return isFunction(size) ? size(e) : size !== undefined ? (that._initialElementPosition + size) - hintSize : size;\r\n        },\r\n\r\n        _min: function(e) {\r\n            var that = this,\r\n                size = that.options.min;\r\n\r\n            return isFunction(size) ? size(e) : size !== undefined ? that._initialElementPosition + size : size;\r\n        },\r\n\r\n        _start: function(e) {\r\n            var that = this,\r\n                hint = that.options.hint,\r\n                el = $(e.currentTarget);\r\n\r\n            that._initialElementPosition = el.position()[that._position];\r\n            that._initialMousePosition = e[that._positionMouse].startLocation;\r\n\r\n            if (hint) {\r\n                that.hint = isFunction(hint) ? $(hint(el)) : hint;\r\n\r\n                that.hint.css({\r\n                    position: \"absolute\"\r\n                })\r\n                .css(that._position, that._initialElementPosition)\r\n                .appendTo(that.element);\r\n            }\r\n\r\n            that.trigger(START, e);\r\n\r\n            that._maxPosition = that._max(e);\r\n            that._minPosition = that._min(e);\r\n\r\n            $(document.body).css(\"cursor\", el.css(\"cursor\"));\r\n        },\r\n\r\n        _resize: function(e) {\r\n            var that = this,\r\n                maxPosition = that._maxPosition,\r\n                minPosition = that._minPosition,\r\n                currentPosition = that._initialElementPosition + (e[that._positionMouse].location - that._initialMousePosition),\r\n                position;\r\n\r\n            position = minPosition !== undefined ? Math.max(minPosition, currentPosition) : currentPosition;\r\n            that.position = position =  maxPosition !== undefined ? Math.min(maxPosition, position) : position;\r\n\r\n            if(that.hint) {\r\n                that.hint.toggleClass(that.options.invalidClass || \"\", position == maxPosition || position == minPosition)\r\n                         .css(that._position, position);\r\n            }\r\n\r\n            that.resizing = true;\r\n            that.trigger(RESIZE, extend(e, { position: position }));\r\n        },\r\n\r\n        _stop: function(e) {\r\n            var that = this;\r\n\r\n            if(that.hint) {\r\n                that.hint.remove();\r\n            }\r\n\r\n            that.resizing = false;\r\n            that.trigger(RESIZEEND, extend(e, { position: that.position }));\r\n            $(document.body).css(\"cursor\", \"\");\r\n        },\r\n\r\n        _cancel: function(e) {\r\n            var that = this;\r\n\r\n            if (that.hint) {\r\n                that.position = undefined;\r\n                that.hint.css(that._position, that._initialElementPosition);\r\n                that._stop(e);\r\n            }\r\n        },\r\n\r\n        destroy: function() {\r\n            var that = this;\r\n\r\n            Widget.fn.destroy.call(that);\r\n\r\n            if (that.draggable) {\r\n                that.draggable.destroy();\r\n            }\r\n        },\r\n\r\n        press: function(target) {\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            var position = target.position(),\r\n                that = this;\r\n\r\n            that.userEvents.press(position.left, position.top, target[0]);\r\n            that.targetPosition = position;\r\n            that.target = target;\r\n        },\r\n\r\n        move: function(delta) {\r\n            var that = this,\r\n                orientation = that._position,\r\n                position = that.targetPosition,\r\n                current = that.position;\r\n\r\n            if (current === undefined) {\r\n                current = position[orientation];\r\n            }\r\n\r\n            position[orientation] = current + delta;\r\n\r\n            that.userEvents.move(position.left, position.top);\r\n        },\r\n\r\n        end: function() {\r\n            this.userEvents.end();\r\n            this.target = this.position = undefined;\r\n        }\r\n    });\r\n\r\n    kendo.ui.plugin(Resizable);\r\n\r\n})(window.kendo.jQuery);\r\n\r\nreturn window.kendo;\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.window',[ \"./kendo.draganddrop\", \"./kendo.popup\"], f);\n})(function(){\n\n    var __meta__ = { // jshint ignore:line\n        id: \"window\",\n        name: \"Window\",\n        category: \"web\",\n        description: \"The Window widget displays content in a modal or non-modal HTML window.\",\n        depends: [ \"draganddrop\", \"popup\" ],\n        features: [ {\n            id: \"window-fx\",\n            name: \"Animation\",\n            description: \"Support for animation\",\n            depends: [ \"fx\" ]\n        } ]\n    };\n\n    (function($, undefined) {\n        var kendo = window.kendo,\n            Widget = kendo.ui.Widget,\n            TabKeyTrap = kendo.ui.Popup.TabKeyTrap,\n            Draggable = kendo.ui.Draggable,\n            isPlainObject = $.isPlainObject,\n            activeElement = kendo._activeElement,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            proxy = $.proxy,\n            extend = $.extend,\n            each = $.each,\n            template = kendo.template,\n            BODY = \"body\",\n            templates,\n            NS = \".kendoWindow\",\n            MODAL_NS = \".kendoWindowModal\",\n            // classNames\n            KWINDOW = \".k-window\",\n            KWINDOWTITLE = \".k-window-title\",\n            KWINDOWTITLEBAR = KWINDOWTITLE + \"bar\",\n            KWINDOWCONTENT = \".k-window-content\",\n            KDIALOGCONTENT = \".k-dialog-content\",\n            KWINDOWRESIZEHANDLES = \".k-resize-handle\",\n            KOVERLAY = \".k-overlay\",\n            KCONTENTFRAME = \"k-content-frame\",\n            LOADING = \"k-i-loading\",\n            KHOVERSTATE = \"k-hover\",\n            KFOCUSEDSTATE = \"k-state-focused\",\n            MAXIMIZEDSTATE = \"k-window-maximized\",\n            INLINE_FLEX = \"k-display-inline-flex\",\n            // constants\n            VISIBLE = \":visible\",\n            HIDDEN = \"hidden\",\n            CURSOR = \"cursor\",\n            // events\n            OPEN = \"open\",\n            ACTIVATE = \"activate\",\n            DEACTIVATE = \"deactivate\",\n            CLOSE = \"close\",\n            REFRESH = \"refresh\",\n            MINIMIZE = \"minimize\",\n            MAXIMIZE = \"maximize\",\n            RESIZESTART = \"resizeStart\",\n            RESIZE = \"resize\",\n            RESIZEEND = \"resizeEnd\",\n            DRAGSTART = \"dragstart\",\n            DRAGEND = \"dragend\",\n            RESTORE = \"restore\",\n            KENDOKEYDOWN = \"kendoKeydown\",\n            ERROR = \"error\",\n            OVERFLOW = \"overflow\",\n            DATADOCOVERFLOWRULE = \"original-overflow-rule\",\n            ZINDEX = \"zIndex\",\n            MINIMIZE_MAXIMIZE = \".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize\",\n            KPIN = \".k-i-pin\",\n            KUNPIN = \".k-i-unpin\",\n            PIN_UNPIN = KPIN + \",\" + KUNPIN,\n            TITLEBAR_BUTTONS = \".k-window-titlebar .k-window-action\",\n            REFRESHICON = \".k-window-titlebar .k-i-refresh\",\n            WINDOWEVENTSHANDLED = \"WindowEventsHandled\",\n            zero = /^0[a-z]*$/i,\n            isLocalUrl = kendo.isLocalUrl,\n            SIZE = {\n                small: \"k-window-sm\",\n                medium: \"k-window-md\",\n                large: \"k-window-lg\"\n            };\n\n        function defined(x) {\n            return (typeof x != \"undefined\");\n        }\n\n        function toInt(element, property) {\n            return parseInt(element.css(property), 10) || 0;\n        }\n\n        function constrain(value, low, high) {\n            var normalizedValue;\n\n            if (value && isNaN(value) && value.toString().indexOf(\"px\") < 0) {\n                normalizedValue = value;\n            } else {\n                normalizedValue = Math.max(\n                    Math.min(parseInt(value, 10), high === Infinity ? high : parseInt(high, 10)),\n                    low === -Infinity ? low : parseInt(low, 10)\n                );\n            }\n\n            return normalizedValue;\n        }\n\n        function executableScript() {\n            return !this.type || this.type.toLowerCase().indexOf(\"script\") >= 0;\n        }\n\n\n        function getPosition(elem) {\n            var result = { top: elem.offsetTop, left: elem.offsetLeft },\n                parent = elem.offsetParent;\n\n            while (parent) {\n                result.top += parent.offsetTop;\n                result.left += parent.offsetLeft;\n\n                var parentOverflowX = $(parent).css(\"overflowX\");\n                var parentOverflowY = $(parent).css(\"overflowY\");\n\n                if (parentOverflowY === \"auto\" || parentOverflowY === \"scroll\") {\n                    result.top -= parent.scrollTop;\n                }\n\n                if (parentOverflowX === \"auto\" || parentOverflowX === \"scroll\") {\n                    result.left -= parent.scrollLeft;\n                }\n\n                parent = parent.offsetParent;\n            }\n\n            return result;\n        }\n\n        var Window = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    wrapper,\n                    offset = {},\n                    visibility, display, position,\n                    isVisible = false,\n                    content,\n                    windowContent,\n                    windowFrame,\n                    globalWindow,\n                    suppressActions = options && options.actions && !options.actions.length,\n                    id;\n\n                Widget.fn.init.call(that, element, options);\n                options = that.options;\n                position = options.position;\n                element = that.element;\n                content = options.content;\n                globalWindow = $(window);\n\n                if (suppressActions) {\n                    options.actions = [];\n                }\n\n                that.appendTo = $(options.appendTo);\n\n                that.containment = options.draggable.containment ? $(options.draggable.containment).first() : null;\n\n                if (content && !isPlainObject(content)) {\n                    content = options.content = { url: content };\n                }\n\n                // remove script blocks to prevent double-execution\n                element.find(\"script\").filter(executableScript).remove();\n\n                if (!element.parent().is(that.appendTo) && !that.containment && (position.top === undefined || position.left === undefined)) {\n                    if (element.is(VISIBLE)) {\n                        offset = element.offset();\n                        isVisible = true;\n                    } else {\n                        visibility = element.css(\"visibility\");\n                        display = element.css(\"display\");\n\n                        element.css({ visibility: HIDDEN, display: \"\" });\n\n                        if (document.body.contains(element[0])) {\n                            offset = element.offset();\n                        } else {\n                            offset = { top: 0, left: 0 };\n                        }\n\n                        element.css({ visibility: visibility, display: display });\n                    }\n\n                    if (position.top === undefined) {\n                        position.top = offset.top;\n                    }\n                    if (position.left === undefined) {\n                        position.left = offset.left;\n                    }\n                }\n\n                if (!defined(options.visible) || options.visible === null) {\n                    options.visible = element.is(VISIBLE);\n                }\n\n                wrapper = that.wrapper = element.closest(KWINDOW);\n\n                if (!element.is(\".k-window-content\") || !wrapper[0]) {\n                    element.addClass(\"k-window-content\");\n                    that._createWindow(element, options);\n                    wrapper = that.wrapper = element.closest(KWINDOW);\n\n                    that.title(that.options.title);\n                    that._dimensions();\n                }\n\n                that.minTop = that.minLeft = -Infinity;\n                that.maxTop = that.maxLeft = Infinity;\n                that._position();\n\n                if (content) {\n                    that.refresh(content);\n                }\n\n                if (options.visible) {\n                    that.toFront(null, !options.modal);\n                }\n\n                windowContent = wrapper.children(KWINDOWCONTENT);\n\n                if (options.visible && options.modal) {\n                    that._overlay(wrapper.is(VISIBLE)).css({ opacity: 0.5 });\n                }\n\n                wrapper\n                    .on(\"mouseenter\" + NS, TITLEBAR_BUTTONS, proxy(that._buttonEnter, that))\n                    .on(\"mouseleave\" + NS, TITLEBAR_BUTTONS, proxy(that._buttonLeave, that))\n                    .on(\"click\" + NS, \"> \" + TITLEBAR_BUTTONS, proxy(that._windowActionHandler, that))\n                    .on(\"keydown\" + NS, that, proxy(that._keydown, that))\n                    .on(\"focus\" + NS, proxy(that._focus, that))\n                    .on(\"blur\" + NS, proxy(that._blur, that));\n\n                windowContent\n                    .on(\"keydown\" + NS, that, proxy(that._keydownContent, that));\n\n                windowFrame = windowContent.find(\".\" + KCONTENTFRAME)[0];\n\n                if(windowFrame && !globalWindow.data(WINDOWEVENTSHANDLED)){\n\n                    globalWindow.on(\"blur\" + NS, function(){\n                        var element = $(document.activeElement).parent(KWINDOWCONTENT);\n                        if (element.length) {\n                            var windowInstance = kendo.widgetInstance(element);\n                            windowInstance._focus();\n                        }\n                    });\n\n                    globalWindow.on(\"focus\" + NS, function(){\n                        $(KWINDOWCONTENT).not(KDIALOGCONTENT).each(function(i, element){\n                            kendo.widgetInstance($(element))._blur();\n                        });\n                    });\n\n                    globalWindow.data(WINDOWEVENTSHANDLED, true);\n                }\n\n                this._resizable();\n\n                this._draggable();\n\n                if (options.pinned && this.wrapper.is(\":visible\")) {\n                    that.pin();\n                }\n\n                id = element.attr(\"id\");\n                if (id) {\n                    id = id + \"_wnd_title\";\n                    wrapper.attr({\n                            \"role\": \"dialog\",\n                            \"aria-labelledby\": id\n                        }).children(KWINDOWTITLEBAR)\n                        .children(KWINDOWTITLE)\n                        .attr(\"id\", id);\n                }\n\n                wrapper.add(wrapper.children(\".k-resize-handle,\" + KWINDOWTITLEBAR))\n                    .on(kendo.support.mousedown + NS, proxy(that.toFront, that));\n\n                that.touchScroller = kendo.touchScroller(element);\n\n                that._resizeHandler = proxy(that._onDocumentResize, that);\n\n                that._marker = kendo.guid().substring(0, 8);\n\n                $(window).on(\"resize\" + NS + that._marker, that._resizeHandler);\n\n                if (options.visible) {\n                    that.trigger(OPEN);\n                    that.trigger(ACTIVATE);\n                }\n\n                kendo.notify(that);\n\n                if(this.options.modal) {\n                    this._tabKeyTrap = new TabKeyTrap(wrapper);\n                    this._tabKeyTrap.trap();\n                    this._tabKeyTrap.shouldTrap = function () {\n                        return wrapper.data(\"isFront\");\n                    };\n                }\n            },\n\n            _buttonEnter: function(e) {\n                $(e.currentTarget).addClass(KHOVERSTATE);\n            },\n\n            _buttonLeave: function(e) {\n                $(e.currentTarget).removeClass(KHOVERSTATE);\n            },\n\n            _focus: function() {\n                this.wrapper.addClass(KFOCUSEDSTATE);\n            },\n\n            _blur: function() {\n                this.wrapper.removeClass(KFOCUSEDSTATE);\n            },\n\n            _dimensions: function() {\n                var wrapper = this.wrapper;\n                var options = this.options;\n                var width = options.width;\n                var height = options.height;\n                var maxHeight = options.maxHeight;\n                var sizeClass = options.size;\n                var dimensions = [\"minWidth\",\"minHeight\",\"maxWidth\",\"maxHeight\"];\n                var contentBoxSizing = wrapper.css(\"box-sizing\") == \"content-box\";\n\n                var lrBorderWidth = contentBoxSizing ? toInt(wrapper, \"border-left-width\") + toInt(wrapper, \"border-right-width\") : 0;\n                var tbBorderWidth = contentBoxSizing ? toInt(wrapper, \"border-top-width\") + toInt(wrapper, \"border-bottom-width\") : 0;\n                var paddingTop = contentBoxSizing ? toInt(wrapper, \"padding-top\") : 0;\n\n                if (this.containment && !this._isPinned) {\n                    this._updateBoundaries();\n                    options.maxHeight = Math.min(this.containment.height - (tbBorderWidth + paddingTop), maxHeight);\n                    options.maxWidth = Math.min(this.containment.width - lrBorderWidth, options.maxWidth);\n                }\n\n                for (var i = 0; i < dimensions.length; i++) {\n                    var value = options[dimensions[i]] || \"\";\n                    if (value != Infinity) {\n                        wrapper.css(dimensions[i], value);\n                    }\n                }\n\n                if (maxHeight != Infinity) {\n                    this.element.css(\"maxHeight\", maxHeight);\n                }\n\n                if (width) {\n                    wrapper.outerWidth(constrain(width, options.minWidth, options.maxWidth));\n                }\n                else {\n                    wrapper.outerWidth(\"\");\n                }\n\n                if (height) {\n                    wrapper.outerHeight(constrain(height, options.minHeight, options.maxHeight));\n                }\n                else {\n                    wrapper.outerHeight(\"\");\n                }\n\n                if (!options.visible) {\n                    wrapper.removeClass(INLINE_FLEX).hide();\n                }\n\n                if (sizeClass && SIZE[sizeClass]) {\n                    wrapper.addClass(SIZE[sizeClass]);\n                }\n            },\n\n            _position: function() {\n                var wrapper = this.wrapper,\n                    position = this.options.position,\n                    containmentTop, containmentLeft;\n\n                this._updateBoundaries();\n\n                if (this.containment) {\n                    position.top = position.top || 0;\n                    position.left = position.left || 0;\n\n                    containmentTop = position.top.toString().indexOf(\"%\") > 0 ?\n                        parseInt(this.containment.height * (parseFloat(position.top) / 100), 10) :\n                        position.top;\n\n                    containmentLeft = position.left.toString().indexOf(\"%\") > 0 ?\n                        parseInt(this.containment.width * (parseFloat(position.left) / 100), 10) :\n                        position.left;\n\n                    position.top = constrain(containmentTop, this.minTop, this.maxTop);\n                    position.left = constrain(containmentLeft, this.minLeft, this.maxLeft);\n                }\n\n                if (position.top && position.top.toString().indexOf(\"px\") > 0) {\n                    position.top = Number(position.top.replace(\"px\", \"\"));\n                }\n\n                if (position.left && position.left.toString().indexOf(\"px\") > 0) {\n                    position.left = Number(position.left.replace(\"px\", \"\"));\n                }\n\n                if (position.top === 0) {\n                    position.top = position.top.toString();\n                }\n\n                if (position.left === 0) {\n                    position.left = position.left.toString();\n                }\n\n                wrapper.css({\n                    top: position.top || \"\",\n                    left: position.left || \"\"\n                });\n            },\n\n            _updateBoundaries: function() {\n                var containment = this.containment;\n\n                if (!containment) {\n                    return null;\n                }\n\n                containment.width = containment.innerWidth();\n                containment.height = containment.innerHeight();\n\n                if (parseInt(containment.width, 10) > containment[0].clientWidth) {\n                    containment.width -= kendo.support.scrollbar();\n                }\n\n                if (parseInt(containment.height, 10) > containment[0].clientHeight) {\n                    containment.height -= kendo.support.scrollbar();\n                }\n\n                containment.position = getPosition(containment[0]);\n\n                if (this._isPinned) {\n                    this.minTop = this.minLeft = -Infinity;\n                    this.maxTop = this.maxLeft = Infinity;\n                } else {\n                    this.minTop = containment.scrollTop();\n                    this.minLeft = containment.scrollLeft();\n                    this.maxLeft = this.minLeft + containment.width - outerWidth(this.wrapper, true);\n                    this.maxTop = this.minTop + containment.height - outerHeight(this.wrapper, true);\n                }\n            },\n\n            _animationOptions: function(id) {\n                var animation = this.options.animation;\n                var basicAnimation = {\n                    open: { effects: {} },\n                    close: { hide: true, effects: {} }\n                };\n\n                return animation && animation[id] || basicAnimation[id];\n            },\n\n            _resize: function() {\n                kendo.resize(this.element.children());\n            },\n\n            _resizable: function() {\n                var resizable = this.options.resizable;\n                var wrapper = this.wrapper;\n\n                if (this.resizing) {\n                    wrapper\n                        .off(\"dblclick\" + NS)\n                        .children(KWINDOWRESIZEHANDLES).remove();\n\n                    this.resizing.destroy();\n                    this.resizing = null;\n                }\n\n                if (resizable) {\n                    wrapper.on(\"dblclick\" + NS, KWINDOWTITLEBAR, proxy(function(e) {\n                        if (!$(e.target).closest(\".k-window-action\").length) {\n                            this.toggleMaximization();\n                        }\n                    }, this));\n\n                    each(\"n e s w se sw ne nw\".split(\" \"), function(index, handler) {\n                        wrapper.append(templates.resizeHandle(handler));\n                    });\n\n                    this.resizing = new WindowResizing(this);\n                }\n\n                wrapper = null;\n            },\n\n            _draggable: function() {\n                var draggable = this.options.draggable;\n\n                if (this.dragging) {\n                    this.dragging.destroy();\n                    this.dragging = null;\n                }\n                if (draggable) {\n                    this.dragging = new WindowDragging(this, draggable.dragHandle || KWINDOWTITLEBAR);\n                }\n            },\n\n            _actions: function() {\n                var options = this.options;\n                var actions = options.actions;\n                var pinned = options.pinned;\n                var titlebar = this.wrapper.children(KWINDOWTITLEBAR);\n                var container = titlebar.find(\".k-window-actions\");\n                var windowSpecificCommands = [ \"maximize\", \"minimize\" ];\n\n                actions = $.map(actions, function(action) {\n                    action = pinned && action.toLowerCase() === \"pin\" ? \"unpin\" : action;\n                    return { name: (windowSpecificCommands.indexOf(action.toLowerCase()) > - 1) ? \"window-\" + action : action };\n                });\n\n                container.html(kendo.render(templates.action, actions));\n            },\n\n            setOptions: function(options) {\n                var that = this;\n                var sizeClass = that.options.size;\n                var doc = this.containment && !that._isPinned ? this.containment : $(document);\n                // make a deep extend over options.position telerik/kendo-ui-core#844\n                var cachedOptions = JSON.parse(JSON.stringify(options));\n                extend(options.position, that.options.position);\n                extend(options.position, cachedOptions.position);\n\n                that._containerScrollTop = doc.scrollTop();\n                that._containerScrollLeft = doc.scrollLeft();\n\n                Widget.fn.setOptions.call(that, options);\n                var scrollable = that.options.scrollable !== false;\n\n                that.restore();\n\n                if (typeof options.title !== \"undefined\") {\n                    that.title(options.title);\n                }\n\n                that.wrapper.removeClass(SIZE[sizeClass]);\n                that._dimensions();\n\n                that._position();\n                that._resizable();\n                that._draggable();\n                that._actions();\n                if (typeof options.modal !== \"undefined\") {\n                    var visible = that.options.visible !== false;\n                    that._enableDocumentScrolling();\n                    that._overlay(options.modal && visible);\n                }\n\n                that.element.css(OVERFLOW, scrollable ? \"\" : \"hidden\");\n            },\n\n            events:[\n                OPEN,\n                ACTIVATE,\n                DEACTIVATE,\n                CLOSE,\n                MINIMIZE,\n                MAXIMIZE,\n                REFRESH,\n                RESTORE,\n                RESIZESTART,\n                RESIZE,\n                RESIZEEND,\n                DRAGSTART,\n                DRAGEND,\n                KENDOKEYDOWN,\n                ERROR\n            ],\n\n            options: {\n                name: \"Window\",\n                animation: {\n                    open: {\n                        effects: { zoom: { direction: \"in\" }, fade: { direction: \"in\" } },\n                        duration: 350\n                    },\n                    close: {\n                        effects: { zoom: { direction: \"out\", properties: { scale: 0.7 } }, fade: { direction: \"out\" } },\n                        duration: 350,\n                        hide: true\n                    }\n                },\n                title: \"\",\n                actions: [\"Close\"],\n                autoFocus: true,\n                modal: false,\n                size: \"auto\",\n                resizable: true,\n                draggable: true,\n                minWidth: 90,\n                minHeight: 50,\n                maxWidth: Infinity,\n                maxHeight: Infinity,\n                pinned: false,\n                scrollable: true,\n                position: {},\n                content: null,\n                visible: null,\n                height: null,\n                width: null,\n                appendTo: \"body\",\n                isMaximized: false,\n                isMinimized: false\n            },\n\n            _closable: function() {\n                return $.inArray(\"close\", $.map(this.options.actions, function(x) { return x.toLowerCase(); })) > -1;\n            },\n\n            _keydownContent: function(e) {\n                var that = this,\n                    keys = kendo.keys,\n                    keyCode = e.keyCode;\n\n                if (keyCode == keys.ESC && that._closable()) {\n                    e.stopPropagation();\n                    that._close(false);\n                }\n            },\n\n            _keydown: function(e) {\n                var that = this,\n                    options = that.options,\n                    keys = kendo.keys,\n                    keyCode = e.keyCode,\n                    wrapper = that.wrapper,\n                    offset, handled,\n                    distance = 10,\n                    isMaximized = options.isMaximized,\n                    isMinimized = options.isMinimized,\n                    newWidth, newHeight, w, h;\n\n                if (keyCode == keys.ESC && that._closable()) {\n                    e.stopPropagation();\n                    that._close(false);\n                }\n\n                if (e.target != e.currentTarget || that._closing) {\n                    return;\n                }\n\n                 // Refresh\n                if (e.altKey && keyCode == 82) {// Alt + R\n                    that.refresh();\n                }\n\n                // Pin/Unpin\n                if (e.altKey && keyCode == 80) {// Alt + P\n                    if(that.options.pinned){\n                        that.unpin();\n                    } else {\n                        that.pin();\n                    }\n                }\n\n                // Maximize/Restore/Miminimize\n                if(e.altKey && keyCode == keys.UP){\n                    if (isMinimized) {\n                        that.restore();\n                        that.wrapper.trigger(\"focus\");\n                    } else if (!isMaximized) {\n                        that.maximize();\n                        that.wrapper.trigger(\"focus\");\n                    }\n\n                } else if (e.altKey && keyCode == keys.DOWN){\n                    if (!isMinimized && !isMaximized) {\n                        that.minimize();\n                        that.wrapper.trigger(\"focus\");\n                    } else if (isMaximized) {\n                        that.restore();\n                    }\n\n                }\n\n                offset = kendo.getOffset(wrapper);\n\n                if (that.containment && !that._isPinned) {\n                    offset = that.options.position;\n                }\n\n                if (options.draggable && !e.ctrlKey && !e.altKey && !isMaximized) {\n                    that._updateBoundaries();\n                    if (keyCode == keys.UP) {\n                        offset.top = constrain(offset.top - distance, that.minTop, that.maxTop);\n                        handled = wrapper.css(\"top\", offset.top);\n                    } else if (keyCode == keys.DOWN) {\n                        offset.top = constrain(offset.top + distance, that.minTop, that.maxTop);\n                        handled = wrapper.css(\"top\", offset.top);\n                    } else if (keyCode == keys.LEFT) {\n                        offset.left = constrain(offset.left - distance, that.minLeft, that.maxLeft);\n                        handled = wrapper.css(\"left\", offset.left);\n                    } else if (keyCode == keys.RIGHT) {\n                        offset.left = constrain(offset.left + distance, that.minLeft, that.maxLeft);\n                        handled = wrapper.css(\"left\", offset.left);\n                    }\n                }\n\n                if (options.resizable && e.ctrlKey && !isMaximized && !isMinimized) {\n                    if (keyCode == keys.UP) {\n                        handled = true;\n                        newHeight = wrapper.outerHeight() - distance;\n                    } else if (keyCode == keys.DOWN) {\n                        handled = true;\n                        if (that.containment && !that._isPinned) {\n                            newHeight = Math.min(wrapper.outerHeight() + distance,\n                                that.containment.height - offset.top - toInt(wrapper, \"padding-top\") -\n                                toInt(wrapper, \"borderBottomWidth\") - toInt(wrapper, \"borderTopWidth\"));\n                        } else {\n                            newHeight = wrapper.outerHeight() + distance;\n                        }\n                    } if (keyCode == keys.LEFT) {\n                        handled = true;\n                        newWidth = wrapper.outerWidth() - distance;\n                    } else if (keyCode == keys.RIGHT) {\n                        handled = true;\n                        if (that.containment && !that._isPinned) {\n                            newWidth = Math.min(wrapper.outerWidth() + distance,\n                                                that.containment.width - offset.left -\n                                                toInt(wrapper, \"borderLeftWidth\") - toInt(wrapper, \"borderRightWidth\"));\n                        } else {\n                            newWidth = wrapper.outerWidth() + distance;\n                        }\n                    }\n\n                    if (handled) {\n                        w = constrain(newWidth, options.minWidth, options.maxWidth);\n                        h = constrain(newHeight, options.minHeight, options.maxHeight);\n\n                        if (!isNaN(w)) {\n                            wrapper.outerWidth(w);\n                            that.options.width = w + \"px\";\n                        }\n                        if (!isNaN(h)) {\n                            wrapper.outerHeight(h);\n                            that.options.height = h + \"px\";\n                        }\n\n                        that.resize();\n                    }\n                }\n\n                if (handled) {\n                    e.preventDefault();\n                }\n            },\n\n            _overlay: function (visible) {\n                var overlay = this.containment ? this.containment.children(KOVERLAY) : this.appendTo.children(KOVERLAY),\n                    wrapper = this.wrapper,\n                    display = visible ? \"block\" : \"none\",\n                    zIndex = parseInt(wrapper.css(ZINDEX), 10) - 1;\n\n                if (!overlay.length) {\n                    overlay = $(\"<div class='k-overlay' />\");\n                }\n\n                overlay\n                    .insertBefore(wrapper[0])\n                    .css({\n                        zIndex: zIndex,\n                        display: display\n                    });\n\n                if (this.options.modal.preventScroll && !this.containment) {\n                    this._stopDocumentScrolling();\n                }\n\n                return overlay;\n            },\n\n            _actionForIcon: function(icon) {\n                var iconClass = /\\bk-i(-\\w+)+\\b/.exec(icon[0].className)[0];\n                return {\n                    \"k-i-close\": \"_close\",\n                    \"k-i-window-maximize\": \"maximize\",\n                    \"k-i-window-minimize\": \"minimize\",\n                    \"k-i-window-restore\": \"restore\",\n                    \"k-i-refresh\": \"refresh\",\n                    \"k-i-pin\": \"pin\",\n                    \"k-i-unpin\": \"unpin\"\n                }[iconClass];\n            },\n\n            _windowActionHandler: function (e) {\n                if (this._closing) {\n                    return;\n                }\n                var icon = $(e.target).closest(\".k-window-action\").find(\".k-icon\");\n                var action = this._actionForIcon(icon);\n\n                if (action) {\n                    e.preventDefault();\n                    this[action]();\n                    return false;\n                }\n            },\n\n            _modals: function() {\n                var that = this,\n                    windowElements = $(KWINDOW + VISIBLE),\n                    windowInstance,\n                    modals = [];\n\n                for (var i = 0; i < windowElements.length; i += 1) {\n                    windowInstance = that._object($(windowElements[i]));\n\n                    if (windowInstance &&\n                        windowInstance.options &&\n                        windowInstance.options.modal &&\n                        windowInstance.options.visible &&\n                        windowInstance.options.appendTo === that.options.appendTo &&\n                        (!windowInstance.containment || (that.containment && windowInstance.containment[0] === that.containment[0]))) {\n                            modals.push(windowInstance.wrapper[0]);\n                    }\n                }\n\n                modals.sort(function(a, b) {\n                    return a.style.zIndex - b.style.zIndex;\n                });\n\n                that = null;\n\n                return $(modals);\n            },\n\n            _object: function(element) {\n                var content = element.children(KWINDOWCONTENT);\n                var widget = kendo.widgetInstance(content);\n\n                if (widget) {\n                    return widget;\n                }\n\n                return undefined;\n            },\n\n            center: function () {\n                var that = this,\n                    position = that.options.position,\n                    wrapper = that.wrapper,\n                    documentWindow = $(window),\n                    scrollTop = 0,\n                    scrollLeft = 0,\n                    newTop, newLeft;\n\n                if (that.options.isMaximized) {\n                    return that;\n                }\n\n                if(that.options.pinned && !that._isPinned) {\n                    that.pin();\n                }\n\n                if (!that.options.pinned) {\n                    scrollTop = documentWindow.scrollTop();\n                    scrollLeft = documentWindow.scrollLeft();\n                }\n\n                if (this.containment && !that.options.pinned) {\n                    newTop = this.minTop + (this.maxTop - this.minTop) / 2;\n                    newLeft = this.minLeft + (this.maxLeft - this.minLeft) / 2;\n                } else {\n                    that._scrollIsAppended = true;\n                    newLeft = scrollLeft + Math.max(0, (documentWindow.width() - wrapper.outerWidth()) / 2);\n                    newTop = scrollTop + Math.max(0, (documentWindow.height() - wrapper.outerHeight() - toInt(wrapper, \"paddingTop\")) / 2);\n                }\n\n                wrapper.css({\n                    left: newLeft,\n                    top: newTop\n                });\n\n                position.top = newTop;\n                position.left = newLeft;\n\n                return that;\n            },\n\n            title: function (title) {\n                var that = this,\n                    value,\n                    encoded = true,\n                    wrapper = that.wrapper,\n                    titleBar = wrapper.children(KWINDOWTITLEBAR),\n                    titleElement = titleBar.children(KWINDOWTITLE);\n\n                if (!arguments.length) {\n                    return titleElement.html();\n                }\n\n                if ($.isPlainObject(title)) {\n                    value = typeof title.text !== \"undefined\" ? title.text :  \"\";\n                    encoded = title.encoded !== false;\n                } else {\n                    value = title;\n                }\n\n                if (value === false) {\n                    wrapper.addClass(\"k-window-titleless\");\n                    wrapper.css(\"padding-top\", 0);\n                    titleBar.remove();\n                } else {\n                    if (!titleBar.length) {\n                        wrapper.prepend(templates.titlebar({\n                            title: encoded ? kendo.htmlEncode(value) : value\n                        }));\n                        that._actions();\n                        titleBar = wrapper.children(KWINDOWTITLEBAR);\n                    } else {\n                        titleElement.html(encoded ? kendo.htmlEncode(value) : value);\n                    }\n                }\n\n                that.options.title = value;\n\n                return that;\n            },\n\n            content: function (html, data) {\n                var content = this.wrapper.children(KWINDOWCONTENT),\n                    scrollContainer = content.children(\".km-scroll-container\");\n\n                content = scrollContainer[0] ? scrollContainer : content;\n\n                if (!defined(html)) {\n                    return content.html();\n                }\n\n                this.angular(\"cleanup\", function(){\n                    return { elements: content.children() };\n                });\n\n                kendo.destroy(this.element.children());\n\n                content.empty().html(html);\n\n                this.angular(\"compile\", function(){\n                    var a = [];\n                    for (var i = content.length; --i >= 0;) {\n                        a.push({ dataItem: data });\n                    }\n                    return {\n                        elements: content.children(),\n                        data: a\n                    };\n                });\n\n                return this;\n            },\n\n            open: function () {\n                var that = this,\n                    wrapper = that.wrapper,\n                    options = that.options,\n                    showOptions = this._animationOptions(\"open\"),\n                    contentElement = wrapper.children(KWINDOWCONTENT),\n                    overlay, otherModalsVisible,\n                    containmentContext = this.containment && !that._isPinned,\n                    doc = containmentContext ? this.containment : $(document);\n\n                if (!that.trigger(OPEN)) {\n                    if (that._closing) {\n                        wrapper.kendoStop(true, true);\n                    }\n\n                    that._closing = false;\n\n                    that.toFront();\n\n                    if (options.autoFocus) {\n                        that.wrapper.trigger(\"focus\");\n                    }\n\n                    options.visible = true;\n\n                    if (options.modal) {\n                        otherModalsVisible = !!that._modals().length;\n                        overlay = that._overlay(otherModalsVisible);\n\n                        overlay.kendoStop(true, true);\n\n                        if (showOptions.duration && kendo.effects.Fade && !otherModalsVisible) {\n                            var overlayFx = kendo.fx(overlay).fadeIn();\n                            overlayFx.duration(showOptions.duration || 0);\n                            overlayFx.endValue(0.5);\n                            overlayFx.play();\n                        } else {\n                            overlay.css(\"opacity\", 0.5);\n                        }\n\n                        overlay.show();\n\n                        $(window).on(\"focus\" + MODAL_NS, function() {\n                            if (wrapper.data(\"isFront\") && !$(document.activeElement).closest(wrapper).length) {\n                               that.wrapper.trigger(\"focus\");\n                            }\n                        });\n                    }\n\n                    if (!wrapper.is(VISIBLE)) {\n                        contentElement.css(OVERFLOW, HIDDEN);\n\n                        that.wrapper.find(TITLEBAR_BUTTONS).addClass(\"k-button-flat\");\n\n                        wrapper.addClass(INLINE_FLEX).kendoStop().kendoAnimate({\n                            effects: showOptions.effects,\n                            duration: showOptions.duration,\n                            complete: proxy(this._activate, this)\n                        });\n                    }\n                }\n\n                if (options.isMaximized) {\n                    that._containerScrollTop = doc.scrollTop();\n                    that._containerScrollLeft = doc.scrollLeft();\n                    that._stopDocumentScrolling();\n                }\n\n                if(this.options.pinned && !this._isPinned){\n                    this.pin();\n                }\n\n                return that;\n            },\n\n            _activate: function() {\n                var scrollable = this.options.scrollable !== false;\n\n                if (this.options.autoFocus) {\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                this.element.css(OVERFLOW, scrollable ? \"\" : \"hidden\");\n                kendo.resize(this.element.children());\n\n                this.trigger(ACTIVATE);\n            },\n\n            _removeOverlay: function(suppressAnimation) {\n                var modals = this._modals();\n                var options = this.options;\n                var hideOverlay = options.modal && !modals.length;\n                var hideOptions  = this._animationOptions(\"close\");\n\n                if (hideOverlay) {\n                    if (!suppressAnimation && hideOptions.duration && kendo.effects.Fade) {\n                        var overlayFx = kendo.fx(options.modal ? this._overlay(true) : $(undefined)).fadeOut();\n                        overlayFx.duration(hideOptions.duration || 0);\n                        overlayFx.startValue(0.5);\n                        overlayFx.play();\n                    } else {\n                        this._overlay(false).remove();\n                    }\n                    if (options.modal.preventScroll) {\n                        this._enableDocumentScrolling();\n                    }\n                } else if (modals.length) {\n                    this._object(modals.last())._overlay(true);\n\n                    if (options.modal.preventScroll) {\n                        this._stopDocumentScrolling();\n                    }\n                }\n            },\n\n            _close: function(systemTriggered) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    options = that.options,\n                    showOptions = this._animationOptions(\"open\"),\n                    hideOptions  = this._animationOptions(\"close\"),\n                    containmentContext = this.containment && !that._isPinned,\n                    doc = containmentContext ? this.containment : $(document),\n                    defaultPrevented;\n\n                if (that._closing) {\n                    return;\n                }\n\n                defaultPrevented = that.trigger(CLOSE, { userTriggered: !systemTriggered });\n                that._closing = !defaultPrevented;\n\n                if (wrapper.is(VISIBLE) && !defaultPrevented) {\n                    options.visible = false;\n\n                    $(KWINDOW).each(function(i, element) {\n                        var contentElement = $(element).children(KWINDOWCONTENT);\n\n                        // Remove overlay set by toFront\n                        if (element != wrapper && contentElement.find(\"> .\" + KCONTENTFRAME).length > 0) {\n                            contentElement.children(KOVERLAY).remove();\n                        }\n                    });\n\n                    this._removeOverlay();\n\n                    // Prevent close animation from stopping\n                    that.wrapper.find(TITLEBAR_BUTTONS).removeClass(\"k-button-flat\");\n\n                    wrapper.kendoStop().kendoAnimate({\n                        effects: hideOptions.effects || showOptions.effects,\n                        reverse: hideOptions.reverse === true,\n                        duration: hideOptions.duration,\n                        complete: proxy(this._deactivate, this)\n                    });\n                    $(window).off(MODAL_NS);\n                }\n\n                if (that.options.isMaximized) {\n                    that._enableDocumentScrolling();\n                    if (that._containerScrollTop && that._containerScrollTop > 0) {\n                        doc.scrollTop(that._containerScrollTop);\n                    }\n                    if (that._containerScrollLeft && that._containerScrollLeft > 0) {\n                        doc.scrollLeft(that._containerScrollLeft);\n                    }\n                }\n\n                if (that.options.iframe) {\n                    that.wrapper.trigger(\"blur\");\n                }\n            },\n\n            _deactivate: function () {\n                var that = this;\n\n                that.wrapper\n                    .removeClass(INLINE_FLEX)\n                    .hide()\n                    .css(\"opacity\", \"\");\n\n                that.trigger(DEACTIVATE);\n\n                if (that.options.modal) {\n                    var lastModal = that._object(that._modals().last());\n                    if (lastModal) {\n                        lastModal.toFront();\n                    }\n                }\n            },\n\n            close: function () {\n                this._close(true);\n                return this;\n            },\n\n            _actionable: function(element) {\n                return $(element).is(TITLEBAR_BUTTONS + \",\" + TITLEBAR_BUTTONS + \" .k-icon, :input, a, .k-input, .k-icon, [role='gridcell']\");\n            },\n\n            _shouldFocus: function(target) {\n                var active = activeElement(),\n                    element = this.wrapper;\n\n                return this.options.autoFocus &&\n                    !$(active).is(element) &&\n                    !this._actionable(target) &&\n                    (!element.find(active).length || !element.find(target).length);\n            },\n\n            toFront: function (e, avoidFocus) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    currentWindow = wrapper[0],\n                    containmentContext = that.containment && !that._isPinned,\n                    openAnimation = this._animationOptions(\"open\"),\n                    zIndex = +wrapper.css(ZINDEX),\n                    originalZIndex = zIndex,\n                    target = (e && e.target) || null;\n\n                $(KWINDOW).each(function(i, element) {\n                    var windowObject = $(element),\n                        zIndexNew = windowObject.css(ZINDEX),\n                        contentElement = windowObject.children(KWINDOWCONTENT);\n\n                    if (!isNaN(zIndexNew)) {\n                        zIndex = Math.max(+zIndexNew, zIndex);\n                    }\n\n                    wrapper.data(\"isFront\", element == currentWindow);\n                    // Add overlay to windows with iframes and lower z-index to prevent\n                    // trapping of events when resizing / dragging\n\n                    if (element != currentWindow &&\n                        contentElement.find(\".\" + KCONTENTFRAME).length &&\n                        !contentElement.find(KOVERLAY).length) {\n                        contentElement.append(templates.overlay);\n                    }\n                });\n\n                if (!wrapper[0].style.zIndex || originalZIndex < zIndex) {\n                    wrapper.css(ZINDEX, zIndex + 2);\n                }\n                that.element.find(\"> .k-overlay\").remove();\n\n                if (that._shouldFocus(target)) {\n                    if(!avoidFocus) {\n                        setTimeout(function() {\n                            that.wrapper.focus();\n                        }, openAnimation ? openAnimation.duration : 0);\n                    }\n\n                    var scrollTop = containmentContext ? that.containment.scrollTop() : $(window).scrollTop(),\n                        windowTop = parseInt(wrapper.position().top, 10);\n\n                    if (!that.options.pinned && windowTop > 0 && windowTop < scrollTop) {\n                        if (scrollTop > 0) {\n                            $(window).scrollTop(windowTop);\n                        } else {\n                            wrapper.css(\"top\", scrollTop);\n                        }\n                    }\n                }\n\n                wrapper = null;\n\n                return that;\n            },\n\n            toggleMaximization: function () {\n                if (this._closing) {\n                    return this;\n                }\n\n                return this[this.options.isMaximized ? \"restore\" : \"maximize\"]();\n            },\n\n            restore: function () {\n                var that = this;\n                var options = that.options;\n                var minHeight = options.minHeight;\n                var restoreOptions = that.restoreOptions;\n                var shouldRestrictTop;\n                var container = that.containment && !that._isPinned ? that.containment : $(document);\n\n                if (!options.isMaximized && !options.isMinimized) {\n                    return that;\n                }\n\n                if (minHeight && minHeight != Infinity) {\n                    that.wrapper.css(\"min-height\", minHeight);\n                }\n\n                if (restoreOptions && !options.isMaximized) {\n                    restoreOptions.height = constrain(restoreOptions.height, that.options.minHeight, that.options.maxHeight);\n\n                    shouldRestrictTop = options.position.top + parseInt(restoreOptions.height, 10) > that.maxTop;\n\n                    if (shouldRestrictTop) {\n                        options.position.top = constrain(options.position.top, that.minTop, that.maxTop - parseInt(restoreOptions.height, 10));\n\n                        extend(restoreOptions, {\n                            left: options.position.left,\n                            top: options.position.top\n                        });\n                    }\n                }\n\n                that.wrapper\n                    .css({\n                        position: options.pinned ? \"fixed\" : \"absolute\",\n                        left: restoreOptions.left,\n                        top: restoreOptions.top,\n                        width: restoreOptions.width,\n                        height: restoreOptions.height\n                    })\n                    .removeClass(MAXIMIZEDSTATE)\n                    .find(\".k-window-content,.k-resize-handle\").show().end()\n                    .find(\".k-window-titlebar .k-i-window-restore\").parent().remove().end().end()\n                    .find(MINIMIZE_MAXIMIZE).parent().show().end().end()\n                    .find(PIN_UNPIN).parent().show();\n\n                if (options.isMaximized) {\n                    that.wrapper.find(\".k-i-window-maximize\").parent().trigger(\"focus\");\n                } else if (options.isMinimized) {\n                    that.wrapper.find(\".k-i-window-minimize\").parent().trigger(\"focus\");\n                }\n\n                that.options.width = restoreOptions.width;\n                that.options.height = restoreOptions.height;\n\n                if (!that.options.modal.preventScroll) {\n                    that._enableDocumentScrolling();\n                }\n\n                if (that._containerScrollTop && that._containerScrollTop > 0) {\n                    container.scrollTop(that._containerScrollTop);\n                }\n                if (that._containerScrollLeft && that._containerScrollLeft > 0) {\n                    container.scrollLeft(that._containerScrollLeft);\n                }\n\n                options.isMaximized = options.isMinimized = false;\n\n                that.wrapper.removeAttr(\"aria-labelled-by\");\n\n                that.resize();\n\n                that.trigger(RESTORE);\n\n                return that;\n            },\n\n            _sizingAction: function(actionId, callback) {\n                var that = this,\n                    wrapper = that.wrapper,\n                    style = wrapper[0].style,\n                    options = that.options;\n\n                if (options.isMaximized || options.isMinimized) {\n                    return that;\n                }\n\n                that.restoreOptions = {\n                    width: style.width,\n                    height: style.height\n                };\n\n                wrapper\n                    .children(KWINDOWRESIZEHANDLES).hide().end()\n                    .children(KWINDOWTITLEBAR).find(MINIMIZE_MAXIMIZE).parent().hide()\n                    .eq(0).before(templates.action({ name: \"window-restore\" }));\n\n                callback.call(that);\n\n                that.wrapper.children(KWINDOWTITLEBAR).find(PIN_UNPIN).parent().toggle(actionId !== \"maximize\");\n\n                that.trigger(actionId);\n\n                wrapper.find(\".k-i-window-restore\").parent().trigger(\"focus\");\n\n                return that;\n            },\n\n            maximize: function() {\n                this._sizingAction(\"maximize\", function() {\n                    var that = this,\n                        wrapper = that.wrapper,\n                        containmentContext = this.containment && !that._isPinned,\n                        position = wrapper.position(),\n                        doc = $(document);\n\n                    extend(that.restoreOptions, {\n                        left: position.left + (containmentContext ? this.containment.scrollLeft() : 0),\n                        top: position.top + (containmentContext ? this.containment.scrollTop() : 0)\n                    });\n\n                    this._containerScrollTop = containmentContext ? this.containment.scrollTop() : doc.scrollTop();\n                    this._containerScrollLeft = containmentContext ? this.containment.scrollLeft() : doc.scrollLeft();\n\n                    that._stopDocumentScrolling();\n\n                    wrapper\n                        .css({\n                            top: containmentContext ? this.containment.scrollTop() : 0,\n                            left: containmentContext ? this.containment.scrollLeft() : 0,\n                            position: containmentContext ? \"absolute\" : \"fixed\"\n                        })\n                        .addClass(MAXIMIZEDSTATE);\n\n                    that.options.isMaximized = true;\n\n                    that._onDocumentResize();\n                });\n\n                return this;\n            },\n\n            _stopDocumentScrolling: function(){\n                var that = this;\n                var containment = that.containment;\n\n                if (containment && !that._isPinned) {\n                    that._storeOverflowRule(containment);\n                    containment.css(OVERFLOW, HIDDEN);\n                    that.wrapper.css({\n                        maxWidth: containment.innerWidth(),\n                        maxHeight: containment.innerHeight()\n                    });\n                    return;\n                }\n\n                var $body = $(\"body\");\n                that._storeOverflowRule($body);\n                $body.css(OVERFLOW, HIDDEN);\n\n                var $html = $(\"html\");\n                that._storeOverflowRule($html);\n                $html.css(OVERFLOW, HIDDEN);\n            },\n\n            _enableDocumentScrolling: function(){\n                var that = this;\n                var containment = that.containment;\n\n                if (containment && !that._isPinned) {\n                    that._restoreOverflowRule(containment);\n                    that.wrapper.css({\n                        maxWidth: containment.width,\n                        maxHeight: containment.height\n                    });\n                    return;\n                }\n\n                that._restoreOverflowRule($(document.body));\n                that._restoreOverflowRule($(\"html\"));\n            },\n\n            _storeOverflowRule: function($element){\n                if(this._isOverflowStored($element)){\n                    return;\n                }\n\n                var overflowRule = $element.get(0).style.overflow;\n\n                if(typeof overflowRule === \"string\"){\n                    $element.data(DATADOCOVERFLOWRULE, overflowRule);\n                }\n            },\n\n            _isOverflowStored: function ($element){\n                return typeof $element.data(DATADOCOVERFLOWRULE) === \"string\";\n            },\n\n            _restoreOverflowRule: function($element){\n                var overflowRule = $element.data(DATADOCOVERFLOWRULE);\n\n                if(overflowRule !== null && overflowRule !== undefined){\n                    $element.css(OVERFLOW, overflowRule);\n                    $element.removeData(DATADOCOVERFLOWRULE);\n                } else {\n                    $element.css(OVERFLOW, \"\");\n                }\n            },\n\n            isMaximized: function() {\n                return this.options.isMaximized;\n            },\n\n            minimize: function() {\n                this._sizingAction(\"minimize\", function() {\n                    var that = this;\n\n                    that.wrapper.css({\n                        height: \"\",\n                        minHeight: \"\"\n                    });\n\n                    that.element.hide();\n\n                    that.options.isMinimized = true;\n                });\n\n                this.wrapper.attr(\"aria-labelled-by\", this.element.attr(\"aria-labelled-by\"));\n\n                this._updateBoundaries();\n\n                return this;\n            },\n\n            isMinimized: function() {\n                return this.options.isMinimized;\n            },\n\n            pin: function() {\n                var that = this,\n                    win = $(window),\n                    wrapper = that.wrapper,\n                    options = that.options,\n                    position = options.position,\n                    top = this.containment ? getPosition(wrapper[0]).top + toInt(this.containment, \"borderTopWidth\") : toInt(wrapper, \"top\"),\n                    left = this.containment ? getPosition(wrapper[0]).left + toInt(this.containment, \"borderLeftWidth\") : toInt(wrapper, \"left\");\n\n                if (!that.options.isMaximized) {\n                    position.top = top;\n                    position.left = left;\n\n                    if (that._scrollIsAppended && (!this.containment || this.containment.css(\"position\") !== \"fixed\")) {\n\n                        position.top -= win.scrollTop();\n                        position.left -= win.scrollLeft();\n                        that._scrollIsAppended = false;\n                    }\n\n                    wrapper.css(extend(position, {position: \"fixed\"}));\n                    wrapper.children(KWINDOWTITLEBAR).find(KPIN).addClass(\"k-i-unpin\").removeClass(\"k-i-pin\");\n\n                    that._isPinned = true;\n                    that.options.pinned = true;\n\n                    if (this.containment) {\n                        options.maxWidth = options.maxHeight = Infinity;\n                        wrapper.css({\n                            maxWidth: \"\",\n                            maxHeight: \"\"\n                        });\n                    }\n                }\n            },\n\n            unpin: function() {\n                var that = this,\n                    win = $(window),\n                    wrapper = that.wrapper,\n                    options = that.options,\n                    position = that.options.position,\n                    containment = that.containment,\n                    top = parseInt(wrapper.css(\"top\"), 10) + win.scrollTop(),\n                    left = parseInt(wrapper.css(\"left\"), 10) + win.scrollLeft();\n\n                if (!that.options.isMaximized) {\n                    that._isPinned = false;\n                    that._scrollIsAppended = true;\n                    that.options.pinned = false;\n\n                    if (containment) {\n                        that._updateBoundaries();\n\n                        options.maxWidth = Math.min(containment.width, options.maxWidth);\n                        options.maxHeight = Math.min(containment.height - toInt(wrapper, \"padding-top\"), options.maxHeight);\n\n                        wrapper.css({\n                            maxWidth: options.maxWidth,\n                            maxHeight: options.maxHeight\n                        });\n\n                        if (top < containment.position.top) {\n                            top = that.minTop;\n                        } else if (top > containment.position.top + containment.height) {\n                            top = that.maxTop;\n                        } else {\n                            top = top + containment.scrollTop() - (containment.position.top + toInt(containment, \"border-top-width\"));\n                        }\n\n                        if (left < containment.position.left) {\n                            left = that.minLeft;\n                        } else if (left > containment.position.left + containment.width) {\n                            left = that.maxLeft;\n                        } else {\n                            left = left + containment.scrollLeft() - (containment.position.left + toInt(containment, \"border-left-width\"));\n                        }\n\n                    }\n\n                    position.top = constrain(top, that.minTop, that.maxTop);\n                    position.left = constrain(left, that.minLeft, that.maxLeft);\n\n                    wrapper.css(extend(position, {position: \"\"}));\n                    wrapper.children(KWINDOWTITLEBAR).find(KUNPIN).addClass(\"k-i-pin\").removeClass(\"k-i-unpin\");\n                }\n            },\n\n            _onDocumentResize: function () {\n                var that = this,\n                    wrapper = that.wrapper,\n                    wnd = $(window),\n                    zoomLevel = kendo.support.zoomLevel(),\n                    contentBoxSizing = wrapper.css(\"box-sizing\") == \"content-box\",\n                    w, h;\n\n                if (!that.options.isMaximized) {\n                    return;\n                }\n\n                var lrBorderWidth = contentBoxSizing ? toInt(wrapper, \"border-left-width\") + toInt(wrapper, \"border-right-width\") : 0;\n                var tbBorderWidth = contentBoxSizing ? toInt(wrapper, \"border-top-width\") + toInt(wrapper, \"border-bottom-width\") : 0;\n                var paddingTop = contentBoxSizing ? toInt(wrapper, \"padding-top\") : 0;\n\n                if (that.containment && !that._isPinned) {\n                    w = that.containment.innerWidth() - lrBorderWidth;\n                    h = that.containment.innerHeight() - (tbBorderWidth + paddingTop);\n                } else {\n                    w = wnd.width() / zoomLevel - lrBorderWidth;\n                    h = wnd.height() / zoomLevel - (tbBorderWidth + paddingTop);\n                }\n\n                wrapper.css({\n                    width: w,\n                    height: h\n                });\n                that.options.width = w;\n                that.options.height = h;\n\n                that.resize();\n            },\n\n            refresh: function (options) {\n                var that = this,\n                    initOptions = that.options,\n                    element = $(that.element),\n                    iframe,\n                    showIframe,\n                    url;\n\n                if (!isPlainObject(options)) {\n                    options = { url: options };\n                }\n\n                options = extend(initOptions.content, options);\n\n                showIframe = defined(initOptions.iframe) ? initOptions.iframe : options.iframe;\n\n                url = options.url;\n\n                if (url) {\n                    if (!defined(showIframe)) {\n                        showIframe = !isLocalUrl(url);\n                    }\n\n                    if (!showIframe) {\n                        // perform AJAX request\n                        that._ajaxRequest(options);\n                    } else {\n                        iframe = element.find(\".\" + KCONTENTFRAME)[0];\n\n                        if (iframe) {\n                            // refresh existing iframe\n                            iframe.src = url || iframe.src;\n                        } else {\n                            // render new iframe\n                            element.html(templates.contentFrame(extend({}, initOptions, { content: options })));\n                        }\n\n                        element.find(\".\" + KCONTENTFRAME)\n                            .off(\"load\" + NS)\n                            .on(\"load\" + NS, proxy(this._triggerRefresh, this));\n                    }\n                } else {\n                    if (options.template) {\n                        // refresh template\n                        that.content(template(options.template)({}));\n                    }\n\n                    that.trigger(REFRESH);\n                }\n\n                element.toggleClass(\"k-window-iframecontent\", !!showIframe);\n\n                return that;\n            },\n\n            _triggerRefresh: function() {\n                this.trigger(REFRESH);\n            },\n\n            _ajaxComplete: function() {\n                clearTimeout(this._loadingIconTimeout);\n                this.wrapper.find(REFRESHICON).removeClass(LOADING);\n            },\n\n            _ajaxError: function (xhr, status) {\n                this.trigger(ERROR, { status: status, xhr: xhr });\n            },\n\n            _ajaxSuccess: function (contentTemplate) {\n                return function (data) {\n                    var html = data;\n                    if (contentTemplate) {\n                        html = template(contentTemplate)(data || {});\n                    }\n\n                    this.content(html, data);\n                    this.element.prop(\"scrollTop\", 0);\n\n                    this.trigger(REFRESH);\n                };\n            },\n\n            _showLoading: function() {\n                this.wrapper.find(REFRESHICON).addClass(LOADING);\n            },\n\n            _ajaxRequest: function (options) {\n                this._loadingIconTimeout = setTimeout(proxy(this._showLoading, this), 100);\n\n                $.ajax(extend({\n                    type: \"GET\",\n                    dataType: \"html\",\n                    cache: false,\n                    error: proxy(this._ajaxError, this),\n                    complete: proxy(this._ajaxComplete, this),\n                    success: proxy(this._ajaxSuccess(options.template), this)\n                }, options));\n            },\n\n            _destroy: function() {\n                if (this.resizing) {\n                    this.resizing.destroy();\n                }\n\n                if (this.dragging) {\n                    this.dragging.destroy();\n                }\n\n                this.wrapper.off(NS)\n                    .children(KWINDOWCONTENT).off(NS).end()\n                    .find(\".k-resize-handle,.k-window-titlebar\").off(NS);\n\n                $(window).off(\"resize\" + NS + this._marker);\n                $(window).off(MODAL_NS);\n                $(window).off(NS);\n\n                clearTimeout(this._loadingIconTimeout);\n\n                Widget.fn.destroy.call(this);\n\n                this.unbind(undefined);\n\n                kendo.destroy(this.wrapper);\n            },\n\n            destroy: function() {\n                this._destroy();\n\n                if (this.options.modal) {\n                    this._removeOverlay(true);\n                }\n\n                this.wrapper.empty().remove();\n\n                this.wrapper = this.appendTo = this.element = $();\n            },\n\n            _createWindow: function() {\n                var contentHtml = this.element,\n                    options = this.options,\n                    iframeSrcAttributes,\n                    wrapper,\n                    isRtl = kendo.support.isRtl(contentHtml);\n\n                if (options.scrollable === false) {\n                    contentHtml.css(\"overflow\", \"hidden\");\n                }\n\n                wrapper = $(templates.wrapper(options));\n\n                // Collect the src attributes of all iframes and then set them to empty string.\n                // This seems to fix this IE9 \"feature\": http://msdn.microsoft.com/en-us/library/gg622929%28v=VS.85%29.aspx?ppud=4\n                iframeSrcAttributes = contentHtml.find(\"iframe:not(.k-content-frame)\").map(function() {\n                    var src = this.getAttribute(\"src\");\n                    this.src = \"\";\n                    return src;\n                });\n\n                // Make sure the wrapper is appended to the body only once. IE9+ will throw exceptions if you move iframes in DOM\n                wrapper\n                    .toggleClass(\"k-rtl\", isRtl)\n                    .attr(\"tabindex\", 0)\n                    .append(contentHtml)\n                    .find(\"iframe:not(.k-content-frame)\").each(function(index) {\n                    // Restore the src attribute of the iframes when they are part of the live DOM tree\n                    this.src = iframeSrcAttributes[index];\n                });\n\n                if (this.containment) {\n                    this.containment.prepend(wrapper);\n                } else if (this.appendTo) {\n                    wrapper.appendTo(this.appendTo);\n                }\n\n                wrapper.find(\".k-window-title\")\n                    .css(isRtl ? \"left\" : \"right\", outerWidth(wrapper.find(\".k-window-actions\")) + 10);\n\n                contentHtml.css(\"visibility\", \"\").show();\n\n                contentHtml.find(\"[data-role=editor]\").each(function() {\n                    var editor = $(this).data(\"kendoEditor\");\n\n                    if (editor) {\n                        editor.refresh();\n                    }\n                });\n\n                wrapper = contentHtml = null;\n            }\n        });\n\n        templates = {\n            wrapper: template(\"<div class='k-widget k-window'></div>\"),\n            action: template(\n                \"<a role='button' href='\\\\#' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-window-action' aria-label='#= name #'>\" +\n                    \"<span class='k-button-icon k-icon k-i-#= name.toLowerCase() #'></span>\" +\n                \"</a>\"\n            ),\n            titlebar: template(\n                \"<div class='k-window-titlebar k-hstack'>\" +\n                    \"<span class='k-window-title'>#= title #</span>\" +\n                    \"<div class='k-window-actions k-hstack'></div>\" +\n                \"</div>\"\n            ),\n            overlay: \"<div class='k-overlay'></div>\",\n            contentFrame: template(\n                \"<iframe frameborder='0' title='#= title #' class='\" + KCONTENTFRAME + \"' \" +\n                \"src='#= content.url #'>\" +\n                \"This page requires frames in order to show content\" +\n                \"</iframe>\"\n            ),\n            resizeHandle: template(\"<div class='k-resize-handle k-resize-#= data #'></div>\")\n        };\n\n\n        function WindowResizing(wnd) {\n            var that = this;\n            that.owner = wnd;\n            that._preventDragging = false;\n            that._draggable = new Draggable(wnd.wrapper, {\n                filter: \">\" + KWINDOWRESIZEHANDLES,\n                group: wnd.wrapper.id + \"-resizing\",\n                dragstart: proxy(that.dragstart, that),\n                drag: proxy(that.drag, that),\n                dragend: proxy(that.dragend, that)\n            });\n\n            that._draggable.userEvents.bind(\"press\", proxy(that.addOverlay, that));\n            that._draggable.userEvents.bind(\"release\", proxy(that.removeOverlay, that));\n        }\n\n        WindowResizing.prototype = {\n            addOverlay: function () {\n                this.owner.wrapper.append(templates.overlay);\n            },\n            removeOverlay: function () {\n                this.owner.wrapper.find(KOVERLAY).remove();\n            },\n            dragstart: function (e) {\n                var that = this;\n                var wnd = that.owner;\n                var wrapper = wnd.wrapper;\n\n                that._preventDragging = wnd.trigger(RESIZESTART);\n                if (that._preventDragging) {\n                    return;\n                }\n\n                that.elementPadding = parseInt(wrapper.css(\"padding-top\"), 10);\n                that.initialPosition = kendo.getOffset(wrapper, \"position\");\n\n                that.resizeDirection = e.currentTarget.prop(\"className\").replace(\"k-resize-handle k-resize-\", \"\");\n\n                that.initialSize = {\n                    width: wrapper.outerWidth(),\n                    height: wrapper.outerHeight()\n                };\n\n                wnd._updateBoundaries();\n\n                that.containerOffset = wnd.containment ? wnd.containment.position : kendo.getOffset(wnd.appendTo);\n\n                var offsetParent = wrapper.offsetParent();\n\n                if (offsetParent.is(\"html\")) {\n                    that.containerOffset.top = that.containerOffset.left = 0;\n                } else {\n                    var marginTop = offsetParent.css(\"margin-top\");\n                    var marginLeft = offsetParent.css(\"margin-left\");\n                    var hasMargin = !zero.test(marginTop) || !zero.test(marginLeft);\n                    if (hasMargin) {\n                        var wrapperPosition = getPosition(wrapper[0]);\n                        var relativeElMarginLeft = wrapperPosition.left - that.containerOffset.left - that.initialPosition.left;\n                        var relativeElMarginTop = wrapperPosition.top - that.containerOffset.top - that.initialPosition.top;\n\n                        that._relativeElMarginLeft = relativeElMarginLeft > 1 ? relativeElMarginLeft : 0;\n                        that._relativeElMarginTop = relativeElMarginTop > 1 ? relativeElMarginTop : 0;\n\n                        that.initialPosition.left += that._relativeElMarginLeft;\n                        that.initialPosition.top += that._relativeElMarginTop;\n                    }\n                }\n\n                wrapper\n                    .children(KWINDOWRESIZEHANDLES).not(e.currentTarget).hide();\n\n                $(BODY).css(CURSOR, e.currentTarget.css(CURSOR));\n            },\n            drag: function (e) {\n                if (this._preventDragging) {\n                    return;\n                }\n                var that = this,\n                    wnd = that.owner,\n                    wrapper = wnd.wrapper,\n                    options = wnd.options,\n                    position = options.position,\n                    direction = that.resizeDirection,\n                    containerOffset = that.containerOffset,\n                    initialPosition = that.initialPosition,\n                    initialSize = that.initialSize,\n                    containmentContext = wnd.containment && !wnd._isPinned,\n                    rtl = kendo.support.isRtl(wnd.containment),\n                    leftRtlOffset = containmentContext && rtl && wnd.containment.innerWidth() > wnd.containment.width ? kendo.support.scrollbar() : 0,\n                    scrollOffset = containmentContext ? { top: wnd.containment.scrollTop(), left: wnd.containment.scrollLeft()} : { top: 0, left: 0},\n                    newWidth, newHeight,\n                    windowBottom, windowRight,\n                    x = Math.max(e.x.location, 0),\n                    y = Math.max(e.y.location, 0);\n\n                    if (direction.indexOf(\"e\") >= 0) {\n\n                        if (wnd.containment && x - initialSize.width >= wnd.maxLeft - scrollOffset.left + containerOffset.left + leftRtlOffset) {\n                            newWidth = wnd.maxLeft + leftRtlOffset - initialPosition.left + initialSize.width - scrollOffset.left;\n                        } else {\n                            newWidth = x - initialPosition.left - containerOffset.left;\n                        }\n\n                        wrapper.outerWidth(constrain(newWidth, options.minWidth, options.maxWidth));\n                    } else if (direction.indexOf(\"w\") >= 0) {\n                        windowRight = initialPosition.left + initialSize.width + containerOffset.left;\n                        newWidth = constrain(windowRight - x, options.minWidth, options.maxWidth);\n                        position.left = windowRight - newWidth - containerOffset.left - leftRtlOffset - (that._relativeElMarginLeft || 0) + scrollOffset.left;\n\n                        if (wnd.containment && position.left <= wnd.minLeft) {\n                            position.left = wnd.minLeft;\n                            newWidth = constrain(windowRight - leftRtlOffset - position.left - containerOffset.left + scrollOffset.left, options.minWidth, options.maxWidth);\n                        }\n\n                        wrapper.css({\n                            left: position.left,\n                            width: newWidth\n                        });\n                    }\n\n                    var newWindowTop = y;\n                    if (wnd.options.pinned) {\n                        newWindowTop -= $(window).scrollTop();\n                    }\n                    if (direction.indexOf(\"s\") >= 0) {\n                        newHeight = newWindowTop - initialPosition.top - that.elementPadding - containerOffset.top;\n\n                        if (newWindowTop - initialSize.height - that.elementPadding >= wnd.maxTop + containerOffset.top - scrollOffset.top) {\n                            newHeight = wnd.maxTop - initialPosition.top + initialSize.height - scrollOffset.top;\n                        }\n\n                        wrapper.outerHeight(constrain(newHeight, options.minHeight, options.maxHeight));\n                    } else if (direction.indexOf(\"n\") >= 0) {\n                        windowBottom = initialPosition.top + initialSize.height + containerOffset.top;\n                        newHeight = constrain(windowBottom - newWindowTop, options.minHeight, options.maxHeight);\n                        position.top = windowBottom - newHeight - containerOffset.top - (that._relativeElMarginTop || 0) + scrollOffset.top;\n\n                        if (position.top <= wnd.minTop && wnd.containment) {\n                            position.top = wnd.minTop;\n                            newHeight = constrain(windowBottom - position.top - containerOffset.top + scrollOffset.top, options.minHeight, options.maxHeight);\n                        }\n\n                        wrapper.css({\n                            top: position.top,\n                            height: newHeight\n                        });\n                    }\n\n                    if (newWidth) {\n                        wnd.options.width = newWidth + \"px\";\n                    }\n                    if (newHeight) {\n                        wnd.options.height = newHeight + \"px\";\n                    }\n\n                    wnd.resize();\n            },\n            dragend: function (e) {\n                if (this._preventDragging) {\n                    return;\n                }\n\n                var that = this,\n                    wnd = that.owner,\n                    wrapper = wnd.wrapper;\n\n                wrapper\n                    .children(KWINDOWRESIZEHANDLES).not(e.currentTarget).show();\n\n                $(BODY).css(CURSOR, \"\");\n\n                if (wnd.touchScroller) {\n                    wnd.touchScroller.reset();\n                }\n\n                if (e.keyCode == 27) {\n                    wrapper.css(that.initialPosition)\n                        .css(that.initialSize);\n                }\n\n                wnd.trigger(RESIZEEND);\n\n                return false;\n            },\n            destroy: function() {\n                if (this._draggable) {\n                    this._draggable.destroy();\n                }\n\n                this._draggable = this.owner = null;\n            }\n        };\n\n        function WindowDragging(wnd, dragHandle) {\n            var that = this;\n            that.owner = wnd;\n            that._preventDragging = false;\n            that._draggable = new Draggable(wnd.wrapper, {\n                filter: dragHandle,\n                group: wnd.wrapper.id + \"-moving\",\n                dragstart: proxy(that.dragstart, that),\n                drag: proxy(that.drag, that),\n                dragend: proxy(that.dragend, that),\n                dragcancel: proxy(that.dragcancel, that)\n            });\n\n            that._draggable.userEvents.stopPropagation = false;\n        }\n\n        WindowDragging.prototype = {\n            dragstart: function (e) {\n                var wnd = this.owner,\n                    draggable = wnd.options.draggable,\n                    element = wnd.element,\n                    actions = element.find(\".k-window-actions\"),\n                    containerOffset = kendo.getOffset(wnd.appendTo);\n\n                this._preventDragging = wnd.trigger(DRAGSTART) || !draggable;\n                if (this._preventDragging || wnd.isMaximized()) {\n                    return;\n                }\n\n                wnd.initialWindowPosition = kendo.getOffset(wnd.wrapper, \"position\");\n\n                wnd.initialPointerPosition = {\n                    left: wnd.options.position.left,\n                    top: wnd.options.position.top\n                };\n\n                wnd.startPosition = {\n                    left: e.x.client - wnd.initialWindowPosition.left,\n                    top: e.y.client - wnd.initialWindowPosition.top\n                };\n\n                wnd._updateBoundaries();\n                if (!wnd.containment) {\n                    if (actions.length > 0) {\n                        wnd.minLeft = outerWidth(actions) + parseInt(actions.css(\"right\"), 10) - outerWidth(element);\n                    } else {\n                        wnd.minLeft =  20 - outerWidth(element); // at least 20px remain visible\n                    }\n\n                    wnd.minLeft -= containerOffset.left;\n                    wnd.minTop = -containerOffset.top;\n                }\n\n                $(templates.overlay).appendTo(wnd.wrapper).css({ opacity: 0 });\n\n                wnd.wrapper.children(KWINDOWRESIZEHANDLES).hide();\n\n                $(BODY).css(CURSOR, e.currentTarget.css(CURSOR));\n            },\n\n            drag: function (e) {\n                var wnd = this.owner;\n                var position = wnd.options.position;\n                var axis = wnd.options.draggable.axis;\n                var left;\n                var top;\n\n                if (this._preventDragging || wnd.isMaximized()) {\n                    return;\n                }\n\n                if (!axis || axis.toLowerCase() === \"x\") {\n                    left = e.x.client - wnd.startPosition.left;\n\n                    if (wnd.containment && !wnd._isPinned) {\n                        left += wnd.containment.scrollLeft();\n                    }\n\n                    position.left = constrain(left, wnd.minLeft, wnd.maxLeft);\n                }\n\n                if (!axis || axis.toLowerCase() === \"y\") {\n                    top = e.y.client - wnd.startPosition.top;\n\n                    if (wnd.containment && !wnd._isPinned) {\n                        top += wnd.containment.scrollTop();\n                    }\n\n                    position.top = constrain(top, wnd.minTop, wnd.maxTop);\n                }\n\n                if (kendo.support.transforms) {\n                    $(wnd.wrapper).css(\n                        \"transform\", \"translate(\" +\n                        (position.left - wnd.initialPointerPosition.left) + \"px, \" +\n                        (position.top - wnd.initialPointerPosition.top) + \"px)\"\n                    );\n                } else {\n                    $(wnd.wrapper).css(position);\n                }\n\n            },\n\n            _finishDrag: function() {\n                var wnd = this.owner;\n\n                wnd.wrapper\n                    .children(KWINDOWRESIZEHANDLES).toggle(!wnd.options.isMinimized).end()\n                    .find(KOVERLAY).remove();\n\n                $(BODY).css(CURSOR, \"\");\n            },\n\n            dragcancel: function (e) {\n                if (this._preventDragging) {\n                    return;\n                }\n                this._finishDrag();\n\n                e.currentTarget.closest(KWINDOW).css(this.owner.initialWindowPosition);\n            },\n\n            dragend: function () {\n                var wnd = this.owner;\n\n                if (this._preventDragging || wnd.isMaximized()) {\n                    return;\n                }\n\n                $(wnd.wrapper)\n                    .css(wnd.options.position)\n                    .css(\"transform\", \"\");\n\n                this._finishDrag();\n\n                wnd.trigger(DRAGEND);\n\n                return false;\n            },\n            destroy: function() {\n                if (this._draggable) {\n                    this._draggable.destroy();\n                }\n\n                this._draggable = this.owner = null;\n            }\n        };\n\n        kendo.ui.plugin(Window);\n\n    })(window.kendo.jQuery);\n\n    return window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-drawing` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n(function(f, define){\n    define('kendo.color',[ \"./kendo.core\" ], f);\n})(function(){\n\n    var __meta__ = { // jshint ignore:line\n        id: \"color\",\n        name: \"Color utils\",\n        category: \"framework\",\n        advanced: true,\n        description: \"Color utilities used across components\",\n        depends: [ \"core\" ]\n    };\n\n/*jshint eqnull:true  */\n\nwindow.kendo = window.kendo || {};\n\nvar Class = kendo.Class;\nvar support = kendo.support;\n\nvar namedColors = {\n    aliceblue: \"f0f8ff\", antiquewhite: \"faebd7\", aqua: \"00ffff\",\n    aquamarine: \"7fffd4\", azure: \"f0ffff\", beige: \"f5f5dc\",\n    bisque: \"ffe4c4\", black: \"000000\", blanchedalmond: \"ffebcd\",\n    blue: \"0000ff\", blueviolet: \"8a2be2\", brown: \"a52a2a\",\n    burlywood: \"deb887\", cadetblue: \"5f9ea0\", chartreuse: \"7fff00\",\n    chocolate: \"d2691e\", coral: \"ff7f50\", cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\", crimson: \"dc143c\", cyan: \"00ffff\",\n    darkblue: \"00008b\", darkcyan: \"008b8b\", darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\", darkgrey: \"a9a9a9\", darkgreen: \"006400\",\n    darkkhaki: \"bdb76b\", darkmagenta: \"8b008b\", darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\", darkorchid: \"9932cc\", darkred: \"8b0000\",\n    darksalmon: \"e9967a\", darkseagreen: \"8fbc8f\", darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\", darkslategrey: \"2f4f4f\", darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\", deeppink: \"ff1493\", deepskyblue: \"00bfff\",\n    dimgray: \"696969\", dimgrey: \"696969\", dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\", floralwhite: \"fffaf0\", forestgreen: \"228b22\",\n    fuchsia: \"ff00ff\", gainsboro: \"dcdcdc\", ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\", goldenrod: \"daa520\", gray: \"808080\",\n    grey: \"808080\", green: \"008000\", greenyellow: \"adff2f\",\n    honeydew: \"f0fff0\", hotpink: \"ff69b4\", indianred: \"cd5c5c\",\n    indigo: \"4b0082\", ivory: \"fffff0\", khaki: \"f0e68c\",\n    lavender: \"e6e6fa\", lavenderblush: \"fff0f5\", lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\", lightblue: \"add8e6\", lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\", lightgoldenrodyellow: \"fafad2\", lightgray: \"d3d3d3\",\n    lightgrey: \"d3d3d3\", lightgreen: \"90ee90\", lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\", lightseagreen: \"20b2aa\", lightskyblue: \"87cefa\",\n    lightslategray: \"778899\", lightslategrey: \"778899\", lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\", lime: \"00ff00\", limegreen: \"32cd32\",\n    linen: \"faf0e6\", magenta: \"ff00ff\", maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\", mediumblue: \"0000cd\", mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370d8\", mediumseagreen: \"3cb371\", mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\", mediumturquoise: \"48d1cc\", mediumvioletred: \"c71585\",\n    midnightblue: \"191970\", mintcream: \"f5fffa\", mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\", navajowhite: \"ffdead\", navy: \"000080\",\n    oldlace: \"fdf5e6\", olive: \"808000\", olivedrab: \"6b8e23\",\n    orange: \"ffa500\", orangered: \"ff4500\", orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\", palegreen: \"98fb98\", paleturquoise: \"afeeee\",\n    palevioletred: \"d87093\", papayawhip: \"ffefd5\", peachpuff: \"ffdab9\",\n    peru: \"cd853f\", pink: \"ffc0cb\", plum: \"dda0dd\",\n    powderblue: \"b0e0e6\", purple: \"800080\", red: \"ff0000\",\n    rosybrown: \"bc8f8f\", royalblue: \"4169e1\", saddlebrown: \"8b4513\",\n    salmon: \"fa8072\", sandybrown: \"f4a460\", seagreen: \"2e8b57\",\n    seashell: \"fff5ee\", sienna: \"a0522d\", silver: \"c0c0c0\",\n    skyblue: \"87ceeb\", slateblue: \"6a5acd\", slategray: \"708090\",\n    slategrey: \"708090\", snow: \"fffafa\", springgreen: \"00ff7f\",\n    steelblue: \"4682b4\", tan: \"d2b48c\", teal: \"008080\",\n    thistle: \"d8bfd8\", tomato: \"ff6347\", turquoise: \"40e0d0\",\n    violet: \"ee82ee\", wheat: \"f5deb3\", white: \"ffffff\",\n    whitesmoke: \"f5f5f5\", yellow: \"ffff00\", yellowgreen: \"9acd32\"\n};\n\nvar browser = support.browser;\n\nvar matchNamedColor = function (color) {\n    var colorNames = Object.keys(namedColors);\n    colorNames.push(\"transparent\");\n\n    var regexp = new RegExp(\"^(\" + colorNames.join(\"|\") + \")(\\\\W|$)\", \"i\");\n    matchNamedColor = function (color) { return regexp.exec(color); };\n\n    return regexp.exec(color);\n};\n\nvar BaseColor = Class.extend({\n    init: function() {  },\n\n    toHSV: function() { return this; },\n\n    toRGB: function() { return this; },\n\n    toHex: function(options) { return this.toBytes().toHex(options); },\n\n    toBytes: function() { return this; },\n\n    toCss: function(options) { return \"#\" + this.toHex(options); },\n\n    toCssRgba: function() {\n        var rgb = this.toBytes();\n        return (\"rgba(\" + (rgb.r) + \", \" + (rgb.g) + \", \" + (rgb.b) + \", \" + (parseFloat((Number(this.a)).toFixed(3))) + \")\");\n    },\n\n    toDisplay: function() {\n        if (browser.msie && browser.version < 9) {\n            return this.toCss(); // no RGBA support; does it support any opacity in colors?\n        }\n        return this.toCssRgba();\n    },\n\n    equals: function(c) {\n        return c === this || c !== null && this.toCssRgba() === parseColor(c).toCssRgba();\n    },\n\n    diff: function(other) {\n        if (other === null) {\n            return NaN;\n        }\n\n        var c1 = this.toBytes();\n        var c2 = other.toBytes();\n\n        return Math.sqrt(Math.pow((c1.r - c2.r) * 0.30, 2) +\n                         Math.pow((c1.g - c2.g) * 0.59, 2) +\n                         Math.pow((c1.b - c2.b) * 0.11, 2));\n    },\n\n    clone: function() {\n        var c = this.toBytes();\n        if (c === this) {\n            c = new Bytes(c.r, c.g, c.b, c.a);\n        }\n\n        return c;\n    }\n});\n\nvar RGB = BaseColor.extend({\n    init: function(r, g, b, a) {\n        BaseColor.fn.init.call(this);\n\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    },\n\n    toHSV: function() {\n        var ref = this;\n        var r = ref.r;\n        var g = ref.g;\n        var b = ref.b;\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n        var delta = max - min;\n        var v = max;\n        var h, s;\n\n        if (delta === 0) {\n            return new HSV(0, 0, v, this.a);\n        }\n\n        if (max !== 0) {\n            s = delta / max;\n            if (r === max) {\n                h = (g - b) / delta;\n            } else if (g === max) {\n                h = 2 + (b - r) / delta;\n            } else {\n                h = 4 + (r - g) / delta;\n            }\n\n            h *= 60;\n            if (h < 0) {\n                h += 360;\n            }\n        } else {\n            s = 0;\n            h = -1;\n        }\n\n        return new HSV(h, s, v, this.a);\n    },\n\n    toHSL: function() {\n        var ref = this;\n        var r = ref.r;\n        var g = ref.g;\n        var b = ref.b;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h, s, l = (max + min) / 2;\n\n        if (max === min) {\n            h = s = 0;\n        } else {\n            var d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n                default: break;\n            }\n        }\n\n        return new HSL(h * 60, s * 100, l * 100, this.a);\n    },\n\n    toBytes: function() {\n        return new Bytes(this.r * 255, this.g * 255, this.b * 255, this.a);\n    }\n});\n\nvar Bytes = RGB.extend({\n    init: function(r, g, b, a) {\n        RGB.fn.init.call(this, Math.round(r), Math.round(g), Math.round(b), a);\n    },\n\n    toRGB: function() {\n        return new RGB(this.r / 255, this.g / 255, this.b / 255, this.a);\n    },\n\n    toHSV: function() {\n        return this.toRGB().toHSV();\n    },\n\n    toHSL: function() {\n        return this.toRGB().toHSL();\n    },\n\n    toHex: function(options) {\n        var value = hex(this.r, 2) + hex(this.g, 2) + hex(this.b, 2);\n\n        if (options && options.alpha) {\n            value += hex(Math.round(this.a * 255), 2);\n        }\n\n        return value;\n    },\n\n    toBytes: function() {\n        return this;\n    }\n});\n\nfunction hex(n, width, pad) {\n    if (pad === void 0) { pad = \"0\"; }\n\n    var result = n.toString(16);\n    while (width > result.length) {\n        result = pad + result;\n    }\n\n    return result;\n}\n\nvar HSV = BaseColor.extend({\n    init: function(h, s, v, a) {\n        BaseColor.fn.init.call(this);\n\n        this.h = h;\n        this.s = s;\n        this.v = v;\n        this.a = a;\n    },\n\n    toRGB: function() {\n        var ref = this;\n        var h = ref.h;\n        var s = ref.s;\n        var v = ref.v;\n        var r, g, b;\n\n        if (s === 0) {\n            r = g = b = v;\n        } else {\n            h /= 60;\n\n            var i = Math.floor(h);\n            var f = h - i;\n            var p = v * (1 - s);\n            var q = v * (1 - s * f);\n            var t = v * (1 - s * (1 - f));\n\n            switch (i) {\n                case 0: r = v; g = t; b = p; break;\n                case 1: r = q; g = v; b = p; break;\n                case 2: r = p; g = v; b = t; break;\n                case 3: r = p; g = q; b = v; break;\n                case 4: r = t; g = p; b = v; break;\n                default: r = v; g = p; b = q; break;\n            }\n        }\n\n        return new RGB(r, g, b, this.a);\n    },\n\n    toHSL: function() {\n        return this.toRGB().toHSL();\n    },\n\n    toBytes: function() {\n        return this.toRGB().toBytes();\n    }\n});\n\nvar HSL = BaseColor.extend({\n    init: function(h, s, l, a) {\n        BaseColor.fn.init.call(this);\n\n        this.h = h;\n        this.s = s;\n        this.l = l;\n        this.a = a;\n    },\n\n    toRGB: function() {\n        var h = this.h / 360;\n        var s = this.s / 100;\n        var l = this.l / 100;\n        var r, g, b;\n\n        if (s === 0) {\n            r = g = b = l; // achromatic\n        } else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1 / 3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1 / 3);\n        }\n\n        return new RGB(r, g, b, this.a);\n    },\n\n    toHSV: function() {\n        return this.toRGB().toHSV();\n    },\n\n    toBytes: function() {\n        return this.toRGB().toBytes();\n    }\n});\n\nfunction hue2rgb(p, q, s) {\n    var t = s;\n\n    if (t < 0) {\n        t += 1;\n    }\n\n    if (t > 1) {\n        t -= 1;\n    }\n\n    if (t < 1 / 6) {\n        return p + (q - p) * 6 * t;\n    }\n\n    if (t < 1 / 2) {\n        return q;\n    }\n\n    if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n    }\n\n    return p;\n}\n\nfunction alphaFromHex(a) {\n    return parseFloat(parseFloat(parseInt(a, 16) / 255 ).toFixed(3));\n}\n\nfunction parseColor(value, safe) {\n    var m, ret;\n\n    if (value == null || value === \"none\") {\n        return null;\n    }\n\n    if (value instanceof BaseColor) {\n        return value;\n    }\n\n    var color = value.toLowerCase();\n    if ((m = matchNamedColor(color))) {\n        if (m[1] === \"transparent\") {\n            color = new RGB(1, 1, 1, 0);\n        } else {\n            color = parseColor(namedColors[m[1]], safe);\n        }\n        color.match = [ m[1] ];\n        return color;\n    }\n    if ((m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color))) {\n        ret = new Bytes(parseInt(m[1], 16),\n                        parseInt(m[2], 16),\n                        parseInt(m[3], 16), 1);\n    } else if ((m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color))) {\n        ret = new Bytes(parseInt(m[1] + m[1], 16),\n                        parseInt(m[2] + m[2], 16),\n                        parseInt(m[3] + m[3], 16), 1);\n    } else if ((m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color))) { // Parse 4 digit hex color\n        ret = new Bytes(parseInt(m[1] + m[1], 16),\n                        parseInt(m[2] + m[2], 16),\n                        parseInt(m[3] + m[3], 16),\n                        alphaFromHex(m[4] + m[4]));\n    } else if ((m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color))) { // Parse 8 digit hex color\n        ret = new Bytes(parseInt(m[1], 16),\n                        parseInt(m[2], 16),\n                        parseInt(m[3], 16),\n                        alphaFromHex(m[4]));\n    } else if ((m = /^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/.exec(color))) {\n        ret = new Bytes(parseInt(m[1], 10),\n                        parseInt(m[2], 10),\n                        parseInt(m[3], 10), 1);\n    } else if ((m = /^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color))) {\n        ret = new Bytes(parseInt(m[1], 10),\n                        parseInt(m[2], 10),\n                        parseInt(m[3], 10), parseFloat(m[4]));\n    } else if ((m = /^rgb\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*\\)/.exec(color))) {\n        ret = new RGB(parseFloat(m[1]) / 100,\n                      parseFloat(m[2]) / 100,\n                      parseFloat(m[3]) / 100, 1);\n    } else if ((m = /^rgba\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color))) {\n        ret = new RGB(parseFloat(m[1]) / 100,\n                      parseFloat(m[2]) / 100,\n                      parseFloat(m[3]) / 100, parseFloat(m[4]));\n    }\n\n    if (ret) {\n        ret.match = m;\n    } else if (!safe) {\n        throw new Error(\"Cannot parse color: \" + color);\n    }\n\n    return ret;\n}\n\nvar DARK_TRESHOLD = 180;\n\nvar Color = Class.extend({\n    init: function(value) {\n        var this$1 = this;\n\n        if (arguments.length === 1) {\n            var formats = Color.formats;\n            var resolvedColor = this.resolveColor(value);\n\n            for (var idx = 0; idx < formats.length; idx++) {\n                var formatRegex = formats[idx].re;\n                var processor = formats[idx].process;\n                var parts = formatRegex.exec(resolvedColor);\n\n                if (parts) {\n                    var channels = processor(parts);\n                    this$1.r = channels[0];\n                    this$1.g = channels[1];\n                    this$1.b = channels[2];\n                }\n            }\n        } else {\n            this.r = arguments[0];\n            this.g = arguments[1];\n            this.b = arguments[2];\n        }\n\n        this.r = this.normalizeByte(this.r);\n        this.g = this.normalizeByte(this.g);\n        this.b = this.normalizeByte(this.b);\n    },\n\n    toHex: function() {\n        var pad = this.padDigit;\n        var r = this.r.toString(16);\n        var g = this.g.toString(16);\n        var b = this.b.toString(16);\n\n        return \"#\" + pad(r) + pad(g) + pad(b);\n    },\n\n    resolveColor: function(value) {\n        var color = value || \"black\";\n\n        if (color.charAt(0) === \"#\") {\n            color = color.substr(1, 6);\n        }\n\n        color = color.replace(/ /g, \"\");\n        color = color.toLowerCase();\n        color = Color.namedColors[color] || color;\n\n        return color;\n    },\n\n    normalizeByte: function(value) {\n        if (value < 0 || isNaN(value)) {\n            return 0;\n        }\n\n        return value > 255 ? 255 : value;\n    },\n\n    padDigit: function(value) {\n        return (value.length === 1) ? \"0\" + value : value;\n    },\n\n    brightness: function(value) {\n        var round = Math.round;\n\n        this.r = round(this.normalizeByte(this.r * value));\n        this.g = round(this.normalizeByte(this.g * value));\n        this.b = round(this.normalizeByte(this.b * value));\n\n        return this;\n    },\n\n    percBrightness: function() {\n        return Math.sqrt(0.241 * this.r * this.r + 0.691 * this.g * this.g + 0.068 * this.b * this.b);\n    },\n\n    isDark: function() {\n        return this.percBrightness() < DARK_TRESHOLD;\n    }\n});\n\nColor.fromBytes = function(r, g, b, a) {\n    return new Bytes(r, g, b, a != null ? a : 1);\n};\n\nColor.fromRGB = function(r, g, b, a) {\n    return new RGB(r, g, b, a != null ? a : 1);\n};\n\nColor.fromHSV = function(h, s, v, a) {\n    return new HSV(h, s, v, a != null ? a : 1);\n};\n\nColor.fromHSL = function(h, s, l, a) {\n    return new HSL(h, s, l, a != null ? a : 1);\n};\n\nColor.formats = [ {\n    re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n    process: function(parts) {\n        return [\n            parseInt(parts[1], 10), parseInt(parts[2], 10), parseInt(parts[3], 10)\n        ];\n    }\n}, {\n    re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n    process: function(parts) {\n        return [\n            parseInt(parts[1], 16), parseInt(parts[2], 16), parseInt(parts[3], 16)\n        ];\n    }\n}, {\n    re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n    process: function(parts) {\n        return [\n            parseInt(parts[1] + parts[1], 16),\n            parseInt(parts[2] + parts[2], 16),\n            parseInt(parts[3] + parts[3], 16)\n        ];\n    }\n} ];\n\nColor.namedColors = namedColors;\n\nkendo.deepExtend(kendo, {\n    parseColor: parseColor,\n    namedColors: namedColors,\n    Color: Color\n});\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define) {\n    define('kendo.slider',[ \"./kendo.draganddrop\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"slider\",\n    name: \"Slider\",\n    category: \"web\",\n    description: \"The Slider widget provides a rich input for selecting values or ranges of values.\",\n    depends: [ \"draganddrop\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        Draggable = kendo.ui.Draggable,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        extend = $.extend,\n        format = kendo.format,\n        parse = kendo.parseFloat,\n        proxy = $.proxy,\n        isArray = Array.isArray,\n        math = Math,\n        support = kendo.support,\n        pointers = support.pointers,\n        msPointers = support.msPointers,\n        CHANGE = \"change\",\n        SLIDE = \"slide\",\n        NS = \".slider\",\n        MOUSE_DOWN = \"touchstart\" + NS + \" mousedown\" + NS,\n        TRACK_MOUSE_DOWN = pointers ? \"pointerdown\" + NS : (msPointers ? \"MSPointerDown\" + NS : MOUSE_DOWN),\n        MOUSE_UP = \"touchend\" + NS + \" mouseup\" + NS,\n        TRACK_MOUSE_UP = pointers ? \"pointerup\" : (msPointers ? \"MSPointerUp\" + NS : MOUSE_UP),\n        MOVE_SELECTION = \"moveSelection\",\n        KEY_DOWN = \"keydown\" + NS,\n        CLICK = \"click\" + NS,\n        MOUSE_OVER = \"mouseover\" + NS,\n        FOCUS = \"focus\" + NS,\n        BLUR = \"blur\" + NS,\n        DRAG_HANDLE = \".k-draghandle\",\n        TRACK_SELECTOR = \".k-slider-track\",\n        TICK_SELECTOR = \".k-tick\",\n        STATE_SELECTED = \"k-state-selected\",\n        STATE_FOCUSED = \"k-state-focused\",\n        STATE_DISABLED = \"k-state-disabled\",\n        DISABLED = \"disabled\",\n        UNDEFINED = \"undefined\",\n        TABINDEX = \"tabindex\",\n        getTouches = kendo.getTouches,\n\n        ARIA_VALUETEXT = \"aria-valuetext\",\n        ARIA_VALUENOW = \"aria-valuenow\";\n\n    var SliderBase = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            that._isHorizontal = options.orientation == \"horizontal\";\n            that._isRtl = that._isHorizontal && kendo.support.isRtl(element);\n            that._position = that._isHorizontal ? \"left\" : \"bottom\";\n            that._sizeFn = that._isHorizontal ? \"width\" : \"height\";\n            that._outerSize = that._isHorizontal ? outerWidth : outerHeight;\n\n            options.tooltip.format = options.tooltip.enabled ? options.tooltip.format || \"{0}\" : \"{0}\";\n\n            if (options.smallStep <= 0) {\n                throw new Error('Kendo UI Slider smallStep must be a positive number.');\n            }\n\n            that._createHtml();\n            that._trackDiv = that.wrapper.find(TRACK_SELECTOR);\n\n            that._maxSelection = that._trackDiv[that._sizeFn]();\n\n            that._sliderItemsInit();\n\n            that._reset();\n\n            that._tabindex(that.wrapper.find(DRAG_HANDLE));\n            that[options.enabled ? \"enable\" : \"disable\"]();\n\n            var rtlDirectionSign = kendo.support.isRtl(that.wrapper) ? -1 : 1;\n\n            that._keyMap = {\n                37: step(-1 * rtlDirectionSign * options.smallStep), // left arrow\n                40: step(-options.smallStep), // down arrow\n                39: step(+1 * rtlDirectionSign * options.smallStep), // right arrow\n                38: step(+options.smallStep), // up arrow\n                35: setValue(options.max), // end\n                36: setValue(options.min), // home\n                33: step(+options.largeStep), // page up\n                34: step(-options.largeStep) // page down\n            };\n\n            kendo.notify(that);\n        },\n\n        events: [\n            CHANGE,\n            SLIDE\n        ],\n\n        options: {\n            enabled: true,\n            min: 0,\n            max: 10,\n            smallStep: 1,\n            largeStep: 5,\n            orientation: \"horizontal\",\n            tickPlacement: \"both\",\n            tooltip: { enabled: true, format: \"{0}\" }\n        },\n\n        _distance: function() {\n            return round(this.options.max - this.options.min);\n        },\n\n        _resize: function() {\n            this.wrapper.find(\".k-slider-items\").remove();\n\n            this._maxSelection = this._trackDiv[this._sizeFn]();\n            this._sliderItemsInit();\n            this._refresh();\n\n            if (this.options.enabled) {\n                this.enable(true);\n            }\n        },\n\n        _sliderItemsInit: function() {\n            var that = this,\n                options = that.options;\n\n            // [Backwards compatibilty]: maxSelection is reduced with 2 to compensate new styling and preserve automatic calculation to not show ticks.\n            var sizeBetweenTicks = (that._maxSelection - 2)/ ((options.max - options.min) / options.smallStep);\n\n            var pixelWidths = that._calculateItemsWidth(math.floor(removeFraction(that._distance()) / removeFraction(options.smallStep)));\n\n            if (options.tickPlacement != \"none\" && sizeBetweenTicks >= 2) {\n                $(this.element).parent().find(\".k-slider-items\").remove();\n                that._trackDiv.before(createSliderItems(options, that._distance()));\n                that._setItemsTitle();\n            }\n\n            that._calculateSteps(pixelWidths);\n\n            if (options.tickPlacement != \"none\" && sizeBetweenTicks >= 2 &&\n                options.largeStep >= options.smallStep) {\n                that._setItemsLargeTick();\n                that.wrapper.find(TICK_SELECTOR).first().addClass(\"k-first\");\n                that.wrapper.find(TICK_SELECTOR).last().addClass(\"k-last\");\n            }\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.wrapper);\n        },\n\n        _setItemsTitle: function() {\n            var that = this,\n                options = that.options,\n                items = that.wrapper.find(TICK_SELECTOR),\n                titleNumber = options.min,\n                count = items.length;\n\n            for (var i = 0; i <= count; i += 1) {\n                $(items[i]).attr(\"title\", format(options.tooltip.format, round(titleNumber)));\n                titleNumber += options.smallStep;\n            }\n        },\n\n        _setItemsLargeTick: function() {\n            var that = this,\n                options = that.options,\n                items = that.wrapper.find(TICK_SELECTOR),\n                i = 0, item, value;\n\n            if (removeFraction(options.largeStep) % removeFraction(options.smallStep) === 0 || that._distance() / options.largeStep >= 3) {\n                if (!that._isHorizontal && !that._isRtl) {\n                    items = $.makeArray(items).reverse();\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    item = $(items[i]);\n                    value = that._values[i];\n                    var valueWithoutFraction = round(removeFraction(value - this.options.min));\n                    if (valueWithoutFraction % removeFraction(options.smallStep) === 0 && valueWithoutFraction % removeFraction(options.largeStep) === 0) {\n                        item.addClass(\"k-tick-large\")\n                            .html(\"<span class='k-label'>\" + item.attr(\"title\") + \"</span>\");\n\n                        if (i !== 0 && i !== items.length - 1) {\n                            item.css(\"line-height\", item[that._sizeFn]() + \"px\");\n                        }\n                    }\n                }\n            }\n        },\n\n        _calculateItemsWidth: function(itemsCount) {\n            var that = this,\n                options = that.options,\n                trackDivSize = parseFloat(that._trackDiv.css(that._sizeFn)) + 1,\n                distance = that._distance(),\n                preciseItemsCount = removeFraction(distance) / removeFraction(options.smallStep),\n                pixelStep = trackDivSize / removeFraction(distance),\n                itemWidth,\n                pixelWidths,\n                i;\n\n            if (preciseItemsCount - itemsCount > 0) {\n                trackDivSize -= ((removeFraction(distance) % removeFraction(options.smallStep)) * pixelStep);\n            }\n\n            itemWidth = trackDivSize / itemsCount;\n            pixelWidths = [];\n\n            for (i = 0; i < itemsCount - 1; i++) {\n                pixelWidths[i] = itemWidth;\n            }\n\n            pixelWidths[itemsCount - 1] = pixelWidths[itemsCount] = itemWidth / 2;\n            return that._roundWidths(pixelWidths);\n        },\n\n        _roundWidths: function(pixelWidthsArray) {\n            var balance = 0,\n                count = pixelWidthsArray.length,\n                i;\n\n            for (i = 0; i < count; i++) {\n                balance += (pixelWidthsArray[i] - math.floor(pixelWidthsArray[i]));\n                pixelWidthsArray[i] = math.floor(pixelWidthsArray[i]);\n            }\n\n            balance = math.round(balance);\n\n            return this._addAdditionalSize(balance, pixelWidthsArray);\n        },\n\n        _addAdditionalSize: function(additionalSize, pixelWidthsArray) {\n            if (additionalSize === 0) {\n                return pixelWidthsArray;\n            }\n\n            //set step size\n            var step = parseFloat(pixelWidthsArray.length - 1) / parseFloat(additionalSize == 1 ? additionalSize : additionalSize - 1),\n                i;\n\n            for (i = 0; i < additionalSize; i++) {\n                pixelWidthsArray[parseInt(math.round(step * i), 10)] += 1;\n            }\n\n            return pixelWidthsArray;\n        },\n\n        _calculateSteps: function(pixelWidths) {\n            var that = this,\n                options = that.options,\n                val = options.min,\n                selection = 0,\n                distance = that._distance(),\n                itemsCount = math.ceil(removeFraction(distance) / removeFraction(options.smallStep)),\n                i = 1,\n                lastItem;\n\n            itemsCount += (removeFraction(distance) / removeFraction(options.smallStep)) % 1 === 0 ? 1 : 0;\n            pixelWidths.splice(0, 0, pixelWidths[itemsCount - 2] * 2);\n            pixelWidths.splice(itemsCount - 1, 1, pixelWidths.pop() * 2);\n\n            that._pixelSteps = [selection];\n            that._values = [val];\n\n            if (itemsCount === 0) {\n                return;\n            }\n\n            while (i < itemsCount) {\n                selection += (pixelWidths[i - 1] + pixelWidths[i]) / 2;\n                that._pixelSteps[i] = selection;\n                val += options.smallStep;\n                that._values[i] = round(val);\n\n                i++;\n            }\n\n            lastItem = (removeFraction(distance) % removeFraction(options.smallStep)) === 0 ? itemsCount - 1 : itemsCount;\n\n            that._pixelSteps[lastItem] = that._maxSelection;\n            that._values[lastItem] = options.max;\n\n            if (that._isRtl) {\n                that._pixelSteps.reverse();\n                that._values.reverse();\n            }\n        },\n\n        _getValueFromPosition: function(mousePosition, draggableArea) {\n            var that = this,\n                options = that.options,\n                step = math.max(options.smallStep * (that._maxSelection / that._distance()), 0),\n                position = 0,\n                halfStep = (step / 2),\n                i;\n\n            if (that._isHorizontal) {\n                position = mousePosition - draggableArea.startPoint;\n                if (that._isRtl) {\n                    position = that._maxSelection - position;\n                }\n            } else {\n                position = draggableArea.startPoint - mousePosition;\n            }\n\n            if (that._maxSelection - ((parseInt(that._maxSelection % step, 10) - 3) / 2) < position) {\n                return options.max;\n            }\n\n            for (i = 0; i < that._pixelSteps.length; i++) {\n                if (math.abs(that._pixelSteps[i] - position) - 1 <= halfStep) {\n                    return round(that._values[i]);\n                }\n            }\n        },\n\n        _getFormattedValue: function(val, drag) {\n            var that = this,\n                html = \"\",\n                tooltip = that.options.tooltip,\n                tooltipTemplate,\n                selectionStart,\n                selectionEnd;\n\n            if (isArray(val)) {\n                selectionStart = val[0];\n                selectionEnd = val[1];\n            } else if (drag && drag.type) {\n                selectionStart = drag.selectionStart;\n                selectionEnd = drag.selectionEnd;\n            }\n\n            if (drag) {\n                tooltipTemplate = drag.tooltipTemplate;\n            }\n\n            if (!tooltipTemplate && tooltip.template) {\n                tooltipTemplate = kendo.template(tooltip.template);\n            }\n\n            if (isArray(val) || (drag && drag.type)) {\n\n                if (tooltipTemplate) {\n                    html = tooltipTemplate({\n                        selectionStart: selectionStart,\n                        selectionEnd: selectionEnd\n                    });\n                } else {\n                    selectionStart = format(tooltip.format, selectionStart);\n                    selectionEnd = format(tooltip.format, selectionEnd);\n                    html = selectionStart + \" - \" + selectionEnd;\n                }\n            } else {\n                if (drag) {\n                    drag.val = val;\n                }\n\n                if (tooltipTemplate) {\n                    html = tooltipTemplate({\n                        value: val\n                    });\n                } else {\n                    html = format(tooltip.format, val);\n                }\n            }\n            return html;\n        },\n\n        _getDraggableArea: function() {\n            var that = this,\n                offset = kendo.getOffset(that._trackDiv);\n\n            return {\n                startPoint: that._isHorizontal ? offset.left : offset.top + that._maxSelection,\n                endPoint: that._isHorizontal ? offset.left + that._maxSelection : offset.top\n            };\n        },\n\n        _createHtml: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                inputs = element.find(\"input\");\n\n            if (inputs.length == 2) {\n                inputs.eq(0).prop(\"value\", formatValue(options.selectionStart));\n                inputs.eq(1).prop(\"value\", formatValue(options.selectionEnd));\n            } else {\n                element.prop(\"value\", formatValue(options.value));\n            }\n\n            that.wrapper = element.wrap(createWrapper(options, element, that._isHorizontal)).hide().parents(\".k-slider\");\n\n            if (options.showButtons) {\n                that.wrapper.find(\".k-slider-track-wrap\")\n                       .after(createButton(options, \"increase\", that._isHorizontal, that._isRtl))\n                       .before(createButton(options, \"decrease\", that._isHorizontal, that._isRtl));\n            }\n\n            element.before(createTrack(options, element, that._isHorizontal));\n        },\n\n        _focus: function(e) {\n            var that = this,\n                target = e.target,\n                val = that.value(),\n                drag = that._drag;\n\n            if (!drag) {\n                if (target == that.wrapper.find(DRAG_HANDLE).eq(0)[0]) {\n                    drag = that._firstHandleDrag;\n                    that._activeHandle = 0;\n                } else {\n                    drag = that._lastHandleDrag;\n                    that._activeHandle = 1;\n                }\n                val = val[that._activeHandle];\n            }\n\n            $(target).addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n\n            if (drag) {\n                that._activeHandleDrag = drag;\n\n                drag.selectionStart = that.options.selectionStart;\n                drag.selectionEnd = that.options.selectionEnd;\n\n                drag._updateTooltip(val);\n            }\n        },\n\n        _focusWithMouse: function(target) {\n            target = $(target);\n\n            var that = this,\n                idx = target.is(DRAG_HANDLE) ? target.index() : 0;\n\n            window.setTimeout(function() {\n                that.wrapper.find(DRAG_HANDLE)[idx == 2 ? 1 : 0].focus();\n            }, 1);\n\n            that._setTooltipTimeout();\n        },\n\n        _blur: function(e) {\n            var that = this,\n                drag = that._activeHandleDrag;\n\n            $(e.target).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n\n            if (drag) {\n                drag._removeTooltip();\n                delete that._activeHandleDrag;\n                delete that._activeHandle;\n            }\n        },\n\n        _setTooltipTimeout: function() {\n            var that = this;\n            that._tooltipTimeout = window.setTimeout(function() {\n                var drag = that._drag || that._activeHandleDrag;\n                if (drag) {\n                    drag._removeTooltip();\n                }\n            }, 300);\n        },\n\n        _clearTooltipTimeout: function() {\n            var that = this;\n            window.clearTimeout(this._tooltipTimeout);\n            var drag = that._drag || that._activeHandleDrag;\n            if (drag && drag.tooltipDiv) {\n                drag.tooltipDiv.stop(true, false).css(\"opacity\", 1);\n            }\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._form = form.on(\"reset\", proxy(that._formResetHandler, that));\n            }\n        },\n\n        min: function(value) {\n            if (!value) {\n                return this.options.min;\n            }\n            this.setOptions({ \"min\": value });\n        },\n\n        max: function(value) {\n            if (!value) {\n                return this.options.max;\n            }\n            this.setOptions({ \"max\": value });\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n            this._sliderItemsInit();\n            this._refresh();\n        },\n\n        destroy: function() {\n            if (this._form) {\n                this._form.off(\"reset\", this._formResetHandler);\n            }\n            Widget.fn.destroy.call(this);\n        }\n    });\n\n    function createWrapper(options, element, isHorizontal) {\n        var orientationCssClass = isHorizontal ? \" k-slider-horizontal\" : \" k-slider-vertical\",\n            style = options.style ? options.style : element.attr(\"style\"),\n            cssClasses = element.attr(\"class\") ? (\" \" + element.attr(\"class\")) : \"\",\n            tickPlacementCssClass = \"\";\n\n        if (options.tickPlacement == \"bottomRight\") {\n            tickPlacementCssClass = \" k-slider-bottomright\";\n        } else if (options.tickPlacement == \"topLeft\") {\n            tickPlacementCssClass = \" k-slider-topleft\";\n        }\n\n        style = style ? \" style='\" + style + \"'\" : \"\";\n\n        return \"<div class='k-widget k-slider\" + orientationCssClass + cssClasses + \"'\" + style + \">\" +\n               \"<div class='k-slider-track-wrap\" + tickPlacementCssClass +\n               \"'></div></div>\";\n    }\n\n    function createButton(options, type, isHorizontal) {\n        var buttonCssClass = \"\";\n\n        if (isHorizontal) {\n            if (type === \"increase\") {\n                buttonCssClass = \"k-i-arrow-e\";\n            } else {\n                buttonCssClass = \"k-i-arrow-w\";\n            }\n        } else {\n            if (type == \"increase\") {\n                buttonCssClass = \"k-i-arrow-n\";\n            } else {\n                buttonCssClass = \"k-i-arrow-s\";\n            }\n        }\n\n        return \"<a role='button' class='k-button k-button-md k-rounded-full k-button-solid k-button-solid-base k-icon-button k-button-\" + type + \"' \" +\n                \"title='\" + options[type + \"ButtonTitle\"] + \"' \" +\n                \"aria-label='\" + options[type + \"ButtonTitle\"] + \"'>\" +\n                \"<span class='k-button-icon k-icon \" + buttonCssClass + \"'></span></a>\";\n    }\n\n    function createSliderItems(options, distance) {\n        var result = \"<ul class='k-reset k-slider-items' role='presentation'>\",\n            count = math.floor(round(distance / options.smallStep)) + 1,\n            i;\n\n        for (i = 0; i < count; i++) {\n            result += \"<li class='k-tick'></li>\";\n        }\n\n        result += \"</ul>\";\n\n        return result;\n    }\n\n    function createTrack(options, element, isHorizontal) {\n        var dragHandleCount = element.is(\"input\") ? 1 : 2,\n            firstDragHandleTitle = dragHandleCount == 2 ? options.leftDragHandleTitle : options.dragHandleTitle,\n            value = options.value,\n            min = options.selectionStart,\n            max = options.selectionEnd,\n            elementValue, minElementValue, maxElementValue;\n\n        if (dragHandleCount === 1) {\n            elementValue = element.val();\n\n            if (elementValue !== null && elementValue !== undefined && elementValue !== 'null') {\n                if (value === null || value === undefined) {\n                    value = elementValue;\n                }\n            }\n        } else {\n            minElementValue = element.find(\"input\").eq(0).val();\n            maxElementValue = element.find(\"input\").eq(1).val();\n\n            if (minElementValue !== null && minElementValue !== undefined && minElementValue !== 'null') {\n                if (min === null || min === undefined) {\n                    min = minElementValue;\n                }\n            }\n\n            if (maxElementValue !== null && maxElementValue !== undefined && maxElementValue !== 'null') {\n                if (max === null || max === undefined) {\n                    max = maxElementValue;\n                }\n            }\n        }\n\n        var result = \"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div>\" +\n               \"<span tabindex='0' class='k-draghandle' title='\" + firstDragHandleTitle + \"' role='slider' \" +\n               (isHorizontal === false ? \"aria-orientation='vertical' \" : \"\") +\n               \"aria-valuemin='\" + options.min + \"' aria-valuemax='\" + options.max + \"' aria-valuenow='\" + (dragHandleCount > 1 ? (min || options.min) : value || options.min) + \"'></span>\" +\n               (dragHandleCount > 1 ? \"<span tabindex='0' class='k-draghandle' title='\" + options.rightDragHandleTitle + \"'role='slider' \" +\n               (isHorizontal === false ? \"aria-orientation='vertical' \" : \"\") +\n               \"aria-valuemin='\" + options.min + \"' aria-valuemax='\" + options.max + \"' aria-valuenow='\" + (max || options.max) + \"'></span>\" : \"\") +\n               \"</div>\";\n\n        return result;\n    }\n\n    function step(stepValue) {\n        return function(value) {\n            return value + stepValue;\n        };\n    }\n\n    function setValue(value) {\n        return function() {\n            return value;\n        };\n    }\n\n    function formatValue(value) {\n        return (value + \"\").replace(\".\", kendo.cultures.current.numberFormat[\".\"]);\n    }\n\n    function calculatePrecision(value) {\n        var number = value.toString();\n        var precision = 0;\n\n        number = number.split(\".\");\n\n        if (number[1]) {\n            precision = number[1].length;\n        }\n\n        precision = precision > 10 ? 10 : precision;\n        return precision;\n    }\n\n    function round(value) {\n        var precision, power;\n\n        value = parseFloat(value, 10);\n        precision = calculatePrecision(value);\n        power = math.pow(10, precision || 0);\n\n        return math.round(value * power) / power;\n    }\n\n    function parseAttr(element, name) {\n        var value = parse(element.getAttribute(name));\n        if (value === null) {\n            value = undefined;\n        }\n        return value;\n    }\n\n    function defined(value) {\n        return typeof value !== UNDEFINED;\n    }\n\n    function removeFraction(value) {\n        return value * 10000;\n    }\n\n    var Slider = SliderBase.extend({\n        init: function(element, options) {\n            var that = this,\n                dragHandle;\n\n            element.type = \"text\";\n            options = extend({}, {\n                value: parseAttr(element, \"value\"),\n                min: parseAttr(element, \"min\"),\n                max: parseAttr(element, \"max\"),\n                smallStep: parseAttr(element, \"step\")\n            }, options);\n\n            element = $(element);\n\n            if (options && options.enabled === undefined) {\n                options.enabled = !element.is(\"[disabled]\");\n            }\n\n            SliderBase.fn.init.call(that, element, options);\n            options = that.options;\n            if (!defined(options.value) || options.value === null) {\n                options.value = options.min;\n                element.prop(\"value\", formatValue(options.min));\n            }\n            options.value = math.max(math.min(options.value, options.max), options.min);\n\n            dragHandle = that.wrapper.find(DRAG_HANDLE);\n\n            that._selection = new Slider.Selection(dragHandle, that, options);\n            that._drag = new Slider.Drag(dragHandle, \"\", that, options);\n\n            that._refreshAriaAttr(options.value);\n        },\n\n        options: {\n            name: \"Slider\",\n            showButtons: true,\n            increaseButtonTitle: \"Increase\",\n            decreaseButtonTitle: \"Decrease\",\n            dragHandleTitle: \"drag\",\n            tooltip: { format: \"{0:#,#.##}\" },\n            value: null\n        },\n\n        enable: function(enable) {\n            var that = this,\n                options = that.options,\n                clickHandler,\n                move;\n\n            that.disable();\n            if (enable === false) {\n                return;\n            }\n\n            that.wrapper\n                .removeClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, false);\n\n            clickHandler = function(e) {\n                var touch = getTouches(e)[0];\n\n                if (!touch) {\n                    return;\n                }\n\n                var mousePosition = that._isHorizontal ? touch.location.pageX : touch.location.pageY,\n                    draggableArea = that._getDraggableArea(),\n                    target = $(e.target);\n\n                if (target.hasClass(\"k-draghandle\")) {\n                    target.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    return;\n                }\n\n                that._update(that._getValueFromPosition(mousePosition, draggableArea));\n\n                that._focusWithMouse(e.target);\n\n                that._drag.dragstart(e);\n                e.preventDefault();\n            };\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR)\n                    .on(TRACK_MOUSE_DOWN, clickHandler)\n                    .end()\n                    .on(TRACK_MOUSE_DOWN, function() {\n                        $(document.documentElement).one(\"selectstart\", kendo.preventDefault);\n                    })\n                    .on(TRACK_MOUSE_UP, function() {\n                        that._drag._end();\n                    });\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, 0)\n                .on(MOUSE_UP, function() {\n                    that._setTooltipTimeout();\n                })\n                .on(CLICK, function(e) {\n                    that._focusWithMouse(e.target);\n                    e.preventDefault();\n                })\n                .on(FOCUS, proxy(that._focus, that))\n                .on(BLUR, proxy(that._blur, that));\n\n            move = proxy(function(sign) {\n                var newVal = that._nextValueByIndex(that._valueIndex + (sign * 1));\n                that._setValueInRange(newVal);\n                that._drag._updateTooltip(newVal);\n            }, that);\n\n            if (options.showButtons) {\n                var mouseDownHandler = proxy(function(e, sign) {\n                    this._clearTooltipTimeout();\n                    if (e.which === 1 || (support.touch && e.which === 0)) {\n                        move(sign);\n\n                        this.timeout = setTimeout(proxy(function() {\n                            this.timer = setInterval(function() {\n                                move(sign);\n                            }, 60);\n                        }, this), 200);\n                    }\n                }, that);\n\n                that.wrapper.find(\".k-button\")\n                    .on(MOUSE_UP, proxy(function(e) {\n                        this._clearTimer();\n                        that._focusWithMouse(e.target);\n                    }, that))\n                    .on(MOUSE_OVER, function(e) {\n                        $(e.currentTarget).addClass(\"k-state-hover\");\n                    })\n                    .on(\"mouseout\" + NS, proxy(function(e) {\n                        $(e.currentTarget).removeClass(\"k-state-hover\");\n                        this._clearTimer();\n                    }, that))\n                    .on(MOUSE_DOWN, proxy(function(e) {\n                        var sign = $(e.target).closest(\".k-button\").is(\".k-button-increase\") ? 1 : -1;\n                        mouseDownHandler(e, sign);\n                    }, that))\n                    .on(\"click\", kendo.preventDefault);\n            }\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .off(KEY_DOWN, false)\n                .on(KEY_DOWN, proxy(this._keydown, that));\n\n            options.enabled = true;\n        },\n\n        disable: function() {\n            var that = this;\n\n            that.wrapper\n                .addClass(STATE_DISABLED);\n\n            $(that.element).prop(DISABLED, DISABLED);\n\n            that.wrapper\n                .find(\".k-button\")\n                .off(MOUSE_DOWN)\n                .on(MOUSE_DOWN, function(e) {\n                    e.preventDefault();\n                    $(this).addClass(\"k-state-active\");\n                })\n                .off(MOUSE_UP)\n                .on(MOUSE_UP, function(e) {\n                    e.preventDefault();\n                    $(this).removeClass(\"k-state-active\");\n                })\n                .off(\"mouseleave\" + NS)\n                .on(\"mouseleave\" + NS, kendo.preventDefault)\n                .off(MOUSE_OVER)\n                .on(MOUSE_OVER, kendo.preventDefault);\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(TRACK_MOUSE_DOWN).off(TRACK_MOUSE_UP);\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, -1)\n                .off(MOUSE_UP)\n                .off(KEY_DOWN)\n                .off(CLICK)\n                .off(FOCUS)\n                .off(BLUR);\n\n            that.options.enabled = false;\n        },\n\n        _update: function(val) {\n            var that = this,\n                change = that.value() != val;\n\n            that.value(val);\n\n            if (change) {\n                that.trigger(CHANGE, { value: that.options.value });\n            }\n        },\n\n        value: function(value) {\n            var that = this,\n                options = that.options;\n\n            value = round(value);\n            if (isNaN(value)) {\n                return options.value;\n            }\n\n            if (value >= options.min && value <= options.max) {\n                if (options.value != value) {\n                    that.element.prop(\"value\", formatValue(value));\n                    options.value = value;\n                    that._refreshAriaAttr(value);\n                    that._refresh();\n                }\n            }\n        },\n\n        _refresh: function() {\n            this.trigger(MOVE_SELECTION, { value: this.options.value });\n        },\n\n        _refreshAriaAttr: function(value) {\n            var that = this,\n                drag = that._drag,\n                formattedValue;\n\n            if (drag && drag._tooltipDiv) {\n                formattedValue = drag._tooltipDiv.text();\n            } else {\n                formattedValue = that._getFormattedValue(value, null);\n            }\n            this.wrapper.find(DRAG_HANDLE).attr(ARIA_VALUENOW, value).attr(ARIA_VALUETEXT, formattedValue);\n        },\n\n        _clearTimer: function() {\n            clearTimeout(this.timeout);\n            clearInterval(this.timer);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n\n            if (e.keyCode in that._keyMap) {\n                that._clearTooltipTimeout();\n                that._setValueInRange(that._keyMap[e.keyCode](that.options.value));\n                that._drag._updateTooltip(that.value());\n                e.preventDefault();\n            }\n        },\n\n        _setValueInRange: function(val) {\n            var that = this,\n                options = that.options;\n\n            val = round(val);\n            if (isNaN(val)) {\n                that._update(options.min);\n                return;\n            }\n\n            val = math.max(math.min(val, options.max), options.min);\n            that._update(val);\n        },\n\n        _nextValueByIndex: function(index) {\n            var count = this._values.length;\n            if (this._isRtl) {\n                index = count - 1 - index;\n            }\n            return this._values[math.max(0, math.min(index, count - 1))];\n        },\n\n        _formResetHandler: function() {\n            var that = this,\n                min = that.options.min;\n\n            setTimeout(function() {\n                var value = that.element[0].value;\n                that.value(value === \"\" || isNaN(value) ? min : value);\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            SliderBase.fn.destroy.call(that);\n\n            that.wrapper.off(NS)\n                .find(\".k-button\").off(NS)\n                .end()\n                .find(DRAG_HANDLE).off(NS)\n                .end()\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(NS)\n                .end();\n\n            that._drag.draggable.destroy();\n            that._drag._removeTooltip(true);\n        }\n    });\n\n    Slider.Selection = function(dragHandle, that, options) {\n        function moveSelection(val) {\n            var selectionValue = val - options.min,\n                index = that._valueIndex = math.ceil(round(selectionValue / options.smallStep)),\n                selection = parseInt(that._pixelSteps[index], 10),\n                selectionDiv = that._trackDiv.find(\".k-slider-selection\"),\n                rtlCorrection = that._isRtl ? 2 : 0;\n\n            selectionDiv[that._sizeFn](that._isRtl ? that._maxSelection - selection : selection);\n            dragHandle.css(that._position, selection - rtlCorrection);\n        }\n\n        moveSelection(options.value);\n\n        that.bind([SLIDE, MOVE_SELECTION], function(e) {\n            moveSelection(parseFloat(e.value, 10));\n        });\n\n        that.bind(CHANGE, function(e) {\n            moveSelection(parseFloat(e.sender.value(), 10));\n        });\n    };\n\n    Slider.Drag = function(element, type, owner, options) {\n        var that = this;\n        that.owner = owner;\n        that.options = options;\n        that.element = element;\n        that.type = type;\n\n        that.draggable = new Draggable(element, {\n            distance: 0,\n            dragstart: proxy(that._dragstart, that),\n            drag: proxy(that.drag, that),\n            dragend: proxy(that.dragend, that),\n            dragcancel: proxy(that.dragcancel, that)\n        });\n\n        element.click(false);\n\n        // Disable link dragging\n        element.on(\"dragstart\", function(e) {\n            e.preventDefault();\n        });\n    };\n\n    Slider.Drag.prototype = {\n        dragstart: function(e) {\n            // add reference to the last active drag handle.\n            this.owner._activeDragHandle = this;\n            // HACK to initiate click on the line\n            this.draggable.userEvents.cancel();\n            this._dragstart(e);\n            this.dragend();\n        },\n\n        _dragstart: function(e) {\n            var that = this,\n                owner = that.owner,\n                options = that.options;\n\n            if (!options.enabled) {\n                e.preventDefault();\n                return;\n            }\n\n            // add reference to the last active drag handle.\n            this.owner._activeDragHandle = this;\n\n            owner.element.off(MOUSE_OVER);\n            owner.wrapper.find(\".\" + STATE_FOCUSED).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n            that.element.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n            $(document.documentElement).css(\"cursor\", \"pointer\");\n\n            that.draggableArea = owner._getDraggableArea();\n            that.step = math.max(options.smallStep * (owner._maxSelection / owner._distance()), 0);\n\n            if (that.type) {\n                that.selectionStart = options.selectionStart;\n                that.selectionEnd = options.selectionEnd;\n                owner._setZIndex(that.type);\n            } else {\n                that.oldVal = that.val = options.value;\n            }\n\n            that._removeTooltip(true);\n            that._createTooltip();\n        },\n\n        _createTooltip: function() {\n            var that = this,\n                owner = that.owner,\n                tooltip = that.options.tooltip,\n                html = '',\n                wnd = $(window),\n                tooltipTemplate, calloutCssClass;\n\n            if (!tooltip.enabled) {\n                return;\n            }\n\n            if (tooltip.template) {\n                tooltipTemplate = that.tooltipTemplate = kendo.template(tooltip.template);\n            }\n\n            $(\".k-slider-tooltip\").remove(); // if user changes window while tooltip is visible, a second one will be created\n            that.tooltipDiv = $(\"<div class='k-tooltip k-slider-tooltip'><!-- --></div>\").appendTo(document.body);\n\n            html = owner._getFormattedValue(that.val || owner.value(), that);\n\n            if (!that.type) {\n                calloutCssClass = \"k-callout-\" + (owner._isHorizontal ? 's' : 'e');\n                that.tooltipInnerDiv = \"<div class='k-callout \" + calloutCssClass + \"'><!-- --></div>\";\n                html += that.tooltipInnerDiv;\n            }\n\n            that.tooltipDiv.html(html);\n\n            that._scrollOffset = {\n                top: wnd.scrollTop(),\n                left: kendo.scrollLeft(wnd)\n            };\n\n            that.moveTooltip();\n        },\n\n        drag: function(e) {\n            var that = this,\n                owner = that.owner,\n                x = e.x.location,\n                y = e.y.location,\n                startPoint = that.draggableArea.startPoint,\n                endPoint = that.draggableArea.endPoint,\n                slideParams;\n\n            e.preventDefault();\n\n            if (owner._isHorizontal) {\n                if (owner._isRtl) {\n                    that.val = that.constrainValue(x, startPoint, endPoint, x < endPoint);\n                } else {\n                    that.val = that.constrainValue(x, startPoint, endPoint, x >= endPoint);\n                }\n            } else {\n                that.val = that.constrainValue(y, endPoint, startPoint, y <= endPoint);\n            }\n\n            if (that.oldVal != that.val) {\n                that.oldVal = that.val;\n\n                if (that.type) {\n                    if (that.type == \"firstHandle\") {\n                        if (that.val < that.selectionEnd) {\n                            that.selectionStart = that.val;\n                        } else {\n                            that.selectionStart = that.selectionEnd = that.val;\n                        }\n                    } else {\n                        if (that.val > that.selectionStart) {\n                            that.selectionEnd = that.val;\n                        } else {\n                            that.selectionStart = that.selectionEnd = that.val;\n                        }\n                    }\n                    slideParams = {\n                        values: [that.selectionStart, that.selectionEnd],\n                        value: [that.selectionStart, that.selectionEnd]\n                    };\n                } else {\n                    slideParams = { value: that.val };\n                }\n\n                owner.trigger(SLIDE, slideParams);\n            }\n            that._updateTooltip(that.val);\n        },\n\n        _updateTooltip: function(val) {\n            var that = this,\n                options = that.options,\n                tooltip = options.tooltip,\n                html = \"\";\n\n            if (!tooltip.enabled) {\n                return;\n            }\n\n            if (!that.tooltipDiv) {\n                that._createTooltip();\n            }\n\n            html = that.owner._getFormattedValue(round(val), that);\n\n            if (!that.type) {\n                html += that.tooltipInnerDiv;\n            }\n\n            that.tooltipDiv.html(html);\n            that.moveTooltip();\n        },\n\n        dragcancel: function() {\n            this.owner._refresh();\n            $(document.documentElement).css(\"cursor\", \"\");\n            return this._end();\n        },\n\n        dragend: function() {\n            var that = this,\n                owner = that.owner;\n\n            $(document.documentElement).css(\"cursor\", \"\");\n\n            if (that.type) {\n                owner._update(that.selectionStart, that.selectionEnd);\n            } else {\n                owner._update(that.val);\n                that.draggable.userEvents._disposeAll();\n            }\n\n            that.draggable.userEvents.cancel();\n            return that._end();\n        },\n\n        _end: function() {\n            var that = this,\n                owner = that.owner;\n\n            owner._focusWithMouse(that.element);\n\n            owner.element.on(MOUSE_OVER);\n\n            return false;\n        },\n\n        _removeTooltip: function(noAnimation) {\n            var that = this,\n                owner = that.owner;\n\n            if (that.tooltipDiv && owner.options.tooltip.enabled && owner.options.enabled) {\n                if (noAnimation) {\n                    that.tooltipDiv.remove();\n                    that.tooltipDiv = null;\n                } else {\n                    that.tooltipDiv.fadeOut(\"slow\", function() {\n                        $(this).remove();\n                        that.tooltipDiv = null;\n                    });\n                }\n            }\n        },\n\n        moveTooltip: function() {\n            var that = this,\n                owner = that.owner,\n                top = 0,\n                left = 0,\n                element = that.element,\n                offset = kendo.getOffset(element),\n                margin = 8,\n                viewport = $(window),\n                callout = that.tooltipDiv.find(\".k-callout\"),\n                width = outerWidth(that.tooltipDiv),\n                height = outerHeight(that.tooltipDiv),\n                dragHandles, sdhOffset, diff, anchorSize;\n\n            if (that.type) {\n                dragHandles = owner.wrapper.find(DRAG_HANDLE);\n                offset = kendo.getOffset(dragHandles.eq(0));\n                sdhOffset = kendo.getOffset(dragHandles.eq(1));\n\n                if (owner._isHorizontal) {\n                    top = sdhOffset.top;\n                    left = offset.left + ((sdhOffset.left - offset.left) / 2);\n                } else {\n                    top = offset.top + ((sdhOffset.top - offset.top) / 2);\n                    left = sdhOffset.left;\n                }\n\n                anchorSize = outerWidth(dragHandles.eq(0)) + 2 * margin;\n            } else {\n                top = offset.top;\n                left = offset.left;\n                anchorSize = outerWidth(element) + 2 * margin;\n            }\n\n            if (owner._isHorizontal) {\n                left -= parseInt((width - owner._outerSize(element)) / 2, 10);\n                top -= height + margin + (callout.length ? callout.height() : 0);\n            } else {\n                top -= parseInt((height - owner._outerSize(element)) / 2, 10);\n                left -= width + margin + (callout.length ? callout.width() : 0);\n            }\n\n            if (owner._isHorizontal) {\n                diff = that._flip(top, height, anchorSize, outerHeight(viewport) + that._scrollOffset.top);\n                top += diff;\n                left += that._fit(left, width, outerWidth(viewport) + that._scrollOffset.left);\n            } else {\n                diff = that._flip(left, width, anchorSize, outerWidth(viewport) + that._scrollOffset.left);\n                top += that._fit(top, height, outerHeight(viewport) + that._scrollOffset.top);\n                left += diff;\n            }\n\n            if (diff > 0 && callout) {\n                callout.removeClass();\n                callout.addClass(\"k-callout k-callout-\" + (owner._isHorizontal ? \"n\" : \"w\"));\n            }\n\n            that.tooltipDiv.css({ top: top, left: left });\n        },\n\n        _fit: function(position, size, viewPortEnd) {\n            var output = 0;\n\n            if (position + size > viewPortEnd) {\n                output = viewPortEnd - (position + size);\n            }\n\n            if (position < 0) {\n                output = -position;\n            }\n\n            return output;\n        },\n\n        _flip: function(offset, size, anchorSize, viewPortEnd) {\n            var output = 0;\n\n            if (offset + size > viewPortEnd) {\n                output += -(anchorSize + size);\n            }\n\n            if (offset + output < 0) {\n                output += anchorSize + size;\n            }\n\n            return output;\n        },\n\n        constrainValue: function(position, min, max, maxOverflow) {\n            var that = this,\n                val = 0;\n\n            if (min < position && position < max) {\n                val = that.owner._getValueFromPosition(position, that.draggableArea);\n            } else {\n                if (maxOverflow ) {\n                    val = that.options.max;\n                } else {\n                    val = that.options.min;\n                }\n            }\n\n            return val;\n        }\n\n    };\n\n    kendo.ui.plugin(Slider);\n\n    var RangeSlider = SliderBase.extend({\n        init: function(element, options) {\n            var that = this,\n                inputs = $(element).find(\"input\"),\n                firstInput = inputs.eq(0)[0],\n                secondInput = inputs.eq(1)[0];\n\n            firstInput.type = \"text\";\n            secondInput.type = \"text\";\n\n            if (options && options.showButtons) {\n                if (window.console) {\n                    window.console.warn(\"showbuttons option is not supported for the range slider, ignoring\");\n                }\n\n                options.showButtons = false;\n            }\n\n            options = extend({}, {\n                selectionStart: parseAttr(firstInput, \"value\"),\n                min: parseAttr(firstInput, \"min\"),\n                max: parseAttr(firstInput, \"max\"),\n                smallStep: parseAttr(firstInput, \"step\")\n            }, {\n                selectionEnd: parseAttr(secondInput, \"value\"),\n                min: parseAttr(secondInput, \"min\"),\n                max: parseAttr(secondInput, \"max\"),\n                smallStep: parseAttr(secondInput, \"step\")\n            }, options);\n\n            if (options && options.enabled === undefined) {\n                options.enabled = !inputs.is(\"[disabled]\");\n            }\n\n            SliderBase.fn.init.call(that, element, options);\n            options = that.options;\n            if (!defined(options.selectionStart) || options.selectionStart === null) {\n                options.selectionStart = options.min;\n                inputs.eq(0).prop(\"value\", formatValue(options.min));\n            }\n\n            if (!defined(options.selectionEnd) || options.selectionEnd === null) {\n                options.selectionEnd = options.max;\n                inputs.eq(1).prop(\"value\", formatValue(options.max));\n            }\n\n            var dragHandles = that.wrapper.find(DRAG_HANDLE);\n\n            this._selection = new RangeSlider.Selection(dragHandles, that, options);\n            that._firstHandleDrag = new Slider.Drag(dragHandles.eq(0), \"firstHandle\", that, options);\n            that._lastHandleDrag = new Slider.Drag(dragHandles.eq(1), \"lastHandle\" , that, options);\n\n            that._refreshAriaAttr(options.selectionStart , options.selectionEnd);\n        },\n\n        options: {\n            name: \"RangeSlider\",\n            leftDragHandleTitle: \"drag\",\n            rightDragHandleTitle: \"drag\",\n            tooltip: { format: \"{0:#,#.##}\" },\n            selectionStart: null,\n            selectionEnd: null\n        },\n\n        enable: function(enable) {\n            var that = this,\n                options = that.options,\n                clickHandler;\n\n            that.disable();\n            if (enable === false) {\n                return;\n            }\n\n            that.wrapper\n                .removeClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, false);\n\n            clickHandler = function(e) {\n                var touch = getTouches(e)[0];\n\n                if (!touch) {\n                    return;\n                }\n\n                var mousePosition = that._isHorizontal ? touch.location.pageX : touch.location.pageY,\n                    draggableArea = that._getDraggableArea(),\n                    val = that._getValueFromPosition(mousePosition, draggableArea),\n                    target = $(e.target),\n                    from, to, drag;\n\n                if (target.hasClass(\"k-draghandle\")) {\n                    that.wrapper.find(\".\" + STATE_FOCUSED).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    target.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    return;\n                }\n\n                if (val < options.selectionStart) {\n                    from = val;\n                    to = options.selectionEnd;\n                    drag = that._firstHandleDrag;\n                } else if (val > that.selectionEnd) {\n                    from = options.selectionStart;\n                    to = val;\n                    drag = that._lastHandleDrag;\n                } else {\n                    if (val - options.selectionStart <= options.selectionEnd - val) {\n                        from = val;\n                        to = options.selectionEnd;\n                        drag = that._firstHandleDrag;\n                    } else {\n                        from = options.selectionStart;\n                        to = val;\n                        drag = that._lastHandleDrag;\n                    }\n                }\n\n                drag.dragstart(e);\n                that._setValueInRange(from, to);\n                that._focusWithMouse(drag.element);\n            };\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR)\n                    .on(TRACK_MOUSE_DOWN, clickHandler)\n                    .end()\n                    .on(TRACK_MOUSE_DOWN, function() {\n                        $(document.documentElement).one(\"selectstart\", kendo.preventDefault);\n                    })\n                    .on(TRACK_MOUSE_UP, function() {\n                        if (that._activeDragHandle) {\n                            that._activeDragHandle._end();\n                        }\n                    });\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, 0)\n                .on(MOUSE_UP, function() {\n                    that._setTooltipTimeout();\n                })\n                .on(CLICK, function(e) {\n                    that._focusWithMouse(e.target);\n                    e.preventDefault();\n                })\n                .on(FOCUS, proxy(that._focus, that))\n                .on(BLUR, proxy(that._blur, that));\n\n            that.wrapper.find(DRAG_HANDLE)\n                .off(KEY_DOWN, kendo.preventDefault)\n                .eq(0).on(KEY_DOWN,\n                    proxy(function(e) {\n                        this._keydown(e, \"firstHandle\");\n                    }, that)\n                )\n                .end()\n                .eq(1).on(KEY_DOWN,\n                    proxy(function(e) {\n                        this._keydown(e, \"lastHandle\");\n                    }, that)\n                );\n\n            that.options.enabled = true;\n        },\n\n        disable: function() {\n            var that = this;\n\n            that.wrapper\n                .addClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, DISABLED);\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(TRACK_MOUSE_DOWN).off(TRACK_MOUSE_UP);\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, -1)\n                .off(MOUSE_UP)\n                .off(KEY_DOWN)\n                .off(CLICK)\n                .off(FOCUS)\n                .off(BLUR);\n\n            that.options.enabled = false;\n        },\n\n        _keydown: function(e, handle) {\n            var that = this,\n                selectionStartValue = that.options.selectionStart,\n                selectionEndValue = that.options.selectionEnd,\n                dragSelectionStart,\n                dragSelectionEnd,\n                activeHandleDrag;\n\n            if (e.keyCode in that._keyMap) {\n\n                that._clearTooltipTimeout();\n\n                if (handle == \"firstHandle\") {\n                    activeHandleDrag = that._activeHandleDrag = that._firstHandleDrag;\n                    selectionStartValue = that._keyMap[e.keyCode](selectionStartValue);\n\n                    if (selectionStartValue > selectionEndValue) {\n                        selectionEndValue = selectionStartValue;\n                    }\n                } else {\n                    activeHandleDrag = that._activeHandleDrag = that._lastHandleDrag;\n                    selectionEndValue = that._keyMap[e.keyCode](selectionEndValue);\n\n                    if (selectionStartValue > selectionEndValue) {\n                        selectionStartValue = selectionEndValue;\n                    }\n                }\n\n                that._setValueInRange(round(selectionStartValue), round(selectionEndValue));\n\n                dragSelectionStart = Math.max(selectionStartValue, that.options.selectionStart);\n                dragSelectionEnd = Math.min(selectionEndValue, that.options.selectionEnd);\n\n                activeHandleDrag.selectionEnd = Math.max(dragSelectionEnd, that.options.selectionStart);\n                activeHandleDrag.selectionStart = Math.min(dragSelectionStart, that.options.selectionEnd);\n\n                activeHandleDrag._updateTooltip(that.value()[that._activeHandle]);\n\n                e.preventDefault();\n            }\n        },\n\n        _update: function(selectionStart, selectionEnd) {\n            var that = this,\n                values = that.value();\n\n            var change = values[0] != selectionStart || values[1] != selectionEnd;\n\n            that.value([selectionStart, selectionEnd]);\n\n            if (change) {\n                that.trigger(CHANGE, {\n                    values: [selectionStart, selectionEnd],\n                    value: [selectionStart, selectionEnd]\n                });\n            }\n        },\n\n        value: function(value) {\n            if (value && value.length) {\n                return this._value(value[0], value[1]);\n            } else {\n                return this._value();\n            }\n        },\n\n        _value: function(start, end) {\n            var that = this,\n                options = that.options,\n                selectionStart = options.selectionStart,\n                selectionEnd = options.selectionEnd;\n\n            if (isNaN(start) && isNaN(end)) {\n                return [selectionStart, selectionEnd];\n            } else {\n                start = round(start);\n                end = round(end);\n            }\n\n            if (start >= options.min && start <= options.max &&\n                end >= options.min && end <= options.max && start <= end) {\n                if (selectionStart != start || selectionEnd != end) {\n                    that.element.find(\"input\")\n                        .eq(0).prop(\"value\", formatValue(start))\n                        .end()\n                        .eq(1).prop(\"value\", formatValue(end));\n\n                    options.selectionStart = start;\n                    options.selectionEnd = end;\n                    that._refresh();\n                    that._refreshAriaAttr(start, end);\n                }\n            }\n        },\n\n        values: function(start, end) {\n            if (isArray(start)) {\n                return this._value(start[0], start[1]);\n            } else {\n                return this._value(start, end);\n            }\n        },\n\n        _refresh: function() {\n            var that = this,\n                options = that.options;\n\n            that.trigger(MOVE_SELECTION, {\n                values: [options.selectionStart, options.selectionEnd],\n                value: [options.selectionStart, options.selectionEnd]\n            });\n\n            if (options.selectionStart == options.max && options.selectionEnd == options.max) {\n                that._setZIndex(\"firstHandle\");\n            }\n        },\n\n        _refreshAriaAttr: function(start, end) {\n            var that = this,\n                dragHandles = that.wrapper.find(DRAG_HANDLE),\n                drag = that._activeHandleDrag,\n                formattedValue;\n\n            formattedValue = that._getFormattedValue([start, end], drag);\n\n            dragHandles.eq(0).attr(ARIA_VALUENOW, start);\n            dragHandles.eq(1).attr(ARIA_VALUENOW, end);\n            dragHandles.attr(ARIA_VALUETEXT, formattedValue);\n        },\n\n        _setValueInRange: function(selectionStart, selectionEnd) {\n            var options = this.options;\n\n            selectionStart = math.max(math.min(selectionStart, options.max), options.min);\n\n            selectionEnd = math.max(math.min(selectionEnd, options.max), options.min);\n\n            if (selectionStart == options.max && selectionEnd == options.max) {\n                this._setZIndex(\"firstHandle\");\n            }\n\n            this._update(math.min(selectionStart, selectionEnd), math.max(selectionStart, selectionEnd));\n        },\n\n        _setZIndex: function(type) {\n            this.wrapper.find(DRAG_HANDLE).each(function(index) {\n                $(this).css(\"z-index\", type == \"firstHandle\" ? 1 - index : index);\n            });\n        },\n\n        _formResetHandler: function() {\n            var that = this,\n                options = that.options;\n\n            setTimeout(function() {\n                var inputs = that.element.find(\"input\");\n                var start = inputs[0].value;\n                var end = inputs[1].value;\n                that.values(start === \"\" || isNaN(start) ? options.min : start, end === \"\" || isNaN(end) ? options.max : end);\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            SliderBase.fn.destroy.call(that);\n\n            that.wrapper.off(NS)\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(NS)\n                .end()\n                .find(DRAG_HANDLE).off(NS);\n\n            that._firstHandleDrag.draggable.destroy();\n            that._lastHandleDrag.draggable.destroy();\n        }\n    });\n\n    RangeSlider.Selection = function(dragHandles, that, options) {\n        function moveSelection(value) {\n            value = value || [];\n            var selectionStartValue = value[0] - options.min,\n                selectionEndValue = value[1] - options.min,\n                selectionStartIndex = math.ceil(round(selectionStartValue / options.smallStep)),\n                selectionEndIndex = math.ceil(round(selectionEndValue / options.smallStep)),\n                selectionStart = that._pixelSteps[selectionStartIndex],\n                selectionEnd = that._pixelSteps[selectionEndIndex],\n                rtlCorrection = that._isRtl ? 2 : 0;\n\n            dragHandles.eq(0).css(that._position, selectionStart - rtlCorrection)\n                       .end()\n                       .eq(1).css(that._position, selectionEnd - rtlCorrection);\n\n            makeSelection(selectionStart, selectionEnd);\n        }\n\n        function makeSelection(selectionStart, selectionEnd) {\n            var selection,\n                selectionPosition,\n                selectionDiv = that._trackDiv.find(\".k-slider-selection\");\n\n            selection = math.abs(selectionStart - selectionEnd);\n\n            selectionDiv[that._sizeFn](selection);\n            if (that._isRtl) {\n                selectionPosition = math.max(selectionStart, selectionEnd);\n                selectionDiv.css(\"right\", that._maxSelection - selectionPosition - 1);\n            } else {\n                selectionPosition = math.min(selectionStart, selectionEnd);\n                selectionDiv.css(that._position, selectionPosition - 1);\n            }\n        }\n\n        moveSelection(that.value());\n\n        that.bind([ CHANGE, SLIDE, MOVE_SELECTION ], function(e) {\n            moveSelection(e.values);\n        });\n    };\n\n    kendo.ui.plugin(RangeSlider);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.badge',[\"./kendo.core\"], f);\n})(function () {\n\nvar __meta__ = {// jshint ignore:line\n    id: \"badge\",\n    name: \"Badge\",\n    category: \"web\", // suite\n    description: \"The Badge decorates avatars, navigation menus, or other components in the application when visual notification is needed\",\n    depends: [\"core\"] // dependencies\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo;\n    var Widget = kendo.ui.Widget;\n    var ui = kendo.ui;\n    var HIDDEN = 'k-hidden';\n\n    var iconTemplate = '<span class=\\'k-badge-icon k-icon k-i-#= icon #\\'></span>';\n    var svgIconTemplate = '<span class=\\'k-badge-icon k-svg-icon\\'>#= icon #</span>';\n\n    var Badge = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._content();\n\n            that._appearance();\n\n            kendo.notify(that);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n        },\n\n        options: {\n            name: 'Badge',\n            cutoutBorder: false,\n            data: {},\n            fill: 'solid',\n            icon: '',\n            max: Infinity,\n            position: 'inline',\n            align: '',\n            sizes: {\n                'small': 'sm',\n                'medium': 'md',\n                'large': 'lg'\n            },\n            size: 'medium',\n            shape: 'rounded',\n            template: null,\n            text: '',\n            themeColor: 'secondary',\n            visible: true,\n            _classNames: []\n        },\n\n        _content: function() {\n            var that = this;\n            var text = that.options.text;\n            var template = that.options.template;\n            var data = that.options.data;\n            var icon = that.options.icon;\n\n            // Order of precedence\n            // 1) template\n            // 2) icon\n            // 3) text\n            // 4) content\n\n            if (template !== null) {\n                that._text = text;\n                that._template = kendo.template(template).bind(that);\n                that.element.html( that._template(data) );\n\n                return;\n            }\n\n            if (icon !== '') {\n                that.icon(icon);\n\n                return;\n            }\n\n            if (text !== '') {\n                that.text(text);\n\n                return;\n            }\n\n            that.text(that.element.html());\n        },\n\n        _appearance: function() {\n            var that = this;\n            that._themeColor = that.options.themeColor;\n            that._shape = that.options.shape;\n            that._sizes = that.options.sizes;\n            that._size = that.options.size;\n            that._fill = that.options.fill;\n            that._cutoutBorder = that.options.cutoutBorder;\n            that._align = that.options.align;\n            that._position = that.options.position;\n            that._visible = that.options.visible;\n\n            that._updateClassNames();\n        },\n\n        _updateClassNames: function() {\n            var that = this;\n            var classNames = ['k-badge'];\n            var keepClassNames = that.options._classNames;\n            var themeColor = that._themeColor;\n            var shape = that._shape;\n            var sizes = that._sizes;\n            var size = that._size;\n            var sizeAbbr = sizes[size] === undefined ? size : sizes[size];\n            var fill = that._fill;\n            var cutoutBorder = that._cutoutBorder;\n            var align = that._align;\n            var position = that._position;\n            var visible = that._visible;\n\n            // Remove all class names\n            that.element.removeClass(function(index, className) {\n                if (className.indexOf('k-') === 0 && keepClassNames.indexOf(className) === -1) {\n                    that.element.removeClass(className);\n                }\n            });\n\n            // Fill\n            if (typeof fill === 'string' && fill !== '') {\n                classNames.push('k-badge-' + fill);\n            }\n\n            // Color\n            if (typeof themeColor === 'string' && themeColor !== '') {\n                classNames.push('k-badge-' + themeColor);\n            }\n\n            // Size\n            if (typeof size === 'string' && size !== '') {\n                classNames.push('k-badge-' + sizeAbbr);\n            }\n\n            // Shape\n            if (typeof shape === 'string' && shape !== '') {\n                classNames.push('k-badge-' + shape);\n            }\n\n            // Cutout border\n            if (typeof cutoutBorder === 'boolean' && cutoutBorder === true) {\n                classNames.push('k-badge-border-cutout');\n            }\n\n            // Position\n            if (typeof position === 'string' && position !== '') {\n                classNames.push('k-badge-' + position);\n            }\n\n            // Align\n            if (typeof position === 'string' && position !== '' && position !== 'inline' && typeof align === 'string' && align.split(' ').length == 2) {\n                classNames.push('k-' + align.replace(' ', '-'));\n            }\n\n            // Visibility\n            if (visible === false) {\n                classNames.push(HIDDEN);\n            }\n\n            // Apply classnames\n            that.element.addClass(classNames.join(' '));\n        },\n\n        setOptions: function(options) {\n            var that = this;\n\n            that.element.removeClass(function(index, className) {\n                if (className.indexOf('k-') >= 0) {\n                    that.element.removeClass(className);\n                }\n            });\n\n            Widget.fn.setOptions.call(that, options);\n\n            that._content();\n\n            that._appearance();\n        },\n\n        text: function(text) {\n            var that = this;\n            var max = that.options.max;\n\n            // handle badge.text()\n            if (arguments.length === 0 || text === undefined) {\n                return that._text;\n            }\n\n            that._text = text;\n\n            // handle badge.text(true|false|null)\n            if (text === true || text === false || text === null) {\n                that.element.html('');\n\n                return;\n            }\n\n            // handle badge.text('string')\n            if (typeof text === 'string') {\n                that.element.html(text);\n\n                return;\n            }\n\n            // handle badge.text(1)\n            if (typeof text === 'number') {\n                if (text > max) {\n                    that.element.html(max + '+');\n                } else {\n                    that.element.html(text);\n                }\n\n                return;\n            }\n\n            // handle other objects\n            if (typeof text === 'object' && 'toString' in text) {\n                that.element.html(text.toString());\n\n                return;\n            }\n\n        },\n\n        icon: function(icon) {\n            var that = this;\n            var iconTemplateFunction;\n\n            // handle badge.icon()\n            if (arguments.length === 0 || icon === undefined) {\n                return that._icon;\n            }\n\n            that._icon = icon;\n\n            // Handle badge.icon(<SVG />)\n            if (icon.indexOf('<svg') === 0) {\n                iconTemplateFunction = kendo.template(svgIconTemplate);\n                that.element.html(iconTemplateFunction({ icon: icon }));\n\n                return;\n            }\n\n            // Handle badge.icon(ICON_NAME)\n            iconTemplateFunction = kendo.template(iconTemplate);\n            that.element.html(iconTemplateFunction({ icon: icon }));\n        },\n\n        themeColor: function(color) {\n            var that = this;\n\n            // handle badge.color()\n            if (arguments.length === 0 || color === undefined) {\n                return that._themeColor;\n            }\n\n            that._themeColor = color;\n            that._updateClassNames();\n        },\n\n        shape: function(shape) {\n            var that = this;\n\n            // handle badge.shape()\n            if (arguments.length === 0 || shape === undefined) {\n                return that._shape;\n            }\n\n            that._shape = shape;\n            that._updateClassNames();\n        },\n\n        hide: function() {\n            var that = this;\n            that._visible = false;\n\n            that._updateClassNames();\n        },\n\n        show: function() {\n            var that = this;\n            that._visible = true;\n\n            that._updateClassNames();\n        }\n    });\n\n    ui.plugin(Badge);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n});\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.button',[\"./kendo.core\", \"./kendo.badge\", \"./kendo.html.button\"], f);\n})(function () {\n\n    var __meta__ = { // jshint ignore:line\n        id: \"button\",\n        name: \"Button\",\n        category: \"web\",\n        description: \"The Button widget displays styled buttons.\",\n        depends: [\"core\", \"badge\", \"html.button\"]\n    };\n\n    (function ($, undefined) {\n        var kendo = window.kendo,\n            Widget = kendo.ui.Widget,\n            html = kendo.html,\n            ui = kendo.ui,\n            proxy = $.proxy,\n            keys = kendo.keys,\n            CLICK = \"click\",\n            MOUSEDOWN = kendo.support.mousedown,\n            MOUSEUP = kendo.support.mouseup,\n            MOUSEOUT = \"mouseout\",\n            NS = \".kendoButton\",\n            DISABLED = \"disabled\",\n            DISABLEDSTATE = \"k-disabled\",\n            FOCUSEDSTATE = \"k-focus\",\n            SELECTEDSTATE = \"k-selected\";\n\n        var BUTTON_DEFAULTS = {\n            icon: \"\",\n            iconClass: \"\",\n            spriteCssClass: \"\",\n            imageUrl: \"\",\n            badge: null\n        };\n        kendo.setDefaults(\"button\", BUTTON_DEFAULTS);\n\n        var Button = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                element = that.wrapper = that.element;\n                options = that.options;\n\n                html.renderButton(element, $.extend({}, options));\n\n                element.attr(\"role\", \"button\");\n\n                options.enable = options.enable && options.enabled && !element.attr(DISABLED);\n                that.enable(options.enable);\n\n                if (options.enable) {\n                    that._tabindex();\n                }\n\n                that._badge();\n\n                element\n                    .on(CLICK + NS, proxy(that._click, that))\n                    .on(\"focus\" + NS, proxy(that._focus, that))\n                    .on(\"blur\" + NS, proxy(that._blur, that))\n                    .on(\"keydown\" + NS, proxy(that._keydown, that))\n                    .on(\"keyup\" + NS, proxy(that._removeActive, that))\n                    .on(MOUSEDOWN + NS, proxy(that._addActive, that))\n                    .on(MOUSEUP + NS  + \" \" + MOUSEOUT + NS, proxy(that._removeActive, that));\n\n                kendo.notify(that);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that.wrapper.off(NS);\n\n                if (that.badge){\n                    that.badge.destroy();\n                }\n\n                Widget.fn.destroy.call(that);\n            },\n\n            events: [\n                CLICK\n            ],\n\n            options: {\n                name: \"Button\",\n                enable: true,\n                enabled: true,\n                icon: \"\",\n                iconClass: \"\",\n                spriteCssClass: \"\",\n                imageUrl: \"\",\n                badge: null,\n                size: \"medium\",\n                shape: \"rectangle\",\n                rounded: \"medium\",\n                fillMode: \"solid\",\n                themeColor: \"base\"\n            },\n\n            _isNativeButton: function() {\n                return this.element.prop(\"tagName\").toLowerCase() == \"button\";\n            },\n\n            _click: function(e) {\n                if (this.options.enable) {\n                    if (this.trigger(CLICK, { event: e })) {\n                        e.preventDefault();\n                    }\n                }\n            },\n\n            _focus: function() {\n                if (this.options.enable) {\n                    this.element.addClass(FOCUSEDSTATE);\n                }\n            },\n\n            _blur: function() {\n                var that = this;\n                that.element.removeClass(FOCUSEDSTATE);\n                setTimeout(function() {\n                    that.element.removeClass(SELECTEDSTATE);\n                });\n            },\n\n            _keydown: function(e) {\n                var that = this;\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.SPACEBAR) {\n                    that._addActive();\n\n                    if (!that._isNativeButton()) {\n                        if (e.keyCode == keys.SPACEBAR) {\n                            e.preventDefault();\n                        }\n                        that._click(e);\n                    }\n                }\n            },\n\n            _removeActive: function() {\n                this.element.removeClass(SELECTEDSTATE);\n            },\n\n            _addActive: function() {\n                if (this.options.enable) {\n                    this.element.addClass(SELECTEDSTATE);\n                }\n            },\n\n            enable: function(enable) {\n                var that = this,\n                    element = that.element;\n\n                if (enable === undefined) {\n                    enable = true;\n                }\n\n                enable = !!enable;\n                that.options.enable = enable;\n                element.toggleClass(DISABLEDSTATE, !enable)\n                    .attr(\"aria-disabled\", !enable)\n                    .attr(DISABLED, !enable);\n\n                if (enable) {\n                    that._tabindex();\n                }\n\n                // prevent 'Unspecified error' in IE when inside iframe\n                try {\n                    element.trigger(\"blur\");\n                } catch (err) {}\n            },\n\n            _badge: function() {\n                var that = this;\n                var badgeOptions = that.options.badge;\n                var badgeEelement;\n\n                if (badgeOptions === null || badgeOptions === undefined) {\n                    return;\n                }\n\n                if (badgeOptions.constructor !== Object) {\n                    badgeOptions = { text: badgeOptions };\n                }\n\n                if (badgeOptions.position === undefined || badgeOptions.position === \"\") {\n                    badgeOptions.position = \"edge\";\n\n                    if (badgeOptions.align === undefined || badgeOptions.align === \"\") {\n                        badgeOptions.align = \"top end\";\n                    }\n                }\n\n                badgeOptions._classNames = [\"k-button-badge\"];\n\n                that.element.addClass(\"k-badge-container\");\n\n                badgeEelement = $('<span />').appendTo(that.element);\n                that.badge = new ui.Badge(badgeEelement, badgeOptions);\n            }\n        });\n\n        if (Button.fn.hasOwnProperty(\"defaults\") === false) {\n            Object.defineProperty(Button.fn, \"defaults\", {\n                get: function() {\n                    return kendo.defaults.button;\n                }\n            });\n        }\n\n        kendo.cssProperties.registerPrefix(\"Button\", \"k-button-\");\n\n        kendo.cssProperties.registerValues(\"Button\", [{\n            prop: \"fillMode\",\n            values: kendo.cssProperties.fillModeValues.concat([\"link\"])\n        }, {\n            prop: \"rounded\",\n            values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n        }]);\n\n        kendo.ui.plugin(Button);\n\n    })(window.kendo.jQuery);\n\n    return window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.binder',[ \"./kendo.core\", \"./kendo.data\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"binder\",\n    name: \"MVVM\",\n    category: \"framework\",\n    description: \"Model View ViewModel (MVVM) is a design pattern which helps developers separate the Model (the data) from the View (the UI).\",\n    depends: [ \"core\", \"data\" ]\n};\n\n/*jshint eqnull: true */\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Observable = kendo.Observable,\n        ObservableObject = kendo.data.ObservableObject,\n        ObservableArray = kendo.data.ObservableArray,\n        toString = {}.toString,\n        binders = {},\n        Class = kendo.Class,\n        proxy = $.proxy,\n        VALUE = \"value\",\n        SOURCE = \"source\",\n        EVENTS = \"events\",\n        CHECKED = \"checked\",\n        CSS = \"css\",\n        deleteExpando = true,\n        FUNCTION = \"function\",\n        CHANGE = \"change\";\n\n    (function() {\n        var a = document.createElement(\"a\");\n\n        try {\n            delete a.test;\n        } catch(e) {\n            deleteExpando = false;\n        }\n    })();\n\n    var Binding = Observable.extend( {\n        init: function(parents, path) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.source = parents[0];\n            that.parents = parents;\n            that.path = path;\n            that.dependencies = {};\n            that.dependencies[path] = true;\n            that.observable = that.source instanceof Observable;\n\n            that._access = function(e) {\n                that.dependencies[e.field] = true;\n            };\n\n            if (that.observable) {\n                that._change = function(e) {\n                    that.change(e);\n                };\n\n                that.source.bind(CHANGE, that._change);\n            }\n        },\n\n        _parents: function() {\n            var parents = this.parents;\n            var value = this.get();\n\n            if (value && typeof value.parent == \"function\") {\n                var parent = value.parent();\n\n                if ($.inArray(parent, parents) < 0) {\n                    parents = [parent].concat(parents);\n                }\n            }\n\n            return parents;\n        },\n\n        change: function(e) {\n            var dependency,\n                ch,\n                field = e.field,\n                that = this;\n\n            if (that.path === \"this\") {\n                that.trigger(CHANGE, e);\n            } else {\n                for (dependency in that.dependencies) {\n                    if (dependency.indexOf(field) === 0) {\n                       ch = dependency.charAt(field.length);\n\n                       if (!ch || ch === \".\" || ch === \"[\") {\n                            that.trigger(CHANGE, e);\n                            break;\n                       }\n                    }\n                }\n            }\n        },\n\n        start: function(source) {\n            source.bind(\"get\", this._access);\n        },\n\n        stop: function(source) {\n            source.unbind(\"get\", this._access);\n        },\n\n        get: function() {\n\n            var that = this,\n                source = that.source,\n                index = 0,\n                path = that.path,\n                result = source;\n\n            if (!that.observable) {\n                return result;\n            }\n\n            that.start(that.source);\n\n            result = source.get(path);\n\n            // Traverse the observable hierarchy if the binding is not resolved at the current level.\n            while (result === undefined && source) {\n\n                source = that.parents[++index];\n\n                if (source instanceof ObservableObject) {\n                    result = source.get(path);\n                }\n            }\n\n            // second pass try to get the parent from the object hierarchy\n            if (result === undefined) {\n                source = that.source; //get the initial source\n\n                while (result === undefined && source) {\n                    source = source.parent();\n\n                    if (source instanceof ObservableObject) {\n                        result = source.get(path);\n                    }\n                }\n            }\n\n            // If the result is a function - invoke it\n            if (typeof result === \"function\") {\n                index = path.lastIndexOf(\".\");\n\n                // If the function is a member of a nested observable object make that nested observable the context (this) of the function\n                if (index > 0) {\n                    source = source.get(path.substring(0, index));\n                }\n\n                // Invoke the function\n                that.start(source);\n\n                if (source !== that.source) {\n                    result = result.call(source, that.source);\n                } else {\n                    result = result.call(source);\n                }\n\n                that.stop(source);\n            }\n\n            // If the binding is resolved by a parent object\n            if (source && source !== that.source) {\n\n                that.currentSource = source; // save parent object\n\n                // Listen for changes in the parent object\n                source.unbind(CHANGE, that._change)\n                      .bind(CHANGE, that._change);\n            }\n\n            that.stop(that.source);\n\n            return result;\n        },\n\n        set: function(value) {\n            var source = this.currentSource || this.source;\n\n            var field = kendo.getter(this.path)(source);\n\n            if (typeof field === \"function\") {\n                if (source !== this.source) {\n                    field.call(source, this.source, value);\n                } else {\n                    field.call(source, value);\n                }\n            } else {\n                source.set(this.path, value);\n            }\n        },\n\n        destroy: function() {\n            if (this.observable) {\n                this.source.unbind(CHANGE, this._change);\n                if(this.currentSource) {\n                    this.currentSource.unbind(CHANGE, this._change);\n                }\n            }\n\n            this.unbind();\n        }\n    });\n\n    var EventBinding = Binding.extend( {\n        get: function() {\n            var source = this.source,\n                path = this.path,\n                index = 0,\n                handler;\n\n            handler = source.get(path);\n\n            while (!handler && source) {\n                source = this.parents[++index];\n\n                if (source instanceof ObservableObject) {\n                    handler = source.get(path);\n                }\n            }\n\n            return proxy(handler, source);\n        }\n    });\n\n    var TemplateBinding = Binding.extend( {\n        init: function(source, path, template) {\n            var that = this;\n\n            Binding.fn.init.call(that, source, path);\n\n            that.template = template;\n        },\n\n        render: function(value) {\n            var html;\n\n            this.start(this.source);\n\n            html = kendo.render(this.template, value);\n\n            this.stop(this.source);\n\n            return html;\n        }\n    });\n\n    var Binder = Class.extend({\n        init: function(element, bindings, options) {\n            this.element = element;\n            this.bindings = bindings;\n            this.options = options;\n        },\n\n        bind: function(binding, attribute) {\n            var that = this;\n\n            binding = attribute ? binding[attribute] : binding;\n\n            binding.bind(CHANGE, function(e) {\n                that.refresh(attribute || e);\n            });\n\n            that.refresh(attribute);\n        },\n\n        destroy: function() {\n        }\n    });\n\n    var TypedBinder = Binder.extend({\n        dataType: function() {\n            var dataType = this.element.getAttribute(\"data-\" + kendo.ns + \"type\") || this.element.type || \"text\";\n            return dataType.toLowerCase();\n        },\n\n        parsedValue: function() {\n            return this._parseValue(this.element.value, this.dataType());\n        },\n\n        _parseValue: function (value, dataType){\n            if (dataType == \"date\") {\n                value = kendo.parseDate(value, \"yyyy-MM-dd\");\n            } else if (dataType == \"datetime-local\") {\n                value = kendo.parseDate(value, [\"yyyy-MM-ddTHH:mm:ss\", \"yyyy-MM-ddTHH:mm\"] );\n            } else if (dataType == \"number\") {\n                value = kendo.parseFloat(value);\n            } else if (dataType == \"boolean\"){\n                value = value.toLowerCase();\n                if(kendo.parseFloat(value) !== null){\n                    value = Boolean(kendo.parseFloat(value));\n                }else{\n                    value = (value.toLowerCase() === \"true\");\n                }\n            }\n            return value;\n        }\n    });\n\n    binders.attr = Binder.extend({\n        refresh: function(key) {\n            this.element.setAttribute(key, this.bindings.attr[key].get());\n        }\n    });\n\n    binders.css = Binder.extend({\n        init: function(element, bindings, options) {\n            Binder.fn.init.call(this, element, bindings, options);\n            this.classes = {};\n        },\n        refresh: function(className) {\n            var element = $(this.element),\n                binding = this.bindings.css[className],\n                hasClass = this.classes[className] = binding.get();\n            if(hasClass){\n                element.addClass(className);\n            }else{\n                element.removeClass(className);\n            }\n        }\n    });\n\n    binders.style = Binder.extend({\n        refresh: function(key) {\n            this.element.style[key] = this.bindings.style[key].get() || \"\";\n        }\n    });\n\n    binders.enabled = Binder.extend({\n        refresh: function() {\n            if (this.bindings.enabled.get()) {\n                this.element.removeAttribute(\"disabled\");\n            } else {\n                this.element.setAttribute(\"disabled\", \"disabled\");\n            }\n        }\n    });\n\n    binders.readonly = Binder.extend({\n       refresh: function() {\n            if (this.bindings.readonly.get()) {\n                this.element.setAttribute(\"readonly\", \"readonly\");\n            } else {\n                this.element.removeAttribute(\"readonly\");\n            }\n       }\n    });\n\n    binders.disabled = Binder.extend({\n        refresh: function() {\n            if (this.bindings.disabled.get()) {\n                this.element.setAttribute(\"disabled\", \"disabled\");\n            } else {\n                this.element.removeAttribute(\"disabled\");\n            }\n        }\n    });\n\n    binders.events = Binder.extend({\n        init: function(element, bindings, options) {\n            Binder.fn.init.call(this, element, bindings, options);\n            this.handlers = {};\n        },\n\n        refresh: function(key) {\n            var element = $(this.element),\n                binding = this.bindings.events[key],\n                handler = this.handlers[key];\n\n            if (handler) {\n                element.off(key, handler);\n            }\n\n            handler = this.handlers[key] = binding.get();\n\n            element.on(key, binding.source, handler);\n        },\n\n        destroy: function() {\n            var element = $(this.element),\n                handler;\n\n            for (handler in this.handlers) {\n                element.off(handler, this.handlers[handler]);\n            }\n        }\n    });\n\n    binders.text = Binder.extend({\n        refresh: function() {\n            var text = this.bindings.text.get();\n            var dataFormat = this.element.getAttribute(\"data-\" + kendo.ns + \"format\") || \"\";\n            if (text == null) {\n                text = \"\";\n            }\n\n            $(this.element).text(kendo.toString(text, dataFormat));\n        }\n    });\n\n    binders.visible = Binder.extend({\n        refresh: function() {\n            if (this.bindings.visible.get()) {\n                this.element.style.display = \"\";\n            } else {\n                this.element.style.display = \"none\";\n            }\n        }\n    });\n\n    binders.invisible = Binder.extend({\n        refresh: function() {\n            if (!this.bindings.invisible.get()) {\n                this.element.style.display = \"\";\n            } else {\n                this.element.style.display = \"none\";\n            }\n        }\n  });\n\n    binders.html = Binder.extend({\n        refresh: function() {\n            this.element.innerHTML = this.bindings.html.get();\n        }\n    });\n\n    binders.value = TypedBinder.extend({\n        init: function(element, bindings, options) {\n            TypedBinder.fn.init.call(this, element, bindings, options);\n\n            this._change = proxy(this.change, this);\n            this.eventName = options.valueUpdate || CHANGE;\n\n            $(this.element).on(this.eventName, this._change);\n\n            this._initChange = false;\n        },\n\n        change: function() {\n            this._initChange = this.eventName != CHANGE;\n\n            this.bindings[VALUE].set(this.parsedValue());\n\n            this._initChange = false;\n        },\n\n        refresh: function() {\n            if (!this._initChange) {\n                var value = this.bindings[VALUE].get();\n\n                if (value == null) {\n                    value = \"\";\n                }\n\n                var type = this.dataType();\n\n                if (type == \"date\") {\n                    value = kendo.toString(value, \"yyyy-MM-dd\");\n                } else if (type == \"datetime-local\") {\n                    value = kendo.toString(value, \"yyyy-MM-ddTHH:mm:ss\");\n                }\n\n                this.element.value = value;\n            }\n\n            this._initChange = false;\n        },\n\n        destroy: function() {\n            $(this.element).off(this.eventName, this._change);\n        }\n    });\n\n    binders.source = Binder.extend({\n        init: function(element, bindings, options) {\n            Binder.fn.init.call(this, element, bindings, options);\n\n            var source = this.bindings.source.get();\n\n            if (source instanceof kendo.data.DataSource && options.autoBind !== false) {\n                source.fetch();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                source = that.bindings.source.get();\n\n            if (source instanceof ObservableArray || source instanceof kendo.data.DataSource) {\n                e = e || {};\n\n                if (e.action == \"add\") {\n                    that.add(e.index, e.items);\n                } else if (e.action == \"remove\") {\n                    that.remove(e.index, e.items);\n                } else if (e.action != \"itemchange\") {\n                    that.render();\n                }\n            } else {\n                that.render();\n            }\n        },\n\n        container: function() {\n            var element = this.element;\n\n            if (element.nodeName.toLowerCase() == \"table\") {\n                if (!element.tBodies[0]) {\n                    element.appendChild(document.createElement(\"tbody\"));\n                }\n                element = element.tBodies[0];\n            }\n\n            return element;\n        },\n\n        template: function() {\n            var options = this.options,\n                template = options.template,\n                nodeName = this.container().nodeName.toLowerCase();\n\n            if (!template) {\n                if (nodeName == \"select\") {\n                    if (options.valueField || options.textField) {\n                        template = kendo.format('<option value=\"#:{0}#\">#:{1}#</option>',\n                            options.valueField || options.textField, options.textField || options.valueField);\n                    } else {\n                        template = \"<option>#:data#</option>\";\n                    }\n                } else if (nodeName == \"tbody\") {\n                    template = \"<tr><td>#:data#</td></tr>\";\n                } else if (nodeName == \"ul\" || nodeName == \"ol\") {\n                    template = \"<li>#:data#</li>\";\n                } else {\n                    template = \"#:data#\";\n                }\n                template = kendo.template(template);\n            }\n\n            return template;\n        },\n\n        add: function(index, items) {\n            var element = this.container(),\n                parents,\n                idx,\n                length,\n                child,\n                clone = element.cloneNode(false),\n                reference = element.children[index];\n\n            $(clone).html(kendo.render(this.template(), items));\n\n            if (clone.children.length) {\n                parents = this.bindings.source._parents();\n\n                for (idx = 0, length = items.length; idx < length; idx++) {\n                    child = clone.children[0];\n                    element.insertBefore(child, reference || null);\n                    bindElement(child, items[idx], this.options.roles, [items[idx]].concat(parents));\n                }\n            }\n        },\n\n        remove: function(index, items) {\n            var idx, element = this.container();\n\n            for (idx = 0; idx < items.length; idx++) {\n                var child = element.children[index];\n                unbindElementTree(child, true);\n                if (child.parentNode == element) {\n                    element.removeChild(child);\n                }\n            }\n        },\n\n        render: function() {\n            var source = this.bindings.source.get(),\n                parents,\n                idx,\n                length,\n                element = this.container(),\n                template = this.template();\n\n            if (source == null) {\n                return;\n            }\n\n            if (source instanceof kendo.data.DataSource) {\n                source = source.view();\n            }\n\n            if (!(source instanceof ObservableArray) && toString.call(source) !== \"[object Array]\") {\n                source = [source];\n            }\n\n            if (this.bindings.template) {\n                unbindElementChildren(element, true);\n\n                $(element).html(this.bindings.template.render(source));\n\n                if (element.children.length) {\n                    parents = this.bindings.source._parents();\n\n                    for (idx = 0, length = source.length; idx < length; idx++) {\n                        bindElement(element.children[idx], source[idx], this.options.roles, [source[idx]].concat(parents));\n                    }\n                }\n            } else {\n                $(element).html(kendo.render(template, source));\n            }\n        }\n    });\n\n    binders.input = {\n        checked: TypedBinder.extend({\n            init: function(element, bindings, options) {\n                TypedBinder.fn.init.call(this, element, bindings, options);\n                this._change = proxy(this.change, this);\n\n                $(this.element).change(this._change);\n            },\n\n            change: function() {\n                var element = this.element;\n                var value = this.value();\n\n                if (element.type == \"radio\") {\n                    value = this.parsedValue();\n                    this.bindings[CHECKED].set(value);\n                } else if (element.type == \"checkbox\") {\n                    var source = this.bindings[CHECKED].get();\n                    var index;\n\n                    if (source instanceof ObservableArray) {\n                        value = this.parsedValue();\n                        if (value instanceof Date) {\n                            for(var i = 0; i < source.length; i++){\n                                if(source[i] instanceof Date && +source[i] === +value){\n                                    index = i;\n                                    break;\n                                }\n                            }\n                        }else{\n                            index = source.indexOf(value);\n                        }\n                        if (index > -1) {\n                            source.splice(index, 1);\n                        } else {\n                            source.push(value);\n                        }\n                    } else {\n                        this.bindings[CHECKED].set(value);\n                    }\n                }\n            },\n\n            refresh: function() {\n                var value = this.bindings[CHECKED].get(),\n                    source = value,\n                    type = this.dataType(),\n                    element = this.element;\n\n                if (element.type == \"checkbox\") {\n                    if (source instanceof ObservableArray) {\n                        var index = -1;\n                        value = this.parsedValue();\n                        if(value instanceof Date){\n                            for(var i = 0; i < source.length; i++){\n                                if(source[i] instanceof Date && +source[i] === +value){\n                                    index = i;\n                                    break;\n                                }\n                            }\n                        }else{\n                            index = source.indexOf(value);\n                        }\n                        element.checked = (index >= 0);\n                    }else{\n                        element.checked = source;\n                    }\n                } else if (element.type == \"radio\") {\n                    if (type == \"date\") {\n                        value = kendo.toString(value, \"yyyy-MM-dd\");\n                    } else if (type == \"datetime-local\") {\n                        value = kendo.toString(value, \"yyyy-MM-ddTHH:mm:ss\");\n                    }\n\n                    if (value !== null && typeof(value) !== \"undefined\" && element.value === value.toString()) {\n                        element.checked = true;\n                    } else {\n                        element.checked = false;\n                    }\n                }\n            },\n\n            value: function() {\n                var element = this.element,\n                    value = element.value;\n\n                if (element.type == \"checkbox\") {\n                    value = element.checked;\n                }\n\n                return value;\n            },\n            destroy: function() {\n                $(this.element).off(CHANGE, this._change);\n            }\n        })\n    };\n\n    binders.select = {\n        source: binders.source.extend({\n            refresh: function(e) {\n                var that = this,\n                    source = that.bindings.source.get();\n\n                if (source instanceof ObservableArray || source instanceof kendo.data.DataSource) {\n                    e = e || {};\n                    if (e.action == \"add\") {\n                        that.add(e.index, e.items);\n                    } else if (e.action == \"remove\") {\n                        that.remove(e.index, e.items);\n                    } else if (e.action == \"itemchange\" || e.action === undefined) {\n                        that.render();\n                        if(that.bindings.value){\n                            if (that.bindings.value) {\n                                var val = retrievePrimitiveValues(that.bindings.value.get(), $(that.element).data(\"valueField\"));\n                                if(val === null) {\n                                    that.element.selectedIndex = -1;\n                                } else {\n                                    that.element.value = val;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    that.render();\n                }\n            }\n        }),\n        value: TypedBinder.extend({\n            init: function(target, bindings, options) {\n                TypedBinder.fn.init.call(this, target, bindings, options);\n\n                this._change = proxy(this.change, this);\n                $(this.element).change(this._change);\n            },\n\n            parsedValue : function() {\n                var dataType = this.dataType();\n                var values = [];\n                var value, option, idx, length;\n                for (idx = 0, length = this.element.options.length; idx < length; idx++) {\n                    option = this.element.options[idx];\n\n                    if (option.selected) {\n                        value = option.attributes.value;\n\n                        if (value && value.specified) {\n                            value = option.value;\n                        } else {\n                            value = option.text;\n                        }\n\n                        values.push(this._parseValue(value, dataType));\n                    }\n                }\n                return values;\n            },\n\n            change: function() {\n                var values = [],\n                    element = this.element,\n                    source,\n                    field = this.options.valueField || this.options.textField,\n                    valuePrimitive = this.options.valuePrimitive,\n                    option,\n                    valueIndex,\n                    value,\n                    idx,\n                    length;\n\n                for (idx = 0, length = element.options.length; idx < length; idx++) {\n                    option = element.options[idx];\n\n                    if (option.selected) {\n                        value = option.attributes.value;\n\n                        if (value && value.specified) {\n                            value = option.value;\n                        } else {\n                            value = option.text;\n                        }\n\n                        if (field) {\n                            values.push(value);\n                        } else {\n                            values.push(this._parseValue(value, this.dataType()));\n                        }\n\n                    }\n                }\n\n                if (field) {\n                    source = this.bindings.source.get();\n                    if (source instanceof kendo.data.DataSource) {\n                        source = source.view();\n                    }\n\n                    for (valueIndex = 0; valueIndex < values.length; valueIndex++) {\n                        for (idx = 0, length = source.length; idx < length; idx++) {\n                            var sourceValue = source[idx].get(field);\n                            var match = (String(sourceValue) === values[valueIndex]);\n                            if (match) {\n                                values[valueIndex] = source[idx];\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                value = this.bindings[VALUE].get();\n                if (value instanceof ObservableArray) {\n                    value.splice.apply(value, [0, value.length].concat(values));\n                } else if (!valuePrimitive && (value instanceof ObservableObject || value === null || value === undefined || !field)) {\n                    this.bindings[VALUE].set(values[0]);\n                } else {\n                    this.bindings[VALUE].set(values[0].get(field));\n                }\n            },\n            refresh: function() {\n                var optionIndex,\n                    element = this.element,\n                    options = element.options,\n                    value = this.bindings[VALUE].get(),\n                    values = value,\n                    field = this.options.valueField || this.options.textField,\n                    found = false,\n                    type = this.dataType(),\n                    optionValue;\n\n                if (!(values instanceof ObservableArray)) {\n                    values = new ObservableArray([value]);\n                }\n\n                element.selectedIndex = -1;\n\n                for (var valueIndex = 0; valueIndex < values.length; valueIndex++) {\n                    value = values[valueIndex];\n\n\n                    if (field && value instanceof ObservableObject) {\n                        value = value.get(field);\n                    }\n\n                    if (type == \"date\") {\n                        value = kendo.toString(values[valueIndex], \"yyyy-MM-dd\");\n                    } else if (type == \"datetime-local\") {\n                        value = kendo.toString(values[valueIndex], \"yyyy-MM-ddTHH:mm:ss\");\n                    }\n\n                    for (optionIndex = 0; optionIndex < options.length; optionIndex++) {\n                        optionValue = options[optionIndex].value;\n\n                        if (optionValue === \"\" && value !== \"\") {\n                            optionValue = options[optionIndex].text;\n                        }\n\n                        if (value != null && optionValue == value.toString()) {\n                            options[optionIndex].selected = true;\n                            found = true;\n                        }\n                    }\n                }\n            },\n            destroy: function() {\n                $(this.element).off(CHANGE, this._change);\n            }\n        })\n    };\n\n    function dataSourceBinding(bindingName, fieldName, setter) {\n        return Binder.extend({\n            init: function(widget, bindings, options) {\n                var that = this;\n\n                Binder.fn.init.call(that, widget.element[0], bindings, options);\n\n                that.widget = widget;\n                that._dataBinding = proxy(that.dataBinding, that);\n                that._dataBound = proxy(that.dataBound, that);\n                that._itemChange = proxy(that.itemChange, that);\n            },\n\n            itemChange: function(e) {\n                bindElement(e.item[0], e.data, this._ns(e.ns), [e.data].concat(this.bindings[bindingName]._parents()));\n            },\n\n            dataBinding: function(e) {\n                var idx,\n                    length,\n                    widget = this.widget,\n                    items = e.removedItems || widget.items();\n\n                for (idx = 0, length = items.length; idx < length; idx++) {\n                    unbindElementTree(items[idx], false);\n                }\n            },\n\n            _ns: function(ns) {\n                ns = ns || kendo.ui;\n                var all = [ kendo.ui, kendo.dataviz.ui, kendo.mobile.ui ];\n                all.splice($.inArray(ns, all), 1);\n                all.unshift(ns);\n\n                return kendo.rolesFromNamespaces(all);\n            },\n\n            dataBound: function(e) {\n                var idx,\n                    length,\n                    widget = this.widget,\n                    items = e.addedItems || widget.items(),\n                    dataSource = widget[fieldName],\n                    view,\n                    parents,\n                    hds = kendo.data.HierarchicalDataSource;\n\n                if (hds && dataSource instanceof hds) {\n                    // suppress binding of HDS items, because calling view() on root\n                    // will return only root items, and widget.items() returns all items\n                    return;\n                }\n\n                if (items.length) {\n                    view = e.addedDataItems || dataSource.flatView();\n                    parents = this.bindings[bindingName]._parents();\n\n                    for (idx = 0, length = view.length; idx < length; idx++) {\n                        if (items[idx]) {\n                            bindElement(items[idx], view[idx], this._ns(e.ns), [view[idx]].concat(parents));\n                        }\n                    }\n                }\n            },\n\n            refresh: function(e) {\n                var that = this,\n                    source,\n                    widget = that.widget,\n                    select, multiselect, dropdowntree;\n\n                e = e || {};\n\n                if (!e.action) {\n                    that.destroy();\n\n                    widget.bind(\"dataBinding\", that._dataBinding);\n                    widget.bind(\"dataBound\", that._dataBound);\n                    widget.bind(\"itemChange\", that._itemChange);\n\n                    source = that.bindings[bindingName].get();\n\n                    if (widget[fieldName] instanceof kendo.data.DataSource && widget[fieldName] != source) {\n                        if (source instanceof kendo.data.DataSource) {\n                            widget[setter](source);\n                        } else if (source && source._dataSource) {\n                            widget[setter](source._dataSource);\n                        } else {\n                            select = kendo.ui.Select && widget instanceof kendo.ui.Select;\n                            multiselect = kendo.ui.MultiSelect && widget instanceof kendo.ui.MultiSelect;\n                            dropdowntree = kendo.ui.DropDownTree && widget instanceof kendo.ui.DropDownTree;\n\n                            if(!dropdowntree){\n                                widget[fieldName].data(source);\n                            }else{\n                                widget.treeview[fieldName].data(source);\n                            }\n\n                            if (that.bindings.value && (select || multiselect)) {\n                                widget.value(retrievePrimitiveValues(that.bindings.value.get(), widget.options.dataValueField));\n                            }\n                        }\n                    }\n                }\n            },\n\n            destroy: function() {\n                var widget = this.widget;\n\n                widget.unbind(\"dataBinding\", this._dataBinding);\n                widget.unbind(\"dataBound\", this._dataBound);\n                widget.unbind(\"itemChange\", this._itemChange);\n            }\n        });\n    }\n\n    binders.widget = {\n        events : Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n                this.widget = widget;\n                this.handlers = {};\n            },\n\n            refresh: function(key) {\n                var binding = this.bindings.events[key],\n                    handler = this.handlers[key];\n\n                if (handler) {\n                    this.widget.unbind(key, handler);\n                }\n\n                handler = binding.get();\n\n                this.handlers[key] = function(e) {\n                    e.data = binding.source;\n\n                    handler(e);\n\n                    if (e.data === binding.source) {\n                        delete e.data;\n                    }\n                };\n\n                this.widget.bind(key, this.handlers[key]);\n            },\n\n            destroy: function() {\n                var handler;\n\n                for (handler in this.handlers) {\n                    this.widget.unbind(handler, this.handlers[handler]);\n                }\n            }\n        }),\n\n        checked: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                this.widget = widget;\n                this._change = proxy(this.change, this);\n                this.widget.bind(CHANGE, this._change);\n            },\n            change: function() {\n                this.bindings[CHECKED].set(this.value());\n            },\n\n            refresh: function() {\n                if (this.element.type === \"radio\") {\n                    this.widget.check(this.bindings[CHECKED].get().toString() === this.value());\n                } else {\n                    this.widget.check(this.bindings[CHECKED].get() === true);\n                }\n            },\n\n            value: function() {\n                var element = this.element,\n                    value = element.value;\n\n                if (value == \"on\" || value == \"off\" || this.element.type == \"checkbox\") {\n                    value = element.checked;\n                }\n\n                return value;\n            },\n\n            destroy: function() {\n                this.widget.unbind(CHANGE, this._change);\n            }\n        }),\n\n        start: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n                this._change = proxy(this.change, this);\n                this.widget = widget;\n                this.widget.bind(CHANGE, this._change);\n            },\n\n            change: function() {\n                this.bindings.start.set(this.widget.range().start);\n            },\n\n            refresh: function() {\n                var that = this;\n                var start = this.bindings.start.get();\n                var end = that.widget._range ? that.widget._range.end: null;\n                this.widget.range({start: start, end: end});\n            },\n\n            destroy: function() {\n                this.widget.unbind(CHANGE, this._change);\n            }\n        }),\n\n        end: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n                this._change = proxy(this.change, this);\n                this.widget = widget;\n                this.widget.bind(CHANGE, this._change);\n            },\n\n            change: function() {\n                this.bindings.end.set(this.widget.range().end);\n            },\n\n            refresh: function() {\n                var that = this;\n                var end = this.bindings.end.get();\n                var start = that.widget._range ? that.widget._range.start: null;\n                this.widget.range({start: start, end: end});\n            },\n\n            destroy: function() {\n                this.widget.unbind(CHANGE, this._change);\n            }\n        }),\n\n        visible: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                this.widget = widget;\n            },\n\n            refresh: function() {\n                var visible = this.bindings.visible.get();\n                this.widget.wrapper[0].style.display = visible ? \"\" : \"none\";\n            }\n        }),\n\n        invisible: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                this.widget = widget;\n            },\n\n            refresh: function() {\n                var invisible = this.bindings.invisible.get();\n                this.widget.wrapper[0].style.display = invisible ? \"none\" : \"\";\n            }\n        }),\n\n        floatingLabel: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                if (!widget.floatingLabel) {\n                    return;\n                }\n\n                widget.floatingLabel.refresh();\n            }\n        }),\n\n        enabled: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                this.widget = widget;\n            },\n\n            refresh: function() {\n                if (this.widget.enable) {\n                    this.widget.enable(this.bindings.enabled.get());\n                }\n            }\n        }),\n\n        disabled: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                this.widget = widget;\n            },\n\n            refresh: function() {\n                if (this.widget.enable) {\n                    this.widget.enable(!this.bindings.disabled.get());\n                }\n            }\n        }),\n\n        source: dataSourceBinding(\"source\", \"dataSource\", \"setDataSource\"),\n\n        value: Binder.extend({\n            init: function(widget, bindings, options) {\n                Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                this.widget = widget;\n                this._change = $.proxy(this.change, this);\n                this.widget.first(CHANGE, this._change);\n\n                var value = this.bindings.value.get();\n\n                this._valueIsObservableObject = !options.valuePrimitive && (value == null || value instanceof ObservableObject);\n                this._valueIsObservableArray = value instanceof ObservableArray;\n                this._initChange = false;\n            },\n\n            _source: function() {\n                var source;\n\n                if (this.widget.dataItem) {\n                    source = this.widget.dataItem();\n                    if (source && source instanceof ObservableObject) {\n                        return [source];\n                    }\n                }\n\n                if (this.bindings.source) {\n                    source = this.bindings.source.get();\n                }\n\n                if (!source || source instanceof kendo.data.DataSource) {\n                    source = this.widget.dataSource.flatView();\n                }\n\n                return source;\n            },\n\n            change: function() {\n                var value = this.widget.value(),\n                    field = this.options.dataValueField || this.options.dataTextField,\n                    isArray = toString.call(value) === \"[object Array]\",\n                    isObservableObject = this._valueIsObservableObject,\n                    valueIndex, valueLength, values = [],\n                    sourceItem, sourceValue,\n                    idx, length, source;\n\n                this._initChange = true;\n\n                if (field) {\n\n                    if (value === \"\" && (isObservableObject || this.options.valuePrimitive)) {\n                        value = null;\n                    } else {\n                        source = this._source();\n\n                        if (isArray) {\n                            valueLength = value.length;\n                            values = value.slice(0);\n                        }\n\n                        for (idx = 0, length = source.length; idx < length; idx++) {\n                            sourceItem = source[idx];\n                            sourceValue = sourceItem.get(field);\n\n                            if (isArray) {\n                                for (valueIndex = 0; valueIndex < valueLength; valueIndex++) {\n                                    if (sourceValue == values[valueIndex]) {\n                                        values[valueIndex] = sourceItem;\n                                        break;\n                                    }\n                                }\n                            } else if (sourceValue == value) {\n                                value = isObservableObject ? sourceItem : sourceValue;\n                                break;\n                            }\n                        }\n\n                        if (values[0]) {\n                            if (this._valueIsObservableArray) {\n                                value = values;\n                            } else if (isObservableObject || !field) {\n                                value = values[0];\n                            } else {\n                                value = values[0].get(field);\n                            }\n                        }\n                    }\n                }\n\n                this.bindings.value.set(value);\n                this._initChange = false;\n            },\n\n            refresh: function() {\n                if (!this._initChange) {\n                    var widget = this.widget;\n                    var options = widget.options;\n                    var textField = options.dataTextField;\n                    var valueField = options.dataValueField || textField;\n                    var value = this.bindings.value.get();\n                    var text = options.text || \"\";\n                    var idx = 0, length;\n                    var values = [];\n\n                    if (value === undefined) {\n                        value = null;\n                    }\n\n                    if (valueField) {\n                        if (value instanceof ObservableArray) {\n                            for (length = value.length; idx < length; idx++) {\n                                values[idx] = value[idx].get(valueField);\n                            }\n                            value = values;\n                        } else if (value instanceof ObservableObject) {\n                            text = value.get(textField);\n                            value = value.get(valueField);\n                        }\n                    }\n\n                    if (options.autoBind === false && !options.cascadeFrom && widget.listView && !widget.listView.bound()) {\n                        if (textField === valueField && !text) {\n                            text = value;\n                        }\n\n                        if (!text && (value || value === 0) && options.valuePrimitive) {\n                            widget.value(value);\n                        } else {\n                            widget._preselect(value, text);\n                        }\n                    } else {\n                        widget.value(value);\n                    }\n                }\n\n                this._initChange = false;\n            },\n\n            destroy: function() {\n                this.widget.unbind(CHANGE, this._change);\n            }\n        }),\n        dropdowntree: {\n            value: Binder.extend({\n                init: function(widget, bindings, options) {\n                    Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                    this.widget = widget;\n                    this._change = $.proxy(this.change, this);\n                    this.widget.first(CHANGE, this._change);\n                    this._initChange = false;\n                },\n\n                change: function() {\n                    var that = this,\n                        oldValues = that.bindings[VALUE].get(),\n                        valuePrimitive = that.options.valuePrimitive,\n                        selectedNode = that.widget.treeview.select(),\n                        nonPrimitiveValues = that.widget._isMultipleSelection() ? that.widget._getAllChecked(): (that.widget.treeview.dataItem(selectedNode) || that.widget.value()),\n                        newValues = (valuePrimitive || that.widget.options.autoBind === false) ? that.widget.value() : nonPrimitiveValues;\n\n                    var field = this.options.dataValueField || this.options.dataTextField;\n\n                    newValues = newValues.slice ? newValues.slice(0): newValues;\n\n                    that._initChange = true;\n\n                    if (oldValues instanceof ObservableArray) {\n                        var remove = [];\n                        var newLength = newValues.length;\n                        var i = 0, j = 0;\n                        var old = oldValues[i];\n                        var same = false;\n                        var removeIndex;\n                        var newValue;\n                        var found;\n\n                        while (old !== undefined) {\n                            found = false;\n                            for (j = 0; j < newLength; j++) {\n                                if (valuePrimitive) {\n                                    same = newValues[j] == old;\n                                } else {\n                                    newValue = newValues[j];\n\n                                    newValue = newValue.get ? newValue.get(field) : newValue;\n                                    same = newValue == (old.get ? old.get(field) : old);\n                                }\n\n                                if (same) {\n                                    newValues.splice(j, 1);\n                                    newLength -= 1;\n                                    found = true;\n                                    break;\n                                }\n                            }\n\n                            if (!found) {\n                                remove.push(old);\n                                arraySplice(oldValues, i, 1);\n                                removeIndex = i;\n                            } else {\n                                i += 1;\n                            }\n\n                            old = oldValues[i];\n                        }\n\n                        arraySplice(oldValues, oldValues.length, 0, newValues);\n\n                        if (remove.length) {\n                            oldValues.trigger(\"change\", {\n                                action: \"remove\",\n                                items: remove,\n                                index: removeIndex\n                            });\n                        }\n\n                        if (newValues.length) {\n                            oldValues.trigger(\"change\", {\n                                action: \"add\",\n                                items: newValues,\n                                index: oldValues.length - 1\n                            });\n                        }\n                    } else {\n                        that.bindings[VALUE].set(newValues);\n                    }\n\n                    that._initChange = false;\n                },\n\n                refresh: function() {\n                    if (!this._initChange) {\n                        var options = this.options,\n                            widget = this.widget,\n                            field = options.dataValueField || options.dataTextField,\n                            value = this.bindings.value.get(),\n                            data = value,\n                            idx = 0, length,\n                            values = [],\n                            selectedValue;\n\n                        if (field) {\n                            if (value instanceof ObservableArray) {\n                                for (length = value.length; idx < length; idx++) {\n                                    selectedValue = value[idx];\n                                    values[idx] = selectedValue.get ? selectedValue.get(field) : selectedValue;\n                                }\n                                value = values;\n                            } else if (value instanceof ObservableObject) {\n                                value = value.get(field);\n                            }\n                        }\n                        if (options.autoBind === false && options.valuePrimitive !== true) {\n                            widget._preselect(data, value);\n                        } else {\n                            widget.value(value);\n                        }\n                   }\n                },\n\n                destroy: function() {\n                    this.widget.unbind(CHANGE, this._change);\n                }\n            })\n        },\n        gantt: {\n            dependencies: dataSourceBinding(\"dependencies\", \"dependencies\", \"setDependenciesDataSource\")\n        },\n\n        multiselect: {\n            value: Binder.extend({\n                init: function(widget, bindings, options) {\n                    Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                    this.widget = widget;\n                    this._change = $.proxy(this.change, this);\n                    this.widget.first(CHANGE, this._change);\n                    this._initChange = false;\n                },\n\n                change: function() {\n                    var that = this,\n                        oldValues = that.bindings[VALUE].get(),\n                        valuePrimitive = that.options.valuePrimitive,\n                        newValues = valuePrimitive ? that.widget.value() : that.widget.dataItems();\n\n                    var field = this.options.dataValueField || this.options.dataTextField;\n\n                    newValues = newValues.slice(0);\n\n                    that._initChange = true;\n\n                    if (oldValues instanceof ObservableArray) {\n                        var remove = [];\n\n                        var newLength = newValues.length;\n\n                        var i = 0, j = 0;\n                        var old = oldValues[i];\n                        var same = false;\n                        var removeIndex;\n                        var newValue;\n                        var found;\n\n                        while (old !== undefined) {\n                            found = false;\n                            for (j = 0; j < newLength; j++) {\n                                if (valuePrimitive) {\n                                    same = newValues[j] == old;\n                                } else {\n                                    newValue = newValues[j];\n\n                                    newValue = newValue.get ? newValue.get(field) : newValue;\n                                    same = newValue == (old.get ? old.get(field) : old);\n                                }\n\n                                if (same) {\n                                    newValues.splice(j, 1);\n                                    newLength -= 1;\n                                    found = true;\n                                    break;\n                                }\n                            }\n\n                            if (!found) {\n                                remove.push(old);\n                                arraySplice(oldValues, i, 1);\n                                removeIndex = i;\n                            } else {\n                                i += 1;\n                            }\n\n                            old = oldValues[i];\n                        }\n\n                        arraySplice(oldValues, oldValues.length, 0, newValues);\n\n                        if (remove.length) {\n                            oldValues.trigger(\"change\", {\n                                action: \"remove\",\n                                items: remove,\n                                index: removeIndex\n                            });\n                        }\n\n                        if (newValues.length) {\n                            oldValues.trigger(\"change\", {\n                                action: \"add\",\n                                items: newValues,\n                                index: oldValues.length - 1\n                            });\n                        }\n                    } else {\n                        that.bindings[VALUE].set(newValues);\n                    }\n\n                    that._initChange = false;\n                },\n\n                refresh: function() {\n                    if (!this._initChange) {\n                        var options = this.options,\n                            widget = this.widget,\n                            field = options.dataValueField || options.dataTextField,\n                            value = this.bindings.value.get(),\n                            data = value,\n                            idx = 0, length,\n                            values = [],\n                            selectedValue;\n\n                        if (value === undefined) {\n                            value = null;\n                        }\n\n                        if (field) {\n                            if (value instanceof ObservableArray) {\n                                for (length = value.length; idx < length; idx++) {\n                                    selectedValue = value[idx];\n                                    values[idx] = selectedValue.get ? selectedValue.get(field) : selectedValue;\n                                }\n                                value = values;\n                            } else if (value instanceof ObservableObject) {\n                                value = value.get(field);\n                            }\n                        }\n\n                        if (options.autoBind === false && options.valuePrimitive !== true && !widget._isBound()) {\n                            widget._preselect(data, value);\n                        } else {\n                            widget.value(value);\n                        }\n                    }\n                },\n\n                destroy: function() {\n                    this.widget.unbind(CHANGE, this._change);\n                }\n\n            })\n        },\n        scheduler: {\n            source: dataSourceBinding(\"source\", \"dataSource\", \"setDataSource\").extend({\n                dataBound: function(e) {\n                    var idx;\n                    var length;\n                    var widget = this.widget;\n                    var elements = e.addedItems || widget.items();\n                    var data, parents;\n\n                    if (elements.length) {\n                        data = e.addedDataItems || widget.dataItems();\n                        parents = this.bindings.source._parents();\n\n                        for (idx = 0, length = data.length; idx < length; idx++) {\n                            bindElement(elements[idx], data[idx], this._ns(e.ns), [data[idx]].concat(parents));\n                        }\n                    }\n                }\n            })\n        },\n\n        grid: {\n            source: dataSourceBinding(\"source\", \"dataSource\", \"setDataSource\").extend({\n                dataBound: function(e) {\n                    var idx,\n                    length,\n                    widget = this.widget,\n                    elements = e.addedItems || widget.items(),\n                    parents,\n                    data;\n\n                    if (elements.length) {\n                        data = e.addedDataItems || widget.dataItems();\n                        parents = this.bindings.source._parents();\n\n                        for (idx = 0, length = data.length; idx < length; idx++) {\n                            bindElement(elements[idx], data[idx], this._ns(e.ns), [data[idx]].concat(parents));\n                        }\n                    }\n                }\n            })\n        },\n\n        badge: {\n            text: Binder.extend({\n                init: function(widget, bindings, options) {\n                    Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n                    this.widget = widget;\n                },\n                refresh: function() {\n                    var text = this.bindings.text.get();\n\n                    if (text == null) {\n                        text = \"\";\n                    }\n                    this.widget.text(text);\n                }\n            })\n        }\n    };\n\n    var arraySplice = function(arr, idx, remove, add) {\n        add = add || [];\n        remove = remove || 0;\n\n        var addLength = add.length;\n        var oldLength = arr.length;\n\n        var shifted = [].slice.call(arr, idx + remove);\n        var shiftedLength = shifted.length;\n        var index;\n\n        if (addLength) {\n            addLength = idx + addLength;\n            index = 0;\n\n            for (; idx < addLength; idx++) {\n                arr[idx] = add[index];\n                index++;\n            }\n\n            arr.length = addLength;\n        } else if (remove) {\n            arr.length = idx;\n\n            remove += idx;\n            while (idx < remove) {\n                delete arr[--remove];\n            }\n        }\n\n        if (shiftedLength) {\n            shiftedLength = idx + shiftedLength;\n            index = 0;\n\n            for (; idx < shiftedLength; idx++) {\n                arr[idx] = shifted[index];\n                index++;\n            }\n\n            arr.length = shiftedLength;\n        }\n\n        idx = arr.length;\n\n        while (idx < oldLength) {\n            delete arr[idx];\n            idx++;\n        }\n    };\n\n    var BindingTarget = Class.extend( {\n        init: function(target, options) {\n            this.target = target;\n            this.options = options;\n            this.toDestroy = [];\n        },\n\n        bind: function(bindings) {\n            var key,\n                hasValue,\n                hasSource,\n                hasEvents,\n                hasChecked,\n                hasCss,\n                widgetBinding = this instanceof WidgetBindingTarget,\n                specificBinders = this.binders();\n\n            for (key in bindings) {\n                if (key == VALUE) {\n                    hasValue = true;\n                } else if (key == SOURCE) {\n                    hasSource = true;\n                } else if (key == EVENTS && !widgetBinding) {\n                    hasEvents = true;\n                } else if (key == CHECKED) {\n                    hasChecked = true;\n                } else if (key == CSS) {\n                    hasCss = true;\n                } else {\n                    this.applyBinding(key, bindings, specificBinders);\n                }\n            }\n            if (hasSource) {\n                this.applyBinding(SOURCE, bindings, specificBinders);\n            }\n\n            if (hasValue) {\n                this.applyBinding(VALUE, bindings, specificBinders);\n            }\n\n            if (hasChecked) {\n                this.applyBinding(CHECKED, bindings, specificBinders);\n            }\n\n            if (hasEvents && !widgetBinding) {\n                this.applyBinding(EVENTS, bindings, specificBinders);\n            }\n\n            if (hasCss && !widgetBinding) {\n                this.applyBinding(CSS, bindings, specificBinders);\n            }\n\n            if (widgetBinding && this.target && this.target.floatingLabel) {\n                this.applyBinding(\"floatingLabel\", bindings, specificBinders);\n            }\n        },\n\n        binders: function() {\n            return binders[this.target.nodeName.toLowerCase()] || {};\n        },\n\n        applyBinding: function(name, bindings, specificBinders) {\n            var binder = specificBinders[name] || binders[name],\n                toDestroy = this.toDestroy,\n                attribute,\n                binding = bindings[name];\n\n            if (binder) {\n                binder = new binder(this.target, bindings, this.options);\n\n                toDestroy.push(binder);\n\n                if (binding instanceof Binding) {\n                    binder.bind(binding);\n                    toDestroy.push(binding);\n                } else {\n                    for (attribute in binding) {\n                        binder.bind(binding, attribute);\n                        toDestroy.push(binding[attribute]);\n                    }\n                }\n            } else if (name !== \"template\") {\n                throw new Error(\"The \" + name + \" binding is not supported by the \" + this.target.nodeName.toLowerCase() + \" element\");\n            }\n        },\n\n        destroy: function() {\n            var idx,\n                length,\n                toDestroy = this.toDestroy;\n\n            for (idx = 0, length = toDestroy.length; idx < length; idx++) {\n                toDestroy[idx].destroy();\n            }\n        }\n    });\n\n    var WidgetBindingTarget = BindingTarget.extend( {\n        binders: function() {\n            return binders.widget[this.target.options.name.toLowerCase()] || {};\n        },\n\n        applyBinding: function(name, bindings, specificBinders) {\n            var binder = specificBinders[name] || binders.widget[name],\n                toDestroy = this.toDestroy,\n                attribute,\n                binding = bindings[name];\n\n            if (binder) {\n                binder = new binder(this.target, bindings, this.target.options);\n\n                toDestroy.push(binder);\n\n\n                if (binding instanceof Binding) {\n                    binder.bind(binding);\n                    toDestroy.push(binding);\n                } else {\n                    for (attribute in binding) {\n                        binder.bind(binding, attribute);\n                        toDestroy.push(binding[attribute]);\n                    }\n                }\n            } else {\n                throw new Error(\"The \" + name + \" binding is not supported by the \" + this.target.options.name + \" widget\");\n            }\n        }\n    });\n\n    function bindingTargetForRole(element, roles) {\n        var widget = kendo.initWidget(element, {}, roles);\n\n        if (widget) {\n            return new WidgetBindingTarget(widget);\n        }\n    }\n\n    var keyValueRegExp = /[A-Za-z0-9_\\-]+:(\\{([^}]*)\\}|[^,}]+)/g,\n        whiteSpaceRegExp = /\\s/g;\n\n    function parseBindings(bind) {\n        var result = {},\n            idx,\n            length,\n            token,\n            colonIndex,\n            key,\n            value,\n            tokens;\n\n        tokens = bind.match(keyValueRegExp);\n\n        for (idx = 0, length = tokens.length; idx < length; idx++) {\n            token = tokens[idx];\n            colonIndex = token.indexOf(\":\");\n\n            key = token.substring(0, colonIndex);\n            value = token.substring(colonIndex + 1);\n\n            if (value.charAt(0) == \"{\") {\n                value = parseBindings(value);\n            }\n\n            result[key] = value;\n        }\n\n        return result;\n    }\n\n    function createBindings(bindings, source, type) {\n        var binding,\n            result = {};\n\n        for (binding in bindings) {\n            result[binding] = new type(source, bindings[binding]);\n        }\n\n        return result;\n    }\n\n    function bindElement(element, source, roles, parents) {\n\n        if(!element || element.getAttribute(\"data-\" + kendo.ns + \"stop\")){\n            return;\n        }\n\n        var role = element.getAttribute(\"data-\" + kendo.ns + \"role\"),\n            idx,\n            bind = element.getAttribute(\"data-\" + kendo.ns + \"bind\"),\n            childrenCopy = [],\n            deep = true,\n            bindings,\n            options = {},\n            target;\n\n        parents = parents || [source];\n\n        if (role || bind) {\n            unbindElement(element, false);\n        }\n\n        if (role) {\n            target = bindingTargetForRole(element, roles);\n        }\n\n        if (bind) {\n            bind = parseBindings(bind.replace(whiteSpaceRegExp, \"\"));\n\n            if (!target) {\n                options = kendo.parseOptions(element, {textField: \"\", valueField: \"\", template: \"\", valueUpdate: CHANGE, valuePrimitive: false, autoBind: true}, source);\n                options.roles = roles;\n                target = new BindingTarget(element, options);\n            }\n\n            target.source = source;\n\n            bindings = createBindings(bind, parents, Binding);\n\n            if (options.template) {\n                bindings.template = new TemplateBinding(parents, \"\", options.template);\n            }\n\n            if (bindings.click) {\n                bind.events = bind.events || {};\n                bind.events.click = bind.click;\n                bindings.click.destroy();\n                delete bindings.click;\n            }\n\n            if (bindings.source) {\n                deep = false;\n            }\n\n            if (bind.attr) {\n                bindings.attr = createBindings(bind.attr, parents, Binding);\n            }\n\n            if (bind.style) {\n                bindings.style = createBindings(bind.style, parents, Binding);\n            }\n\n            if (bind.events) {\n                bindings.events = createBindings(bind.events, parents, EventBinding);\n            }\n\n            if (bind.css) {\n                bindings.css = createBindings(bind.css, parents, Binding);\n            }\n\n            target.bind(bindings);\n        }\n\n        if (target) {\n            element.kendoBindingTarget = target;\n        }\n\n        var children = element.children;\n        if (deep && children && !element.getAttribute(\"data-\" + kendo.ns + \"stop\")) {\n            // https://github.com/telerik/kendo/issues/1240 for the weirdness.\n            for (idx = 0; idx < children.length; idx++) {\n                childrenCopy[idx] = children[idx];\n            }\n\n            for (idx = 0; idx < childrenCopy.length; idx++) {\n                bindElement(childrenCopy[idx], source, roles, parents);\n            }\n        }\n    }\n\n    function bind(dom, object) {\n        var idx,\n            length,\n            node,\n            roles = kendo.rolesFromNamespaces([].slice.call(arguments, 2));\n\n        object = kendo.observable(object);\n        dom = $(dom);\n\n        for (idx = 0, length = dom.length; idx < length; idx++) {\n            node = dom[idx];\n            if (node.nodeType === 1) {\n                bindElement(node, object, roles);\n            }\n        }\n    }\n\n    function unbindElement(element, destroyWidget) {\n        var bindingTarget = element.kendoBindingTarget;\n\n        if (bindingTarget) {\n            bindingTarget.destroy();\n\n            if (deleteExpando) {\n                delete element.kendoBindingTarget;\n            } else if (element.removeAttribute) {\n                element.removeAttribute(\"kendoBindingTarget\");\n            } else {\n                element.kendoBindingTarget = null;\n            }\n        }\n\n        if(destroyWidget) {\n            var widget = kendo.widgetInstance($(element));\n            if (widget && typeof widget.destroy === FUNCTION) {\n                widget.destroy();\n            }\n        }\n    }\n\n    function unbindElementTree(element, destroyWidgets) {\n        unbindElement(element, destroyWidgets);\n\n        unbindElementChildren(element, destroyWidgets);\n    }\n\n    function unbindElementChildren(element, destroyWidgets) {\n        var children = element.children;\n\n        if (children) {\n            for (var idx = 0, length = children.length; idx < length; idx++) {\n                unbindElementTree(children[idx], destroyWidgets);\n            }\n        }\n    }\n\n    function unbind(dom) {\n        var idx, length;\n\n        dom = $(dom);\n\n        for (idx = 0, length = dom.length; idx < length; idx++ ) {\n            unbindElementTree(dom[idx], false);\n        }\n    }\n\n    function notify(widget, namespace) {\n        var element = widget.element,\n            bindingTarget = element[0].kendoBindingTarget;\n\n        if (bindingTarget) {\n            bind(element, bindingTarget.source, namespace);\n        }\n    }\n\n    function retrievePrimitiveValues(value, valueField) {\n        var values = [];\n        var idx = 0;\n        var length;\n        var item;\n\n        if (!valueField) {\n            return value;\n        }\n\n        if (value instanceof ObservableArray) {\n            for (length = value.length; idx < length; idx++) {\n                item = value[idx];\n                values[idx] = item.get ? item.get(valueField) : item[valueField];\n            }\n            value = values;\n        } else if (value instanceof ObservableObject) {\n            value = value.get(valueField);\n        }\n\n        return value;\n    }\n\n    kendo.unbind = unbind;\n    kendo.bind = bind;\n    kendo.data.binders = binders;\n    kendo.data.Binder = Binder;\n    kendo.notify = notify;\n\n    kendo.observable = function(object) {\n        if (!(object instanceof ObservableObject)) {\n            object = new ObservableObject(object);\n        }\n\n        return object;\n    };\n\n    kendo.observableHierarchy = function(array) {\n        var dataSource = kendo.data.HierarchicalDataSource.create(array);\n\n        function recursiveRead(data) {\n            var i, children;\n\n            for (i = 0; i < data.length; i++) {\n                data[i]._initChildren();\n\n                children = data[i].children;\n\n                children.fetch();\n\n                data[i].items = children.data();\n\n                recursiveRead(data[i].items);\n            }\n        }\n\n        dataSource.fetch();\n\n        recursiveRead(dataSource.data());\n\n        dataSource._data._dataSource = dataSource;\n\n        return dataSource._data;\n    };\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.floatinglabel',[\"./kendo.core\"], f);\n})(function () {\n\nvar __meta__ = {// jshint ignore:line\n    id: \"floatinglabel\",\n    name: \"FloatingLabel\",\n    category: \"framework\",\n    depends: [\"core\"],\n    hidden: true\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        ui = kendo.ui,\n        NS = \".kendoFloatingLabel\",\n        FLOATINGLABELCONTAINER = \"k-floating-label-container\",\n        EMPTY = \"k-state-empty\",\n        FOCUSED = \"k-focus\",\n        STATEDISABLED = \"k-disabled\",\n        NOCLICKCLASS = \"k-no-click\",\n        STATEREADONLY = \"k-readonly\",\n        proxy = $.proxy;\n\n    var FloatingLabel = Widget.extend({\n        init: function (element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            options = $.extend(true, {}, options);\n\n            that.refresh();\n            that._editable({\n                readonly: that.options.widget.options.readonly !== undefined ? that.options.widget.options.readonly : false,\n                disable: that.options.widget.options.enable !== undefined ? !(that.options.widget.options.enable) : false\n            });\n\n            that.element.addClass(FLOATINGLABELCONTAINER);\n\n            kendo.notify(that);\n        },\n\n        options: {\n            name: 'FloatingLabel',\n            widget: null,\n            useReadOnlyClass: false\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n        },\n\n        refresh: function () {\n            var that = this;\n            var element = that.element;\n\n            element\n                .removeClass(EMPTY)\n                .removeClass(FOCUSED);\n\n\n            if (!that.options.widget.element.val()) {\n                element.addClass(EMPTY);\n            }\n\n            if (document.activeElement === that.options.widget.element[0]) {\n                element.addClass(FOCUSED);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.element.off(NS);\n            Widget.fn.destroy.call(that);\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n\n            element.off(NS);\n\n            if (!readonly && !disable) {\n                element\n                    .removeClass(STATEDISABLED)\n                    .removeClass(that.options.useReadOnlyClass ? STATEREADONLY : NOCLICKCLASS);\n\n                element.on(\"focusin\" + NS, proxy(that.refresh, that));\n                element.on(\"focusout\" + NS, proxy(that.refresh, that));\n            } else {\n                element\n                    .toggleClass(STATEDISABLED, disable)\n                    .toggleClass(that.options.useReadOnlyClass ? STATEREADONLY : NOCLICKCLASS, readonly);\n            }\n        }\n    });\n    ui.plugin(FloatingLabel);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) { (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.textbox',[\"./kendo.core\", \"./kendo.floatinglabel\"], f);\n})(function () {\n\nvar __meta__ = {// jshint ignore:line\n    id: \"textbox\",\n    name: \"TextBox\",\n    category: \"web\",\n    description: \"The TextBox widget enables you to style and provide a floating label functionality to input elements\",\n    depends: [\"core\", \"floatinglabel\"]\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        ui = kendo.ui,\n        isPlainObject = $.isPlainObject,\n        NS = \".kendoTextBox\",\n        CHANGE = \"change\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        INPUT = \"k-input-inner\",\n        FOCUSED = \"k-focus\",\n        LABELCLASSES = \"k-label k-input-label\",\n        STATEDISABLED = \"k-disabled\",\n        NOCLICKCLASS = \"k-no-click\",\n        ARIA_DISABLED = \"aria-disabled\",\n        proxy = $.proxy;\n\n    var TextBox = Widget.extend({\n        init: function (element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            options = $.extend(true, {}, options);\n\n            that.options.value = options.value || that.element.val();\n            that.options.readonly = options.readonly !== undefined ? options.readonly : Boolean(that.element.attr(\"readonly\"));\n            that.options.enable = options.enable !== undefined ? options.enable : !(Boolean(that.element.attr(\"disabled\")));\n            that.options.placeholder = options.placeholder || that.element.attr(\"placeholder\");\n\n            that.value(that.options.value);\n            that._wrapper();\n            that._label();\n            that._editable({\n                readonly: that.options.readonly,\n                disable: !(that.options.enable)\n            });\n\n            that.element\n                .addClass(INPUT)\n                .attr(\"placeholder\", that.options.placeholder)\n                .attr(\"autocomplete\", \"off\");\n\n            kendo.notify(that);\n            that._applyCssClasses();\n        },\n\n        events: [\n            CHANGE\n        ],\n\n        options: {\n            name: 'TextBox',\n            value: '',\n            readonly: false,\n            enable: true,\n            placeholder: '',\n            label: null,\n            rounded: \"medium\",\n            size: \"medium\",\n            fillMode: \"solid\"\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            that._value = value;\n            that.element.val(value);\n        },\n\n        readonly: function(readonly) {\n            var that = this;\n\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n\n            if (that.floatingLabel) {\n                that.floatingLabel.readonly(readonly === undefined ? true : readonly);\n            }\n        },\n\n        enable: function(enable) {\n            var that = this;\n\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n\n            if (that.floatingLabel) {\n                that.floatingLabel.enable(enable = enable === undefined ? true : enable);\n            }\n        },\n\n        focus: function() {\n            var that = this;\n\n            that.element[0].focus();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that.floatingLabel) {\n                that.floatingLabel.destroy();\n            }\n\n            that.element.off(NS);\n            that.element[0].style.width = \"\";\n            that.element.removeClass(INPUT);\n            Widget.fn.destroy.call(that);\n        },\n\n        setOptions: function(options) {\n            this.destroy();\n\n            this.element.unwrap();\n            if (this._floatingLabelContainer) {\n                this._inputLabel.remove();\n                this._inputLabel = null;\n                this.element.unwrap();\n                this._floatingLabelContainer = null;\n            }\n\n            kendo.deepExtend(this.options, options);\n            this.init(this.element, this.options);\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var wrapper = that.wrapper;\n            var disable = options.disable;\n            var readonly = options.readonly;\n\n            element.off(NS);\n\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false)\n                       .prop(READONLY, false)\n                       .attr(ARIA_DISABLED, false);\n\n                wrapper.removeClass(STATEDISABLED)\n                        .removeClass(NOCLICKCLASS);\n\n                element.on(\"focusin\" + NS, proxy(that._focusin, that));\n                element.on(\"focusout\" + NS, proxy(that._focusout, that));\n                element.on(\"change\" + NS, proxy(that._change, that));\n            } else {\n                element.attr(DISABLED, disable)\n                       .attr(READONLY, readonly)\n                       .attr(ARIA_DISABLED, disable);\n\n                wrapper.toggleClass(STATEDISABLED, disable)\n                        .toggleClass(NOCLICKCLASS, readonly);\n            }\n        },\n\n        _label: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var id = element.attr(\"id\");\n            var floating;\n            var labelText;\n\n            if (options.label !== null) {\n                floating = isPlainObject(options.label) ? options.label.floating : false;\n                labelText = isPlainObject(options.label) ? options.label.content : options.label;\n\n                if (floating) {\n                    that._floatingLabelContainer = that.wrapper.wrap(\"<span></span>\").parent();\n                    that.floatingLabel = new kendo.ui.FloatingLabel(that._floatingLabelContainer, { widget: that });\n                }\n\n                if (kendo.isFunction(labelText)) {\n                    labelText = labelText.call(that);\n                }\n\n                if (!labelText) {\n                    labelText = \"\";\n                }\n\n                if (!id) {\n                    id = options.name + \"_\" + kendo.guid();\n                    element.attr(\"id\", id);\n                }\n\n                that._inputLabel = $(\"<label class='\" + LABELCLASSES + \"' for='\" + id + \"'>\" + labelText + \"</label>'\").insertBefore(that.wrapper);\n            }\n        },\n\n        _focusin: function() {\n            var that = this;\n\n            that.wrapper.addClass(FOCUSED);\n        },\n\n        _focusout: function() {\n            var that = this;\n\n            that.wrapper.removeClass(FOCUSED);\n        },\n\n        _change: function(e) {\n            var that = this;\n            var newValue = that.element.val();\n\n            that._value = newValue;\n\n            that.trigger(CHANGE, {value: newValue, originalEvent: e});\n        },\n\n        _wrapper: function () {\n            var that = this;\n            var element = that.element;\n            var DOMElement = element[0];\n            var wrapper;\n\n            wrapper = element.wrap(\"<span class='k-input k-textbox'></span>\").parent();\n            wrapper[0].style.cssText = DOMElement.style.cssText;\n            DOMElement.style.width = \"100%\";\n            that.wrapper = wrapper.addClass(DOMElement.className).removeClass('input-validation-error');\n        }\n    });\n\n    kendo.cssProperties.registerPrefix(\"TextBox\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"TextBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    ui.plugin(TextBox);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) { (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.numerictextbox',[ \"./kendo.core\", \"./kendo.userevents\", \"./kendo.floatinglabel\", \"./kendo.html.button\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"numerictextbox\",\n    name: \"NumericTextBox\",\n    category: \"web\",\n    description: \"The NumericTextBox widget can format and display numeric, percentage or currency textbox.\",\n    depends: [ \"core\", \"userevents\", \"floatinglabel\", \"html.button\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        caret = kendo.caret,\n        keys = kendo.keys,\n        html = kendo.html,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        activeElement = kendo._activeElement,\n        extractFormat = kendo._extractFormat,\n        parse = kendo.parseFloat,\n        placeholderSupported = kendo.support.placeholder,\n        getCulture = kendo.getCulture,\n        CHANGE = \"change\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        INPUT = \"k-input-inner\",\n        SPIN = \"spin\",\n        ns = \".kendoNumericTextBox\",\n        TOUCHEND = \"touchend\",\n        MOUSELEAVE = \"mouseleave\" + ns,\n        HOVEREVENTS = \"mouseenter\" + ns + \" \" + MOUSELEAVE,\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        FOCUS = \"focus\",\n        POINT = \".\",\n        SYMBOL = \"symbol\",\n        CLASS_ICON = \"k-icon\",\n        LABELCLASSES = \"k-label k-input-label\",\n        SELECTED = \"k-selected\",\n        STATEDISABLED = \"k-disabled\",\n        STATEINVALID = \"k-invalid\",\n        ARIA_DISABLED = \"aria-disabled\",\n        INTEGER_REGEXP = /^(-)?(\\d*)$/,\n        NULL = null,\n        proxy = $.proxy,\n        isPlainObject = $.isPlainObject,\n        extend = $.extend;\n\n    var NumericTextBox = Widget.extend({\n         init: function(element, options) {\n             var that = this,\n             isStep = options && options.step !== undefined,\n             min, max, step, value, disabled;\n             var inputType;\n\n             Widget.fn.init.call(that, element, options);\n\n             options = that.options;\n             element = that.element\n                           .on(\"focusout\" + ns, proxy(that._focusout, that))\n                           .attr(\"role\", \"spinbutton\");\n\n             options.placeholder = options.placeholder || element.attr(\"placeholder\");\n\n             min = that.min(element.attr(\"min\"));\n             max = that.max(element.attr(\"max\"));\n             step = that._parse(element.attr(\"step\"));\n\n             if (options.min === NULL && min !== NULL) {\n                 options.min = min;\n             }\n\n             if (options.max === NULL && max !== NULL) {\n                 options.max = max;\n             }\n\n             if (!isStep && step !== NULL) {\n                 options.step = step;\n             }\n\n             that._initialOptions = extend({}, options);\n\n             inputType = element.attr(\"type\");\n\n             that._reset();\n             that._wrapper();\n             that._arrows();\n             that._validation();\n             that._input();\n\n             if (!kendo.support.mobileOS) {\n                 that._text.on(FOCUS + ns, proxy(that._click, that));\n             } else {\n                 that._text.on(TOUCHEND + ns + \" \" + FOCUS + ns, function() {\n                     if (kendo.support.browser.edge) {\n                         that._text.one(FOCUS + ns, function() {\n                            that._focusin();\n                         });\n                     } else {\n                        that._focusin();\n                     }\n                     that.selectValue();\n                 });\n             }\n\n             element.attr(\"aria-valuemin\", options.min !== NULL ? options.min*options.factor : options.min)\n                    .attr(\"aria-valuemax\", options.max !== NULL ? options.max*options.factor : options.max);\n\n             options.format = extractFormat(options.format);\n\n             value = options.value;\n\n             if (value == NULL) {\n                 if (inputType == \"number\") {\n                    value = parseFloat(element.val());\n                 } else {\n                     value = element.val();\n                 }\n             }\n\n             that.value(value);\n\n             disabled = !options.enable || element.is(\"[disabled]\") || $(that.element).parents(\"fieldset\").is(':disabled');\n\n             if (disabled) {\n                 that.enable(false);\n             } else {\n                 that.readonly(element.is(\"[readonly]\"));\n             }\n\n             that.angular(\"compile\", function(){\n                 return {\n                     elements: that._text.get()\n                 };\n             });\n\n             that._label();\n             that._ariaLabel();\n             that._applyCssClasses();\n\n             kendo.notify(that);\n         },\n\n        options: {\n            name: \"NumericTextBox\",\n            decimals: NULL,\n            enable: true,\n            restrictDecimals: false,\n            min: NULL,\n            max: NULL,\n            value: NULL,\n            step: 1,\n            round: true,\n            culture: \"\",\n            format: \"n\",\n            spinners: true,\n            placeholder: \"\",\n            selectOnFocus: false,\n            factor: 1,\n            upArrowText: \"Increase value\",\n            downArrowText: \"Decrease value\",\n            label: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n        events: [\n            CHANGE,\n            SPIN\n        ],\n\n        _editable: function(options) {\n            var that = this,\n                element = that.element,\n                disable = options.disable,\n                readonly = options.readonly,\n                text = that._text.add(element),\n                wrapper = that.wrapper.off(HOVEREVENTS);\n\n            that._toggleText(true);\n\n            that._upArrowEventHandler.unbind(\"press\");\n            that._downArrowEventHandler.unbind(\"press\");\n            element\n                .off(\"keydown\" + ns)\n                .off(\"keyup\" + ns)\n                .off(\"input\" + ns)\n                .off(\"paste\" + ns);\n\n            if (that._inputLabel) {\n                that._inputLabel.off(ns);\n            }\n\n            if (!readonly && !disable) {\n                wrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                text.prop(DISABLED, false)\n                    .prop(READONLY, false)\n                    .attr(ARIA_DISABLED, false);\n\n                that._upArrowEventHandler.bind(\"press\", function(e) {\n                    e.preventDefault();\n                    that._spin(1);\n                    that._upArrow.addClass(SELECTED);\n                });\n\n                that._downArrowEventHandler.bind(\"press\", function(e) {\n                    e.preventDefault();\n                    that._spin(-1);\n                    that._downArrow.addClass(SELECTED);\n                });\n\n                that.element\n                    .on(\"keydown\" + ns, proxy(that._keydown, that))\n                    .on(\"keyup\" + ns, proxy(that._keyup, that))\n                    .on(\"paste\" + ns, proxy(that._paste, that))\n                    .on(\"input\" + ns, proxy(that._inputHandler, that));\n\n                if (that._inputLabel) {\n                    that._inputLabel.on(\"click\" + ns, proxy(that.focus, that));\n                }\n\n            } else {\n                wrapper\n                    .addClass(disable ? STATEDISABLED : \"\")\n                    .removeClass(disable ?\"\" : STATEDISABLED);\n\n                text.attr(DISABLED, disable)\n                    .attr(READONLY, readonly)\n                    .attr(ARIA_DISABLED, disable);\n            }\n        },\n\n        readonly: function(readonly) {\n            var that = this;\n\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n\n            if (that.floatingLabel) {\n                that.floatingLabel.readonly(readonly === undefined ? true : readonly);\n            }\n        },\n\n        enable: function(enable) {\n            var that = this;\n\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n\n            if (that.floatingLabel) {\n                that.floatingLabel.enable(enable = enable === undefined ? true : enable);\n            }\n        },\n\n        setOptions: function (options) {\n            var that = this;\n            Widget.fn.setOptions.call(that, options);\n\n            that._arrowsWrap.toggle(that.options.spinners);\n            that.wrapper.toggleClass(\"k-expand-padding\", !that.options.spinners);\n            that._text.prop(\"placeholder\", that.options.placeholder);\n            that._placeholder(that.options.placeholder);\n            that.element.attr({\n                \"aria-valuemin\": that.options.min !== NULL ? that.options.min*that.options.factor : that.options.min,\n                \"aria-valuemax\": that.options.max !== NULL ? that.options.max*that.options.factor : that.options.max\n            });\n\n            that.options.format = extractFormat(that.options.format);\n            that._applyCssClasses();\n\n            if (options.value !== undefined) {\n                that.value(options.value);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that._inputLabel) {\n                that._inputLabel.off(ns);\n\n                if (that.floatingLabel) {\n                    that.floatingLabel.destroy();\n                }\n            }\n\n            that.element\n                .add(that._text)\n                .add(that._upArrow)\n                .add(that._downArrow)\n                .off(ns);\n\n            that._upArrowEventHandler.destroy();\n            that._downArrowEventHandler.destroy();\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n\n            Widget.fn.destroy.call(that);\n        },\n\n        min: function(value) {\n            return this._option(\"min\", value);\n        },\n\n        max: function(value) {\n            return this._option(\"max\", value);\n        },\n\n        step: function(value) {\n            return this._option(\"step\", value);\n        },\n\n        value: function(value) {\n            var that = this, adjusted;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            value = that._parse(value);\n            adjusted = that._adjust(value);\n\n            if (value !== adjusted) {\n                return;\n            }\n\n            that._update(value);\n            that._old = that._value;\n        },\n\n        focus: function() {\n            this._focusin();\n        },\n\n        _adjust: function(value) {\n            var that = this,\n            options = that.options,\n            min = options.min,\n            max = options.max;\n\n            if (value === NULL) {\n                return value;\n            }\n\n            if (min !== NULL && value < min) {\n                value = min;\n            } else if (max !== NULL && value > max) {\n                value = max;\n            }\n\n            return value;\n        },\n\n        _arrows: function() {\n            var that = this,\n            arrows,\n            _release = function() {\n                clearTimeout( that._spinning );\n                arrows.removeClass(SELECTED);\n            },\n            options = that.options,\n            spinners = options.spinners,\n            element = that.element;\n\n            arrows = element.siblings(\".\" + CLASS_ICON);\n\n            if (!arrows[0]) {\n                arrows = $(buttonHtml(\"increase\", options.upArrowText) + buttonHtml(\"decrease\", options.downArrowText))\n                        .insertAfter(element);\n\n                that._arrowsWrap = arrows.wrapAll('<span class=\"k-input-spinner k-spin-button\"/>').parent();\n            }\n\n            if (!spinners) {\n                arrows.parent().toggle(spinners);\n                that.wrapper.addClass(\"k-expand-padding\");\n            }\n\n            that._upArrow = arrows.eq(0);\n            that._upArrowEventHandler = new kendo.UserEvents(that._upArrow, { release: _release });\n            that._downArrow = arrows.eq(1);\n            that._downArrowEventHandler = new kendo.UserEvents(that._downArrow, { release: _release });\n        },\n\n        _validation: function () {\n            var that = this;\n            var element = that.element;\n\n            that._validationIcon = $(\"<span class='k-input-validation-icon \" + CLASS_ICON + \" k-i-warning k-hidden'></span>\").insertAfter(element);\n        },\n\n        _blur: function() {\n            var that = this;\n\n            that._toggleText(true);\n\n            that._change(that.element.val());\n        },\n\n        _click: function(e) {\n            var that = this;\n\n            clearTimeout(that._focusing);\n            that._focusing = setTimeout(function() {\n                var input = e.target,\n                    idx = caret(input)[0],\n                    value = input.value.substring(0, idx),\n                    format = that._format(that.options.format),\n                    group = format[\",\"],\n                    result, groupRegExp, extractRegExp,\n                    caretPosition = 0;\n\n                if (group) {\n                    groupRegExp = new RegExp(\"\\\\\" + group, \"g\");\n                    extractRegExp = new RegExp(\"(-)?(\" + format[SYMBOL] + \")?([\\\\d\\\\\" + group + \"]+)(\\\\\" + format[POINT] + \")?(\\\\d+)?\");\n                }\n\n                if (extractRegExp) {\n                    result = extractRegExp.exec(value);\n                }\n\n                if (result) {\n                    caretPosition = result[0].replace(groupRegExp, \"\").length;\n\n                    if (value.indexOf(\"(\") != -1 && that._value < 0) {\n                        caretPosition++;\n                    }\n                }\n\n                that._focusin();\n\n                caret(that.element[0], caretPosition);\n                that.selectValue();\n            });\n        },\n\n        selectValue: function(){\n            if (this.options.selectOnFocus) {\n                this.element[0].select();\n            }\n        },\n\n        _getFactorValue: function (value) {\n            var that = this,\n                factor = that.options.factor;\n\n            if (factor && factor !== 1) {\n                value = kendo.parseFloat(value);\n                if (value !== null) {\n                    value = value/factor;\n                }\n            }\n\n            return value;\n        },\n\n        _change: function(value) {\n            var that = this;\n\n            value = that._getFactorValue(value);\n            that._update(value);\n            value = that._value;\n\n            if (that._old != value) {\n                that._old = value;\n\n                if (!that._typing) {\n                    // trigger the DOM change event so any subscriber gets notified\n                    that.element.trigger(CHANGE);\n                }\n\n                that.trigger(CHANGE);\n            }\n\n            that._typing = false;\n        },\n\n        _culture: function(culture) {\n            return culture || getCulture(this.options.culture);\n        },\n\n        _focusin: function() {\n            var that = this;\n            that.wrapper.addClass(FOCUSED);\n            that._toggleText(false);\n            that.element[0].focus();\n        },\n\n        _focusout: function() {\n            var that = this;\n\n            clearTimeout(that._focusing);\n            that.wrapper.removeClass(FOCUSED).removeClass(HOVER);\n            that._blur();\n            that._removeInvalidState();\n        },\n\n        _format: function(format, culture) {\n            var numberFormat = this._culture(culture).numberFormat;\n\n            format = format.toLowerCase();\n\n            if (format.indexOf(\"c\") > -1) {\n                numberFormat = numberFormat.currency;\n            } else if (format.indexOf(\"p\") > -1) {\n                numberFormat = numberFormat.percent;\n            }\n\n            return numberFormat;\n        },\n\n        _input: function() {\n            var that = this,\n                options = that.options,\n                element = that.element.addClass(INPUT).show()[0],\n                accessKey = element.accessKey,\n                wrapper = that.wrapper,\n                inputs = wrapper.find(POINT + INPUT),\n                text;\n\n            text = inputs.first();\n\n            if (text.length < 2) {\n                text = $('<input type=\"text\"/>').insertBefore(element);\n            }\n\n            try {\n                element.setAttribute(\"type\", \"text\");\n            } catch(e) {\n                element.type = \"text\";\n            }\n\n            text[0].title = element.title;\n            text[0].tabIndex = element.tabIndex;\n            text[0].style.cssText = element.style.cssText;\n            text.prop(\"placeholder\", options.placeholder);\n\n            if (accessKey) {\n                text.attr(\"accesskey\", accessKey);\n                element.accessKey = \"\";\n            }\n\n\n            that._text = text.addClass(element.className)\n                             .attr({\n                                 \"role\": \"spinbutton\",\n                                 \"aria-valuemin\": options.min !== NULL ? options.min*options.factor : options.min,\n                                 \"aria-valuemax\": options.max !== NULL ? options.max*options.factor : options.max,\n                                 \"autocomplete\": \"off\"\n                             });\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode;\n\n            if (key === keys.NUMPAD_DOT) {\n                that._numPadDot = true;\n            }\n\n            if (key == keys.DOWN) {\n                that._step(-1);\n                return;\n            } else if (key == keys.UP) {\n                that._step(1);\n                return;\n            } else if (key == keys.ENTER) {\n                that._change(that.element.val());\n                return;\n            }\n\n            if (key != keys.TAB) {\n                that._typing = true;\n            }\n            that._cachedCaret = caret(that.element);\n        },\n\n        _keyup: function () {\n            this._removeInvalidState();\n        },\n\n        _inputHandler: function () {\n            var element = this.element;\n            var value = element.val();\n            var min = this.options.min;\n            var numberFormat = this._format(this.options.format);\n            var decimalSeparator = numberFormat[POINT];\n            var minInvalid = (min !== null && min >= 0 && value.charAt(0) === \"-\");\n\n            if (this._numPadDot && decimalSeparator !== POINT) {\n                value = value.replace(POINT, decimalSeparator);\n                this.element.val(value);\n                this._numPadDot = false;\n            }\n\n            if (this._isPasted) {\n                value = this._parse(value)\n                    .toString()\n                    .replace(POINT, numberFormat[POINT]);\n            }\n\n            if (this._numericRegex(numberFormat).test(value) && !minInvalid) {\n                this._oldText = value;\n            } else {\n                this._blinkInvalidState();\n                this.element.val(this._oldText);\n                if (this._cachedCaret) {\n                    caret(element, this._cachedCaret[0]);\n                    this._cachedCaret = null;\n                }\n            }\n\n            this._isPasted = false;\n        },\n\n        _blinkInvalidState: function () {\n            var that = this;\n\n            that._addInvalidState();\n            clearTimeout(that._invalidStateTimeout);\n            that._invalidStateTimeout = setTimeout(proxy(that._removeInvalidState, that), 100);\n        },\n\n        _addInvalidState: function () {\n            var that = this;\n\n            that.wrapper.addClass(STATEINVALID);\n            that._validationIcon.removeClass('k-hidden');\n        },\n\n        _removeInvalidState: function () {\n            var that = this;\n\n            that.wrapper.removeClass(STATEINVALID);\n            that._validationIcon.addClass('k-hidden');\n            that._invalidStateTimeout = null;\n        },\n\n        _numericRegex: function(numberFormat) {\n            var that = this;\n            var separator = numberFormat[POINT];\n            var precision = that.options.decimals;\n            var fractionRule = \"*\";\n\n            if (separator === POINT) {\n                separator = \"\\\\\" + separator;\n            }\n\n            if (precision === NULL) {\n                precision = numberFormat.decimals;\n            }\n\n            if (precision === 0 && that.options.restrictDecimals) {\n                return INTEGER_REGEXP;\n            }\n\n            if (that.options.restrictDecimals) {\n                fractionRule = \"{0,\" + precision + \"}\";\n            }\n\n            if (that._separator !== separator) {\n                that._separator = separator;\n                that._floatRegExp = new RegExp(\"^(-)?(((\\\\d+(\" + separator + \"\\\\d\" + fractionRule + \")?)|(\" + separator + \"\\\\d\" + fractionRule + \")))?$\");\n            }\n\n            return that._floatRegExp;\n        },\n\n        _paste: function(e) {\n            var that = this;\n            var element = e.target;\n            var value = element.value;\n            var numberFormat = that._format(that.options.format);\n\n            that._isPasted = true;\n\n           setTimeout(function() {\n                var result = that._parse(element.value);\n\n                if (result === NULL) {\n                    that._update(value);\n                } else {\n                    element.value = result.toString().replace(POINT, numberFormat[POINT]);\n                    if (that._adjust(result) !== result || !that._numericRegex(numberFormat).test(element.value)) {\n                        value = that._getFactorValue(element.value);\n                        that._update(value);\n                    }\n                }\n            });\n        },\n\n        _option: function(option, value) {\n            var that = this,\n                element = that.element,\n                options = that.options;\n\n            if (value === undefined) {\n                return options[option];\n            }\n\n            value = that._parse(value);\n\n            if (!value && option === \"step\") {\n                return;\n            }\n\n            options[option] = value;\n            element\n                .add(that._text)\n                .attr(\"aria-value\" + option, value);\n\n            element.attr(option, value);\n        },\n\n        _ariaLabel: function(){\n            var that = this;\n            var text = that._text;\n            var inputElm = that.element;\n            var id = inputElm.attr(\"id\");\n            var labelElm = $(\"label[for=\\'\" + id  + \"\\']\");\n            var ariaLabel = inputElm.attr(\"aria-label\");\n            var ariaLabelledBy = inputElm.attr(\"aria-labelledby\");\n            var labelId;\n\n            if (ariaLabel) {\n                text.attr(\"aria-label\", ariaLabel);\n            } else if (ariaLabelledBy){\n                text.attr(\"aria-labelledby\", ariaLabelledBy);\n            } else if (labelElm.length){\n                labelId = labelElm.attr(\"id\");\n                if (labelId) {\n                    text.attr(\"aria-labelledby\", labelId);\n                } else {\n                    labelId = kendo.guid();\n                    labelElm.attr(\"id\", labelId);\n                    text.attr(\"aria-labelledby\", labelId);\n                }\n            }\n        },\n\n        _spin: function(step, timeout) {\n            var that = this;\n\n            timeout = timeout || 500;\n\n            clearTimeout( that._spinning );\n            that._spinning = setTimeout(function() {\n                that._spin(step, 50);\n            }, timeout );\n\n            that._step(step);\n        },\n\n        _step: function(step) {\n            var that = this,\n                element = that.element,\n                originalValue = that._value,\n                value = that._parse(element.val()) || 0,\n                precision = that.options.decimals || 2;\n\n            if (activeElement() != element[0]) {\n                that._focusin();\n            }\n\n            if(that.options.factor && value) {\n                value = value/that.options.factor;\n            }\n\n            value =  +(value + that.options.step * step).toFixed(precision);\n            value = that._adjust(value);\n            that._update(value);\n            that._typing = false;\n\n            if (originalValue !== value) {\n                that.trigger(SPIN);\n            }\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _toggleText: function(toggle) {\n            var that = this;\n\n            that._text.toggle(toggle);\n            if (toggle) {\n                that._text.removeAttr(\"aria-hidden\");\n            } else {\n                that._text.attr(\"aria-hidden\", \"true\");\n            }\n            that.element.toggle(!toggle);\n        },\n\n        _parse: function(value, culture) {\n            return parse(value, this._culture(culture), this.options.format);\n        },\n\n        _round: function(value, precision) {\n            var rounder = this.options.round ? kendo._round : truncate;\n\n            return rounder(value, precision);\n        },\n\n        _update: function(value) {\n            var that = this,\n                options = that.options,\n                factor = options.factor,\n                format = options.format,\n                decimals = options.decimals,\n                culture = that._culture(),\n                numberFormat = that._format(format, culture),\n                originalValue,\n                isNotNull;\n\n            if (decimals === NULL) {\n                decimals = numberFormat.decimals;\n            }\n\n            value = that._parse(value, culture);\n\n            isNotNull = value !== NULL;\n\n            if (isNotNull) {\n                value = parseFloat(that._round(value, decimals), 10);\n            }\n\n            that._value = value = that._adjust(value);\n            that._placeholder(kendo.toString(value, format, culture));\n\n            if (isNotNull) {\n                if(factor) {\n                    value =  parseFloat(that._round(value*factor, decimals), 10);\n                }\n                value = value.toString();\n                if (value.indexOf(\"e\") !== -1) {\n                    value = that._round(+value, decimals);\n                }\n                originalValue = value;\n                value = value.replace(POINT, numberFormat[POINT]);\n            } else {\n                value = null;\n                originalValue = null;\n            }\n\n            that.element.val(value);\n            that._oldText = value;\n            that.element.add(that._text).attr(\"aria-valuenow\", originalValue);\n        },\n\n        _placeholder: function(value) {\n            var input = this._text;\n\n            input.val(value);\n            if (!placeholderSupported && !value) {\n                input.val(this.options.placeholder);\n            }\n\n            input.attr(\"title\", this.element.attr(\"title\") || input.val());\n        },\n\n        _label: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var id = element.attr(\"id\");\n            var floating;\n            var labelText;\n\n            if (options.label !== null) {\n                floating = isPlainObject(options.label) ? options.label.floating : false;\n                labelText = isPlainObject(options.label) ? options.label.content : options.label;\n\n                if (floating) {\n                    that._floatingLabelContainer = that.wrapper.wrap(\"<span></span>\").parent();\n                    that.floatingLabel = new kendo.ui.FloatingLabel(that._floatingLabelContainer, { widget: that });\n                }\n\n                if (kendo.isFunction(labelText)) {\n                    labelText = labelText.call(that);\n                }\n\n                if (!labelText) {\n                    labelText = \"\";\n                }\n\n                if (!id) {\n                    id = options.name + \"_\" + kendo.guid();\n                    element.attr(\"id\", id);\n                }\n\n                that._inputLabel = $(\"<label class='\" + LABELCLASSES + \"' for='\" + id + \"'>\" + labelText + \"</label>'\").insertBefore(that.wrapper);\n\n                if ((that.element.attr(\"disabled\") === undefined) && (that.element.attr(\"readonly\") === undefined)) {\n                    that._inputLabel.on(\"click\" + ns, proxy(that.focus, that));\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                DOMElement = element[0],\n                wrapper;\n\n            wrapper = element.parents(\".k-numerictextbox\");\n\n            if (!wrapper.is(\"span.k-numerictextbox\")) {\n                wrapper = element.hide().wrap(\"<span/>\").parent();\n            }\n\n            wrapper[0].style.cssText = DOMElement.style.cssText;\n            DOMElement.style.width = \"\";\n            that.wrapper = wrapper.addClass(\"k-numerictextbox k-input\")\n                                  .addClass(DOMElement.className)\n                                  .removeClass('input-validation-error')\n                                  .css(\"display\", \"\");\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(element[0].value);\n                        that.max(that._initialOptions.max);\n                        that.min(that._initialOptions.min);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        }\n    });\n\n    kendo.cssProperties.registerPrefix(\"NumericTextBox\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"NumericTextBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    function buttonHtml(direction, text) {\n        var className = direction === \"increase\" ? \"arrow-n\" : \"arrow-s\";\n        var dir = direction === \"increase\" ? \"increase\" : \"decrease\";\n\n        return html.renderButton('<button role=\"button\" tabindex=\"-1\" unselectable=\"on\" class=\"k-spinner-' + dir + '\" aria-label=\"' + text + '\" title=\"' + text + '\"></button>', extend({}, this.options, {\n            icon: className,\n            shape: null,\n            rounded: null\n        }));\n    }\n\n    function truncate(value, precision) {\n        var parts = parseFloat(value, 10).toString().split(POINT);\n\n        if (parts[1]) {\n            parts[1] = parts[1].substring(0, precision);\n        }\n\n        return parts.join(POINT);\n\n    }\n\n    ui.plugin(NumericTextBox);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('colorpicker/colorselector',[ \"../kendo.core\" ], f);\n})(function(){\n\n(function($, undefined) {\n    // WARNING: removing the following jshint declaration and turning\n    // == into === to make JSHint happy will break functionality.\n    /*jshint eqnull:true  */\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        parseColor = kendo.parseColor,\n\n        extend = $.extend,\n\n        NS = \".kendoColorTools\",\n        DISABLED = \"k-disabled\";\n\n    var ColorSelector = Widget.extend({\n        init: function(element, options) {\n            var that = this, ariaId;\n\n            Widget.fn.init.call(that, element, options);\n            element = that.element;\n            options = that.options;\n            that._value = options.value = parseColor(options.value);\n            that._tabIndex = element.attr(\"tabIndex\") || 0;\n\n            ariaId = that._ariaId = options.ariaId;\n            if (ariaId) {\n                element.attr(\"aria-labelledby\", ariaId);\n            }\n\n            if (options._standalone) {\n                that._triggerSelect = that._triggerChange;\n            }\n        },\n        options: {\n            name: \"ColorSelector\",\n            value: null,\n            _standalone: true\n        },\n        events: [\n            \"change\",\n            \"select\",\n            \"forceSelect\",\n            \"cancel\"\n        ],\n        color: function(value) {\n            if (value !== undefined) {\n                // this.options.value = value;\n                this._value = parseColor(value);\n                this._updateUI(this._value);\n            }\n\n            return this._value;\n        },\n        value: function(color) {\n            color = this.color(color);\n\n            if (color) {\n                if (this.options.opacity) {\n                    color = color.toCssRgba();\n                } else {\n                    color = color.toCss();\n                }\n            }\n\n            return color || null;\n        },\n        enable: function(enable) {\n            if (arguments.length === 0) {\n                enable = true;\n            }\n\n            this.wrapper.toggleClass(DISABLED, !enable);\n\n            this._onEnable(enable);\n        },\n        _select: function(color, nohooks) {\n            var prev = this._value;\n\n            color = this.color(color);\n\n            if (!nohooks) {\n                if ((color && !color.equals(prev)) || (color === null && color !== prev)) {\n                    this.element.trigger(\"change\");\n                    this.trigger(\"change\", { value: this.value() });\n                } else if (!this._standalone) {\n                    this.trigger(\"cancel\");\n                }\n            }\n        },\n        _triggerSelect: function(color) {\n            triggerEvent(this, \"select\", color);\n        },\n        _triggerChange: function(color) {\n            triggerEvent(this, \"change\", color);\n        },\n        destroy: function() {\n            if (this.element) {\n                this.element.off(NS);\n            }\n            if (this.wrapper) {\n                this.wrapper.off(NS).find(\"*\").off(NS);\n            }\n            this.wrapper = null;\n            Widget.fn.destroy.call(this);\n        },\n        _updateUI: $.noop,\n        _selectOnHide: function() {\n            return null;\n        },\n        _cancel: function() {\n            this.trigger(\"cancel\");\n        }\n    });\n\n    function triggerEvent(self, type, color) {\n        color = parseColor(color);\n\n        if ((color && !color.equals(self.color())) || color !== self.color()) {\n            if (type == \"change\") {\n                // UI is already updated.  setting _value directly\n                // rather than calling self.color(color) to avoid an\n                // endless loop.\n                self._value = color;\n            }\n            if (color && color.a != 1) {\n                color = color.toCssRgba();\n            } else if (color) {\n                color = color.toCss();\n            }\n\n            self.trigger(type, { value: color });\n        }\n    }\n\n    extend(ui, {\n        colorpicker: {\n            ColorSelector: ColorSelector\n        }\n    });\n\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('colorpicker/contrastToolUtils',[\n        \"../kendo.core\"\n    ], f);\n})(function(){\n\n(function($, undefined){\n    var colorpicker = kendo.ui.colorpicker,\n        extend = $.extend,\n        Color = kendo.Color,\n        parseColor = kendo.parseColor,\n\n        AA_CONTRAST = 4.5,\n        AAA_CONTRAST = 7,\n        STEP_COUNT = 16;\n\n    // Color utils - calc contrast\n\n    function getContrast(luminance1, luminance2) {\n        var brightest = Math.max(luminance1, luminance2);\n        var darkest = Math.min(luminance1, luminance2);\n        return (brightest + 0.05) / (darkest + 0.05);\n    }\n\n    function getContrastFromTwoRGBAs(a, b) {\n        return getContrast(\n            getLuminance(getRGBFromRGBA(a, b)),\n            getLuminance(getRGBFromRGBA(b, { r: 0, g: 0, b: 0, a: 1 })));\n    }\n\n    function getLuminance (rgb) {\n        var a = [rgb.r, rgb.g, rgb.b].map(function (v) {\n            v /= 255;\n            return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\n        });\n        return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;\n    }\n\n    function getRGBFromRGBA(foregroundColor, backgroundColor) {\n        var r1 = fitIntoBounds(foregroundColor.r, 0, 255);\n        var g1 = fitIntoBounds(foregroundColor.g, 0, 255);\n        var b1 = fitIntoBounds(foregroundColor.b, 0, 255);\n        var a1 = fitIntoBounds(foregroundColor.a, 0, 1);\n\n        var r2 = fitIntoBounds(backgroundColor.r, 0, 255);\n        var g2 = fitIntoBounds(backgroundColor.g, 0, 255);\n        var b2 = fitIntoBounds(backgroundColor.b, 0, 255);\n\n        return {\n            r: Math.round(((1 - a1) * r2) + (a1 * r1)),\n            g: Math.round(((1 - a1) * g2) + (a1 * g1)),\n            b: Math.round(((1 - a1) * b2) + (a1 * b1))\n        };\n    }\n\n    function fitIntoBounds(contender, min, max) {\n        if (!isPresent(contender) || isNaN(contender)) {\n            return min;\n        }\n\n        return contender <= min ? min : contender >= max ? max : contender;\n    }\n\n    function isPresent(value) { return value !== null && value !== undefined; }\n\n\n    // Color utils - Contrast tool SVG path\n\n    function renderSvgCurveLine(gradientRectMetrics, hsva, backgroundColor) {\n        var findValue = function (contrast, saturation, low, high, comparer) {\n            var mid = (low + high) / 2;\n            var currentHsva = extend({}, hsva, { s: saturation / gradientRectMetrics.width, v: 1 - mid / gradientRectMetrics.height });\n            var currentContrast = getContrastFromTwoRGBAs(parseColor(getColorFromHSV(currentHsva)).toBytes(), parseColor(backgroundColor).toBytes());\n\n            if (low + 0.5 > high) {\n                if (currentContrast < contrast + 1 && currentContrast > contrast - 1) {\n                    return mid;\n                } else {\n                    return null;\n                }\n            }\n\n            if (comparer(currentContrast, contrast)) {\n                return findValue(contrast, saturation, low, high - (high - low) / 2, comparer);\n            }\n            return findValue(contrast, saturation, low + (high - low) / 2, high, comparer);\n        };\n\n        var comparer = function (a, b) {\n            return a > b;\n        };\n\n        var reversedComparer = function (a, b) {\n            return a < b;\n        };\n\n        var getPaths = function (contrast, stepCount, reversed) {\n            var points = [];\n            for (var i = 0; i <= gradientRectMetrics.width; i += gradientRectMetrics.width/stepCount) {\n               var value = findValue(contrast, i, 0, gradientRectMetrics.height, reversed ? reversedComparer : comparer);\n                if (value !== null){\n                    points.push([i, value]);\n                }\n            }\n            return points;\n        };\n\n        var bezierCommandCalc = bezierCommand(controlPoint(line));\n        var paths = svgPath(getPaths(AA_CONTRAST, STEP_COUNT, false), bezierCommandCalc) +\n                svgPath(getPaths(AA_CONTRAST, STEP_COUNT, true), bezierCommandCalc) +\n                svgPath(getPaths(AAA_CONTRAST, STEP_COUNT, false), bezierCommandCalc) +\n                svgPath(getPaths(AAA_CONTRAST, STEP_COUNT, true), bezierCommandCalc);\n\n        return '<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"position: absolute; overflow: visible; pointer-events: none; left: 0px; top: 0px; z-index: 3;\" >' +\n                    paths  + '</svg>';\n    }\n\n    function svgPath(points, command) {\n        if (points.length === 0){\n            return '';\n        }\n\n        var reducer = function (acc, point, i, a) {\n            return i === 0 ?\n                // if first point\n                kendo.format(\"M {0},{1}\", point[0], point[1]) :\n                // else\n                kendo.format(\"{0} {1}\", acc, command(point, i, a));\n        };\n\n        // build the d attributes by looping over the points\n        var d = points.reduce(reducer, \"\");\n\n        return kendo.format('<path d=\"{0}\" fill=\"none\" stroke=\"white\" stroke-width=\"1\"/>', d);\n    }\n\n    function bezierCommand(controlPointCalc) {\n        return function(point, i, a) {\n            // start control point\n            var cps = controlPointCalc(a[i - 1], a[i - 2], point); // [cpsX, cpsY]\n\n            // end control point\n            var cpe = controlPointCalc(point, a[i - 1], a[i + 1], true); //  [cpeX, cpeY]\n\n            return kendo.format(\"C {0},{1} {2},{3} {4},{5}\", cps[0], cps[1], cpe[0], cpe[1], point[0], point[1]);\n        };\n    }\n\n    function controlPoint(lineCalc) {\n        return function (current, previous, next, reverse) {\n            // when 'current' is the first or last point of the array\n            // 'previous' and 'next' are undefined\n            // replace with 'current'\n                var p = previous || current;\n                var n = next || current;\n                var smooth = 0.1;\n\n                // properties of the line between previous and next\n                var l = lineCalc(p, n);\n\n                // If is end-control-point, add PI to the angle to go backward\n                var angle = l.angle + (reverse ? Math.PI : 0);\n                var length = l.length * smooth;\n\n                // The control point position is relative to the current point\n                var x = current[0] + Math.cos(angle) * length;\n                var y = current[1] + Math.sin(angle) * length;\n\n                return [x, y];\n        };\n    }\n\n    function line (pointA, pointB) {\n        var lengthX = pointB[0] - pointA[0];\n        var lengthY = pointB[1] - pointA[1];\n\n        return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n        };\n    }\n\n    function getColorFromHSV (hsva) {\n        var hue = fitIntoBounds(hsva.h, 0, 359.9);\n        var saturation = fitIntoBounds(hsva.s, 0, 1);\n        var value = fitIntoBounds(hsva.v, 0, 1);\n        var alpha = fitIntoBounds(hsva.a, 0, 1);\n\n        return Color.fromHSV(hue, saturation, value, alpha).toCssRgba();\n    }\n\n    extend(colorpicker, {\n        contrastToolUtils: {\n            getContrastFromTwoRGBAs: getContrastFromTwoRGBAs,\n            renderSvgCurveLine: renderSvgCurveLine\n        }\n    });\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('colorpicker/colorgradient',[ \"../kendo.core\", \"./contrastToolUtils\" ], f);\n})(function(){\n\n(function($, undefined) {\n    // WARNING: removing the following jshint declaration and turning\n    // == into === to make JSHint happy will break functionality.\n    /*jshint eqnull:true  */\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Observable = kendo.Observable,\n        parseColor = kendo.parseColor,\n        extend = $.extend,\n        Color = kendo.Color,\n        KEYS = kendo.keys,\n        BACKGROUNDCOLOR = \"background-color\",\n        WHITE = \"#ffffff\",\n        BLACK = \"#000000\",\n        NS = \".kendoColorTools\",\n        KEYDOWN_NS = \"keydown\" + NS,\n        ColorSelector = ui.colorpicker.ColorSelector,\n\n        contrastToolUtils = ui.colorpicker.contrastToolUtils;\n\n    function preventDefault(ev) { ev.preventDefault(); }\n\n    function bind(callback, obj) {\n        return function() {\n            return callback.apply(obj, arguments);\n        };\n    }\n\n    var ColorInput = Observable.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.element = element;\n            that.options = options;\n\n            that._viewModel = kendo.observable({\n                switchMode: that.switchMode.bind(that),\n                keydown: that.keydown.bind(that),\n                mode: function (mode) {\n                    return mode === this.get(\"format\");\n                },\n                format: options.format,\n                formats: options.formats,\n                rgb: null,\n                hex: function () {\n                    return this.get(\"rgb\") !== null && this.get(\"rgb\").toCss({alpha: options.opacity});\n                }\n            });\n\n            that._changeHandler = that.change.bind(that);\n\n            that._viewModel.bind(\"change\", that._changeHandler);\n\n            that._render();\n\n            that.element.on(KEYDOWN_NS, that.keydown.bind(that));\n\n            Observable.fn.init.call(that);\n        },\n\n        _template: kendo.template(\n            '# if (options.formats && options.formats.length > 1) { #' +\n            '<div class=\"k-vstack\">' +\n                '<button class=\"k-colorgradient-toggle-mode\" data-#:ns#role=\"button\" data-#:ns#icon=\"arrows-kpi\" data data-#:ns#bind=\"click: switchMode\" data-#:ns#fill-mode=\"flat\" data-#:ns#size=\"#: options.size #\" title=\"#: options.messages.toggleFormat #\">' +\n               '</button>' +\n            '</div>' +\n            '# } #' +\n\n\n            // HEX input\n            '# if (options.formats && options.formats.indexOf(\"hex\") >= 0) { #' +\n            '<div class=\"k-vstack k-flex-1\" data-#:ns#bind=\"visible: mode(\\'hex\\')\">' +\n                '<input type=\"text\" data-#:ns#bind=\"value: hex\" data-#:ns#role=\"textbox\" data-#:ns#size=\"#: options.size #\" tabindex=\"#:options.tabindex#\"  aria-label=\"#: options.messages.hex #\"/>' +\n                '<label class=\"k-colorgradient-input-label\">HEX</label>' +\n            '</div>' +\n            '# } #' +\n\n            // RGBA input\n            '# if (options.formats && options.formats.indexOf(\"rgb\") >= 0) { #' +\n            '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' +\n                '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.r\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#max=\"255\" data-#:ns#min=\"0\" data-#:ns#decimals=\"0\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n0\"  aria-label=\"#: options.messages.red #\" />' +\n                '<label class=\"k-colorgradient-input-label\">R</label>' +\n            '</div>' +\n            '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' +\n                '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.g\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#max=\"255\" data-#:ns#min=\"0\" data-#:ns#decimals=\"0\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n0\"  aria-label=\"#: options.messages.green #\" />' +\n                '<label class=\"k-colorgradient-input-label\">G</label>' +\n            '</div>' +\n            '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' +\n                '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.b\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#max=\"255\" data-#:ns#min=\"0\" data-#:ns#decimals=\"0\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n0\"  aria-label=\"#: options.messages.blue #\"/>' +\n                '<label class=\"k-colorgradient-input-label\">B</label>' +\n            '</div>' +\n            '#if(options.opacity){#' +\n            '<div  class=\"k-vstack\" data-#:ns#bind=\"visible: mode(\\'rgb\\')\">' +\n                '<input tabindex=\"#:options.tabindex#\" data-#:ns#bind=\"value: rgb.a\" data-#:ns#role=\"numerictextbox\" data-#:ns#size=\"#: options.size #\" data-#:ns#step=\"0.1\" data-#:ns#max=\"1\" data-#:ns#min=\"0\" data-#:ns#decimals=\"1\" data-#:ns#spinners=\"false\" data-#:ns#format=\"n1\"  aria-label=\"#: options.messages.alpha #\" />' +\n                '<label class=\"k-colorgradient-input-label\">A</label>' +\n            '</div>' +\n            '# } #' +\n            '# } #'),\n        destroy: function(){\n            var that = this;\n\n\n            that._viewModel.unbind(\"change\", that._changeHandler);\n            kendo.unbind(that.element);\n            kendo.destroy(that.element);\n            that.element.off(KEYDOWN_NS);\n            delete that._viewModel;\n            delete that._changeHandler;\n        },\n        _render: function() {\n            var that = this;\n\n            that.element\n                .append(that._template({ ns: kendo.ns, guid: kendo.guid(), options: that.options }))\n                .parent();\n\n            kendo.bind(that.element, that._viewModel);\n            that.element.attr(\"data-\" + kendo.ns + \"stop\", \"stop\");\n        },\n        value: function (color) {\n            var that = this;\n\n            that._color = (color && color.toBytes()) || parseColor(BLACK);\n            that._preventChangeEvent = true;\n            that._viewModel.set(\"rgb\", that._color);\n            delete that._preventChangeEvent;\n        },\n        reset: function () {\n            var that = this;\n\n            that._preventChangeEvent = true;\n            that._viewModel.set(\"rgb\", parseColor(BLACK));\n            delete that._preventChangeEvent;\n        },\n        switchMode: function() {\n            var that = this,\n                model = that._viewModel,\n                currentFormat = model.format,\n                index = model.formats.indexOf(currentFormat) + 1;\n\n            index = index >= model.formats.length ? 0 : index;\n\n            that._preventChangeEvent = true;\n            that._viewModel.set(\"format\", model.formats[index]);\n            delete that._preventChangeEvent;\n        },\n        change: function (ev) {\n            var that = this;\n\n            if (ev.field.indexOf(\"rgb\") >= 0) {\n                that._color = that._tryParseColor(that._viewModel.rgb.toCssRgba());\n                that._viewModel.set(\"hex\", that._color.toCss({ alpha: that.options.opacity }));\n            } else if (ev.field === \"hex\") {\n                that._color = that._tryParseColor(ev.sender[ev.field]);\n                that._viewModel.set(\"rgb\", that._color);\n            }\n\n            if (!that._preventChangeEvent) {\n                that.trigger(\"change\", {value: that._color});\n            }\n        },\n        _tryParseColor: function (color) {\n            var that = this;\n\n            try {\n                color = parseColor(color) || that._color;\n            } catch (error) {\n                color = that._color;\n            }\n\n            return color;\n        },\n        keydown: function (ev) {\n            var that = this,\n                textbox = $(ev.target).data(\"kendoTextBox\");\n\n            if (ev.keyCode === KEYS.ENTER && $(ev.target).is(\"input\")) {\n                if(textbox && textbox._change) {\n                    textbox._change();\n                }\n\n                that.trigger(\"change\", {value: that._color});\n                that.trigger(\"select\", {value: that._color});\n            }\n        }\n    });\n\n    var ColorGradient = ColorSelector.extend({\n        init: function (element, options) {\n            var that = this,\n                value;\n\n            ColorSelector.fn.init.call(that, element, options);\n\n            options = that.options = kendo.deepExtend({}, that.options, options);\n\n            if(options.messages.previewInput) {\n                options.messages.hex = options.messages.previewInput;\n            }\n\n            options.messages = options.messages ? $.extend(that.options.messages, options.messages) : that.options.messages;\n            element = that.element;\n\n            that.wrapper = element.addClass(\"k-colorgradient\")\n                .append(that._template(options));\n\n            that._hueElements = $(\".k-hsv-rectangle, .k-alpha-slider .k-slider-track\", element);\n            that._colorgradientInputs = $(\".k-colorgradient-inputs\", element);\n            that._contrastTool = $(\".k-colorgradient-color-contrast\", element);\n\n            that._sliders();\n\n            that._hsvArea();\n\n            value = that._value;\n\n            if(that._colorgradientInputs.length) {\n                that._colorInput = new ColorInput(that._colorgradientInputs, extend({}, options, {\n                    tabindex: this._tabIndex\n                }));\n\n                that._colorInput.bind(\"change\", function(ev){\n                    that._updateUI(ev.value, true);\n                });\n\n                that._colorInput.bind(\"select\", function(ev){\n                    var color = parseColor(ev.value);\n                    that._select(color);\n                    that.trigger(\"forceSelect\", { value: that.value() });\n                });\n            }\n\n            that._updateUI(value);\n        },\n        options: {\n            name : \"ColorGradient\",\n            opacity : false,\n            input : true,\n            format: \"hex\",\n            formats: [\"rgb\", \"hex\"],\n            contrastTool: false,\n            size: \"medium\",\n            messages: {\n                contrastRatio: \"Contrast ratio:\",\n                fail: \"Fail\",\n                pass: \"Pass\",\n                hex: \"HEX\",\n                toggleFormat: \"Toggle format\",\n                red: \"Red\",\n                green: \"Green\",\n                blue: \"Blue\",\n                alpha: \"Alpha\"\n            }\n        },\n        _template: kendo.template(\n            '<div class=\"k-colorgradient-canvas k-hstack\">' +\n                '<div class=\"k-hsv-rectangle\"><div class=\"k-hsv-gradient\"></div><div class=\"k-hsv-draghandle k-draghandle\"></div></div>' +\n\n                '<div class=\"k-hsv-controls k-hstack\">' +\n                    '<input class=\"k-hue-slider k-colorgradient-slider\" />' +\n                    '# if (opacity) { #' +\n                        '<input class=\"k-alpha-slider k-colorgradient-slider\" />' +\n                    '# } #' +\n                '</div>' +\n            '</div>' +\n\n            '# if (input) { #' +\n            '<div class=\"k-colorgradient-inputs k-hstack\">' +\n            '</div>' +\n            '# } #' +\n\n            '# if (contrastTool) { #' +\n                '<div class=\"k-colorgradient-color-contrast k-vbox\">' +\n                '</div>' +\n            '# } #'\n        ),\n        _onEnable: function(enable) {\n            this._hueSlider.enable(enable);\n\n            if (this._opacitySlider) {\n                this._opacitySlider.enable(enable);\n            }\n\n            this.wrapper.find(\"input\").attr(\"disabled\", !enable);\n\n            var handle = this._hsvRect.find(\".k-draghandle\");\n\n            if (enable) {\n                handle.attr(\"tabIndex\", this._tabIndex);\n            } else {\n                handle.removeAttr(\"tabIndex\");\n            }\n        },\n        _sliders: function() {\n            var that = this,\n                element = that.element,\n                hueSlider = element.find(\".k-hue-slider\"),\n                opacitySlider = element.find(\".k-alpha-slider\");\n\n            function hueChange(e) {\n                that._updateUI(that._getHSV(e.value, null, null, null));\n            }\n\n            hueSlider.attr(\"aria-label\", \"hue saturation\");\n            that._hueSlider = hueSlider.kendoSlider({\n                min: 0,\n                max: 360,\n                tickPlacement: \"none\",\n                showButtons: false,\n                orientation: \"vertical\",\n                slide: hueChange,\n                change: hueChange\n            }).data(\"kendoSlider\");\n\n            function opacityChange(e) {\n                that._updateUI(that._getHSV(null, null, null, e.value / 100));\n            }\n\n            opacitySlider.attr(\"aria-label\", \"opacity\");\n            that._opacitySlider = opacitySlider.kendoSlider({\n                min: 0,\n                max: 100,\n                tickPlacement: \"none\",\n                showButtons: false,\n                orientation: \"vertical\",\n                slide: opacityChange,\n                change: opacityChange\n            }).data(\"kendoSlider\");\n        },\n        _hsvArea: function() {\n            var that = this,\n                element = that.element,\n                hsvRect = element.find(\".k-hsv-rectangle\"),\n                hsvHandle = hsvRect.find(\".k-draghandle\").attr(\"tabIndex\", 0).on(KEYDOWN_NS, bind(that._keydown, that));\n\n            function update(x, y) {\n                var offset = this.offset,\n                    dx = x - offset.left, dy = y - offset.top,\n                    rw = this.width, rh = this.height;\n\n                dx = dx < 0 ? 0 : dx > rw ? rw : dx;\n                dy = dy < 0 ? 0 : dy > rh ? rh : dy;\n                that._svChange(dx / rw, 1 - dy / rh);\n            }\n\n            that._hsvEvents = new kendo.UserEvents(hsvRect, {\n                global: true,\n                press: function(e) {\n                    this.offset = kendo.getOffset(hsvRect);\n                    this.width = hsvRect.width();\n                    this.height = hsvRect.height();\n                    hsvHandle.focus();\n                    update.call(this, e.x.location, e.y.location);\n                },\n                start: function() {\n                    hsvRect.addClass(\"k-dragging\");\n                    hsvHandle.focus();\n                },\n                move: function(e) {\n                    e.preventDefault();\n                    update.call(this, e.x.location, e.y.location);\n                },\n                end: function() {\n                    hsvRect.removeClass(\"k-dragging\");\n                }\n            });\n\n            that._hsvRect = hsvRect;\n            that._hsvHandle = hsvHandle;\n        },\n        setBackgroundColor: function (color) {\n            var that = this;\n\n            if (that.options.contrastTool) {\n                that.options.contrastTool = $.isPlainObject(that.options.contrastTool) ? extend({}, that.options.contrastTool, {\n                    backgroundColor: color\n                }) : {\n                    backgroundColor: color\n                };\n\n                that._updateColorContrast(that.color() || parseColor(WHITE));\n            }\n        },\n        _updateUI: function(color, dontChangeInput) {\n            var that = this;\n\n            if (!color) {\n                that._reset();\n                return;\n            }\n\n            if (!dontChangeInput && that._colorInput) {\n                that._colorInput.value(color);\n            }\n\n            that._triggerSelect(color);\n            that._updateHsv(color);\n\n            if(that._contrastTool.length) {\n                that._updateColorContrast(color);\n            }\n        },\n        _reset: function () {\n            var that = this;\n\n            if (that._colorInput) {\n                that._colorInput.reset();\n            }\n\n            that._resetHsv();\n            that._resetColorContrast();\n        },\n        _resetHsv: function () {\n            var that = this,\n                color = parseColor(BLACK);\n\n            that._updateHsv(color);\n        },\n        _updateHsv: function (color) {\n            var that = this,\n                rect = that._hsvRect;\n\n            color = color.toHSV();\n\n            that._hsvHandle.css({\n                // saturation is 0 on the left side, full (1) on the right\n                left: color.s * rect.width() + \"px\",\n                // value is 0 on the bottom, full on the top.\n                top: (1 - color.v) * rect.height() + \"px\"\n            });\n\n            that._hueElements.css(BACKGROUNDCOLOR, Color.fromHSV(color.h, 1, 1, 1).toCss());\n            that._hueSlider.value(color.h);\n\n            if (that._opacitySlider) {\n                that._opacitySlider.wrapper.find(\".k-slider-track\").css(\"background\", \"linear-gradient(to top, transparent, \" + Color.fromHSV(color.h, 1, 1, 1).toCss());\n                that._opacitySlider.value(100 * color.a);\n            }\n        },\n        _resetColorContrast: function () {\n            var that = this,\n                contrastOptions = that.options.contrastTool;\n\n            if(that._contrastTool.length) {\n                that._updateColorContrast(contrastOptions.backgroundColor ? parseColor(contrastOptions.backgroundColor) : parseColor(WHITE));\n            }\n        },\n        _updateColorContrast: function (color) {\n            var that = this,\n                contrastOptions = that.options.contrastTool,\n                backgroundColor = contrastOptions.backgroundColor ? parseColor(contrastOptions.backgroundColor) : parseColor(WHITE),\n                contrastRatio = contrastToolUtils.getContrastFromTwoRGBAs(parseColor(color.toCssRgba()), backgroundColor),\n                contrastRatioTemplate = kendo.template('<div class=\"k-contrast-ratio\">' +\n                                            '<span class=\"k-contrast-ratio-text\">#:messages.contrastRatio# #:kendo.toString(ratio, \"n2\")#</span>' +\n                                            '<span class=\"k-contrast-validation k-text-success\">' +\n                                                '#if (ratio > 4.5) {#' +\n                                                    '<span class=\"k-icon k-i-check\"></span>' +\n                                                '#}#' +\n                                                '#if (ratio > 7) {#' +\n                                                    '<span class=\"k-icon k-i-check\"></span>' +\n                                                '#}#' +\n                                            '</span></div>'),\n                labelTemplate = kendo.template('<div>' +\n                                            '<span>#:level#: #:limit# </span>' +\n                                            '#if (ratio > limit) {#' +\n                                            '<span class=\"k-contrast-validation k-text-success\">#:messages.pass# <span class=\"k-icon k-i-check\"></span></span>' +\n                                            '#} else {#' +\n                                            '<span class=\"k-contrast-validation k-text-error\">#:messages.fail# <span class=\"k-icon k-i-close\"></span></span>' +\n                                            '#}#' +\n                                            '</div>'),\n                output = \"\";\n\n            output += contrastRatioTemplate({\n                messages: that.options.messages,\n                ratio: contrastRatio,\n            });\n\n            output += labelTemplate({\n                messages: that.options.messages,\n                ratio: contrastRatio,\n                limit: 4.5,\n                level: \"AA\"\n            });\n\n            output += labelTemplate({\n                messages: that.options.messages,\n                ratio: contrastRatio,\n                limit: 7,\n                level: \"AAA\"\n            });\n\n            that._contrastTool.find(\".k-contrast-ratio, div\").remove();\n            that._contrastTool.append(output);\n\n            that._updateContrastSvg(backgroundColor);\n        },\n        _updateContrastSvg: function (backgroundColor) {\n            var that = this,\n                hsvRect = that._hsvRect,\n                svgClassName = \"k-color-contrast-svg\",\n                metrics = { width: hsvRect.width(), height: hsvRect.height() },\n                newSvg;\n\n            if(!metrics.width || !metrics.height) {\n                return;\n            }\n\n            newSvg = $(contrastToolUtils.renderSvgCurveLine(metrics, that._getHSV(), backgroundColor)).addClass(svgClassName);\n\n            hsvRect.find(\".\" + svgClassName).remove();\n            hsvRect.append(newSvg);\n        },\n        _keydown: function(ev) {\n            var that = this;\n            function move(prop, d) {\n                var c = that._getHSV();\n                c[prop] += d * (ev.shiftKey ? 0.01 : 0.05);\n                if (c[prop] < 0) { c[prop] = 0; }\n                if (c[prop] > 1) { c[prop] = 1; }\n                that._updateUI(c);\n                preventDefault(ev);\n            }\n            function hue(d) {\n                var c = that._getHSV();\n                c.h += d * (ev.shiftKey ? 1 : 5);\n                if (c.h < 0) { c.h = 0; }\n                if (c.h > 359) { c.h = 359; }\n                that._updateUI(c);\n                preventDefault(ev);\n            }\n            switch (ev.keyCode) {\n            case KEYS.LEFT:\n                if (ev.ctrlKey) {\n                    hue(-1);\n                } else {\n                    move(\"s\", -1);\n                }\n                break;\n            case KEYS.RIGHT:\n                if (ev.ctrlKey) {\n                    hue(1);\n                } else {\n                    move(\"s\", 1);\n                }\n                break;\n            case KEYS.UP:\n                move(ev.ctrlKey && that._opacitySlider ? \"a\" : \"v\", 1);\n                break;\n            case KEYS.DOWN:\n                move(ev.ctrlKey && that._opacitySlider ? \"a\" : \"v\", -1);\n                break;\n            case KEYS.ENTER:\n                that._select(that._getHSV());\n                break;\n            case KEYS.F2:\n                that._colorInput.element.find(\"input\").trigger(\"focus\").select();\n                break;\n            case KEYS.ESC:\n                that._cancel();\n                break;\n            }\n        },\n        focus: function() {\n            this._hsvHandle.focus();\n        },\n        _getHSV: function(h, s, v, a) {\n            var that = this,\n                rect = that._hsvRect,\n                width = rect.width(),\n                height = rect.height(),\n                handlePosition = this._hsvHandle.position();\n\n            if(!width || !height) {\n                return that.color() ? that.color().toHSV() : parseColor(BLACK);\n            }\n\n            if (h == null) {\n                h = that._hueSlider.value();\n            }\n            if (s == null) {\n                s = handlePosition.left / width;\n            }\n            if (v == null) {\n                v = 1 - handlePosition.top / height;\n            }\n            if (a == null) {\n                a = that._opacitySlider ? that._opacitySlider.value() / 100 : 1;\n            }\n            return Color.fromHSV(h, s, v, a);\n        },\n        _svChange: function(s, v) {\n            var color = this._getHSV(null, s, v, null);\n            this._updateUI(color);\n        },\n        destroy: function (){\n            this._hsvEvents.destroy();\n\n            this._hueSlider.destroy();\n            if (this._opacitySlider) {\n                this._opacitySlider.destroy();\n            }\n\n            if(this._colorInput) {\n                this._colorInput.destroy();\n            }\n\n            this._hueSlider = this._opacitySlider = this._hsvRect = this._hsvHandle =\n                this._hueElements = this._selectedColor = this._colorAsText =\n                this._contrastTool = null;\n\n            ColorSelector.fn.destroy.call(this);\n        }\n    });\n\n    ui.plugin(ColorGradient);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n(function(f, define){\n    define('colorpicker/colorpalette',[\n        \"../kendo.core\"\n    ], f);\n})(function(){\n\n(function($, undefined){\n    // WARNING: removing the following jshint declaration and turning\n    // == into === to make JSHint happy will break functionality.\n    /*jshint eqnull:true  */\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        parseColor = kendo.parseColor,\n        KEYS = kendo.keys,\n        BACKGROUNDCOLOR = \"background-color\",\n        ITEMSELECTEDCLASS = \"k-state-selected\",\n        ITEMSFOCUSEDCLASS = \"k-state-focus\",\n        SIMPLEPALETTE = \"000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7\",\n        WEBPALETTE = \"FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000\",\n        NS = \".kendoColorTools\",\n        CLICK_NS = \"click\" + NS,\n        KEYDOWN_NS = \"keydown\" + NS,\n        BLUR_NS = \"blur\" + NS,\n        ColorSelector = ui.colorpicker.ColorSelector;\n\n    function preventDefault(ev) { ev.preventDefault(); }\n\n    function bind(callback, obj) {\n        return function() {\n            return callback.apply(obj, arguments);\n        };\n    }\n\n    function relative(array, element, delta) {\n        array = Array.prototype.slice.call(array);\n        var n = array.length;\n        var pos = array.indexOf(element);\n        if (pos < 0) {\n            return delta < 0 ? array[n - 1] : array[0];\n        }\n        pos += delta;\n        if (pos < 0) {\n            pos += n;\n        } else {\n            pos %= n;\n        }\n        return array[pos];\n    }\n\n    var ColorPalette = ColorSelector.extend({\n        init: function(element, options) {\n            var that = this;\n            ColorSelector.fn.init.call(that, element, options);\n            element = that.wrapper = that.element;\n            options = that.options;\n\n            var colors = options.palette || \"basic\";\n\n            if (colors == \"websafe\") {\n                colors = WEBPALETTE;\n                options.columns = 18;\n            } else if (colors == \"basic\") {\n                colors = SIMPLEPALETTE;\n            }\n\n            if (typeof colors == \"string\") {\n                colors = colors.split(\",\");\n            }\n\n            if ($.isArray(colors)) {\n                colors = $.map(colors, function(x) { return parseColor(x); });\n            }\n\n            that._selectedID = (options.ariaId || kendo.guid()) + \"_selected\";\n\n            element.addClass(\"k-colorpalette\")\n                .attr(\"role\", \"grid\")\n                .attr(\"aria-readonly\", \"true\")\n                .append($(that._template({\n                    colors   : colors,\n                    columns  : options.columns,\n                    tileSize : options.tileSize,\n                    value    : that._value,\n                    id       : options.ariaId\n                })))\n                .on(CLICK_NS, \".k-colorpalette-tile\", function(ev){\n                    that._select(ev.currentTarget);\n                })\n                .attr(\"tabIndex\", that._tabIndex)\n                .on(KEYDOWN_NS, bind(that._keydown, that))\n                .on(BLUR_NS, function(){\n                    that.wrapper.find(\".k-colorpalette-tile\").removeClass(ITEMSFOCUSEDCLASS);\n                });\n\n            var tileSize = options.tileSize, width, height;\n            if (tileSize) {\n                if (/number|string/.test(typeof tileSize)) {\n                    width = height = parseFloat(tileSize);\n                } else if (typeof tileSize == \"object\") {\n                    width = parseFloat(tileSize.width);\n                    height = parseFloat(tileSize.height);\n                } else {\n                    throw new Error(\"Unsupported value for the 'tileSize' argument\");\n                }\n                element.find(\".k-colorpalette-tile\").css({ width: width, height: height });\n            }\n        },\n        focus: function(){\n            if (this.wrapper && !this.wrapper.is(\"[unselectable='on']\")) {\n                this.wrapper.trigger(\"focus\");\n            }\n        },\n        options: {\n            name: \"ColorPalette\",\n            columns: 10,\n            tileSize: null,\n            palette: \"basic\"\n        },\n        _onEnable: function(enable) {\n            if (enable) {\n                this.wrapper.attr(\"tabIndex\", this._tabIndex);\n            } else {\n                this.wrapper.removeAttr(\"tabIndex\");\n            }\n        },\n        _keydown: function(e) {\n            var selected,\n                wrapper = this.wrapper,\n                items = wrapper.find(\".k-colorpalette-tile\"),\n                current = items.filter(\".\" + ITEMSFOCUSEDCLASS).get(0) || items.filter(\".\" + ITEMSELECTEDCLASS).get(0),\n                keyCode = e.keyCode;\n\n            if (keyCode == KEYS.LEFT) {\n                selected = relative(items, current, -1);\n            } else if (keyCode == KEYS.RIGHT) {\n                selected = relative(items, current, 1);\n            } else if (keyCode == KEYS.DOWN) {\n                selected = relative(items, current, this.options.columns);\n            } else if (keyCode == KEYS.UP) {\n                selected = relative(items, current, -this.options.columns);\n            } else if (keyCode == KEYS.ENTER) {\n                preventDefault(e);\n                if (current) {\n                    this._select(current);\n                    this.trigger(\"forceSelect\", { value: this.value() });\n                    return;\n                }\n            } else if (keyCode == KEYS.ESC) {\n                this._cancel();\n            }\n\n            if (selected) {\n                preventDefault(e);\n\n                this._current(selected);\n\n                try {\n                    var color = parseColor(selected.css(BACKGROUNDCOLOR));\n                    this._triggerSelect(color);\n                } catch(ex) {}\n            }\n        },\n        _select: function(item) {\n            var that = this,\n                items = that.wrapper.find(\".k-colorpalette-tile\");\n\n            item = $(item);\n\n            ColorSelector.fn._select.call(that, item.css(BACKGROUNDCOLOR));\n\n            items.removeClass(ITEMSELECTEDCLASS);\n            item.addClass(ITEMSELECTEDCLASS);\n        },\n        _current: function(item) {\n            this.wrapper.find(\".\" + ITEMSFOCUSEDCLASS)\n                .removeClass(ITEMSFOCUSEDCLASS)\n                .attr(\"aria-selected\", false)\n                .removeAttr(\"id\");\n\n            $(item)\n                .addClass(ITEMSFOCUSEDCLASS)\n                .attr(\"aria-selected\", true)\n                .attr(\"id\", this._selectedID);\n\n            this.element\n                .removeAttr(\"aria-activedescendant\")\n                .attr(\"aria-activedescendant\", this._selectedID);\n        },\n        _updateUI: function(color) {\n            var item = null,\n                items = this.wrapper.find(\".k-colorpalette-tile\");\n\n            this.wrapper.find(\".k-colorpalette-tile\").each(function(){\n                var c = parseColor($(this).css(BACKGROUNDCOLOR));\n\n                if (c && c.equals(color)) {\n                    item = this;\n\n                    return false;\n                }\n            });\n\n            this._current(item);\n\n            items.removeClass(ITEMSELECTEDCLASS);\n\n            if(item) {\n                $(item).addClass(ITEMSELECTEDCLASS);\n            }\n        },\n        _template: kendo.template(\n            '<div class=\"k-colorpalette-table-wrap\">' +\n            '<table class=\"k-colorpalette-table k-palette\" role=\"presentation\"><tr role=\"row\">' +\n              '# for (var i = 0; i < colors.length; ++i) { #' +\n                '# var selected = colors[i].equals(value); #' +\n                '# if (i && i % columns == 0) { # </tr><tr role=\"row\"> # } #' +\n                '<td role=\"gridcell\" unselectable=\"on\" style=\"background-color:#= colors[i].toCss() #\"' +\n                    '#= selected ? \" aria-selected=true\" : \"\" # ' +\n                    '#=(id && i === 0) ? \"id=\\\\\"\"+id+\"\\\\\" \" : \"\" # ' +\n                    'class=\"k-colorpalette-tile#= selected ? \" ' + ITEMSELECTEDCLASS + '\" : \"\" #\" ' +\n                    'aria-label=\"#= colors[i].toCss() #\"></td>' +\n              '# } #' +\n            '</tr></table></div>'\n        )\n    });\n\n\n    ui.plugin(ColorPalette);\n\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('colorpicker/flatcolorpicker',[\n        \"./colorgradient\",\n        \"./colorpalette\",\n        \"../kendo.html.button\"\n    ], f);\n})(function(){\n\n(function($, undefined){\n    // WARNING: removing the following jshint declaration and turning\n    // == into === to make JSHint happy will break functionality.\n    /*jshint eqnull:true  */\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        Color = kendo.Color,\n        extend = $.extend,\n        BACKGROUNDCOLOR = \"background-color\",\n        MESSAGES = {\n            apply  : \"Apply\",\n            cancel : \"Cancel\",\n            noColor: \"no color\",\n            clearColor: \"Clear color\",\n            previewInput: null,\n            contrastRatio: \"Contrast ratio:\",\n            fail: \"Fail\",\n            pass: \"Pass\",\n            hex: \"HEX\",\n            toggleFormat: \"Toggle format\",\n            red: \"Red\",\n            green: \"Green\",\n            blue: \"Blue\",\n            alpha: \"Alpha\",\n            gradient: \"Gradient view\",\n            palette: \"Palette view\"\n        },\n        NS = \".kendoColorTools\",\n        CLICK_NS = \"click\" + NS,\n        KEYDOWN_NS = \"keydown\" + NS,\n        ColorSelector = ui.colorpicker.ColorSelector,\n        KEYS = kendo.keys,\n\n        NO_COLOR = \"k-no-color\",\n        SELECTED = \"k-selected\",\n        PREVIEW_MASK = \".k-color-preview-mask\",\n\n        VIEWS = {\n            \"gradient\": ui.ColorGradient,\n            \"palette\": ui.ColorPalette\n        };\n\n    function bind(callback, obj) {\n        return function() {\n            return callback.apply(obj, arguments);\n        };\n    }\n\n    var FlatColorPicker = ColorSelector.extend({\n        init: function(element, options) {\n            var that = this;\n\n            if (options && options.autoupdate === false) {\n                options._standalone = false;\n            }\n\n            ColorSelector.fn.init.call(that, element, options);\n            options = that.options = kendo.deepExtend({}, that.options, options);\n            element = that.element;\n\n            that.wrapper = element.addClass(\"k-flatcolorpicker k-coloreditor\")\n                .append(that._template());\n\n            that._selectedColor = $(\".k-coloreditor-preview-color\", element);\n            that._previousColor = $(\".k-coloreditor-current-color\", element);\n            that._viewsContainer = $(\".k-coloreditor-views\", element);\n\n            element.find(\".k-button[data-view=\" + that.options.view + \"]\").addClass(SELECTED);\n\n            var value = that.color();\n\n            that._changeView(options.view);\n\n            that._setViewSize();\n\n            if (value) {\n                that._updateUI(value);\n                that._previousColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, value.toDisplay());\n                that._selectedColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, value.toDisplay());\n            } else {\n                that._selectedColor.addClass(NO_COLOR);\n                that._previousColor.addClass(NO_COLOR);\n            }\n\n            element\n                .on(KEYDOWN_NS, bind(that._keydown, that))\n                .on(CLICK_NS, \".k-coloreditor-reset\", function () {\n                    that._clearColor = true;\n                    that._updateUI(null);\n                    that._view.value(null);\n                })\n                .on(CLICK_NS, \".k-coloreditor-apply\", function(){\n                    if(that._clearColor) {\n                        that._select(null);\n                    } else {\n                        that._select(that._view.color());\n                    }\n                })\n                .on(CLICK_NS, \".k-coloreditor-cancel\", function(){\n                    delete that._clearColor;\n                    that._updateUI(that.color());\n                    that._cancel();\n                })\n                .on(CLICK_NS, \".k-button[data-view]\", function(ev){\n                    var viewButton =  $(ev.target).closest(\"[data-view]\");\n\n                    if(viewButton.is(\".\" + SELECTED)) {\n                        return;\n                    }\n\n                    element.find(\".k-button[data-view]\").removeClass(SELECTED);\n                    viewButton.addClass(SELECTED);\n                    that._changeView(viewButton.data(\"view\"));\n                });\n        },\n        destroy: function() {\n            var that = this;\n\n            ColorSelector.fn.destroy.call(this);\n\n            if (that._view) {\n                that._view.destroy();\n                that._viewsContainer.empty();\n            }\n\n            that.element.off(NS);\n\n            that._selectedColor = that._previousColor = that._viewsContainer = that._view = null;\n        },\n        options: {\n            name: \"FlatColorPicker\",\n            opacity: false,\n            buttons: false,\n            input: true,\n            preview: true,\n            clearButton: false,\n            format: \"hex\",\n            formats: [\"rgb\", \"hex\"],\n            view: \"gradient\",\n            views: [\"gradient\", \"palette\"],\n            palette: null,\n            autoupdate : true,\n            backgroundColor: null,\n            columns: 10,\n            tileSize: 24,\n            messages   : MESSAGES,\n            size: \"medium\" // Fake styling option to accomplish colorpicker's size for textbox and button\n        },\n        setBackgroundColor: function (color) {\n            var that = this;\n\n            if(that._view && that._view.setBackgroundColor) {\n                that._view.setBackgroundColor(color);\n            }\n        },\n        _select: function(value) {\n            var that = this;\n\n            ColorSelector.fn._select.call(that, value);\n\n            that._updatePreviousColor(value);\n        },\n        _updatePreviousColor: function (value) {\n            var that = this;\n\n            if (value) {\n                that._previousColor.removeClass(NO_COLOR);\n                that._previousColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, value.toDisplay());\n            } else {\n                that._previousColor.addClass(NO_COLOR);\n                that._previousColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, \"\");\n            }\n        },\n        _changeView: function (mode) {\n            var that = this,\n                options = $.extend({}, that.options),\n                selector =  VIEWS[mode],\n                selectedColor, hsvColor;\n\n            if(that._view && that._view._colorInput) {\n                that.options.format = that._view._colorInput._viewModel.format;\n            }\n\n            that.options.view = mode;\n\n            delete options.name;\n            delete options.change;\n            delete options.select;\n            delete options.cancel;\n            delete options._standalone;\n\n            if (that._view) {\n                selectedColor = that._view.color();\n                that._view.destroy();\n                that._viewsContainer.empty();\n            }\n\n            if (selectedColor) {\n                selectedColor = selectedColor.toHSV();\n                hsvColor = Color.fromHSV(that._cachedHue || 0, selectedColor.s, selectedColor.v, selectedColor.a);\n                that._cachedHue = selectedColor.toHSV().h;\n                selectedColor = selectedColor.equals(hsvColor) ? hsvColor : selectedColor;\n            }\n\n            if (selector) {\n                that._view = new VIEWS[mode]($(\"<div></div>\").appendTo(that._viewsContainer), options);\n                that._view.value(selectedColor);\n\n                that._view.bind(\"change\", function (ev) {\n                    delete that._clearColor;\n                    that._updateUI(ev.sender.color(), true);\n                });\n\n                that._view.bind(\"forceSelect\", function (ev) {\n                    delete that._clearColor;\n                    that._select(ev.sender.color());\n                });\n            }\n        },\n        _onEnable: function(enable) {\n            var that = this;\n\n            if (that._view) {\n                that._view._onEnable(enable);\n            }\n        },\n        focus: function() {\n            var that = this;\n\n            if (that._view) {\n                that._view.focus();\n            }\n        },\n        _updateUI: function(color, dontChangeView) {\n            var that = this;\n\n            if (color && color.toDisplay) {\n                that._selectedColor.removeClass(NO_COLOR);\n                that._selectedColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, color.toDisplay());\n            } else {\n                that._selectedColor.addClass(NO_COLOR);\n                that._selectedColor.children(PREVIEW_MASK).css(BACKGROUNDCOLOR, \"\");\n            }\n\n            that._triggerSelect(color);\n\n            if (that.options.autoupdate) {\n                that._updatePreviousColor(color);\n            }\n\n            if(!dontChangeView) {\n                that._view.value(color);\n            }\n        },\n        _setViewSize: function() {\n            var that = this,\n                wrapper = that.wrapper[0],\n                previewWidth = parseInt((that.options.tileSize.width || that.options.tileSize), 10),\n                previewHeight = parseInt((that.options.tileSize.width || that.options.tileSize), 10),\n                previewColumns = that.options.columns;\n\n            wrapper.style.setProperty(\"--kendo-color-preview-columns\", previewColumns);\n            wrapper.style.setProperty(\"--kendo-color-preview-width\", previewWidth + \"px\");\n            wrapper.style.setProperty(\"--kendo-color-preview-height\", previewHeight + \"px\");\n        },\n        _keydown: function(e) {\n\n            if (e.keyCode == KEYS.ESC) {\n                this._cancel();\n            }\n        },\n        _template: function () {\n            var that = this,\n                options = that.options,\n                buttonOptions = extend({}, options, {\n                    fillMode: \"flat\",\n                    themeColor: \"base\",\n                    rounded: \"medium\"\n                });\n\n            return kendo.template(\n                    '<div class=\"k-coloreditor-header k-hstack\">' +\n                        '# if (views && views.length > 1) { #' +\n                        '<div class=\"k-coloreditor-header-actions k-hstack\">' +\n                            '<div class=\"k-button-group k-button-group-flat\">' +\n                                html.renderButton('<button  data-view=\"gradient\" title=\"#:messages.gradient#\"></button>', extend({ icon: \"color-canvas\" }, buttonOptions)) +\n                                html.renderButton('<button  data-view=\"palette\" title=\"#:messages.palette#\"></button>', extend({ icon: \"palette\" }, buttonOptions)) +\n                            '</div>' +\n                        '</div>' +\n                        '# } #' +\n                        '<div class=\"k-spacer\"></div>' +\n                        '<div class=\"k-coloreditor-header-actions k-hstack\">' +\n                            '# if (clearButton) { #' +\n                            html.renderButton('<button class=\"k-coloreditor-reset\" title=\"#:messages.clearColor#\"></button>', extend({ icon: \"reset-color\" }, buttonOptions)) +\n                            '# } #' +\n                            '# if (preview) { #' +\n                            '<div class=\"k-coloreditor-preview k-vstack\">' +\n                                '<span class=\"k-coloreditor-preview-color k-color-preview\">' +\n                                    '<span class=\"k-color-preview-mask\"></span>' +\n                                '</span>' +\n                                '<span class=\"k-coloreditor-current-color k-color-preview\">' +\n                                    '<span class=\"k-color-preview-mask\"></span>' +\n                                '</span>' +\n                            '</div>' +\n                            '# } #' +\n                        '</div>' +\n                    '</div>' +\n                    '<div class=\"k-coloreditor-views k-vstack\"></div>' +\n                    '# if (buttons) { #' +\n                    '<div class=\"k-coloreditor-footer k-actions k-hstack k-justify-content-end\">' +\n                        html.renderButton('<button class=\"k-coloreditor-cancel\" title=\"#:messages.cancel#\">#: messages.cancel #</button>', extend({}, buttonOptions, { fillMode: \"solid\" })) +\n                        html.renderButton('<button class=\"k-coloreditor-apply\" title=\"#:messages.apply#\">#: messages.apply #</button>', extend({}, buttonOptions, { fillMode: \"solid\", themeColor: \"primary\" })) +\n                    '</div>' +\n                    '# } #'\n                )(options);\n            }\n    });\n\n    ui.plugin(FlatColorPicker);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('kendo.colorpicker',[\n        \"./kendo.core\",\n        \"./kendo.color\",\n        \"./kendo.popup\",\n        \"./kendo.slider\",\n        \"./kendo.userevents\",\n        \"./kendo.button\",\n        \"./kendo.binder\",\n        \"./kendo.textbox\",\n        \"./kendo.numerictextbox\",\n        \"./kendo.html.button\",\n\n        \"./colorpicker/colorselector\",\n        \"./colorpicker/flatcolorpicker\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"colorpicker\",\n    name: \"Color tools\",\n    category: \"web\",\n    description: \"Color selection widgets\",\n    depends: [ \"core\", \"color\", \"popup\", \"slider\", \"userevents\", \"button\", \"binder\", \"textbox\", \"numerictextbox\", \"html.button\" ]\n};\n\n(function($, undefined){\n    // WARNING: removing the following jshint declaration and turning\n    // == into === to make JSHint happy will break functionality.\n    /*jshint eqnull:true  */\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        Color = kendo.Color,\n        parseColor = kendo.parseColor,\n        KEYS = kendo.keys,\n        BACKGROUNDCOLOR = \"background-color\",\n        MESSAGES = {\n            apply  : \"Apply\",\n            cancel : \"Cancel\",\n            noColor: \"no color\",\n            clearColor: \"Clear color\",\n            previewInput: null,\n            contrastRatio: \"Contrast ratio:\",\n            fail: \"Fail\",\n            pass: \"Pass\",\n            hex: \"HEX\",\n            toggleFormat: \"Toggle format\",\n            red: \"Red\",\n            green: \"Green\",\n            blue: \"Blue\",\n            alpha: \"Alpha\",\n            gradient: \"Gradient view\",\n            palette: \"Palette view\"\n        },\n        NS = \".kendoColorTools\",\n        CLICK_NS = \"click\" + NS,\n        KEYDOWN_NS = \"keydown\" + NS,\n        ColorSelector = ui.colorpicker.ColorSelector,\n        FlatColorPicker = ui.FlatColorPicker;\n\n    /* -----[ The ColorPicker widget ]----- */\n\n    var ColorPicker = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            // Legacy support for the cases where only palette is defined\n            if(options && options.palette && !options.view){\n                options.view =\"palette\";\n            }\n\n            Widget.fn.init.call(that, element, options);\n            options = that.options = kendo.deepExtend({}, that.options, options);\n            element = that.element;\n\n            var value = element.attr(\"value\") || element.val();\n            if (value) {\n                value = parseColor(value, true);\n            } else {\n                value = parseColor(options.value, true);\n            }\n            that._value = options.value = value;\n\n            var _buttonHtml = kendo.html.renderButton('<button class=\"k-select k-button-rectangle k-input-button\" unselectable=\"on\" aria-label=\"select\" tabindex=\"-1\"></button>', $.extend({}, that.options, {\n                icon: \"arrow-s\"\n            }));\n\n            var content = that._inputWrapper = that.wrapper = $(that._template($.extend({}, that.options, {\n                _buttonHtml: _buttonHtml\n            })));\n\n            that._applyCssClasses();\n            element.hide().after(content);\n\n            if (element.is(\"input\")) {\n                element.appendTo(content);\n\n                // if there exists a <label> associated with this\n                // input field, we must catch clicks on it to prevent\n                // the built-in color picker from showing up.\n                // https://github.com/telerik/kendo-ui-core/issues/292\n\n                var label = element.closest(\"label\");\n                var id = element.attr(\"id\");\n                if (id) {\n                    label = label.add('label[for=\"' + id + '\"]');\n                }\n                label.on(\"click\", function(ev){\n                    that.open();\n                    ev.preventDefault();\n                });\n            }\n\n            that._tabIndex = element.attr(\"tabIndex\") || 0;\n\n            that.enable(!element.attr(\"disabled\"));\n\n            var accesskey = element.attr(\"accesskey\");\n            if (accesskey) {\n                element.attr(\"accesskey\", null);\n                content.attr(\"accesskey\", accesskey);\n            }\n\n            that.bind(\"activate\", function(ev){\n                if (!ev.isDefaultPrevented()) {\n                    that.toggle();\n                }\n            });\n\n            that._updateUI(value);\n        },\n        destroy: function() {\n            this.wrapper.off(NS).find(\"*\").off(NS);\n            if (this._popup) {\n                this._selector.destroy();\n                this._popup.destroy();\n            }\n            this._selector = this._popup = this.wrapper = null;\n            Widget.fn.destroy.call(this);\n        },\n        enable: function(enable) {\n            var that = this,\n                wrapper = that.wrapper,\n                arrow = wrapper.find(\".k-input-button\");\n\n            if (arguments.length === 0) {\n                enable = true;\n            }\n\n            that.element.attr(\"disabled\", !enable);\n            wrapper.attr(\"aria-disabled\", !enable);\n\n            arrow.off(NS).on(\"mousedown\" + NS, preventDefault);\n\n            wrapper.addClass(\"k-disabled\")\n                .removeAttr(\"tabIndex\")\n                .add(\"*\", wrapper).off(NS);\n\n            if (enable) {\n                wrapper.removeClass(\"k-disabled\")\n                    .attr(\"tabIndex\", that._tabIndex)\n                    .on(\"mouseenter\" + NS, function () { wrapper.addClass(\"k-hover\"); })\n                    .on(\"mouseleave\" + NS, function () { wrapper.removeClass(\"k-hover\"); })\n                    .on(\"focus\" + NS, function () { wrapper.addClass(\"k-focus\"); })\n                    .on(\"blur\" + NS, function () { wrapper.removeClass(\"k-focus\"); })\n                    .on(KEYDOWN_NS, bind(that._keydown, that))\n                    .on(CLICK_NS, \".k-input-button\", bind(that.toggle, that))\n                    .on(CLICK_NS, \".k-input-inner\", function () {\n                        that.trigger(\"activate\");\n                    });\n            } else {\n                that.close();\n            }\n        },\n\n        _template: kendo.template(\n            '<span role=\"textbox\" aria-haspopup=\"true\" class=\"k-colorpicker k-picker k-icon-picker\">' +\n                '<span  class=\"k-input-inner\">' +\n                    '<span class=\"k-value-icon k-color-preview #: toolIcon ? \"k-icon-color-preview\" : \"\" #\">' +\n                        '# if (toolIcon) { #' +\n                        '<span class=\"k-color-preview-icon k-icon #= toolIcon #\"></span>' +\n                        '# } #' +\n                        '<span class=\"k-color-preview-mask\"></span>' +\n                    '</span>' +\n                '</span >' +\n                '#= _buttonHtml #' +\n            '</span>'\n        ),\n\n        options: {\n            name: \"ColorPicker\",\n            closeOnSelect: false,\n            contrastTool: false,\n            palette: null,\n            columns: 10,\n            toolIcon: null,\n            value: null,\n            messages: MESSAGES,\n            opacity: false,\n            buttons: true,\n            preview: true,\n            clearButton: false,\n            input      : true,\n            format: \"hex\",\n            formats: [\"rgb\", \"hex\"],\n            view: \"gradient\",\n            views: [\"gradient\", \"palette\"],\n            backgroundColor: null,\n            ARIATemplate: 'Current selected color is #=data || \"\"#',\n            size: \"medium\",\n            rounded: \"medium\",\n            fillMode: \"solid\"\n        },\n\n        events: [ \"activate\", \"change\", \"select\", \"open\", \"close\" ],\n\n        open: function () {\n            if (!this.element.prop(\"disabled\")) {\n                this._getPopup().open();\n            }\n        },\n        close: function () {\n            var selOptions = (this._selector && this._selector.options) || {};\n            selOptions._closing = true;\n            this._getPopup().close();\n\n            delete selOptions._closing;\n        },\n        toggle: function () {\n            if (!this.element.prop(\"disabled\")) {\n                this._getPopup().toggle();\n            }\n        },\n        setBackgroundColor: function (color) {\n            var that = this,\n                handler = function () { that._selector.setBackgroundColor(color); };\n\n            that.options.contrastTool.backgroundColor = color;\n\n            if(that._selector && (that._popup && that._popup.visible())) {\n                that._selector.setBackgroundColor(color);\n            } else if (that._popup) {\n                that._popup.unbind(\"activate\", handler);\n                that._popup.bind(\"activate\", handler);\n            }\n        },\n        _noColorIcon: function(){\n            return this.wrapper.find(\".k-color-preview\");\n        },\n        color: ColorSelector.fn.color,\n        value: ColorSelector.fn.value,\n        _select: ColorSelector.fn._select,\n        _triggerSelect: ColorSelector.fn._triggerSelect,\n        _isInputTypeColor: function() {\n            var el = this.element[0];\n            return (/^input$/i).test(el.tagName) && (/^color$/i).test(el.type);\n        },\n\n        _updateUI: function(value, dontChangeSelector) {\n            var formattedValue = \"\";\n\n            if (value) {\n                if (this._isInputTypeColor() || value.a == 1) {\n                    // seems that input type=\"color\" doesn't support opacity\n                    // in colors; the only accepted format is hex #RRGGBB\n                    formattedValue = value.toCss();\n                } else {\n                    formattedValue = value.toCssRgba();\n                }\n\n                this.element.val(formattedValue);\n            }\n\n            if (!this._ariaTemplate) {\n                this._ariaTemplate = kendo.template(this.options.ARIATemplate);\n            }\n\n            this.wrapper.attr(\"aria-label\", this._ariaTemplate(formattedValue));\n\n            this._triggerSelect(value);\n            this.wrapper.find(\".k-color-preview-mask\").css(\n                BACKGROUNDCOLOR,\n                value ? value.toDisplay() : \"\"\n            );\n\n            this._noColorIcon().toggleClass(\"k-no-color\", !formattedValue);\n\n            if (this._selector && !dontChangeSelector) {\n                this._selector.value(value);\n            }\n        },\n        _keydown: function(ev) {\n            var key = ev.keyCode;\n            if (this._getPopup().visible()) {\n                if (key == KEYS.ESC) {\n                    this._selector._cancel();\n                } else {\n                    this._selector._keydown(ev);\n                }\n                preventDefault(ev);\n            }\n            else if (key == KEYS.ENTER || key == KEYS.DOWN) {\n                this.open();\n                preventDefault(ev);\n            }\n        },\n        _getPopup: function() {\n            var that = this, popup = that._popup;\n\n            if (!popup) {\n                var options = that.options;\n                var selectorType;\n\n                selectorType = FlatColorPicker;\n\n                options.autoupdate = options.buttons !== true;\n                delete options.select;\n                delete options.change;\n                delete options.cancel;\n\n                var id = kendo.guid();\n\n                var selectorWrapper = $('<div id=\"' + id +'\" class=\"k-colorpicker-popup\"></div>').appendTo(document.body);\n                var selector = that._selector = new selectorType($('<div></div>').appendTo(selectorWrapper), options);\n\n                that.wrapper.attr(\"aria-owns\", id);\n\n                that._popup = popup = selectorWrapper.kendoPopup({\n                    anchor: that.wrapper,\n                    adjustSize: { width: 5, height: 0 }\n                }).data(\"kendoPopup\");\n\n                selector.bind({\n                    select: function(ev){\n                        that._updateUI(parseColor(ev.value), true);\n                    },\n                    change: function(ev){\n                        if (that.options.buttons) {\n                            that._select(selector.color());\n                        } else {\n                            that._updateUI(parseColor(ev.value), true);\n                        }\n\n                        if (that.options.buttons || (that._selector.options.view === \"palette\" && that.options.closeOnSelect)) {\n                            that.close();\n                        }\n                    },\n                    cancel: function() {\n                        that.close();\n                    }\n                });\n                popup.bind({\n                    close: function(ev){\n                        if (that.trigger(\"close\")) {\n                            ev.preventDefault();\n                            return;\n                        }\n                        that.wrapper.removeClass(\"k-focus\");\n\n                        var color = selector.color();\n\n                        if (!that.options.buttons) {\n                            that._select(color);\n                        } else {\n                            that._select(that.color());\n                        }\n\n                        color = that.color();\n\n                        if (color && color.h) {\n                            that._cachedHue = color.h;\n                        }\n\n                        var clickedOutside = event &&\n                            event instanceof MouseEvent &&\n                            $(event.target).parents(\".k-colorpicker-popup\").length === 0;\n\n                        if (!clickedOutside) {\n                            setTimeout(function () {\n                                if (that.wrapper && !that.wrapper.is(\"[unselectable='on']\")) {\n                                    that.wrapper.trigger(\"focus\");\n                                }\n                            }, 0);\n                        }\n                    },\n                    open: function(ev) {\n                        if (that.trigger(\"open\")) {\n                            ev.preventDefault();\n                        } else {\n                            that.wrapper.addClass(\"k-focus\");\n                        }\n                    },\n                    activate: function(){\n                        var hsvColor,\n                            selectedColor = that.color();\n\n                        if (selectedColor) {\n                            selectedColor = selectedColor.toHSV();\n                            hsvColor = Color.fromHSV(that._cachedHue || 0, selectedColor.s, selectedColor.v, selectedColor.a);\n                            selectedColor = selectedColor.equals(hsvColor) ? hsvColor : selectedColor;\n                        }\n\n                        selector.value(selectedColor);\n                        selector.focus();\n                        that.wrapper.addClass(\"k-focus\");\n                    }\n                });\n            }\n            return popup;\n        }\n    });\n\n    function preventDefault(ev) { ev.preventDefault(); }\n\n    function bind(callback, obj) {\n        return function() {\n            return callback.apply(obj, arguments);\n        };\n    }\n\n    ui.plugin(ColorPicker);\n\n    kendo.cssProperties.registerPrefix(\"ColorPicker\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"ColorPicker\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.toggleinputbase',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"toggleinputbase\",\n    name: \"ToggleInputBase\",\n    category: \"web\",\n    description: \"The ToggleInputBase component.\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        CHANGE = \"change\",\n        DISABLED = \"disabled\",\n        CHECKED = \"checked\";\n\n    var ToggleInputBase = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._wrapper();\n\n            that._initSettings();\n\n            that._attachEvents();\n\n            kendo.notify(that, kendo.ui);\n        },\n\n        events: [\n            CHANGE\n        ],\n\n        options: {\n            name: \"ToggleInputBase\"\n        },\n\n        NS: \".kendoToggleInputBase\",\n        RENDER_INPUT: $.noop,\n\n        check: function(checked) {\n            var that = this,\n                element = that.element[0];\n\n            if (checked === undefined) {\n                return element.checked;\n            }\n\n            if (element.checked !== checked) {\n                that.options.checked = element.checked = checked;\n            }\n\n            if (checked) {\n                that.element.attr(CHECKED, CHECKED);\n            } else {\n                that.element.prop(CHECKED, false);\n            }\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n            this.wrapper.off(this.NS);\n        },\n\n        enable: function(enable) {\n            var element = this.element;\n\n            if(typeof enable == \"undefined\") {\n                enable = true;\n            }\n\n            this.options.enabled = enable;\n\n            if(enable) {\n                element.prop(DISABLED, false);\n            } else {\n                element.attr(DISABLED, DISABLED);\n            }\n        },\n\n        toggle: function() {\n            var that = this;\n\n            that.check(!that.element[0].checked);\n        },\n\n        _attachEvents: function() {\n            this.element.on(CHANGE + this.NS, this._change.bind(this));\n        },\n\n        _change: function () {\n            var checked = this.element[0].checked;\n\n            this.trigger(CHANGE, { checked: checked });\n        },\n\n        _initSettings: function () {\n            var that = this,\n                element = that.element[0],\n                options = that.options;\n\n            if (options.checked === null) {\n                options.checked = element.checked;\n            }\n\n            that.check(options.checked);\n\n            options.enabled = options.enabled && !that.element.attr(DISABLED);\n            that.enable(options.enabled);\n        },\n\n        _wrapper: function() {\n            var that = this,\n                options = that.options,\n                inputMethod = that.RENDER_INPUT;\n\n\n            inputMethod(that.element, $.extend({}, options));\n            that.element.removeClass('input-validation-error');\n\n            that.wrapper = that.element;\n        }\n    });\n\n    ui.plugin(ToggleInputBase);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.html.input',[\n        \"./kendo.html.base\"\n    ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"html.input\",\n    name: \"Html.Input\",\n    category: \"web\",\n    description: \"HTML rendering utility for Kendo UI for jQuery.\",\n    depends: [ \"html.base\" ],\n    features: []\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        HTMLBase = kendo.html.HTMLBase;\n\n    var renderCheckBox = function (element, options) {\n        if (arguments[0] === undefined || $.isPlainObject(arguments[0])) {\n            options = element;\n            element = $(\"<input />\");\n        }\n\n        return (new HTMLCheckBox(element, options)).html();\n    };\n\n    var renderRadioButton = function (element, options) {\n        if (arguments[0] === undefined || $.isPlainObject(arguments[0])) {\n            options = element;\n            element = $(\"<input />\");\n        }\n\n        return (new HTMLRadioButton(element, options)).html();\n    };\n\n    var HTMLInput = HTMLBase.extend({\n        init: function (element, options) {\n            var that = this;\n            HTMLBase.fn.init.call(that, element, options);\n            that._wrapper();\n            that._addClasses();\n        },\n        options: {\n            label: null,\n            labelPosition: \"after\",\n            encoded: true\n        },\n        _wrapper: function () {\n            var that = this,\n                element = that.element[0],\n                options = that.options,\n                elementId = element.id;\n\n            that.wrapper = that.element\n                .addClass(options.inputClass)\n                .prop(\"type\", options.type);\n\n            if(!elementId && !!options.label) {\n                element.id = elementId = kendo.guid();\n            }\n\n            if(!!options.label) {\n                that.labelEl = $(\"<label for='\" + elementId + \"' class='\" + options.labelClass + \"'>\");\n\n                if(options.encoded) {\n                    that.labelEl.text(options.label);\n                } else {\n                    that.labelEl.html(options.label);\n                }\n\n                that.element[options.labelPosition](that.labelEl);\n            }\n        },\n        html: function () {\n            var that = this,\n                after = that.options.labelPosition === \"after\",\n                wrapperHtml = HTMLBase.fn.html.call(that);\n\n            if(!that.labelEl) {\n                return wrapperHtml;\n            }\n\n            if(after) {\n                return wrapperHtml + that.labelEl[0].outerHTML;\n            }\n\n            return that.labelEl[0].outerHTML + wrapperHtml;\n        }\n    });\n\n    var HTMLCheckBox = HTMLInput.extend({\n        init: function (element, options) {\n            var that = this;\n            HTMLInput.fn.init.call(that, element, options);\n            that._addClasses();\n        },\n        options: {\n            name: \"HTMLCheckBox\",\n            inputClass: \"k-checkbox\",\n            labelClass: \"k-checkbox-label\",\n            type: \"checkbox\",\n            rounded: \"medium\",\n            size: \"medium\",\n            stylingOptions: [ \"size\", \"rounded\" ]\n        }\n    });\n\n    var HTMLRadioButton = HTMLInput.extend({\n        init: function (element, options) {\n            var that = this;\n            HTMLInput.fn.init.call(that, element, options);\n            that._addClasses();\n        },\n        options: {\n            name: \"HTMLRadioButton\",\n            inputClass: \"k-radio\",\n            labelClass: \"k-radio-label\",\n            type: \"radio\",\n            size: \"medium\",\n            stylingOptions: [ \"size\"]\n        }\n    });\n\n    $.extend(kendo.html, {\n        renderCheckBox: renderCheckBox,\n        renderRadioButton: renderRadioButton,\n        HTMLInput: HTMLInput,\n        HTMLCheckBox: HTMLCheckBox,\n        HTMLRadioButton: HTMLRadioButton\n    });\n\n    kendo.cssProperties.registerPrefix(\"HTMLCheckBox\", \"k-checkbox-\");\n\n    kendo.cssProperties.registerValues(\"HTMLCheckBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    kendo.cssProperties.registerPrefix(\"HTMLRadioButton\", \"k-radio-\");\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.checkbox',[ \"./kendo.toggleinputbase\", \"./kendo.html.input\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"checkbox\",\n    name: \"CheckBox\",\n    category: \"web\",\n    description: \"The CheckBox widget is used to display boolean value input.\",\n    depends: [ \"toggleinputbase\", \"html.input\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        ToggleInputBase = ui.ToggleInputBase;\n\n    var CheckBox = ToggleInputBase.extend({\n        options: {\n            name: \"CheckBox\",\n            checked: null,\n            enabled: true,\n            encoded: true,\n            label: null,\n            rounded: \"medium\",\n            size: \"medium\"\n        },\n\n        RENDER_INPUT: kendo.html.renderCheckBox,\n        NS: \".kendoCheckBox\",\n\n        // alias for check, NG support\n        value: function(value) {\n            if (typeof value === \"string\") {\n                value = (value === \"true\");\n            }\n\n            return this.check.apply(this, [value]);\n        }\n    });\n\n    kendo.cssProperties.registerPrefix(\"CheckBox\", \"k-checkbox-\");\n\n    kendo.cssProperties.registerValues(\"CheckBox\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    ui.plugin(CheckBox);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.selectable',[ \"./kendo.core\", \"./kendo.userevents\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"selectable\",\n    name: \"Selectable\",\n    category: \"framework\",\n    depends: [ \"core\", \"userevents\" ],\n    advanced: true\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        proxy = $.proxy,\n        abs = Math.abs,\n        ARIASELECTED = \"aria-selected\",\n        SELECTED = \"k-state-selected\",\n        ACTIVE = \"k-state-selecting\",\n        SELECTABLE = \"k-selectable\",\n        CHANGE = \"change\",\n        NS = \".kendoSelectable\",\n        UNSELECT = \"unselect\",\n        UNSELECTING = \"k-state-unselecting\",\n        INPUTSELECTOR = \"input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up,label.k-checkbox-label.k-no-text,.k-icon.k-i-collapse,.k-icon.k-i-expand,span.k-numeric-wrap,.k-focusable\",\n        msie = kendo.support.browser.msie,\n        supportEventDelegation = false,\n        extend = $.extend;\n\n        (function($) {\n            (function() {\n                $('<div class=\"parent\"><span></span></div>')\n                .on(\"click\", \">*\", function() {\n                    supportEventDelegation = true;\n                })\n                .find(\"span\")\n                .trigger(\"click\")\n                .end()\n                .off();\n            })();\n        })($);\n\n    var Selectable = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                multiple;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._marquee = $(\"<div class='k-marquee'><div class='k-marquee-color'></div></div>\");\n            that._lastActive = null;\n            that.element.addClass(SELECTABLE);\n\n            that.relatedTarget = that.options.relatedTarget;\n\n            multiple = that.options.multiple;\n\n            that.userEvents = new kendo.UserEvents(that.element, {\n                global: true,\n                allowSelection: true,\n                filter: (!supportEventDelegation ? \".\" + SELECTABLE + \" \" : \"\") + that.options.filter,\n                tap: proxy(that._tap, that),\n                touchAction: multiple ? \"none\" : \"pan-x pan-y\"\n            });\n\n            if (multiple) {\n                that.userEvents\n                   .bind(\"start\", proxy(that._start, that))\n                   .bind(\"move\", proxy(that._move, that))\n                   .bind(\"end\", proxy(that._end, that))\n                   .bind(\"select\", proxy(that._select, that));\n            }\n        },\n\n        events: [CHANGE, UNSELECT],\n\n        options: {\n            name: \"Selectable\",\n            filter: \">*\",\n            inputSelectors: INPUTSELECTOR,\n            multiple: false,\n            relatedTarget: $.noop,\n            ignoreOverlapped: false,\n            addIdToRanges: false\n        },\n\n        _isElement: function(target) {\n            var elements = this.element;\n            var idx, length = elements.length, result = false;\n\n            target = target[0];\n\n            for (idx = 0; idx < length; idx ++) {\n                if (elements[idx] === target) {\n                    result = true;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _tap: function(e) {\n            var target = $(e.target),\n                that = this,\n                ctrlKey = e.event.ctrlKey || e.event.metaKey,\n                multiple = that.options.multiple,\n                shiftKey = multiple && e.event.shiftKey,\n                selectedClass = that.options.selectedClass || SELECTED,\n                selected,\n                whichCode = e.event.which,\n                buttonCode = e.event.button;\n\n            //in case of hierarchy or right-click\n            if (!that._isElement(target.closest(\".\" + SELECTABLE)) || whichCode && whichCode == 3 || buttonCode && buttonCode == 2) {\n                return;\n            }\n\n            if (!this._allowSelection(e.event.target)) {\n                return;\n            }\n\n            selected = target.hasClass(selectedClass);\n            if (!multiple || !ctrlKey) {\n                that.clear();\n            }\n\n            target = target.add(that.relatedTarget(target));\n\n            if (shiftKey) {\n                that.selectRange(that._firstSelectee(), target, e);\n            } else {\n                if (selected && ctrlKey) {\n                    that._unselect(target);\n                    that._notify(CHANGE, e);\n                } else {\n                    that.value(target, e);\n                }\n\n                that._lastActive = that._downTarget = target;\n            }\n        },\n\n        _start: function(e) {\n            var that = this,\n                target = $(e.target),\n                selectedClass = that.options.selectedClass || SELECTED,\n                selected = target.hasClass(selectedClass),\n                currentElement,\n                ctrlKey = e.event.ctrlKey || e.event.metaKey;\n\n            if (!this._allowSelection(e.event.target)) {\n                return;\n            }\n\n            that._downTarget = target;\n\n            //in case of hierarchy\n            if (!that._isElement(target.closest(\".\" + SELECTABLE))) {\n                that.userEvents.cancel();\n                return;\n            }\n\n            if (that.options.useAllItems) {\n                that._items = that.element.find(that.options.filter);\n            } else {\n                currentElement = target.closest(that.element);\n                that._items = currentElement.find(that.options.filter);\n            }\n\n            e.sender.capture();\n\n            that._marquee\n                .appendTo(document.body)\n                .css({\n                    left: e.x.client + 1,\n                    top: e.y.client + 1,\n                    width: 0,\n                    height: 0\n                });\n\n            if (!ctrlKey) {\n                that.clear();\n            }\n\n            target = target.add(that.relatedTarget(target));\n            if (selected) {\n                that._selectElement(target, true);\n                if (ctrlKey) {\n                    target.addClass(UNSELECTING);\n                }\n            }\n        },\n\n        _move: function(e) {\n            var that = this,\n                position = {\n                    left: e.x.startLocation > e.x.location ? e.x.location : e.x.startLocation,\n                    top: e.y.startLocation > e.y.location ? e.y.location : e.y.startLocation,\n                    width: abs(e.x.initialDelta),\n                    height: abs(e.y.initialDelta)\n                };\n\n            that._marquee.css(position);\n\n            that._invalidateSelectables(position, (e.event.ctrlKey || e.event.metaKey));\n\n            e.preventDefault();\n        },\n\n        _end: function(e) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\"),\n            uid = kendo.guid();\n\n            that._marquee.remove();\n\n            that._unselect(that.element\n                .find(that.options.filter + \".\" + UNSELECTING))\n                .removeClass(UNSELECTING);\n\n\n            var target = that.element.find(that.options.filter + \".\" + ACTIVE);\n            target = target.add(that.relatedTarget(target));\n\n            if (that.options.addIdToRanges) {\n                for (var i = 0; i < that._currentlyActive.length; i++) {\n                    $(that._currentlyActive[i]).attr(rangeSelectedAttr, uid);\n                }\n            }\n\n            that.value(target, e);\n            that._lastActive = that._downTarget;\n            that._items = null;\n        },\n\n        _invalidateSelectables: function(position, ctrlKey) {\n            var idx,\n                length,\n                target = this._downTarget[0],\n                items = this._items,\n                selectedClass = this.options.selectedClass || SELECTED,\n                related,\n                toSelect;\n\n            this._currentlyActive = [];\n\n            for (idx = 0, length = items.length; idx < length; idx ++) {\n                toSelect = items.eq(idx);\n                related = toSelect.add(this.relatedTarget(toSelect));\n\n                if (collision(toSelect, position)) {\n                    if(toSelect.hasClass(selectedClass)) {\n                        if(ctrlKey && target !== toSelect[0]) {\n                            related.removeClass(selectedClass).addClass(UNSELECTING);\n                        }\n                    } else if (!toSelect.hasClass(ACTIVE) && !toSelect.hasClass(UNSELECTING) && !this._collidesWithActiveElement(related, position)) {\n                        related.addClass(ACTIVE);\n                    }\n                    this._currentlyActive.push(related[0]);\n                } else {\n                    if (toSelect.hasClass(ACTIVE)) {\n                        related.removeClass(ACTIVE);\n                    } else if(ctrlKey && toSelect.hasClass(UNSELECTING)) {\n                        related.removeClass(UNSELECTING).addClass(selectedClass);\n                    }\n                }\n            }\n        },\n\n        _collidesWithActiveElement: function (element, marqueeRect) {\n            if (!this.options.ignoreOverlapped) {\n                return false;\n            }\n\n            var activeElements = this._currentlyActive;\n            var elemRect = element[0].getBoundingClientRect();\n            var activeElementRect;\n            var collision = false;\n            var isRtl = kendo.support.isRtl(element);\n            var leftRight = isRtl ? \"right\" : \"left\";\n            var tempRect = {};\n\n            marqueeRect.right = marqueeRect.left + marqueeRect.width;\n            marqueeRect.bottom = marqueeRect.top + marqueeRect.height;\n\n            for (var i = 0; i < activeElements.length; i++) {\n                activeElementRect = activeElements[i].getBoundingClientRect();\n                if (overlaps(elemRect, activeElementRect)) {\n                    tempRect[leftRight] = leftRight === \"left\" ? activeElementRect.right : activeElementRect.left;\n                    elemRect = extend({}, elemRect, tempRect);\n                    if (elemRect.left > elemRect.right) {\n                        return true;\n                    }\n                    collision = !overlaps(elemRect, marqueeRect);\n                }\n            }\n            return collision;\n        },\n\n        value: function(val, e) {\n            var that = this,\n                selectElement = proxy(that._selectElement, that);\n\n            if(val) {\n                val.each(function() {\n                    selectElement(this);\n                });\n\n                that._notify(CHANGE, e);\n                return;\n            }\n\n            return that.element.find(that.options.filter + \".\" + (that.options.selectedClass || SELECTED));\n        },\n\n        selectedRanges: function () {\n            var that = this;\n            var rangeSelectedAttr = kendo.attr(\"range-selected\");\n            var map = {};\n\n            that.element.find(\"[\" + rangeSelectedAttr + \"]\").each(function (_, elem) {\n                var rangeId = $(elem).attr(rangeSelectedAttr);\n                var mapLocation = map[rangeId];\n\n                if (!mapLocation) {\n                    mapLocation = map[rangeId] = [];\n                }\n\n                mapLocation.push($(elem));\n            });\n\n            return map;\n        },\n\n        selectedSingleItems: function () {\n            var that = this;\n            var rangeSelectedAttr = kendo.attr(\"range-selected\");\n\n            return that.element.find(that.options.filter + \".\" + (that.options.selectedClass || SELECTED) + \":not([\" + rangeSelectedAttr + \"])\").toArray().map(function (elem) {\n                return $(elem);\n            });\n        },\n\n        _firstSelectee: function() {\n            var that = this,\n                selected;\n\n            if(that._lastActive !== null) {\n                return that._lastActive;\n            }\n\n            selected = that.value();\n            return selected.length > 0 ?\n                    selected[0] :\n                    that.element.find(that.options.filter)[0];\n        },\n\n        _selectElement: function(element, preventNotify) {\n            var toSelect = $(element),\n                selectedClass = this.options.selectedClass || SELECTED,\n                isPrevented =  !preventNotify && this._notify(\"select\", { element: element });\n\n            toSelect.removeClass(ACTIVE);\n            if(!isPrevented) {\n                 toSelect.addClass(selectedClass);\n\n                if (this.options.aria) {\n                    toSelect.attr(ARIASELECTED, true);\n                }\n            }\n        },\n\n        _notify: function(name, args) {\n            args = args || { };\n            return this.trigger(name, args);\n        },\n\n        _unselect: function(element) {\n            if (this.trigger(UNSELECT, { element: element})) {\n                return;\n            }\n\n            var rangeSelectedAttr = kendo.attr(\"range-selected\");\n\n            element.removeClass(this.options.selectedClass || SELECTED).removeAttr(rangeSelectedAttr);\n\n            if (this.options.aria) {\n                element.attr(ARIASELECTED, false);\n            }\n\n            return element;\n        },\n\n        _select: function(e) {\n            if (this._allowSelection(e.event.target)) {\n                if (!msie || (msie && !$(kendo._activeElement()).is(this.options.inputSelectors))) {\n                    e.preventDefault();\n                }\n            }\n        },\n\n        _allowSelection: function(target) {\n            if ($(target).is(this.options.inputSelectors)) {\n                this.userEvents.cancel();\n                this._downTarget = null;\n                return false;\n            }\n\n            return true;\n        },\n\n        resetTouchEvents: function() {\n            this.userEvents.cancel();\n        },\n\n        clear: function() {\n            var items = this.element.find(this.options.filter + \".\" + (this.options.selectedClass || SELECTED));\n            this._unselect(items);\n        },\n\n        selectRange: function(start, end, e) {\n            var that = this,\n                idx,\n                tmp,\n                items;\n\n            that.clear();\n\n            if (that.element.length > 1) {\n                items = that.options.continuousItems();\n            }\n\n            if (!items || !items.length) {\n                items = that.element.find(that.options.filter);\n            }\n\n            start = $.inArray($(start)[0], items);\n            end = $.inArray($(end)[0], items);\n\n            if (start > end) {\n                tmp = start;\n                start = end;\n                end = tmp;\n            }\n\n            if (!that.options.useAllItems) {\n                end += that.element.length - 1;\n            }\n\n            for (idx = start; idx <= end; idx ++ ) {\n                that._selectElement(items[idx]);\n            }\n\n            that._notify(CHANGE, e);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.element.off(NS);\n\n            that.userEvents.destroy();\n\n            that._marquee = that._lastActive = that.element = that.userEvents = null;\n        }\n    });\n\n    Selectable.parseOptions = function(selectable) {\n        var selectableMode = selectable.mode || selectable;\n        var asLowerString = typeof selectableMode === \"string\" && selectableMode.toLowerCase();\n\n        return {\n            multiple: asLowerString && asLowerString.indexOf(\"multiple\") > -1,\n            cell: asLowerString && asLowerString.indexOf(\"cell\") > -1\n        };\n    };\n\n    function collision(element, position) {\n        if (!element.is(\":visible\")) {\n            return false;\n        }\n\n        var elementPosition = kendo.getOffset(element),\n            right = position.left + position.width,\n            bottom = position.top + position.height;\n\n        elementPosition.right = elementPosition.left + kendo._outerWidth(element);\n        elementPosition.bottom = elementPosition.top + kendo._outerHeight(element);\n\n        return !(elementPosition.left > right||\n            elementPosition.right < position.left ||\n            elementPosition.top > bottom ||\n            elementPosition.bottom < position.top);\n    }\n\n    function overlaps(firstRect, secondRect) {\n        return !(firstRect.right <= secondRect.left ||\n            firstRect.left >= secondRect.right ||\n            firstRect.bottom <= secondRect.top ||\n            firstRect.top >= secondRect.bottom);\n    }\n\n    kendo.ui.plugin(Selectable);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.calendar',[ \"./kendo.core\", \"./kendo.selectable\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"calendar\",\n    name: \"Calendar\",\n    category: \"web\",\n    description: \"The Calendar widget renders a graphical calendar that supports navigation and selection.\",\n    depends: [ \"core\", \"selectable\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        support = kendo.support,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        keys = kendo.keys,\n        parse = kendo.parseDate,\n        adjustDST = kendo.date.adjustDST,\n        weekInYear = kendo.date.weekInYear,\n        Selectable = kendo.ui.Selectable,\n        extractFormat = kendo._extractFormat,\n        template = kendo.template,\n        getCulture = kendo.getCulture,\n        transitions = kendo.support.transitions,\n        transitionOrigin = transitions ? transitions.css + \"transform-origin\" : \"\",\n        cellTemplate = template('<td class=\"#=data.cssClass#\" role=\"gridcell\"><a tabindex=\"-1\" class=\"k-link\" href=\"\\\\#\" data-#=data.ns#value=\"#=data.dateString#\">#=data.value#</a></td>', { useWithBlock: false }),\n        emptyCellTemplate = template('<td role=\"gridcell\" class=\"k-calendar-td k-out-of-range\"><a class=\"k-link\"></a></td>', { useWithBlock: false }),\n        otherMonthCellTemplate = template('<td role=\"gridcell\" class=\"k-calendar-td k-out-of-range\">&nbsp;</td>', { useWithBlock: false }),\n        weekNumberTemplate = template('<td class=\"k-calendar-td k-alt\">#= data.weekNumber #</td>', { useWithBlock: false }),\n        outerWidth = kendo._outerWidth,\n        ns = \".kendoCalendar\",\n        CLICK = \"click\" + ns,\n        KEYDOWN_NS = \"keydown\" + ns,\n        ID = \"id\",\n        MIN = \"min\",\n        LEFT = \"left\",\n        SLIDE = \"slideIn\",\n        MONTH = \"month\",\n        CENTURY = \"century\",\n        CHANGE = \"change\",\n        NAVIGATE = \"navigate\",\n        VALUE = \"value\",\n        HOVER = \"k-state-hover\",\n        DISABLED = \"k-state-disabled\",\n        FOCUSED = \"k-state-focused\",\n        OTHERMONTH = \"k-other-month\",\n        OUTOFRANGE = \"k-out-of-range\",\n        TODAY = \"k-nav-today\",\n        CELLSELECTOR = \"td:has(.k-link)\",\n        CELLSELECTORVALID = \"td:has(.k-link):not(.\" + DISABLED + \"):not(.\" + OUTOFRANGE + \")\",\n        WEEKCOLUMNSELECTOR = \"td:not(:has(.k-link))\",\n        SELECTED = \"k-state-selected\",\n        BLUR = \"blur\" + ns,\n        FOCUS = \"focus\",\n        FOCUS_WITH_NS = FOCUS + ns,\n        MOUSEENTER = support.touch ? \"touchstart\" : \"mouseenter\",\n        MOUSEENTER_WITH_NS = support.touch ? \"touchstart\" + ns : \"mouseenter\" + ns,\n        MOUSELEAVE = support.touch ? \"touchend\" + ns + \" touchmove\" + ns : \"mouseleave\" + ns,\n        MS_PER_MINUTE = 60000,\n        MS_PER_DAY = 86400000,\n        PREVARROW = \"_prevArrow\",\n        NEXTARROW = \"_nextArrow\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_SELECTED = \"aria-selected\",\n        ARIA_LABEL = \"aria-label\",\n        proxy = $.proxy,\n        extend = $.extend,\n        DATE = Date,\n        views = {\n            month: 0,\n            year: 1,\n            decade: 2,\n            century: 3\n        },\n        HEADERSELECTOR = '.k-header, .k-calendar-header',\n        CLASSIC_HEADER_TEMPLATE = '<div class=\"k-header k-hstack\">' +\n            '<a href=\"\\\\#\" #=actionAttr#=\"prev\" role=\"button\" class=\"k-nav-prev k-button #=size# k-rounded-md k-button-flat k-button-flat-base k-icon-button\" ' + ARIA_LABEL + '=\"Previous\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></a>' +\n            '<a href=\"\\\\#\" #=actionAttr#=\"nav-up\" role=\"button\" aria-live=\"assertive\" aria-atomic=\"true\" class=\"k-nav-fast k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-flex\"></a>' +\n            '<a href=\"\\\\#\" #=actionAttr#=\"next\" role=\"button\" class=\"k-nav-next k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button\" ' + ARIA_LABEL + '=\"Next\"><span class=\"k-icon k-i-arrow-60-right\"></span></a>' +\n        '</div>',\n        MODERN_HEADER_TEMPLATE = '<div class=\"k-calendar-header k-hstack\">' +\n            '<a href=\"\\\\#\" #=actionAttr#=\"nav-up\" role=\"button\" aria-live=\"assertive\" aria-atomic=\"true\" class=\"k-calendar-title k-title k-button #=size# k-rounded-md k-button-flat k-button-flat-base \"></a>' +\n            '<span class=\"k-spacer\"></span>' +\n            '<span class=\"k-calendar-nav k-hstack\">' +\n                '<a #=actionAttr#=\"prev\" class=\"k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button k-prev-view\">' +\n                    '<span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span>' +\n                '</a>' +\n                '<a #=actionAttr#=\"today\" class=\"k-nav-today\">#=messages.today#</a>' +\n                '<a #=actionAttr#=\"next\" class=\"k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button k-next-view\">' +\n                    '<span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span>' +\n                '</a>' +\n            '</span>' +\n        '</div>';\n\n    var Calendar = Widget.extend({\n        init: function(element, options) {\n            var that = this, value, id;\n            options = options || {};\n            options.componentType = options.componentType || \"classic\";\n            Widget.fn.init.call(that, element, options);\n\n            element = that.wrapper = that.element;\n            options = that.options;\n\n            options.url = kendo.unescape(options.url);\n\n            that.options.disableDates = getDisabledExpr(that.options.disableDates);\n\n            that._templates();\n\n            that._selectable();\n\n            that._header();\n\n            that._viewWrapper();\n\n            if (that.options.hasFooter) {\n                that._footer(that.footer);\n            } else {\n                that._today = that.element.find('a.k-nav-today');\n                that._toggle();\n            }\n\n            id = element\n                .addClass(\"k-widget k-calendar \" + (options.weekNumber ? \" k-week-number\" : \"\"))\n                .on(MOUSEENTER_WITH_NS + \" \" + MOUSELEAVE, CELLSELECTOR, mousetoggle)\n                .on(KEYDOWN_NS, \"table.k-content\", proxy(that._move, that))\n                .on(CLICK + \" touchend\", CELLSELECTOR, function(e) {\n                    var link = e.currentTarget.firstChild,\n                        value = toDateObject(link);\n\n                    if (link.href.indexOf(\"#\") != -1) {\n                        e.preventDefault();\n                    }\n\n                    if (that._view.name == \"month\" && that.options.disableDates(value)) {\n                        return;\n                    }\n                    if (that._view.name != \"month\" || options.selectable == \"single\") {\n                            that._click($(link));\n                    }\n                })\n                .on(\"mouseup\" + ns, \"table.k-content, .k-footer\", function() {\n                    that._focusView(that.options.focusOnNav !== false);\n                })\n                .attr(ID);\n\n            if (that._isMultipleSelection() && that.options.weekNumber) {\n                element.on(CLICK, WEEKCOLUMNSELECTOR, function(e) {\n                        var first = $(e.currentTarget).closest(\"tr\").find(CELLSELECTORVALID).first(),\n                            last = that.selectable._lastActive = $(e.currentTarget).closest(\"tr\").find(CELLSELECTORVALID).last();\n                        that.selectable.selectRange(first, last, { event: e});\n                        that._current = that._value = toDateObject(last.find(\"a\"));\n                        that._setCurrent(that._current);\n                });\n            }\n\n            normalize(options);\n            value = parse(options.value, options.format, options.culture);\n            that._selectDates = [];\n\n            that._index = views[options.start];\n\n            that._current = new DATE(+restrictValue(value, options.min, options.max));\n\n            that._addClassProxy = function() {\n                that._active = true;\n\n                if (that._cell.hasClass(DISABLED)) {\n                    var todayString = that._view.toDateString(getToday());\n                    that._cell = that._cellByDate(todayString);\n                }\n\n                that._cell.addClass(FOCUSED);\n            };\n\n            that._removeClassProxy = function() {\n                that._active = false;\n                if (that._cell) {\n                    that._cell.removeClass(FOCUSED);\n                }\n            };\n\n            that.value(value);\n\n            if (that._isMultipleSelection() && options.selectDates.length > 0) {\n                that.selectDates(options.selectDates);\n            }\n            kendo.notify(that);\n        },\n\n        options: {\n            name: \"Calendar\",\n            value: null,\n            min: new DATE(1900, 0, 1),\n            max: new DATE(2099, 11, 31),\n            dates: [],\n            disableDates: null,\n            url: \"\",\n            culture: \"\",\n            footer : \"\",\n            format : \"\",\n            month : {},\n            weekNumber: false,\n            selectable: \"single\",\n            selectDates: [],\n            start: MONTH,\n            depth: MONTH,\n            size: \"medium\",\n            animation: {\n                horizontal: {\n                    effects: SLIDE,\n                    reverse: true,\n                    duration: 500,\n                    divisor: 2\n                },\n                vertical: {\n                    effects: \"zoomIn\",\n                    duration: 400\n                }\n            },\n            messages: {\n                weekColumnHeader: \"\",\n                today: \"Today\"\n            },\n            componentType: \"classic\"\n        },\n\n        events: [\n            CHANGE,\n            NAVIGATE\n        ],\n\n        componentTypes: {\n            \"classic\": {\n                header: {\n                    template: CLASSIC_HEADER_TEMPLATE\n                },\n                hasFooter: true,\n                linksSelector: \".k-button\",\n                contentClasses: \"k-calendar-table k-content\"\n            },\n            \"modern\": {\n                header: {\n                    template: MODERN_HEADER_TEMPLATE\n                },\n                hasFooter: false,\n                linksSelector: \".k-button\",\n                contentClasses: \"k-calendar-table k-content k-calendar-content\"\n            }\n        },\n\n        setOptions: function(options) {\n            var that = this;\n\n            normalize(options);\n\n            options.disableDates = getDisabledExpr(options.disableDates);\n            that._destroySelectable();\n\n            Widget.fn.setOptions.call(that, options);\n\n            that._templates();\n\n            that._selectable();\n\n            that._viewWrapper();\n\n            if (that.options.hasFooter) {\n                that._footer(that.footer);\n            } else {\n                that.element.find(\".k-footer\").hide();\n                that._toggle();\n            }\n            that._index = views[that.options.start];\n\n            that.navigate();\n\n            if (options.weekNumber) {\n                that.element.addClass('k-week-number');\n            }\n        },\n\n        destroy: function() {\n            var that = this,\n            today = that._today;\n\n            that.element.off(ns);\n            that._title.off(ns);\n            that[PREVARROW].off(ns);\n            that[NEXTARROW].off(ns);\n            that._destroySelectable();\n            kendo.destroy(that._table);\n\n            if (today) {\n                kendo.destroy(today.off(ns));\n            }\n\n            Widget.fn.destroy.call(that);\n        },\n\n        current: function() {\n            return this._current;\n        },\n\n        view: function() {\n            return this._view;\n        },\n\n        focus: function(table) {\n            table = table || this._table;\n            this._bindTable(table);\n            table.trigger(\"focus\");\n        },\n\n        min: function(value) {\n            return this._option(MIN, value);\n        },\n\n        max: function(value) {\n            return this._option(\"max\", value);\n        },\n\n        navigateToPast: function() {\n            this._navigate(PREVARROW, -1);\n        },\n\n        navigateToFuture: function() {\n            this._navigate(NEXTARROW, 1);\n        },\n\n        navigateUp: function() {\n            var that = this,\n            index = that._index;\n\n            if (that._title.hasClass(DISABLED)) {\n                return;\n            }\n\n            that.navigate(that._current, ++index);\n        },\n\n        navigateDown: function(value) {\n            var that = this,\n            index = that._index,\n            depth = that.options.depth;\n\n            if (!value) {\n                return;\n            }\n\n            if (index === views[depth]) {\n                if (!isEqualDate(that._value, that._current) || !isEqualDate(that._value, value)) {\n                    that.value(value);\n                    that.trigger(CHANGE);\n                }\n                return;\n            }\n\n            that.navigate(value, --index);\n        },\n\n        navigate: function(value, view) {\n            view = isNaN(view) ? views[view] : view;\n\n            var that = this,\n                options = that.options,\n                culture = options.culture,\n                min = options.min,\n                max = options.max,\n                title = that._title,\n                from = that._table,\n                old = that._oldTable,\n                currentValue = that._current,\n                future = value && +value > +currentValue,\n                vertical = view !== undefined && view !== that._index,\n                to, currentView, compare,\n                disabled,\n                viewWrapper = that.element.children(\".k-calendar-view\");\n\n            if (!value) {\n                value = currentValue;\n            }\n\n            that._current = value = new DATE(+restrictValue(value, min, max));\n\n            if (view === undefined) {\n                view = that._index;\n            } else {\n                that._index = view;\n            }\n\n            that._view = currentView = calendar.views[view];\n            compare = currentView.compare;\n\n            disabled = view === views[CENTURY];\n            title.toggleClass(DISABLED, disabled).attr(ARIA_DISABLED, disabled);\n\n            disabled = compare(value, min) < 1;\n            that[PREVARROW].toggleClass(DISABLED, disabled).attr(ARIA_DISABLED, disabled);\n\n            disabled = compare(value, max) > -1;\n            that[NEXTARROW].toggleClass(DISABLED, disabled).attr(ARIA_DISABLED, disabled);\n\n            if (from && old && old.data(\"animating\")) {\n                old.kendoStop(true, true);\n                from.kendoStop(true, true);\n            }\n\n            that._oldTable = from;\n\n            if (!from || that._changeView) {\n                title.html(currentView.title(value, min, max, culture));\n\n                that._table = to = $(currentView.content(extend({\n                    min: min,\n                    max: max,\n                    date: value,\n                    url: options.url,\n                    dates: options.dates,\n                    format: options.format,\n                    otherMonth : true,\n                    culture: culture,\n                    disableDates: options.disableDates,\n                    isWeekColumnVisible: options.weekNumber,\n                    messages: options.messages,\n                    contentClasses: that.options.contentClasses\n                }, that[currentView.name])));\n\n                addClassToViewContainer(to, currentView.name);\n                var replace = from && from.data(\"start\") === to.data(\"start\");\n                that._animate({\n                    from: from,\n                    to: to,\n                    vertical: vertical,\n                    future: future,\n                    replace: replace\n                });\n\n                viewWrapper.removeClass(\"k-calendar-monthview k-calendar-yearview k-calendar-decadeview k-calendar-centuryview\");\n                viewWrapper.addClass(\"k-calendar-\" + currentView.name + \"view\");\n\n                that.trigger(NAVIGATE);\n\n                that._focus(value);\n            }\n\n            if (view === views[options.depth] && that._selectDates.length > 0) {\n                that._visualizeSelectedDatesInView();\n            }\n\n            if (that.options.selectable === \"single\") {\n                if (view === views[options.depth] && that._value && !that.options.disableDates(that._value)) {\n                    that._selectCell(that._value);\n                }\n            }\n\n            that._setCurrent(value);\n\n            if (!from && that._cell) {\n                that._cell.removeClass(FOCUSED);\n            }\n\n            that._changeView = true;\n        },\n\n        selectDates: function(dates) {\n            var that = this,\n                validSelectedDates,\n                datesUnique;\n\n            if (dates === undefined) {\n                return that._selectDates;\n            }\n\n            datesUnique = dates\n                .map(function (date) { return date.getTime(); })\n                .filter(function (date, position, array) {\n                    return array.indexOf(date) === position;\n                })\n                .map(function (time) { return new Date(time); });\n\n            validSelectedDates = $.grep(datesUnique, function(value) {\n                if (value) {\n                    return +that._validateValue(new Date(value.setHours(0, 0, 0, 0))) === +value;\n                }\n            });\n            that._selectDates = validSelectedDates.length > 0 ? validSelectedDates : (datesUnique.length === 0 ? datesUnique : that._selectDates);\n            that._visualizeSelectedDatesInView();\n        },\n\n        value: function(value) {\n            var that = this,\n                old = that._view,\n                view = that._view;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            value = that._validateValue(value);\n            if (value && that._isMultipleSelection()) {\n                var date = new Date(+value);\n                date.setHours(0, 0, 0, 0);\n                that._selectDates = [date];\n                that.selectable._lastActive = null;\n            }\n            if (old && value === null && that._cell) {\n                that._cell.removeClass(SELECTED);\n            } else {\n                that._changeView = !value || view && view.compare(value, that._current) !== 0;\n                that.navigate(value);\n            }\n        },\n\n        _validateValue: function(value) {\n            var that = this,\n                options = that.options,\n                min = options.min,\n                max = options.max;\n\n            if (value === null) {\n                that._current = createDate(that._current.getFullYear(), that._current.getMonth(), that._current.getDate());\n            }\n\n            value = parse(value, options.format, options.culture);\n\n            if (value !== null) {\n                value = new DATE(+value);\n\n                if (!isInRange(value, min, max)) {\n                    value = null;\n                }\n            }\n\n            if (value === null || !that.options.disableDates(new Date(+value))) {\n                that._value = value;\n            } else if (that._value === undefined) {\n                that._value = null;\n            }\n\n            return that._value;\n        },\n\n        _visualizeSelectedDatesInView: function() {\n            var that = this;\n             var selectedDates = {};\n            $.each(that._selectDates, function(index, value) {\n                selectedDates[kendo.calendar.views[0].toDateString(value)] = value;\n            });\n            that.selectable.clear();\n             var cells = that._table\n                .find(CELLSELECTOR)\n                .filter(function(index, element) {\n                    return selectedDates[$(element.firstChild).attr(kendo.attr(VALUE))];\n                });\n            if (cells.length > 0) {\n                that.selectable._selectElement(cells, true);\n            }\n        },\n\n        _isMultipleSelection: function() {\n            var that = this;\n            return that.options.selectable === \"multiple\";\n        },\n\n        _selectable: function() {\n            var that = this;\n            if (!that._isMultipleSelection()) {\n                return;\n            }\n\n            var selectable = that.options.selectable,\n            selectableOptions = Selectable.parseOptions(selectable);\n\n            if (selectableOptions.multiple) {\n                that.element.attr(\"aria-multiselectable\", \"true\");\n            }\n            that.selectable = new Selectable(that.wrapper, {\n                aria: true,\n                //excludes the anchor element\n                inputSelectors: \"input,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up\",\n                multiple: selectableOptions.multiple,\n                filter: \"table.k-month:eq(0) \" + CELLSELECTORVALID,\n                change: proxy(that._onSelect, that),\n                relatedTarget: proxy(that._onRelatedTarget, that)\n            });\n        },\n\n        _onRelatedTarget: function(target) {\n            var that = this;\n\n            if (that.selectable.options.multiple && target.is(CELLSELECTORVALID)) {\n                that._current = toDateObject(target.find(\"a\"));\n                that._setCurrent(that._current);\n            }\n\n        },\n\n        _onSelect: function(e) {\n            var that = this,\n                eventArgs = e,\n                selectableOptions = Selectable.parseOptions(that.options.selectable);\n\n            if (!selectableOptions.multiple) {\n                if ($(eventArgs.event.currentTarget).is(\"td\") && !$(eventArgs.event.currentTarget).hasClass(\"k-state-selected\")) {\n                    $(eventArgs.event.currentTarget).addClass(\"k-state-selected\");\n                }\n                else {\n                    that._click($(eventArgs.event.currentTarget).find(\"a\"));\n                }\n                return;\n            }\n\n            if (eventArgs.event.ctrlKey || eventArgs.event.metaKey) {\n                if ($(eventArgs.event.currentTarget).is(CELLSELECTORVALID)) {\n                    that._toggleSelection($(eventArgs.event.currentTarget));\n                }\n                else {\n                    that._cellsBySelector(CELLSELECTORVALID).each(function(index, element){\n                        var value = toDateObject($(element).find(\"a\"));\n                        that._deselect(value);\n                    });\n                    that._addSelectedCellsToArray();\n                }\n            }\n            else if (eventArgs.event.shiftKey) {\n                that._rangeSelection(that._cell);\n            }\n            else if ($(eventArgs.event.currentTarget).is(CELLSELECTOR)) {\n                that.value(toDateObject($(eventArgs.event.currentTarget).find(\"a\")));\n            }\n            else {\n                that._selectDates = [];\n                that._addSelectedCellsToArray();\n            }\n             that.trigger(CHANGE);\n        },\n\n        _destroySelectable: function() {\n            var that = this;\n\n            if (that.selectable) {\n                that.selectable.destroy();\n                that.selectable = null;\n            }\n        },\n\n        //when ctrl key is clicked\n        _toggleSelection: function(currentCell) {\n            var that = this,\n                date = toDateObject(currentCell.find(\"a\"));\n                if (currentCell.hasClass(\"k-state-selected\")) {\n                    that._selectDates.push(date);\n                }\n                else {\n                    that._deselect(date);\n                }\n        },\n\n        //shift selection\n        _rangeSelection: function(toDateCell, startDate) {\n            var that = this,\n                fromDate  = startDate || toDateObject(that.selectable.value().first().find(\"a\")),\n                toDate = toDateObject(toDateCell.find(\"a\")),\n                daysDifference;\n\n            if (that.selectable._lastActive || that._value) {\n                fromDate = that.selectable._lastActive? toDateObject(that.selectable._lastActive.find(\"a\")): new Date(+that._value);\n            } else {\n                that.selectable._lastActive = startDate? that._cellByDate(that._view.toDateString(startDate), CELLSELECTORVALID): that.selectable.value().first();\n            }\n\n            that._selectDates = [];\n            daysDifference = daysBetweenTwoDates(fromDate, toDate);\n            addDaysToArray(that._selectDates, daysDifference, fromDate, that.options.disableDates);\n\n            that._visualizeSelectedDatesInView();\n        },\n\n        _cellsBySelector: function(selector) {\n            var that = this;\n            return that._table.find(selector);\n        },\n\n        _addSelectedCellsToArray: function() {\n            var that = this;\n            that.selectable.value().each(function(index, item) {\n                var date = toDateObject($(item.firstChild));\n                if (!that.options.disableDates(date)) {\n                    that._selectDates.push(date);\n                }\n            });\n        },\n\n         _deselect: function(date) {\n            var that = this;\n             var currentDateIndex = that._selectDates.map(Number).indexOf(+date);\n            if (currentDateIndex != -1) {\n                that._selectDates.splice(currentDateIndex, 1);\n            }\n        },\n\n        _dateInView: function(date) {\n            var that = this,\n                firstDateInView = toDateObject(that._cellsBySelector(CELLSELECTORVALID).first().find(\"a\")),\n                lastDateInView = toDateObject(that._cellsBySelector(CELLSELECTORVALID).last().find(\"a\"));\n\n            return +date <= +lastDateInView && +date >= +firstDateInView;\n        },\n\n        _isNavigatable: function(currentValue, cellIndex) {\n            var that = this;\n            var isDisabled = that.options.disableDates;\n            var cell;\n            var index;\n\n            if (that._view.name == \"month\") {\n                return !isDisabled(currentValue);\n            } else {\n                index = that.wrapper.find(\".\"+FOCUSED).index();\n                cell = that.wrapper.find(\".k-content td\").eq(index + cellIndex);\n                return cell.is(CELLSELECTORVALID) || !isDisabled(currentValue);\n            }\n        },\n\n        _move: function(e) {\n            var that = this,\n                options = that.options,\n                key = e.keyCode,\n                view = that._view,\n                index = that._index,\n                min = that.options.min,\n                max = that.options.max,\n                currentValue = new DATE(+that._current),\n                isRtl = kendo.support.isRtl(that.wrapper),\n                isDisabled = that.options.disableDates,\n                value, prevent, method, temp;\n\n            if (e.target === that._table[0]) {\n                that._active = true;\n            }\n\n            if (key == keys.RIGHT && !isRtl || key == keys.LEFT && isRtl) {\n                value = 1;\n                prevent = true;\n            } else if (key == keys.LEFT && !isRtl || key == keys.RIGHT && isRtl) {\n                value = -1;\n                prevent = true;\n            } else if (key == keys.UP) {\n                value = index === 0 ? -7 : -4;\n                prevent = true;\n            } else if (key == keys.DOWN) {\n                value = index === 0 ? 7 : 4;\n                prevent = true;\n            }\n            else if (key == keys.SPACEBAR) {\n                value = 0;\n                prevent = true;\n            }\n            else if (key == keys.HOME || key == keys.END) {\n                method = key == keys.HOME ? \"first\" : \"last\";\n                temp = view[method](currentValue);\n                currentValue = new DATE(temp.getFullYear(), temp.getMonth(), temp.getDate(), currentValue.getHours(), currentValue.getMinutes(), currentValue.getSeconds(), currentValue.getMilliseconds());\n                currentValue.setFullYear(temp.getFullYear());\n                prevent = true;\n            }\n\n            if (e.ctrlKey || e.metaKey) {\n                if (key == keys.RIGHT && !isRtl || key == keys.LEFT && isRtl) {\n                    that.navigateToFuture();\n                    prevent = true;\n                } else if (key == keys.LEFT && !isRtl || key == keys.RIGHT && isRtl) {\n                    that.navigateToPast();\n                    prevent = true;\n                } else if (key == keys.UP) {\n                    that.navigateUp();\n                    prevent = true;\n                } else if (key == keys.DOWN) {\n                    that._click($(that._cell[0].firstChild));\n                    prevent = true;\n                }\n                  else if ((key == keys.ENTER || key == keys.SPACEBAR) && that._isMultipleSelection()) {\n                    that._keyboardToggleSelection(e);\n\n                    var focusedDate = toDateObject($(that._cell[0]).find(\"a\"));\n                    that._setCurrent(focusedDate);\n\n                }\n            } else if (e.shiftKey) {\n                if (value !== undefined || method) {\n                    if (!method) {\n                        view.setDate(currentValue, value);\n                    }\n\n                    if (!isInRange(currentValue, min, max)) {\n                        currentValue = restrictValue(currentValue, options.min, options.max);\n                    }\n\n                    if (isDisabled(currentValue)) {\n                        currentValue = that._nextNavigatable(currentValue, value);\n                    }\n\n                    min = createDate(min.getFullYear(), min.getMonth(), min.getDate());\n                    if (that._isMultipleSelection()) {\n                        that._keyboardRangeSelection(e, currentValue);\n                    }\n                    else {\n                        that._focus(currentValue);\n                    }\n                }\n            } else {\n                if (key == keys.ENTER || key == keys.SPACEBAR) {\n                    if (view.name == \"month\" && that._isMultipleSelection()) {\n                        that.value(toDateObject($(that._cell.find(\"a\"))));\n                        that.selectable._lastActive = $(that._cell[0]);\n                        that.trigger(CHANGE);\n                    }\n                    else {\n                        that._click($(that._cell[0].firstChild));\n                    }\n                    prevent = true;\n                } else if (key == keys.PAGEUP) {\n                    prevent = true;\n                    that.navigateToPast();\n                } else if (key == keys.PAGEDOWN) {\n                    prevent = true;\n                    that.navigateToFuture();\n                }\n\n                if (value || method) {\n                    if (!method) {\n                        view.setDate(currentValue, value);\n                    }\n\n                    min = createDate(min.getFullYear(), min.getMonth(), min.getDate());\n\n                    if (!isInRange(currentValue, min, max)) {\n                        currentValue = restrictValue(currentValue, options.min, options.max);\n                    }\n\n                    if (!that._isNavigatable(currentValue, value)) {\n                        currentValue = that._nextNavigatable(currentValue, value);\n                    }\n\n                    if (that._isMultipleSelection()) {\n                        if (!that._dateInView(currentValue)) {\n                            that.navigate(currentValue);\n                        }\n                        else {\n                            that._current = currentValue;\n                            that._setCurrent(currentValue);\n                        }\n                    }\n                    else {\n                        that._focus(currentValue);\n                    }\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n            }\n\n            return that._current;\n        },\n\n        _keyboardRangeSelection: function(event, currentValue) {\n            var that = this,\n                fromDate,\n                daysDifference;\n\n            if (!that._dateInView(currentValue)) {\n                that._selectDates = [];\n\n                fromDate = that.selectable._lastActive? toDateObject(that.selectable._lastActive.find(\"a\")): currentValue;\n                daysDifference = daysBetweenTwoDates(fromDate, new Date(+currentValue));\n\n                addDaysToArray(that._selectDates, daysDifference, fromDate, that.options.disableDates);\n\n                that.navigate(currentValue);\n                that._current = currentValue;\n                that.selectable._lastActive = that.selectable._lastActive || that._cellByDate(that._view.toDateString(currentValue), CELLSELECTORVALID);\n                that.trigger(CHANGE);\n                return;\n            }\n            that.selectable.options.filter = that.wrapper.find(\"table\").length > 1 && +currentValue > +that._current? \"table.k-month:eq(1) \" + CELLSELECTORVALID: \"table.k-month:eq(0) \" + CELLSELECTORVALID;\n            that._setCurrent(currentValue);\n            that._current = currentValue;\n\n            that._rangeSelection(that._cellByDate(that._view.toDateString(currentValue), CELLSELECTORVALID), currentValue);\n\n            that.trigger(CHANGE);\n\n            that.selectable.options.filter = \"table.k-month:eq(0) \" + CELLSELECTORVALID;\n        },\n\n        _keyboardToggleSelection: function(event) {\n            var that = this;\n\n            event.currentTarget = that._cell[0];\n            that.selectable._lastActive = $(that._cell[0]);\n\n            if ($(that._cell[0]).hasClass(SELECTED)) {\n                that.selectable._unselect($(that._cell[0]));\n                that.selectable.trigger(CHANGE, { event: event});\n            }\n            else {\n                that.selectable.value($(that._cell[0]), { event: event});\n            }\n        },\n\n        _nextNavigatable: function(currentValue, value) {\n            var that = this,\n            disabled = true,\n            view = that._view,\n            min = that.options.min,\n            max = that.options.max,\n            isDisabled = that.options.disableDates,\n            navigatableDate = new Date(currentValue.getTime());\n\n            view.setDate(navigatableDate, -value);\n\n            while (disabled) {\n                view.setDate(currentValue, value);\n\n                if (!isInRange(currentValue, min, max)) {\n                    currentValue = navigatableDate;\n                    break;\n                }\n                disabled = isDisabled(currentValue);\n            }\n            return currentValue;\n        },\n\n        _animate: function(options) {\n            var that = this;\n            var from = options.from;\n            var to = options.to;\n            var active = that._active;\n            var viewWrapper = that.element.children(\".k-calendar-view\");\n\n            if (!from) {\n                viewWrapper.append(to);\n                that._bindTable(to);\n            } else if (from.parent().data(\"animating\")) {\n                from.off(ns);\n                from.parent().kendoStop(true, true).remove();\n                from.remove();\n\n                viewWrapper.append(to);\n                that._focusView(active);\n            } else if (!from.is(\":visible\") || that.options.animation === false || options.replace) {\n                to.insertAfter(from);\n                from.off(ns).remove();\n\n                that._focusView(active);\n            } else {\n                that[options.vertical ? \"_vertical\" : \"_horizontal\"](from, to, options.future);\n            }\n        },\n\n        _horizontal: function(from, to, future) {\n            var that = this,\n                active = that._active,\n                horizontal = that.options.animation.horizontal,\n                effects = horizontal.effects,\n                viewWidth = outerWidth(from);\n\n            if (effects && effects.indexOf(SLIDE) != -1) {\n                from.add(to).css({ width: viewWidth });\n\n                from.wrap(\"<div/>\");\n\n                that._focusView(active, from);\n\n                from.parent()\n                .css({\n                    position: \"relative\",\n                    width: viewWidth * 2,\n                    \"float\": LEFT,\n                    \"margin-left\": future ? 0 : -viewWidth\n                });\n\n                to[future ? \"insertAfter\" : \"insertBefore\"](from);\n\n                extend(horizontal, {\n                    effects: SLIDE + \":\" + (future ? \"right\" : LEFT),\n                    complete: function() {\n                        from.off(ns).remove();\n                        that._oldTable = null;\n\n                        to.unwrap();\n\n                        that._focusView(active);\n\n                    }\n                });\n\n                from.parent().kendoStop(true, true).kendoAnimate(horizontal);\n            }\n        },\n\n        _vertical: function(from, to) {\n            var that = this,\n                vertical = that.options.animation.vertical,\n                effects = vertical.effects,\n                active = that._active, //active state before from's blur\n                cell, position;\n\n            if (effects && effects.indexOf(\"zoom\") != -1) {\n                to.insertBefore(from);\n\n                from.css({\n                    position: \"absolute\",\n                    width: to.width()\n                });\n\n                if (transitionOrigin) {\n                    cell = that._cellByDate(that._view.toDateString(that._current));\n                    position = cell.position();\n                    position = (position.left + parseInt(cell.width() / 2, 10)) + \"px\" + \" \" + (position.top + parseInt(cell.height() / 2, 10) + \"px\");\n                    to.css(transitionOrigin, position);\n                }\n\n                from.kendoStop(true, true).kendoAnimate({\n                    effects: \"fadeOut\",\n                    duration: 600,\n                    complete: function() {\n                        from.off(ns).remove();\n                        that._oldTable = null;\n\n                        that._focusView(active);\n                    }\n                });\n\n                to.kendoStop(true, true).kendoAnimate(vertical);\n            }\n        },\n\n        _cellByDate: function(value, selector) {\n            return this._table.find(selector ? selector : \"td:not(.\" + OTHERMONTH + \")\")\n            .filter(function() {\n                return $(this.firstChild).attr(kendo.attr(VALUE)) === value;\n            });\n        },\n\n        _selectCell: function (date) {\n            var that = this,\n                cell = that._selectedCell,\n                value = that._view.toDateString(date);\n\n                if (cell && cell[0]) {\n                    cell[0].removeAttribute(ARIA_SELECTED);\n                    cell.removeClass(SELECTED);\n                }\n\n                cell = that._cellByDate(value, that.options.selectable == \"multiple\" ? CELLSELECTOR: \"td:not(.\" + OTHERMONTH + \")\");\n\n                that._selectedCell = cell;\n                cell.addClass(SELECTED)\n                    .attr(ARIA_SELECTED, true);\n        },\n\n        _setCurrent: function (date) {\n            var that = this,\n                id = kendo.guid(),\n                cell = that._cell,\n                value = that._view.toDateString(date);\n\n                if (cell && cell[0]) {\n                    cell.removeClass(FOCUSED);\n                    cell[0].removeAttribute(ARIA_LABEL);\n                    cell[0].removeAttribute(ID);\n                }\n\n                cell = that._cellByDate(value, that.options.selectable == \"multiple\" ? CELLSELECTOR: \"td:not(.\" + OTHERMONTH + \")\");\n\n                that._cell = cell;\n\n                cell.attr(ID, id)\n                    .addClass(FOCUSED);\n\n                if (that._table[0]) {\n                    that._table[0].removeAttribute(\"aria-activedescendant\");\n                    that._table.attr(\"aria-activedescendant\", id);\n                }\n        },\n\n        _bindTable: function (table) {\n            table\n            .on(FOCUS_WITH_NS, this._addClassProxy)\n            .on(BLUR, this._removeClassProxy);\n        },\n\n        _click: function(link) {\n            var that = this,\n            options = that.options,\n            currentValue = new Date(+that._current),\n            value = toDateObject(link);\n\n            adjustDST(value, 0);\n\n            if (that._view.name == \"month\" && that.options.disableDates(value)) {\n                value = that._value;\n            }\n\n            that._view.setDate(currentValue, value);\n\n            that.navigateDown(restrictValue(currentValue, options.min, options.max));\n        },\n\n        _focus: function(value) {\n            var that = this,\n            view = that._view;\n\n            if (view.compare(value, that._current) !== 0) {\n                that.navigate(value);\n            } else {\n                that._current = value;\n                that._setCurrent(value);\n            }\n        },\n\n        _focusView: function(active, table) {\n            if (active) {\n                this.focus(table);\n            }\n        },\n\n        _viewWrapper: function() {\n            var that = this;\n            var element = that.element;\n            var viewWrapper = element.children(\".k-calendar-view\");\n\n            if (!viewWrapper[0]) {\n                viewWrapper = $(\"<div class='k-calendar-view' />\").insertAfter(element.find(HEADERSELECTOR));\n            }\n        },\n\n        _footer: function(template) {\n            var that = this,\n            today = getToday(),\n            element = that.element,\n            footer = element.find(\".k-footer\");\n\n            if (!template) {\n                that._toggle(false);\n                footer.hide();\n                return;\n            }\n\n            if (!footer[0]) {\n                footer = $('<div class=\"k-footer\"><a href=\"#\" class=\"k-link k-nav-today\"></a></div>').appendTo(element);\n            }\n\n            that._today = footer.show()\n                .find(\".k-link\")\n                .html(template(today))\n                .attr(\"title\", kendo.toString(today, \"D\", that.options.culture));\n\n            that._toggle();\n        },\n\n        _header: function() {\n            var that = this,\n            element = that.element,\n            linksSelector = that.options.linksSelector;\n\n            if (!element.find(HEADERSELECTOR)[0]) {\n                element.html(kendo.template(that.options.header.template)($.extend(true,{}, that.options, {actionAttr: kendo.attr(\"action\"), size: kendo.getValidCssClass(\"k-button-\", \"size\", that.options.size)})));\n            }\n\n            element.find(linksSelector)\n                .on(CLICK + \" touchend\" + ns, function() { return false; } );\n\n            that._title = element.find('[' + kendo.attr(\"action\") + '=\"nav-up\"]').on(CLICK + \" touchend\" + ns, function () {\n                that._active = that.options.focusOnNav !== false;\n                that.navigateUp();\n            });\n            that[PREVARROW] = element.find('[' + kendo.attr(\"action\") + '=\"prev\"]').on(CLICK + \" touchend\" + ns, function () {\n                that._active = that.options.focusOnNav !== false;\n                that.navigateToPast();\n            });\n            that[NEXTARROW] = element.find('[' + kendo.attr(\"action\") + '=\"next\"]').on(CLICK + \" touchend\" + ns, function () {\n                that._active = that.options.focusOnNav !== false;\n                that.navigateToFuture();\n            });\n            element.find('[' + kendo.attr(\"action\") + '=\"today\"]').on(CLICK + \" touchend\" + ns, proxy(that._todayClick, that));\n\n        },\n\n        _navigate: function(arrow, modifier) {\n            var that = this,\n            index = that._index + 1,\n            currentValue = new DATE(+that._current);\n\n            if (that._isMultipleSelection()) {\n                var firstDayCurrentMonth = that._table.find(\"td:not(.k-other-month):not(.k-out-of-range)\").has(\".k-link\").first();\n                currentValue = toDateObject(firstDayCurrentMonth.find(\"a\"));\n                that._current = new Date(+currentValue);\n            }\n\n            arrow = that[arrow];\n\n            if (!arrow.hasClass(DISABLED)) {\n                if (index > 3) {\n                    currentValue.setFullYear(currentValue.getFullYear() + 100 * modifier);\n                } else {\n                    calendar.views[index].setDate(currentValue, modifier);\n                }\n\n                that.navigate(currentValue);\n            }\n        },\n\n        _option: function(option, value) {\n            var that = this,\n                options = that.options,\n                currentValue = that._value || that._current,\n                isBigger;\n\n            if (value === undefined) {\n                return options[option];\n            }\n\n            value = parse(value, options.format, options.culture);\n\n            if (!value) {\n                return;\n            }\n\n            options[option] = new DATE(+value);\n\n            if (option === MIN) {\n                isBigger = value > currentValue;\n            } else {\n                isBigger = currentValue > value;\n            }\n\n            if (isBigger || isEqualMonth(currentValue, value)) {\n                if (isBigger) {\n                    that._value = null;\n                }\n                that._changeView = true;\n            }\n\n            if (!that._changeView) {\n                that._changeView = !!(options.month.content || options.month.empty);\n            }\n\n            that.navigate(that._value);\n\n            that._toggle();\n        },\n\n        _toggle: function(toggle) {\n            var that = this,\n                options = that.options,\n                isTodayDisabled = that.options.disableDates(getToday()),\n                link = that._today,\n                todayClass = that._todayClass();\n\n            if (toggle === undefined) {\n                toggle = isInRange(getToday(), options.min, options.max);\n            }\n\n            if (link) {\n                link.off(CLICK);\n\n                if (toggle && !isTodayDisabled) {\n                    link.addClass(todayClass)\n                    .removeClass(DISABLED)\n                    .on(CLICK, proxy(that._todayClick, that));\n                } else {\n                    link.removeClass(todayClass)\n                    .addClass(DISABLED)\n                    .on(CLICK, prevent);\n                }\n            }\n        },\n\n        _todayClass: function() {\n            return TODAY;\n        },\n\n        _todayClick: function(e) {\n            var that = this,\n            depth = views[that.options.depth],\n            disabled = that.options.disableDates,\n            today = getToday();\n\n            e.preventDefault();\n\n            if (disabled(today)) {\n                return;\n            }\n\n            if (that._view.compare(that._current, today) === 0 && that._index == depth) {\n                that._changeView = false;\n            }\n\n            if (that._isMultipleSelection()) {\n                that._selectDates = [today];\n                that.selectable._lastActive = null;\n            }\n\n            that._value = today;\n            that.navigate(today, depth);\n\n            that.trigger(CHANGE);\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                footer = options.footer,\n                month = options.month,\n                content = month.content,\n                weekNumber = month.weekNumber,\n                empty = month.empty,\n                footerTemplate = '#= kendo.toString(data,\"D\",\"' + options.culture +'\") #';\n\n            that.month = {\n                content: template('<td class=\"#=data.cssClass#\" role=\"gridcell\"><a tabindex=\"-1\" class=\"k-link#=data.linkClass#\" href=\"#=data.url#\" ' + kendo.attr(VALUE) + '=\"#=data.dateString#\" title=\"#=data.title#\">' + (content || \"#=data.value#\") + '</a></td>', { useWithBlock: !!content }),\n                empty: template('<td role=\"gridcell\">' + (empty || \"&nbsp;\") + \"</td>\", { useWithBlock: !!empty }),\n                weekNumber: template('<td class=\"k-alt\">' + (weekNumber || \"#= data.weekNumber #\") + \"</td>\", { useWithBlock: !!weekNumber })\n            };\n\n            if (footer && footer !== true) {\n                footerTemplate = footer;\n            }\n\n            that.footer = footer !== false ? template(footerTemplate, { useWithBlock: false }) : null;\n        },\n\n        _updateAria: function (ariaTemplate, date) {\n            var that = this;\n            var cell = that._cell;\n            var valueType = that.view().valueType();\n            var current = date || that.current();\n            var text;\n\n            if (valueType === \"month\") {\n                text = kendo.toString(current, \"MMMM\");\n            } else if (valueType === \"date\") {\n                text = kendo.toString(current, \"D\");\n            } else {\n                text = cell.text();\n            }\n\n            cell.attr(\"aria-label\", ariaTemplate({ current: current, valueType: valueType, text: text }));\n\n            return cell.attr(\"id\");\n        }\n    });\n\n    ui.plugin(Calendar);\n\n    var calendar = {\n        firstDayOfMonth: function (date) {\n            return createDate(\n                date.getFullYear(),\n                date.getMonth(),\n                1\n            );\n        },\n\n        firstVisibleDay: function (date, calendarInfo) {\n            calendarInfo = calendarInfo || kendo.culture().calendar;\n\n            var firstDay = calendarInfo.firstDay,\n            firstVisibleDay = new DATE(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n            firstVisibleDay.setFullYear(date.getFullYear());\n\n            while (firstVisibleDay.getDay() != firstDay) {\n                calendar.setTime(firstVisibleDay, -1 * MS_PER_DAY);\n            }\n\n            return firstVisibleDay;\n        },\n\n        setTime: function (date, time) {\n            var tzOffsetBefore = date.getTimezoneOffset(),\n            resultDATE = new DATE(date.getTime() + time),\n            tzOffsetDiff = resultDATE.getTimezoneOffset() - tzOffsetBefore;\n\n            date.setTime(resultDATE.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n        },\n        views: [{\n            name: MONTH,\n            title: function(date, min, max, culture) {\n                return getCalendarInfo(culture).months.names[date.getMonth()] + \" \" + date.getFullYear();\n            },\n            content: function(options) {\n                var that = this,\n                    idx = 0,\n                    min = options.min,\n                    max = options.max,\n                    date = options.date,\n                    dates = options.dates,\n                    format = options.format,\n                    culture = options.culture,\n                    navigateUrl = options.url,\n                    showHeader = options.showHeader,\n                    otherMonth = options.otherMonth,\n                    isWeekColumnVisible = options.isWeekColumnVisible,\n                    hasUrl = navigateUrl && dates[0],\n                    currentCalendar = getCalendarInfo(culture),\n                    firstDayIdx = currentCalendar.firstDay,\n                    days = currentCalendar.days,\n                    names = shiftArray(days.names, firstDayIdx),\n                    shortNames = shiftArray(days.namesShort, firstDayIdx),\n                    start = calendar.firstVisibleDay(date, currentCalendar),\n                    firstDayOfMonth = that.first(date),\n                    lastDayOfMonth = that.last(date),\n                    toDateString = that.toDateString,\n                    today = getToday(),\n                    contentClasses = options.contentClasses,\n                    html = '<table tabindex=\"0\" role=\"grid\" class=\"' + contentClasses + '\" cellspacing=\"0\" data-start=\"' + toDateString(start) + '\">';\n\n                if (showHeader) {\n                    html += '<caption class=\"k-calendar-caption k-month-header\">' + this.title(date, min, max, culture) + '</caption>';\n                }\n\n                html += '<thead class=\"k-calendar-thead\"><tr role=\"row\" class=\"k-calendar-tr\">';\n\n                if (isWeekColumnVisible) {\n                    html += '<th scope=\"col\" class=\"k-calendar-th k-alt\">' + options.messages.weekColumnHeader + '</th>';\n                }\n\n                for (; idx < 7; idx++) {\n                    html += '<th scope=\"col\" class=\"k-calendar-th\" title=\"' + names[idx] + '\">' + shortNames[idx] + '</th>';\n                }\n\n                adjustDST(today, 0);\n                today = +today;\n\n                return view({\n                    cells: 42,\n                    perRow: 7,\n                    html: html += '</tr></thead><tbody class=\"k-calendar-tbody\"><tr role=\"row\" class=\"k-calendar-tr\">',\n                    start: start,\n                    isWeekColumnVisible: isWeekColumnVisible,\n                    weekNumber: options.weekNumber,\n                    min: createDate(min.getFullYear(), min.getMonth(), min.getDate()),\n                    max: createDate(max.getFullYear(), max.getMonth(), max.getDate()),\n                    otherMonth : otherMonth,\n                    content: options.content,\n                    lastDayOfMonth : lastDayOfMonth,\n                    empty: options.empty,\n                    setter: that.setDate,\n                    disableDates: options.disableDates,\n                    build: function(date, idx, disableDates) {\n                        var cssClass = [ \"k-calendar-td\" ],\n                            day = date.getDay(),\n                            linkClass = \"\",\n                            url = \"#\";\n\n                        if (date < firstDayOfMonth || date > lastDayOfMonth) {\n                            cssClass.push(OTHERMONTH);\n                        }\n\n                        if (disableDates(date)) {\n                            cssClass.push(DISABLED);\n                        }\n\n                        if (+date === today) {\n                            cssClass.push(\"k-today\");\n                        }\n\n                        if (day === 0 || day === 6) {\n                            cssClass.push(\"k-weekend\");\n                        }\n\n                        if (hasUrl && inArray(+date, dates)) {\n                            url = navigateUrl.replace(\"{0}\", kendo.toString(date, format, culture));\n                            linkClass = \" k-action-link\";\n                        }\n\n                        return {\n                            date: date,\n                            dates: dates,\n                            ns: kendo.ns,\n                            title: kendo.toString(date, \"D\", culture),\n                            value: date.getDate(),\n                            dateString: toDateString(date),\n                            cssClass: cssClass.join(\" \"),\n                            linkClass: linkClass,\n                            url: url\n                        };\n                    },\n                    weekNumberBuild: function(date) {\n                        return {\n                            weekNumber: weekInYear(date, kendo.culture().calendar.firstDay),\n                            currentDate: date\n                        };\n                    }\n                });\n            },\n            first: function(date) {\n                return calendar.firstDayOfMonth(date);\n            },\n            last: function(date) {\n                var last = createDate(date.getFullYear(), date.getMonth() + 1, 0),\n                first = calendar.firstDayOfMonth(date),\n                timeOffset = Math.abs(last.getTimezoneOffset() - first.getTimezoneOffset());\n\n                if (timeOffset) {\n                    last.setHours(first.getHours() + (timeOffset / 60));\n                }\n\n                return last;\n            },\n            compare: function(date1, date2) {\n                var result,\n                month1 = date1.getMonth(),\n                year1 = date1.getFullYear(),\n                month2 = date2.getMonth(),\n                year2 = date2.getFullYear();\n\n                if (year1 > year2) {\n                    result = 1;\n                } else if (year1 < year2) {\n                    result = -1;\n                } else {\n                    result = month1 == month2 ? 0 : month1 > month2 ? 1 : -1;\n                }\n\n                return result;\n            },\n            setDate: function(date, value) {\n                var hours = date.getHours();\n                if (value instanceof DATE) {\n                    date.setFullYear(value.getFullYear(), value.getMonth(), value.getDate());\n                } else {\n                    calendar.setTime(date, value * MS_PER_DAY);\n                }\n                adjustDST(date, hours);\n            },\n            toDateString: function(date) {\n                return date.getFullYear() + \"/\" + date.getMonth() + \"/\" + date.getDate();\n            },\n            valueType: function () {\n                return \"date\";\n            }\n        },\n        {\n            name: \"year\",\n            title: function(date) {\n                return date.getFullYear();\n            },\n            content: function(options) {\n                var namesAbbr = getCalendarInfo(options.culture).months.namesAbbr,\n                toDateString = this.toDateString,\n                min = options.min,\n                max = options.max,\n                html = \"\";\n\n                if (options.showHeader) {\n                    html += '<table tabindex=\"0\" role=\"grid\" class=\"k-calendar-table k-content k-meta-view\" cellspacing=\"0\">';\n                        html += '<caption class=\"k-calendar-caption k-meta-header\">';\n                            html += this.title(options.date);\n                        html += '</caption>';\n                        html += '<tbody class=\"k-calendar-tbody\">';\n                            html += '<tr role=\"row\" class=\"k-calendar-tr\">';\n                }\n\n                return view({\n                    min: createDate(min.getFullYear(), min.getMonth(), 1),\n                    max: createDate(max.getFullYear(), max.getMonth(), 1),\n                    start: createDate(options.date.getFullYear(), 0, 1),\n                    html: html,\n                    setter: this.setDate,\n                    build: function(date) {\n                        var cssClass = [ \"k-calendar-td\" ];\n\n                        return {\n                            value: namesAbbr[date.getMonth()],\n                            ns: kendo.ns,\n                            dateString: toDateString(date),\n                            cssClass: cssClass.join(\" \")\n                        };\n                    }\n                });\n            },\n            first: function(date) {\n                return createDate(date.getFullYear(), 0, date.getDate());\n            },\n            last: function(date) {\n                return createDate(date.getFullYear(), 11, date.getDate());\n            },\n            compare: function(date1, date2){\n                return compare(date1, date2);\n            },\n            setDate: function(date, value) {\n                var month,\n                hours = date.getHours();\n\n                if (value instanceof DATE) {\n                    month = value.getMonth();\n\n                    date.setFullYear(value.getFullYear(), month, date.getDate());\n\n                    if (month !== date.getMonth()) {\n                        date.setDate(0);\n                    }\n                } else {\n                    month = date.getMonth() + value;\n\n                    date.setMonth(month);\n\n                    if (month > 11) {\n                        month -= 12;\n                    }\n\n                    if (month > 0 && date.getMonth() != month) {\n                        date.setDate(0);\n                    }\n                }\n\n                adjustDST(date, hours);\n            },\n            toDateString: function(date) {\n                return date.getFullYear() + \"/\" + date.getMonth() + \"/1\";\n            },\n            valueType: function () {\n                return \"month\";\n            }\n        },\n        {\n            name: \"decade\",\n            title: function(date, min, max) {\n                return title(date, min, max, 10);\n            },\n            content: function(options) {\n                var year = options.date.getFullYear(),\n                toDateString = this.toDateString,\n                html = \"\";\n\n                if (options.showHeader) {\n                    html += '<table tabindex=\"0\" role=\"grid\" class=\"k-calendar-table k-content k-meta-view\" cellspacing=\"0\">';\n                        html += '<caption class=\"k-meta-header\">';\n                            html += this.title(options.date, options.min, options.max);\n                        html += '</caption>';\n                        html += '<tbody class=\"k-calendar-thead\">';\n                            html += '<tr role=\"row\" class=\"k-calendar-tr\">';\n                }\n\n                return view({\n                    start: createDate(year - year % 10 - 1, 0, 1),\n                    min: createDate(options.min.getFullYear(), 0, 1),\n                    max: createDate(options.max.getFullYear(), 0, 1),\n                    otherMonth : options.otherMonth,\n                    html : html,\n                    setter: this.setDate,\n                    build: function(date, idx) {\n                        var cssClass = [ \"k-calendar-td\" ];\n\n                        if (idx === 0 || idx === 11) {\n                            cssClass.push(OTHERMONTH);\n                        }\n\n                        return {\n                            value: date.getFullYear(),\n                            ns: kendo.ns,\n                            dateString: toDateString(date),\n                            cssClass: cssClass.join(\" \")\n                        };\n                    }\n                });\n            },\n            first: function(date) {\n                var year = date.getFullYear();\n                return createDate(year - year % 10, date.getMonth(), date.getDate());\n            },\n            last: function(date) {\n                var year = date.getFullYear();\n                return createDate(year - year % 10 + 9, date.getMonth(), date.getDate());\n            },\n            compare: function(date1, date2) {\n                return compare(date1, date2, 10);\n            },\n            setDate: function(date, value) {\n                setDate(date, value, 1);\n            },\n            toDateString: function(date) {\n                return date.getFullYear() + \"/0/1\";\n            },\n            valueType: function () {\n                return \"year\";\n            }\n        },\n        {\n            name: CENTURY,\n            title: function(date, min, max) {\n                return title(date, min, max, 100);\n            },\n            content: function(options) {\n                var year = options.date.getFullYear(),\n                min = options.min.getFullYear(),\n                max = options.max.getFullYear(),\n                toDateString = this.toDateString,\n                minYear = min,\n                maxYear = max,\n                html = \"\";\n\n                minYear = minYear - minYear % 10;\n                maxYear = maxYear - maxYear % 10;\n\n                if (maxYear - minYear < 10) {\n                    maxYear = minYear + 9;\n                }\n\n                if (options.showHeader) {\n                    html += '<table tabindex=\"0\" role=\"grid\" class=\"k-calendar-table k-content k-meta-view\" cellspacing=\"0\">';\n                        html += '<caption class=\"k-calendar-caption k-meta-header\">';\n                            html += this.title(options.date, options.min, options.max);\n                        html += '</caption>';\n                        html += '<tbody class=\"k-calendar-tbody\">';\n                            html += '<tr role=\"row\" class=\"k-calendar-tr\">';\n                }\n\n                return view({\n                    start: createDate(year - year % 100 - 10, 0, 1),\n                    min: createDate(minYear, 0, 1),\n                    max: createDate(maxYear, 0, 1),\n                    otherMonth : options.otherMonth,\n                    html : html,\n                    setter: this.setDate,\n                    build: function(date, idx) {\n                        var cssClass = [ \"k-calendar-td\" ];\n                        var start = date.getFullYear(),\n                            end = start + 9;\n\n                        if (idx === 0 || idx === 11) {\n                            cssClass.push(OTHERMONTH);\n                        }\n\n                        if (start < min) {\n                            start = min;\n                        }\n\n                        if (end > max) {\n                            end = max;\n                        }\n\n                        return {\n                            ns: kendo.ns,\n                            value: start + \" - \" + end,\n                            dateString: toDateString(date),\n                            cssClass: cssClass.join(\" \")\n                        };\n                    }\n                });\n            },\n            first: function(date) {\n                var year = date.getFullYear();\n                return createDate(year - year % 100, date.getMonth(), date.getDate());\n            },\n            last: function(date) {\n                var year = date.getFullYear();\n                return createDate(year - year % 100 + 99, date.getMonth(), date.getDate());\n            },\n            compare: function(date1, date2) {\n                return compare(date1, date2, 100);\n            },\n            setDate: function(date, value) {\n                setDate(date, value, 10);\n            },\n            toDateString: function(date) {\n                var year = date.getFullYear();\n                return (year - year % 10) + \"/0/1\";\n            },\n            valueType: function () {\n                return \"decade\";\n            }\n        }]\n    };\n\n    function title(date, min, max, modular) {\n        var start = date.getFullYear(),\n            minYear = min.getFullYear(),\n            maxYear = max.getFullYear(),\n            end;\n\n        start = start - start % modular;\n        end = start + (modular - 1);\n\n        if (start < minYear) {\n            start = minYear;\n        }\n        if (end > maxYear) {\n            end = maxYear;\n        }\n\n        return start + \"-\" + end;\n    }\n\n    function view(options) {\n        var idx = 0,\n            data,\n            min = options.min,\n            max = options.max,\n            start = options.start,\n            setter = options.setter,\n            build = options.build,\n            weekNumberBuild = options.weekNumberBuild,\n            length = options.cells || 12,\n            isWeekColumnVisible = options.isWeekColumnVisible,\n            cellsPerRow = options.perRow || 4,\n            otherMonth = options.otherMonth,\n            lastDayOfMonth = options.lastDayOfMonth,\n            weekNumber = options.weekNumber || weekNumberTemplate,\n            content = options.content || cellTemplate,\n            empty = options.empty || emptyCellTemplate,\n            otherMonthTemplate = options.otherMonthCellTemplate || otherMonthCellTemplate,\n            html = options.html || '<table tabindex=\"0\" role=\"grid\" class=\"k-calendar-table k-content k-meta-view\" cellspacing=\"0\"><tbody class=\"k-calendar-tbody\"><tr role=\"row\" class=\"k-calendar-tr\">';\n\n        if (isWeekColumnVisible) {\n            html += weekNumber(weekNumberBuild(start));\n        }\n\n\n        for (; idx < length; idx++) {\n            if (idx > 0 && idx % cellsPerRow === 0) {\n                html += '</tr><tr role=\"row\" class=\"k-calendar-tr\">';\n                if (isWeekColumnVisible) {\n                    html += otherMonth || (+start <= +lastDayOfMonth) ? weekNumber(weekNumberBuild(start)) : weekNumber({ weekNumber : \"&nbsp;\"});\n                }\n            }\n\n            start = createDate(start.getFullYear(), start.getMonth(), start.getDate());\n            adjustDST(start, 0);\n\n            data = build(start, idx, options.disableDates);\n\n            html += (data.cssClass.indexOf(OTHERMONTH) !== -1 && !otherMonth) ? otherMonthTemplate(data) : isInRange(start, min, max) ? content(data) : empty(data);\n\n            setter(start, 1);\n        }\n\n        return html + \"</tr></tbody></table>\";\n    }\n\n    function compare(date1, date2, modifier) {\n        var year1 = date1.getFullYear(),\n            start  = date2.getFullYear(),\n            end = start,\n            result = 0;\n\n        if (modifier) {\n            start = start - start % modifier;\n            end = start - start % modifier + modifier - 1;\n        }\n\n        if (year1 > end) {\n            result = 1;\n        } else if (year1 < start) {\n            result = -1;\n        }\n\n        return result;\n    }\n\n    function getToday() {\n        var today = new DATE();\n        return new DATE(today.getFullYear(), today.getMonth(), today.getDate());\n    }\n\n    function restrictValue (value, min, max) {\n        var today = getToday();\n\n        if (value) {\n            today = new DATE(+value);\n        }\n\n        if (min > today) {\n            today = new DATE(+min);\n        } else if (max < today) {\n            today = new DATE(+max);\n        }\n        return today;\n    }\n\n    function isInRange(date, min, max) {\n        return +date >= +min && +date <= +max;\n    }\n\n    function shiftArray(array, idx) {\n        return array.slice(idx).concat(array.slice(0, idx));\n    }\n\n    function setDate(date, value, multiplier) {\n        value = value instanceof DATE ? value.getFullYear() : date.getFullYear() + multiplier * value;\n        date.setFullYear(value);\n    }\n\n    function daysBetweenTwoDates(startDate, endDate) {\n        if (+endDate < +startDate) {\n            var temp = +startDate;\n            calendar.views[0].setDate(startDate, endDate);\n            calendar.views[0].setDate(endDate, new Date(temp));\n        }\n        var fromDateUTC = Date.UTC(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());\n        var endDateUTC = Date.UTC(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());\n\n        return Math.ceil((+endDateUTC - +fromDateUTC) / kendo.date.MS_PER_DAY);\n    }\n\n    function addDaysToArray(array, numberOfDays, fromDate, disableDates) {\n        for (var i = 0; i <= numberOfDays; i++) {\n            var nextDay = new Date(fromDate.getTime());\n            nextDay = new Date(nextDay.setDate(nextDay.getDate() + i));\n            if (!disableDates(nextDay)) {\n                array.push(nextDay);\n            }\n        }\n    }\n\n    function mousetoggle(e) {\n        var disabled = $(this).hasClass(\"k-state-disabled\");\n\n        if (!disabled) {\n            $(this).toggleClass(HOVER, MOUSEENTER.indexOf(e.type) > -1 || e.type == FOCUS);\n        }\n    }\n\n    function prevent (e) {\n        e.preventDefault();\n    }\n\n    // creates date with full year\n    function createDate(year, month, date) {\n        var dateObject = new DATE(year, month, date);\n        dateObject.setFullYear(year, month, date);\n        return dateObject;\n    }\n\n    function getCalendarInfo(culture) {\n        return getCulture(culture).calendars.standard;\n    }\n\n    function normalize(options) {\n        var start = views[options.start],\n            depth = views[options.depth],\n            culture = getCulture(options.culture);\n\n        options.format = extractFormat(options.format || culture.calendars.standard.patterns.d);\n\n        if (isNaN(start)) {\n            start = 0;\n            options.start = MONTH;\n        }\n\n        if (depth === undefined || depth > start) {\n            options.depth = MONTH;\n        }\n\n        if (options.dates === null) {\n            options.dates = [];\n        }\n    }\n\n    function addClassToViewContainer(element, currentView) {\n        element.addClass(\"k-\" + currentView);\n    }\n\n    function inArray(date, dates) {\n        for (var i = 0, length = dates.length; i < length; i++) {\n            if (date === +dates[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    function isEqualDatePart(value1, value2) {\n        if (value1) {\n            return value1.getFullYear() === value2.getFullYear() &&\n                value1.getMonth() === value2.getMonth() &&\n                value1.getDate() === value2.getDate();\n        }\n\n        return false;\n    }\n\n    function isEqualMonth(value1, value2) {\n        if (value1) {\n            return value1.getFullYear() === value2.getFullYear() &&\n                value1.getMonth() === value2.getMonth();\n        }\n\n        return false;\n    }\n\n\n    function getDisabledExpr(option) {\n        if (kendo.isFunction(option)) {\n            return option;\n        }\n\n        if (Array.isArray(option)) {\n            return createDisabledExpr(option);\n        }\n        return $.noop;\n    }\n\n    function convertDatesArray(dates) {\n        var result = [];\n        for (var i = 0; i < dates.length; i++) {\n            result.push(dates[i].setHours(0, 0, 0, 0));\n        }\n        return result;\n    }\n\n    function createDisabledExpr(dates) {\n        var body, callback,\n            disabledDates = [],\n            days = [\"su\", \"mo\", \"tu\", \"we\", \"th\", \"fr\", \"sa\"],\n            searchExpression = \"if (found) {\"+\n                    \" return true \" +\n                \"} else {\" +\n                    \"return false\" +\n                \"}\";\n\n        if (dates[0] instanceof DATE) {\n            disabledDates = convertDatesArray(dates);\n            body = \"var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.setHours(0, 0, 0, 0),[\"+ disabledDates +\"]) > -1;\" + searchExpression;\n        } else {\n            for (var i = 0; i < dates.length; i++) {\n                var day = dates[i].slice(0,2).toLowerCase();\n                var index = $.inArray(day, days);\n                if (index > -1) {\n                    disabledDates.push(index);\n                }\n            }\n            body = \"var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.getDay(),[\"+ disabledDates +\"]) > -1;\" + searchExpression;\n        }\n\n        callback = new Function(\"date\", body); //jshint ignore:line\n\n        return callback;\n    }\n\n    function isEqualDate(oldValue, newValue) {\n       if (oldValue instanceof Date && newValue instanceof Date) {\n           oldValue = oldValue.getTime();\n           newValue = newValue.getTime();\n       }\n\n       return oldValue === newValue;\n    }\n\n    function toDateObject(link) {\n        var value = $(link).attr(kendo.attr(VALUE)).split(\"/\");\n        //Safari cannot create correctly date from \"1/1/2090\"\n        value = createDate(value[0], value[1], value[2]);\n\n        return value;\n    }\n\n    calendar.isEqualDatePart = isEqualDatePart;\n    calendar.isEqualDate = isEqualDate;\n    calendar.restrictValue = restrictValue;\n    calendar.isInRange = isInRange;\n    calendar.addClassToViewContainer = addClassToViewContainer;\n    calendar.normalize = normalize;\n    calendar.viewsEnum = views;\n    calendar.disabled = getDisabledExpr;\n    calendar.toDateObject = toDateObject;\n    calendar.getToday = getToday;\n    calendar.createDate = createDate;\n\n    kendo.calendar = calendar;\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.dateinput',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dateinput\",\n    name: \"DateInput\",\n    category: \"web\",\n    description: \"The DateInput widget allows to edit date by typing.\",\n    depends: [ \"core\" ]\n};\n\n(function ($, undefined) {\n    var global = window;\n    var kendo = global.kendo;\n    var caret = kendo.caret;\n    var ui = kendo.ui;\n    var Widget = ui.Widget;\n    var keys = kendo.keys;\n    var ns = \".kendoDateInput\";\n    var proxy = $.proxy;\n    var objectToString = {}.toString;\n\n    var INPUT_EVENT_NAME = (kendo.support.propertyChangeEvent ? \"propertychange.kendoDateInput input\" : \"input\") + ns;\n\n    var FOCUSED = \"k-focus\";\n    var STATEDISABLED = \"k-disabled\";\n    var STATEINVALID = \"k-invalid\";\n\n    var DISABLED = \"disabled\";\n    var READONLY = \"readonly\";\n    var CHANGE = \"change\";\n\n    var knownSymbols = \"dMyHhmftsz\";\n\n    var DateInput = Widget.extend({\n        init: function (element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            element = that.element;\n\n            options = that.options;\n            options.format = kendo._extractFormat(options.format || kendo.getCulture(options.culture).calendars.standard.patterns.d);\n            options.min = kendo.parseDate(element.attr(\"min\")) || kendo.parseDate(options.min);\n            options.max = kendo.parseDate(element.attr(\"max\")) || kendo.parseDate(options.max);\n\n            var wrapperClass = (element.parent().attr(\"class\") || \"\");\n            var skipWrapping = wrapperClass.indexOf(\"picker\") >= 0 && wrapperClass.indexOf(\"rangepicker\") < 0;\n\n            if (skipWrapping) {\n                that.wrapper = element.parent();\n            } else {\n                that.wrapper = element.wrap(\"<span class='k-dateinput k-input'></span>\").parent();\n                that.wrapper.addClass(element[0].className).removeClass('input-validation-error');\n                that.wrapper[0].style.cssText = element[0].style.cssText;\n                element.css({\n                    height: element[0].style.height\n                });\n            }\n\n            that._validationIcon = $(\"<span class='k-input-validation-icon k-icon k-i-warning k-hidden'></span>\").insertAfter(element);\n\n            that._form();\n\n            that.element\n                .addClass(skipWrapping ? \" \" : \"k-input-inner\")\n                .attr(\"autocomplete\", \"off\")\n                .on(\"focus\" + ns, function() {\n                    that.wrapper.addClass(FOCUSED);\n                })\n                .on(\"focusout\" + ns, function () {\n                    that.wrapper.removeClass(FOCUSED);\n                    that._change();\n                });\n\n            try {\n                element[0].setAttribute(\"type\", \"text\");\n            } catch (e) {\n                element[0].type = \"text\";\n            }\n\n            var disabled = element.is(\"[disabled]\") || $(that.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(element.is(\"[readonly]\"));\n            }\n\n            that.value(that.options.value || element.val());\n            that._applyCssClasses();\n\n            kendo.notify(that);\n        },\n\n        options: {\n            name: \"DateInput\",\n            culture: \"\",\n            value: \"\",\n            format: \"\",\n            min: new Date(1900, 0, 1),\n            max: new Date(2099, 11, 31),\n            messages: {\n                \"year\": \"year\",\n                \"month\": \"month\",\n                \"day\": \"day\",\n                \"weekday\": \"day of the week\",\n                \"hour\": \"hours\",\n                \"minute\": \"minutes\",\n                \"second\": \"seconds\",\n                \"dayperiod\": \"AM/PM\"\n            },\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            CHANGE\n        ],\n\n        min: function (value) {\n            if (value !== undefined) {\n                this.options.min = value;\n            } else {\n                return this.options.min;\n            }\n        },\n\n        max: function (value) {\n            if (value !== undefined) {\n                this.options.max = value;\n            } else {\n                return this.options.max;\n            }\n        },\n\n        setOptions: function (options) {\n            var that = this;\n            Widget.fn.setOptions.call(that, options);\n            this._unbindInput();\n            this._bindInput();\n            this._updateElementValue();\n        },\n\n        destroy: function () {\n            var that = this;\n            that.element.off(ns);\n\n            if (that._formElement) {\n                that._formElement.off(\"reset\", that._resetHandler);\n            }\n\n            Widget.fn.destroy.call(that);\n        },\n\n        value: function (value) {\n            if (value === undefined) {\n                return this._dateTime.getDateObject();\n            }\n\n            if (value === null) {\n                value = \"\";\n            }\n\n            if (objectToString.call(value) !== \"[object Date]\") {\n                value = kendo.parseDate(value, this.options.format, this.options.culture);\n            }\n\n            if (value && !value.getTime()) {\n                value = null;\n            }\n\n            this._dateTime = new customDateTime(value, this.options.format, this.options.culture, this.options.messages);\n\n            this._updateElementValue();\n            this._oldValue = value;\n        },\n\n        _updateElementValue: function () {\n            var stringAndFromat = this._dateTime.toPair(this.options.format, this.options.culture, this.options.messages);\n            this.element.val(stringAndFromat[0]);\n            this._oldText = stringAndFromat[0];\n            this._format = stringAndFromat[1];\n        },\n\n        readonly: function (readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n        },\n\n        enable: function (enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n        },\n\n        _bindInput: function () {\n            var that = this;\n            that.element\n                .on(\"focus\" + ns, function() {\n                    that.wrapper.addClass(FOCUSED);\n                })\n                .on(\"focusout\" + ns, function () {\n                    that.wrapper.removeClass(FOCUSED);\n                    that._change();\n                })\n                .on(\"paste\" + ns, proxy(that._paste, that))\n                .on(\"keydown\" + ns, proxy(that._keydown, that))\n                .on(INPUT_EVENT_NAME, proxy(that._input, that))\n                .on(\"mouseup\" + ns, proxy(that._mouseUp, that))\n                .on(\"DOMMouseScroll\" + ns + \" mousewheel\" + ns, proxy(that._scroll, that));\n        },\n\n        _unbindInput: function () {\n            this.element\n                .off(\"keydown\" + ns)\n                .off(\"paste\" + ns)\n                .off(\"focus\" + ns)\n                .off(\"focusout\" + ns)\n                .off(INPUT_EVENT_NAME)\n                .off(\"mouseup\" + ns)\n                .off(\"DOMMouseScroll\" + ns + \" mousewheel\" + ns);\n        },\n\n        _editable: function (options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper;\n\n            that._unbindInput();\n\n            if (!readonly && !disable) {\n                wrapper.removeClass(STATEDISABLED);\n                if(element && element.length) {\n                    element[0].removeAttribute(DISABLED);\n                    element[0].removeAttribute(READONLY);\n                }\n\n                that._bindInput();\n            } else {\n                if (disable) {\n                    wrapper.addClass(STATEDISABLED);\n                    element.attr(DISABLED, disable);\n                    if(element && element.length) {\n                        element[0].removeAttribute(READONLY);\n                    }\n                }\n                if (readonly) {\n                    element.attr(READONLY, readonly);\n                }\n            }\n        },\n\n        _change: function () {\n            var that = this;\n            var oldValue = that._oldValue;\n            var value = that.value();\n\n            if (value && that.min() && value < that.min()) {\n                that.value(that.min());\n                value = that.value();\n            }\n            if (value && that.max() && value > that.max()) {\n                that.value(that.max());\n                value = that.value();\n            }\n\n            if (oldValue && value && value.getTime() !== oldValue.getTime() ||\n                oldValue && !value ||\n                !oldValue && value\n            ) {\n                that._oldValue = value;\n                that.trigger(CHANGE);\n                that.element.trigger(CHANGE);\n            }\n        },\n\n        _input: function () {\n            var that = this;\n            var element = that.element[0];\n            var blinkInvalid = false;\n\n            if (kendo._activeElement() !== element) {\n                return;\n            }\n\n            var diff = approximateStringMatching(\n                this._oldText,\n                this._format,\n                this.element[0].value,\n                caret(this.element[0])[0]);\n\n            var navigationOnly = (diff.length === 1 && diff[0][1] === \" \");\n            if (!navigationOnly) {\n                for (var i = 0; i < diff.length; i++) {\n                    var valid = this._dateTime.parsePart(diff[i][0], diff[i][1]);\n                    blinkInvalid = blinkInvalid || !valid;\n                }\n            }\n            this._updateElementValue();\n\n            if (diff.length && diff[0][0] !== \" \") {\n                this._selectSegment(diff[0][0]);\n\n                //android fix\n                if (!navigationOnly) {\n                    var difSym = diff[0][0];\n                    setTimeout(function () { that._selectSegment(difSym); });\n                }\n            }\n            if (navigationOnly) {\n                var newEvent = { keyCode: 39, preventDefault: function () { } };\n                this._keydown(newEvent);\n            }\n            if (blinkInvalid) {\n                that._blinkInvalidState();\n            }\n        },\n\n        _blinkInvalidState: function () {\n            var that = this;\n\n            that._addInvalidState();\n            clearTimeout(that._invalidStateTimeout);\n            that._invalidStateTimeout = setTimeout(proxy(that._removeInvalidState, that), 100);\n        },\n\n        _addInvalidState: function() {\n            var that = this;\n\n            that.wrapper.addClass(STATEINVALID);\n            that._validationIcon.removeClass(\"k-hidden\");\n        },\n\n        _removeInvalidState: function () {\n            var that = this;\n\n            that.wrapper.removeClass(STATEINVALID);\n            that._validationIcon.addClass(\"k-hidden\");\n            that._invalidStateTimeout = null;\n        },\n\n        _mouseUp: function () {\n            var selection = caret(this.element[0]);\n            if (selection[0] === selection[1]) {\n                this._selectNearestSegment();\n            }\n        },\n\n        _scroll: function (e) {\n            if (kendo._activeElement() !== this.element[0] || this.element.is(\"[readonly]\")) {\n                return;\n            }\n            e = window.event || e;\n\n            var newEvent = { keyCode: 37, preventDefault: function () { } };\n\n            if (e.shiftKey) {\n                newEvent.keyCode = (e.wheelDelta || -e.detail) > 0 ? 37 : 39;\n            } else {\n                newEvent.keyCode = (e.wheelDelta || -e.detail) > 0 ? 38 : 40;\n            }\n            this._keydown(newEvent);\n            e.returnValue = false;\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n        },\n\n        _form: function () {\n            var that = this;\n            var element = that.element;\n            var formId = element.attr(\"form\");\n            var form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n            var initialValue = element[0].value;\n\n            if (!initialValue && that.options.value) {\n                initialValue = that.options.value;\n            }\n\n            if (form[0]) {\n                that._resetHandler = function () {\n                    setTimeout(function () {\n                        that.value(initialValue);\n                    });\n                };\n\n                that._formElement = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _paste: function (e) {\n            e.preventDefault();\n        },\n\n        _keydown: function (e) {\n            var key = e.keyCode;\n            var selection;\n            if (key == 37 || key == 39) { //left/right\n                e.preventDefault();\n                selection = caret(this.element[0]);\n                if (selection[0] != selection[1]) {\n                    this._selectNearestSegment();\n                }\n                var dir = (key == 37) ? -1 : 1;\n                var index = (dir == -1) ? caret(this.element[0])[0] - 1 : caret(this.element[0])[1] + 1;\n                while (index >= 0 && index < this._format.length) {\n                    if (knownSymbols.indexOf(this._format[index]) >= 0) {\n                        this._selectSegment(this._format[index]);\n                        break;\n                    }\n                    index += dir;\n                }\n            }\n            if (key == 38 || key == 40) { //up/down\n                e.preventDefault();\n                selection = caret(this.element[0]);\n                var symbol = this._format[selection[0]];\n                if (knownSymbols.indexOf(symbol) >= 0) {\n                    var interval = 1;\n                    if (symbol == 'm') {\n                        interval = this.options.interval || 1;\n                    }\n                    this._dateTime.modifyPart(symbol, key == 38 ? interval * 1 : interval * -1);\n                    this._updateElementValue();\n                    this._selectSegment(symbol);\n                    this.element.trigger(CHANGE);\n                }\n            }\n            if (kendo.support.browser.msie && kendo.support.browser.version < 10) {\n                var keycode = e.keyCode ? e.keyCode : e.which;\n                if (keycode === 8 || keycode === 46) {\n                    var that = this;\n                    setTimeout(function () {\n                        that._input();\n                    }, 0);\n                }\n            }\n            if (key === keys.ENTER){\n                this._change();\n            }\n        },\n\n        _selectNearestSegment: function () {\n            var selection = caret(this.element[0]);\n            var start = selection[0];\n            for (var i = start, j = start - 1; i < this._format.length || j >= 0; i++ , j--) {\n                if (i < this._format.length && knownSymbols.indexOf(this._format[i]) !== -1) {\n                    this._selectSegment(this._format[i]);\n                    return;\n                }\n                if (j >= 0 && knownSymbols.indexOf(this._format[j]) !== -1) {\n                    this._selectSegment(this._format[j]);\n                    return;\n                }\n            }\n        },\n\n        _selectSegment: function (symbol) {\n            var begin = -1, end = 0;\n            for (var i = 0; i < this._format.length; i++) {\n                if (this._format[i] === symbol) {\n                    end = i + 1;\n                    if (begin === -1) {\n                        begin = i;\n                    }\n                }\n            }\n            if (begin < 0) {\n                begin = 0;\n            }\n            caret(this.element, begin, end);\n        }\n\n    });\n\n    kendo.cssProperties.registerPrefix(\"DateInput\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"DateInput\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    ui.plugin(DateInput);\n\n    var customDateTime = function (initDate, initFormat, initCulture, initMessages) {\n\n        var value = null;\n        var year = true, month = true, date = true, hours = true, minutes = true, seconds = true, milliseconds = true;\n        var typedMonthPart = \"\";\n        var typedDayPeriodPart = \"\";\n        var placeholders = {};\n\n        //TODO: rewrite pad method\n        var zeros = [\"\", \"0\", \"00\", \"000\", \"0000\"];\n        function pad(number, digits, end) {\n            number = number + \"\";\n            digits = digits || 2;\n            end = digits - number.length;\n\n            if (end) {\n                return zeros[digits].substring(0, end) + number;\n            }\n\n            return number;\n        }\n        var dateFormatRegExp = /dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|\"[^\"]*\"|'[^']*'/g;\n        var months = null, calendar = null, days = null, returnsFormat = false;\n        var matcher = function (match) {\n            var mins, sign;\n            var result;\n\n            switch (match) {\n                case (\"d\"): result = date ? value.getDate() : placeholders.day; break;\n                case (\"dd\"): result = date ? pad(value.getDate()) : placeholders.day; break;\n                case (\"ddd\"): result = date && month && year ? days.namesAbbr[value.getDay()] : placeholders.weekday; break;\n                case (\"dddd\"): result = date && month && year ? days.names[value.getDay()] : placeholders.weekday; break;\n\n                case (\"M\"): result = month ? value.getMonth() + 1 : placeholders.month; break;\n                case (\"MM\"): result = month ? pad(value.getMonth() + 1) : placeholders.month; break;\n                case (\"MMM\"): result = month ? months.namesAbbr[value.getMonth()] : placeholders.month; break;\n                case (\"MMMM\"): result = month ? months.names[value.getMonth()] : placeholders.month; break;\n\n                case (\"yy\"): result = year ? pad(value.getFullYear() % 100) : placeholders.year; break;\n                case (\"yyyy\"): result = year ? pad(value.getFullYear(), 4) : placeholders.year; break;\n\n                case (\"h\"): result = hours ? value.getHours() % 12 || 12 : placeholders.hour; break;\n                case (\"hh\"): result = hours ? pad(value.getHours() % 12 || 12) : placeholders.hour; break;\n                case (\"H\"): result = hours ? value.getHours() : placeholders.hour; break;\n                case (\"HH\"): result = hours ? pad(value.getHours()) : placeholders.hour; break;\n\n                case (\"m\"): result = minutes ? value.getMinutes() : placeholders.minute; break;\n                case (\"mm\"): result = minutes ? pad(value.getMinutes()) : placeholders.minute; break;\n                case (\"s\"): result = seconds ? value.getSeconds() : placeholders.second; break;\n                case (\"ss\"): result = seconds ? pad(value.getSeconds()) : placeholders.second; break;\n                case (\"f\"): result = milliseconds ? Math.floor(value.getMilliseconds() / 100) : milliseconds; break;\n                case (\"ff\"):\n                    result = value.getMilliseconds();\n                    if (result > 99) {\n                        result = Math.floor(result / 10);\n                    }\n                    result = milliseconds ? pad(result) : match;\n                    break;\n                case (\"fff\"): result = milliseconds ? pad(value.getMilliseconds(), 3) : match; break;\n                case (\"tt\"): result = hours ? (value.getHours() < 12 ? calendar.AM[0] : calendar.PM[0]) : placeholders.dayperiod; break;\n                case (\"zzz\"):\n                    mins = value.getTimezoneOffset();\n                    sign = mins < 0;\n                    result = Math.abs(mins / 60).toString().split(\".\")[0];\n                    mins = Math.abs(mins) - (result * 60);\n                    result = (sign ? \"+\" : \"-\") + pad(result);\n                    result += \":\" + pad(mins);\n                    break;\n                case (\"z\"):\n                case (\"zz\"):\n                    result = value.getTimezoneOffset() / 60;\n                    sign = result < 0;\n                    result = Math.abs(result).toString().split(\".\")[0];\n                    result = (sign ? \"+\" : \"-\") + (match === \"zz\" ? pad(result) : result);\n                    break;\n            }\n            result = (result !== undefined ? result : match.slice(1, match.length - 1));\n\n            if (returnsFormat) {\n                result = \"\" + result;\n                var formatResult = \"\";\n                if (match == \"ddd\") { match = \"EEE\"; }\n                if (match == \"dddd\") { match = \"EEEE\"; }\n                for (var i = 0; i < result.length; i++) {\n                    formatResult += match[0];\n                }\n                return formatResult;\n            } else {\n                return result;\n            }\n        };\n\n        function generateMatcher(retFormat) {\n            returnsFormat = retFormat;\n            return matcher;\n        }\n\n        function setExisting(symbol, val) {\n            switch (symbol) {\n                case \"y\": year = val; break;\n                case \"M\": month = val;\n                    if (!val) {\n                        value.setMonth(0);\n                        typedMonthPart = \"\";\n                    }\n                    break;\n                case \"d\": date = val; break;\n                case \"H\":\n                case \"h\": hours = val;\n                    if (!val) {\n                        typedDayPeriodPart = \"\";\n                    }\n                    break;\n                case \"m\": minutes = val; break;\n                case \"s\": seconds = val; break;\n                default: return;\n            }\n        }\n\n        this.setValue = function (val) {\n            date = val;\n        };\n\n        this.getValue = function () {\n            return date;\n        };\n\n        this.modifyPart = function (symbol, offset) {\n            var newValue = new Date((value && value.getTime) ? value.getTime() : value);\n            switch (symbol) {\n                case \"y\": newValue.setFullYear(newValue.getFullYear() + offset); break;\n                case \"M\":\n                    var newMonth = newValue.getMonth() + offset;\n                    newValue.setMonth(newMonth);\n                    if (newValue.getMonth() % 12 !== (newMonth + 12) % 12) {\n                        //handle case when new month does not have such date\n                        newValue.setDate(1);\n                        newValue.setMonth(newMonth);\n                    }\n                    break;\n                case \"d\":\n                case \"E\": newValue.setDate(newValue.getDate() + offset); break;\n                case \"H\":\n                case \"h\": newValue.setHours(newValue.getHours() + offset); break;\n                case \"m\": newValue.setMinutes(newValue.getMinutes() + offset); break;\n                case \"s\": newValue.setSeconds(newValue.getSeconds() + offset); break;\n                case \"t\": newValue.setHours((newValue.getHours() + 12) % 24); break;\n                default: break;\n            }\n            if (newValue.getFullYear() > 0) {\n                setExisting(symbol, true);\n                value = newValue;\n            }\n        };\n\n        this.parsePart = function (symbol, currentChar) {\n            if (!currentChar) {\n                setExisting(symbol, false);\n                return true;\n            }\n            var newValue = new Date((value && value.getTime) ? value.getTime() : value);\n            var lastDateOfMonth = new Date(newValue.getFullYear(), newValue.getMonth() + 1, 0).getDate();\n            var newHours;\n            switch (symbol) {\n                case \"d\":\n                    var newDate = (date ? newValue.getDate() * 10 : 0) + parseInt(currentChar, 10);\n                    if (isNaN(newDate)) { return; }\n                    while (newDate > lastDateOfMonth) {\n                        newDate = parseInt(newDate.toString().slice(1), 10);\n                    }\n                    if (newDate < 1) {\n                        date = false;\n                    } else {\n                        newValue.setDate(newDate);\n                        if (newValue.getMonth() !== value.getMonth()) {\n                            return;\n                        }\n                        date = true;\n                    }\n                    break;\n                case \"M\":\n                    var newMonth = (month ? (newValue.getMonth() + 1) * 10 : 0) + parseInt(currentChar, 10);\n                    if (!isNaN(newMonth)) {\n                        while (newMonth > 12) {\n                            newMonth = parseInt(newMonth.toString().slice(1), 10);\n                        }\n                        if (newMonth < 1) {\n                            month = false;\n                        } else {\n                            newValue.setMonth(newMonth - 1);\n                            if (newValue.getMonth() !== newMonth - 1) {\n                                newValue.setDate(1);\n                                newValue.setMonth(newMonth - 1);\n                            }\n                            month = true;\n                        }\n                    }\n                    else {\n                        var monthNames = calendar.months.names;\n                        typedMonthPart += currentChar.toLowerCase();\n\n                        while (typedMonthPart.length > 0) {\n                            for (var i = 0; i < monthNames.length; i++) {\n                                if (monthNames[i].toLowerCase().indexOf(typedMonthPart) === 0) {\n                                    newValue.setMonth(i);\n                                    month = true;\n                                    value = newValue;\n                                    return true;\n                                }\n                            }\n                            typedMonthPart = typedMonthPart.substring(1, typedMonthPart.length);\n                        }\n                        return false;\n                    }\n                    break;\n                case \"y\":\n                    var newYear = (year ? (newValue.getFullYear()) * 10 : 0) + parseInt(currentChar, 10);\n                    if (isNaN(newYear)) {return;}\n                    while (newYear > 9999) {\n                        newYear = parseInt(newYear.toString().slice(1), 10);\n                    }\n                    if (newYear < 1) {\n                        year = false;\n                    } else {\n                        newValue.setFullYear(newYear);\n                        year = true;\n                    }\n                    break;\n                case \"h\":\n                    newHours = (hours ? (newValue.getHours() % 12 || 12) * 10 : 0) + parseInt(currentChar, 10);\n                    if (isNaN(newHours)) { return; }\n                    while (newHours > 12) {\n                        newHours = parseInt(newHours.toString().slice(1), 10);\n                    }\n                    newValue.setHours(Math.floor(newValue.getHours() / 12) * 12 + newHours % 12);\n                    hours = true;\n                    break;\n                case \"H\":\n                    newHours = (hours ? (newValue.getHours()) * 10 : 0) + parseInt(currentChar, 10);\n                    if (isNaN(newHours)) { return; }\n                    while (newHours > 23) {\n                        newHours = parseInt(newHours.toString().slice(1), 10);\n                    }\n                    newValue.setHours(newHours);\n                    hours = true;\n                    break;\n                case \"m\":\n                    var newMinutes = (minutes ? (newValue.getMinutes()) * 10 : 0) + parseInt(currentChar, 10);\n                    if (isNaN(newMinutes)) { return; }\n                    while (newMinutes > 59) {\n                        newMinutes = parseInt(newMinutes.toString().slice(1), 10);\n                    }\n                    newValue.setMinutes(newMinutes);\n                    minutes = true;\n                    break;\n                case \"s\":\n                    var newSeconds = (seconds ? (newValue.getSeconds()) * 10 : 0) + parseInt(currentChar, 10);\n                    if (isNaN(newSeconds)) { return; }\n                    while (newSeconds > 59) {\n                        newSeconds = parseInt(newSeconds.toString().slice(1), 10);\n                    }\n                    newValue.setSeconds(newSeconds);\n                    seconds = true;\n                    break;\n                case \"t\":\n                    if (hours) {\n                        typedDayPeriodPart += currentChar.toLowerCase();\n                        while (typedDayPeriodPart.length > 0) {\n                            if (calendar.AM[0].toLowerCase().indexOf(typedDayPeriodPart) === 0 && newValue.getHours() >= 12 ||\n                                calendar.PM[0].toLowerCase().indexOf(typedDayPeriodPart) === 0 && newValue.getHours() < 12) {\n                                newValue.setHours((newValue.getHours() + 12) % 24);\n                                value = newValue;\n                                return true;\n                            }\n                            typedDayPeriodPart = typedDayPeriodPart.substring(1, typedDayPeriodPart.length);\n                        }\n                        return false;\n                    }\n                    break;\n                default: break;\n            }\n            value = newValue;\n            return true;\n        };\n\n        this.toPair = function (format, culture , messages) {\n            if (!format) {\n                return [\"\", \"\"];\n            }\n            culture = kendo.getCulture(culture);\n            calendar = culture.calendars.standard;\n            format = calendar.patterns[format] || format;\n            days = calendar.days;\n            months = calendar.months;\n            placeholders = messages;\n            return [\n                format.replace(dateFormatRegExp, generateMatcher(false)),\n                format.replace(dateFormatRegExp, generateMatcher(true))\n            ];\n        };\n\n        this.getDateObject = function () {\n            return (year && month && date && hours && minutes && seconds && milliseconds) ?\n                new Date(value.getTime()) : null;\n        };\n\n        if (!initDate) {\n            value = new Date();\n            var sampleFormat = this.toPair(initFormat, initCulture, initMessages)[1];\n            for (var i = 0; i < sampleFormat.length; i++) {\n                setExisting(sampleFormat[i], false);\n            }\n        } else {\n            value = new Date(initDate.getTime());\n        }\n    };\n\n    function approximateStringMatching(oldText, oldFormat, newText, caret){\n        var oldTextSeparator = oldText[caret + oldText.length - newText.length];\n        oldText = oldText.substring(0, caret + oldText.length - newText.length);\n        newText = newText.substring(0, caret);\n        var diff = [];\n        var i;\n        //handle typing single character over the same selection\n        if (oldText === newText && caret > 0) {\n            diff.push([oldFormat[caret - 1], newText[caret - 1]]);\n            return diff;\n        }\n        if (oldText.indexOf(newText) === 0 && (newText.length === 0 || oldFormat[newText.length - 1] !== oldFormat[newText.length])) {\n            //handle delete/backspace\n            var deletedSymbol = \"\";\n            for (i = newText.length; i < oldText.length; i++) {\n                if (oldFormat[i] !== deletedSymbol && knownSymbols.indexOf(oldFormat[i]) >= 0) {\n                    deletedSymbol = oldFormat[i];\n                    diff.push([deletedSymbol, \"\"]);\n                }\n            }\n            return diff;\n        }\n\n        //handle entering space or separator, for nagivation to next item\n        if (newText[newText.length - 1] === \" \" || newText[newText.length - 1] === oldTextSeparator) {\n            return [[oldFormat[caret - 1], \" \"]];\n        }\n\n        //handle inserting text (new text is longer than previous)\n        //handle typing over literal as well\n        if (newText.indexOf(oldText) === 0 || knownSymbols.indexOf(oldFormat[caret - 1]) === -1) {\n            var symbol = oldFormat[0];\n            for (i = Math.max(0, oldText.length - 1); i < oldFormat.length; i++) {\n                if (knownSymbols.indexOf(oldFormat[i]) >= 0) {\n                    symbol = oldFormat[i];\n                    break;\n                }\n            }\n            return [[symbol, newText[caret - 1]]];\n        }\n        //handle typing over correctly selected part\n        return [[oldFormat[caret - 1], newText[caret - 1]]];\n}\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.datepicker',[ \"./kendo.calendar\", \"./kendo.popup\",  \"./kendo.dateinput\", \"./kendo.html.button\"], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"datepicker\",\n    name: \"DatePicker\",\n    category: \"web\",\n    description: \"The DatePicker widget allows the user to select a date from a calendar or by direct input.\",\n    depends: [ \"calendar\", \"popup\", \"html.button\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n    ui = kendo.ui,\n    html = kendo.html,\n    Widget = ui.Widget,\n    parse = kendo.parseDate,\n    keys = kendo.keys,\n    support = kendo.support,\n    template = kendo.template,\n    activeElement = kendo._activeElement,\n    DIV = \"<div />\",\n    SPAN = \"<span />\",\n    ns = \".kendoDatePicker\",\n    CLICK = \"click\" + ns,\n    UP = support.mouseAndTouchPresent ? kendo.applyEventMap(\"up\", ns.slice(1)) : CLICK,\n    OPEN = \"open\",\n    CLOSE = \"close\",\n    CHANGE = \"change\",\n    DISABLED = \"disabled\",\n    READONLY = \"readonly\",\n    FOCUSED = \"k-focus\",\n    SELECTED = \"k-state-selected\",\n    STATEDISABLED = \"k-disabled\",\n    HOVER = \"k-hover\",\n    HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n    MOUSEDOWN = \"mousedown\" + ns,\n    ID = \"id\",\n    MIN = \"min\",\n    MAX = \"max\",\n    MONTH = \"month\",\n    ARIA_DISABLED = \"aria-disabled\",\n    ARIA_READONLY = \"aria-readonly\",\n    ARIA_EXPANDED = \"aria-expanded\",\n    ARIA_HIDDEN = \"aria-hidden\",\n    calendar = kendo.calendar,\n    isInRange = calendar.isInRange,\n    restrictValue = calendar.restrictValue,\n    isEqualDatePart = calendar.isEqualDatePart,\n    extend = $.extend,\n    proxy = $.proxy,\n    DATE = Date;\n\n    function normalize(options) {\n        var parseFormats = options.parseFormats,\n            format = options.format;\n\n        calendar.normalize(options);\n\n\n        parseFormats = Array.isArray(parseFormats) ? parseFormats : [parseFormats];\n\n        if (!parseFormats.length) {\n            parseFormats.push(\"yyyy-MM-dd\");\n        }\n\n        if ($.inArray(format, parseFormats) === -1) {\n            parseFormats.splice(0, 0, options.format);\n        }\n\n        options.parseFormats = parseFormats;\n    }\n\n    function preventDefault(e) {\n        e.preventDefault();\n    }\n\n    var DateView = function(options) {\n        var that = this, id,\n            body = document.body,\n            div = $(DIV).attr(ARIA_HIDDEN, \"true\")\n                        .addClass(\"k-calendar-container\");\n\n        that.options = options = options || {};\n        id = options.id;\n\n        if(!options.omitPopup){\n            div.appendTo(body);\n            that.popup = new ui.Popup(div, extend(options.popup, options, { name: \"Popup\", isRtl: kendo.support.isRtl(options.anchor) }));\n        } else {\n            div = options.dateDiv;\n        }\n        if (id) {\n            id += \"_dateview\";\n\n            div.attr(ID, id);\n            that._dateViewID = id;\n        }\n        that.div = div;\n\n        that.value(options.value);\n    };\n\n    DateView.prototype = {\n        _calendar: function() {\n            var that = this;\n            var calendar = that.calendar;\n            var options = that.options;\n            var div;\n\n            if (!calendar) {\n                div = $(DIV).attr(ID, kendo.guid())\n                            .appendTo(options.omitPopup ? options.dateDiv : that.popup.element)\n                            .on(MOUSEDOWN, preventDefault)\n                            .on(CLICK, \"td:has(.k-link)\", proxy(that._click, that));\n\n\n                that.calendar = calendar = new ui.Calendar(div, { componentType: options.componentType, size: options.size, messages: options.messages });\n                that._setOptions(options);\n\n                div.addClass(kendo.getValidCssClass(\"k-calendar-\", \"size\", options.size));\n\n                calendar.navigate(that._value || that._current, options.start);\n\n                that.value(that._value);\n            }\n        },\n\n        _setOptions: function(options) {\n            this.calendar.setOptions({\n                focusOnNav: false,\n                change: options.change,\n                culture: options.culture,\n                dates: options.dates,\n                depth: options.depth,\n                footer: options.footer,\n                format: options.format,\n                max: options.max,\n                min: options.min,\n                month: options.month,\n                weekNumber: options.weekNumber,\n                start: options.start,\n                messages: options.messages,\n                disableDates: options.disableDates\n            });\n        },\n\n        setOptions: function(options) {\n            var old = this.options;\n            var disableDates = options.disableDates;\n\n            if (disableDates) {\n                options.disableDates = calendar.disabled(disableDates);\n            }\n\n            this.options = extend(old, options, {\n                change: old.change,\n                close: old.close,\n                open: old.open\n            });\n\n            if (this.calendar) {\n                this._setOptions(this.options);\n            }\n        },\n\n        destroy: function() {\n            if(this.popup){\n                this.popup.destroy();\n            }\n        },\n\n        open: function() {\n            var that = this;\n            var popupHovered;\n\n            that._calendar();\n\n            // In some cases when the popup is opened resize is triggered which will cause it to close\n            // Setting the below flag will prevent this from happening\n            // Reference: https://github.com/telerik/kendo/pull/7553\n            popupHovered = that.popup._hovered;\n            that.popup._hovered = true;\n\n            that.popup.open();\n\n            setTimeout(function() {\n                that.popup._hovered = popupHovered;\n            }, 1);\n        },\n\n        close: function() {\n            if (this.popup) {\n                this.popup.close();\n            }\n        },\n\n        min: function(value) {\n            this._option(MIN, value);\n        },\n\n        max: function(value) {\n            this._option(MAX, value);\n        },\n\n        toggle: function() {\n            var that = this;\n\n            that[that.popup.visible() ? CLOSE : OPEN]();\n        },\n\n        move: function(e) {\n            var that = this,\n                key = e.keyCode,\n                calendar = that.calendar,\n                selectIsClicked = e.ctrlKey && key == keys.DOWN || key == keys.ENTER,\n                handled = false;\n\n            if (e.altKey) {\n                if (key == keys.DOWN) {\n                    that.open();\n                    e.preventDefault();\n                    handled = true;\n                } else if (key == keys.UP) {\n                    that.close();\n                    e.preventDefault();\n                    handled = true;\n                }\n\n            } else if (that.popup && that.popup.visible()) {\n\n                if (key == keys.ESC || (selectIsClicked && calendar._cell.hasClass(SELECTED))) {\n                    that.close();\n                    e.preventDefault();\n                    return true;\n                }\n                //spacebar selects a date in the calendar\n                if (key != keys.SPACEBAR) {\n                    that._current = calendar._move(e);\n                }\n\n                handled = true;\n            }\n\n            return handled;\n        },\n\n        current: function(date) {\n            this._current = date;\n            if (this.calendar) {\n                this.calendar._focus(date);\n            }\n        },\n\n        value: function(value) {\n            var that = this,\n                calendar = that.calendar,\n                options = that.options,\n                disabledDate = options.disableDates;\n\n            if (disabledDate && disabledDate(value)) {\n                value = null;\n            }\n\n            that._value = value;\n            that._current = new DATE(+restrictValue(value, options.min, options.max));\n\n            if (calendar) {\n                calendar.value(value);\n            }\n        },\n\n        _click: function(e) {\n\n            if (e.currentTarget.className.indexOf(SELECTED) !== -1) {\n                this.calendar.trigger(\"change\");\n                this.close();\n            }\n        },\n\n        _option: function(option, value) {\n            var that = this;\n            var calendar = that.calendar;\n\n            that.options[option] = value;\n\n            if (calendar) {\n                calendar[option](value);\n            }\n        }\n    };\n\n    DateView.normalize = normalize;\n\n    kendo.DateView = DateView;\n\n    var DatePicker = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                initialValue,\n                disabled,\n                div;\n\n            Widget.fn.init.call(that, element, options);\n            element = that.element;\n            options = that.options;\n\n            options.disableDates = kendo.calendar.disabled(options.disableDates);\n\n            options.min = parse(element.attr(\"min\")) || parse(options.min);\n            options.max = parse(element.attr(\"max\")) || parse(options.max);\n\n            normalize(options);\n\n            that._initialOptions = extend({}, options);\n\n            that._wrapper();\n\n            that.dateView = new DateView(extend({}, options, {\n                id: element.attr(ID),\n                anchor: that.wrapper,\n                change: function() {\n                    // calendar is the current scope\n                    that._change(this.value());\n                    that.close();\n                },\n                close: function(e) {\n                    if (that.trigger(CLOSE)) {\n                        e.preventDefault();\n                    } else {\n                        element.attr(ARIA_EXPANDED, false);\n                        div.attr(ARIA_HIDDEN, true);\n                    }\n                },\n                open: function(e) {\n                    var options = that.options,\n                        date;\n\n                    if (that.trigger(OPEN)) {\n                        e.preventDefault();\n                    } else {\n                        if (that.element.val() !== that._oldText) {\n                            date = parse(element.val(), options.parseFormats, options.culture);\n\n                            that.dateView[date ? \"current\" : \"value\"](date);\n                        }\n\n                        element.attr(ARIA_EXPANDED, true);\n                        div.attr(ARIA_HIDDEN, false);\n\n                        that._updateARIA(date);\n\n                    }\n                }\n            }));\n            div = that.dateView.div;\n\n            that._icon();\n\n            try {\n                element[0].setAttribute(\"type\", \"text\");\n            } catch(e) {\n                element[0].type = \"text\";\n            }\n\n            element\n                .addClass(\"k-input-inner\")\n                .attr({\n                    role: \"combobox\",\n                    \"aria-expanded\": false,\n                    \"aria-haspopup\": \"grid\",\n                    \"aria-owns\": that.dateView._dateViewID,\n                    \"autocomplete\": \"off\"\n                });\n            that._reset();\n            that._template();\n\n            disabled = element.is(\"[disabled]\") || $(that.element).parents(\"fieldset\").is(':disabled');\n            if (disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(element.is(\"[readonly]\"));\n            }\n\n            initialValue = parse(options.value || that.element.val(), options.parseFormats, options.culture);\n\n            that._createDateInput(options);\n\n            that._old = that._update(initialValue || that.element.val());\n            that._oldText = element.val();\n            that._applyCssClasses();\n\n            kendo.notify(that);\n        },\n        events: [\n        OPEN,\n        CLOSE,\n        CHANGE],\n        options: {\n            name: \"DatePicker\",\n            value: null,\n            footer: \"\",\n            format: \"\",\n            culture: \"\",\n            parseFormats: [],\n            min: new Date(1900, 0, 1),\n            max: new Date(2099, 11, 31),\n            start: MONTH,\n            depth: MONTH,\n            animation: {},\n            month: {},\n            dates: [],\n            disableDates: null,\n            ARIATemplate: 'Current focused #=data.valueType# is #=data.text#',\n            dateInput: false,\n            weekNumber: false,\n            messages: {\n                weekColumnHeader: \"\"\n            },\n            componentType: \"classic\",\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            var value = that._value;\n\n            Widget.fn.setOptions.call(that, options);\n\n            options = that.options;\n\n            options.min = parse(options.min);\n            options.max = parse(options.max);\n\n            normalize(options);\n\n            that._dateIcon.off(ns);\n            that._dateIcon.remove();\n\n            that.dateView.setOptions(options);\n            that._icon();\n            that._editable(options);\n            that._createDateInput(options);\n\n            if (!that._dateInput) {\n                that.element.val(kendo.toString(value, options.format, options.culture));\n            }\n\n            if (value) {\n                that._updateARIA(value);\n            }\n        },\n\n        _editable: function(options) {\n            var that = this,\n                icon = that._dateIcon.off(ns),\n                element = that.element.off(ns),\n                wrapper = that.wrapper.off(ns),\n                readonly = options.readonly,\n                disable = options.disable;\n\n            if (!readonly && !disable) {\n                wrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n                if(element && element.length) {\n                    element[0].removeAttribute(DISABLED);\n                    element[0].removeAttribute(READONLY);\n                }\n                element.attr(ARIA_DISABLED, false)\n                       .attr(ARIA_READONLY, false)\n                       .on(\"keydown\" + ns, proxy(that._keydown, that))\n                       .on(\"focusout\" + ns, proxy(that._blur, that))\n                       .on(\"focus\" + ns, function() {\n                           that.wrapper.addClass(FOCUSED);\n                       });\n\n               icon.on(UP, proxy(that._click, that))\n                   .on(MOUSEDOWN, preventDefault);\n            } else {\n                wrapper\n                    .addClass(disable ? STATEDISABLED : \"\")\n                    .removeClass(disable ? \"\" : STATEDISABLED);\n\n                element.attr(DISABLED, disable)\n                       .attr(READONLY, readonly)\n                       .attr(ARIA_DISABLED, disable)\n                       .attr(ARIA_READONLY, readonly);\n            }\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n            if (this._dateInput) {\n                this._dateInput._editable({\n                    readonly: readonly === undefined ? true : readonly,\n                    disable: false\n                });\n            }\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n            if (this._dateInput) {\n                this._dateInput._editable({\n                    readonly: false,\n                    disable: !(enable = enable === undefined ? true : enable)\n                });\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dateView.destroy();\n\n            that.element.off(ns);\n            that._dateIcon.off(ns);\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n        },\n\n        open: function() {\n            this.dateView.open();\n        },\n\n        close: function() {\n            this.dateView.close();\n        },\n\n        min: function(value) {\n            return this._option(MIN, value);\n        },\n\n        max: function(value) {\n            return this._option(MAX, value);\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            that._old = that._update(value);\n\n            if (that._old === null) {\n                if (that._dateInput) {\n                    that._dateInput.value(that._old);\n                } else {\n                    that.element.val(\"\");\n                }\n            }\n\n            that._oldText = that.element.val();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _blur: function() {\n            var that = this,\n                value = that.element.val();\n\n            that.close();\n            if (value !== that._oldText) {\n                that._change(value);\n                if (!value) {\n                    that.dateView.current(kendo.calendar.getToday());\n                }\n            }\n\n            that.wrapper.removeClass(FOCUSED);\n        },\n\n        _click: function(e) {\n            var that = this;\n\n            that.dateView.toggle();\n            that._focusElement(e.type);\n        },\n\n        _focusElement: function(eventType) {\n            var element = this.element;\n\n            if ((!support.touch || (support.mouseAndTouchPresent && !(eventType || \"\").match(/touch/i))) && element[0] !== activeElement()) {\n                element.trigger(\"focus\");\n            }\n        },\n\n        _change: function(value) {\n            var that = this,\n            oldValue = that.element.val(),\n            dateChanged;\n\n            value = that._update(value);\n            dateChanged = !kendo.calendar.isEqualDate(that._old, value);\n\n            var valueUpdated = dateChanged && !that._typing;\n            var textFormatted = oldValue !== that.element.val();\n\n            if (valueUpdated || textFormatted) {\n                that.element.trigger(CHANGE);\n            }\n\n            if (dateChanged) {\n                that._old = value;\n                that._oldText = that.element.val();\n\n                that.trigger(CHANGE);\n            }\n\n            that._typing = false;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                dateView = that.dateView,\n                value = that.element.val(),\n                handled = false;\n\n            if (!dateView.popup.visible() && e.keyCode == keys.ENTER && value !== that._oldText) {\n                that._change(value);\n            } else {\n                handled = dateView.move(e);\n                that._updateARIA(dateView._current);\n\n                if (!handled) {\n                    that._typing = true;\n                } else if (that._dateInput && e.stopImmediatePropagation) {\n                    e.stopImmediatePropagation();\n                }\n            }\n        },\n\n        _icon: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                icon;\n\n            icon = element.next(\"button.k-input-button\");\n\n            if (!icon[0]) {\n                icon = $(html.renderButton('<button aria-label=\"select\" tabindex=\"-1\" class=\"k-input-button k-button k-icon-button\"></button>', {\n                    icon: \"calendar\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null\n                })).insertAfter(element);\n            }\n\n            that._dateIcon = icon.attr({\n                \"role\": \"button\",\n                \"aria-controls\": that.dateView._dateViewID\n            });\n        },\n\n        _option: function(option, value) {\n            var that = this,\n                options = that.options;\n\n            if (value === undefined) {\n                return options[option];\n            }\n\n            value = parse(value, options.parseFormats, options.culture);\n\n            if (!value) {\n                return;\n            }\n\n            options[option] = new DATE(+value);\n            that.dateView[option](value);\n        },\n\n        _update: function(value) {\n            var that = this,\n                options = that.options,\n                min = options.min,\n                max = options.max,\n                current = that._value,\n                date = parse(value, options.parseFormats, options.culture),\n                isSameType = (date === null && current === null) || (date instanceof Date && current instanceof Date),\n                formattedValue;\n\n            if (options.disableDates(date)) {\n                date = null;\n                if (!that._old && !that.element.val()) {\n                    value = null;\n                }\n            }\n\n            if (+date === +current && isSameType) {\n                formattedValue = kendo.toString(date, options.format, options.culture);\n\n                if (formattedValue !== value && !(that._dateInput && !date)) {\n                    that.element.val(date === null ? value : formattedValue);\n                }\n\n                return date;\n            }\n\n            if (date !== null && isEqualDatePart(date, min)) {\n                date = restrictValue(date, min, max);\n            } else if (!isInRange(date, min, max)) {\n                date = null;\n            }\n\n            that._value = date;\n            that.dateView.value(date);\n            if (that._dateInput && date) {\n                that._dateInput.value(date || value);\n            } else {\n                that.element.val(kendo.toString(date || value, options.format, options.culture));\n            }\n            that._updateARIA(date);\n\n            return date;\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                wrapper;\n\n            wrapper = element.parents(\".k-datepicker\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap(SPAN).parent();\n            }\n\n            wrapper[0].style.cssText = element[0].style.cssText;\n            element.css({\n                height: element[0].style.height\n            });\n\n            that.wrapper = wrapper.addClass(\"k-datepicker k-input\")\n                .addClass(element[0].className).removeClass('input-validation-error');\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                options = that.options,\n                disabledDate = options.disableDates,\n                parseFormats = options.parseFormats.length ? options.parseFormats : null,\n                optionsValue = that._initialOptions.value,\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\"),\n                initialValue = element[0].defaultValue;\n\n            if (optionsValue && (disabledDate && disabledDate(optionsValue))) {\n                optionsValue = null;\n            }\n\n            if ((!initialValue || !kendo.parseDate(initialValue, parseFormats, options.culture)) && optionsValue) {\n                element.attr(\"value\", kendo.toString(optionsValue, options.format, options.culture));\n            }\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    that.value(optionsValue || element[0].defaultValue);\n                    that.max(that._initialOptions.max);\n                    that.min(that._initialOptions.min);\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _template: function() {\n            this._ariaTemplate = proxy(template(this.options.ARIATemplate), this);\n        },\n\n        _createDateInput: function(options) {\n            if (this._dateInput) {\n                this._dateInput.destroy();\n                this._dateInput = null;\n            }\n\n            if (options.dateInput ) {\n                this._dateInput = new ui.DateInput(this.element, {\n                    culture: options.culture,\n                    format: options.format,\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    rounded: options.rounded,\n                    min: options.min,\n                    max: options.max\n                });\n            }\n        },\n\n        _updateARIA: function(date) {\n            var that = this;\n            var calendar = that.dateView.calendar;\n\n            if (that.element && that.element.length) {\n                that.element[0].removeAttribute(\"aria-activedescendant\");\n            }\n\n            if (calendar) {\n                that.element.attr(\"aria-activedescendant\", calendar._updateAria(that._ariaTemplate, date));\n            }\n        }\n    });\n\n    kendo.cssProperties.registerPrefix(\"DatePicker\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"DatePicker\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    ui.plugin(DatePicker);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.validator',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"validator\",\n    name: \"Validator\",\n    category: \"web\",\n    description: \"The Validator offers an easy way to do a client-side form validation.\",\n    depends: [ \"core\" ]\n};\n\n/* jshint eqnull: true */\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        NS = \".kendoValidator\",\n        INVALIDMSG = \"k-invalid-msg\",\n        invalidMsgRegExp = new RegExp(INVALIDMSG,'i'),\n        INVALIDINPUT = \"k-invalid\",\n        VALIDINPUT = \"k-valid\",\n        VALIDATIONSUMMARY = \"k-validation-summary\",\n        INVALIDLABEL = \"k-text-error\",\n        MESSAGEBOX = \"k-messagebox k-messagebox-error\",\n        INPUTINNER = \".k-input-inner\",\n        INPUTWRAPPER = \".k-input\",\n        ARIAINVALID = \"aria-invalid\",\n        ARIADESCRIBEDBY = \"aria-describedby\",\n        emailRegExp = /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,\n        urlRegExp = /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i,\n        INPUTSELECTOR = \":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])\",\n        CHECKBOXSELECTOR = \":checkbox:not([disabled],[readonly])\",\n        NUMBERINPUTSELECTOR = \"[type=number],[type=range]\",\n        BLUR = \"blur\",\n        NAME = \"name\",\n        FORM = \"form\",\n        NOVALIDATE = \"novalidate\",\n        //events\n        VALIDATE = \"validate\",\n        CHANGE = \"change\",\n        VALIDATE_INPUT = \"validateInput\",\n        proxy = $.proxy,\n        patternMatcher = function(value, pattern) {\n            if (typeof pattern === \"string\") {\n                pattern = new RegExp('^(?:' + pattern + ')$');\n            }\n            return pattern.test(value);\n        },\n        matcher = function(input, selector, pattern) {\n            var value = input.val();\n\n            if (input.filter(selector).length && value !== \"\") {\n                return patternMatcher(value, pattern);\n            }\n            return true;\n        },\n        hasAttribute = function(input, name) {\n            if (input.length)  {\n                return input[0].attributes[name] != null;\n            }\n            return false;\n        };\n\n    if (!kendo.ui.validator) {\n        kendo.ui.validator = { rules: {}, messages: {}, allowSubmit: $.noop, validateOnInit: $.noop };\n    }\n\n    function resolveRules(element) {\n        var resolvers = kendo.ui.validator.ruleResolvers || {},\n            rules = {},\n            name;\n\n        for (name in resolvers) {\n            $.extend(true, rules, resolvers[name].resolve(element));\n        }\n        return rules;\n    }\n\n    function decode(value) {\n        return value.replace(/&amp/g, '&amp;')\n            .replace(/&quot;/g, '\"')\n            .replace(/&#39;/g, \"'\")\n            .replace(/&lt;/g, '<')\n            .replace(/&gt;/g, '>');\n    }\n\n    function numberOfDecimalDigits(value) {\n        value = (value + \"\").split('.');\n        if (value.length > 1) {\n            return value[1].length;\n        }\n        return 0;\n    }\n\n    function parseHtml(text) {\n        if ($.parseHTML) {\n            return $($.parseHTML(text));\n        }\n        return $(text);\n    }\n\n    function searchForMessageContainer(elements, fieldName) {\n        var containers = $(),\n            element,\n            attr;\n\n        for (var idx = 0, length = elements.length; idx < length; idx++) {\n            element = elements[idx];\n            if (invalidMsgRegExp.test(element.className)) {\n                attr = element.getAttribute(kendo.attr(\"for\"));\n                if (attr === fieldName) {\n                    containers = containers.add(element);\n                }\n            }\n        }\n        return containers;\n    }\n\n    function isLabelFor(label, element) {\n        if (!label) {\n            return false;\n        }\n        if (typeof label.nodeName !== 'string' || label.nodeName !== 'LABEL') {\n            return false;\n        }\n        if (typeof label.getAttribute('for') !== 'string' || typeof element.getAttribute('id') !== 'string') {\n            return false;\n        }\n        if (label.getAttribute('for') !== element.getAttribute('id')) {\n            return false;\n        }\n\n        return true;\n    }\n\n    var SUMMARYTEMPLATE = '<ul>' +\n        '#for(var i = 0; i < errors.length; i += 1){#' +\n            '<li><a data-field=\"#=errors[i].field#\" href=\"\\\\#\">#= errors[i].message #</a></li>' +\n        '# } #' +\n    '</ul>';\n\n    var Validator = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                resolved = resolveRules(element),\n                validateAttributeSelector = \"[\" + kendo.attr(\"validate\") + \"!=false]\";\n\n            options = options || {};\n\n            options.rules = $.extend({}, kendo.ui.validator.rules, resolved.rules, options.rules);\n            options.messages = $.extend({}, kendo.ui.validator.messages, resolved.messages, options.messages);\n\n            Widget.fn.init.call(that, element, options);\n\n            that._errorTemplate = kendo.template(that.options.errorTemplate);\n            that._summaryTemplate = kendo.template(that.options.validationSummary.template || SUMMARYTEMPLATE);\n\n            if (that.element.is(FORM)) {\n                that.element.attr(NOVALIDATE, NOVALIDATE);\n            }\n\n            that._inputSelector = INPUTSELECTOR + validateAttributeSelector;\n            that._checkboxSelector = CHECKBOXSELECTOR + validateAttributeSelector;\n\n            that._errors = {};\n            that._attachEvents();\n            that._isValidated = false;\n\n            if (that._validateOnInit()) {\n                that.validate();\n            }\n        },\n\n        events: [ VALIDATE, CHANGE, VALIDATE_INPUT ],\n\n        options: {\n            name: \"Validator\",\n            errorTemplate: '<span class=\"k-form-error\">#= message #</span>',\n            messages: {\n                required: \"{0} is required\",\n                pattern: \"{0} is not valid\",\n                min: \"{0} should be greater than or equal to {1}\",\n                max: \"{0} should be smaller than or equal to {1}\",\n                step: \"{0} is not valid\",\n                email: \"{0} is not valid email\",\n                url: \"{0} is not valid URL\",\n                date: \"{0} is not valid date\",\n                dateCompare: \"End date should be greater than or equal to the start date\",\n                captcha: \"The text you entered doesn't match the image.\"\n            },\n            rules: {\n                required: function(input) {\n                    var noNameCheckbox = !input.attr(\"name\") && !input.is(\":checked\"),\n                        name = input.attr(\"name\"),\n                        quote = !!name && name.indexOf(\"'\") > -1 ? '\\\"' : \"'\",\n                        namedCheckbox = input.attr(\"name\") && !this.element.find(\"input[name=\" + quote + input.attr(\"name\") + quote + \"]:checked\").length,\n                        checkbox = input.filter(\"[type=checkbox]\").length && (noNameCheckbox || namedCheckbox),\n                        radio = input.filter(\"[type=radio]\").length && !this.element.find(\"input[name=\"  + quote + input.attr(\"name\") + quote + \"]:checked\").length,\n                        value = input.val();\n\n                    return !(hasAttribute(input, \"required\") && (!value || value === \"\" || value.length === 0 || checkbox || radio));\n                },\n                pattern: function(input) {\n                    if (input.filter(\"[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]\").filter(\"[pattern]\").length && input.val() !== \"\") {\n                        return patternMatcher(input.val(), input.attr(\"pattern\"));\n                    }\n                    return true;\n                },\n                min: function(input) {\n                    if (input.filter(NUMBERINPUTSELECTOR + \",[\" + kendo.attr(\"type\") + \"=number]\").filter(\"[min]\").length && input.val() !== \"\") {\n                        var min = parseFloat(input.attr(\"min\")) || 0,\n                            val = kendo.parseFloat(input.val());\n\n                        return min <= val;\n                    }\n                    return true;\n                },\n                max: function(input) {\n                    if (input.filter(NUMBERINPUTSELECTOR + \",[\" + kendo.attr(\"type\") + \"=number]\").filter(\"[max]\").length && input.val() !== \"\") {\n                        var max = parseFloat(input.attr(\"max\")) || 0,\n                            val = kendo.parseFloat(input.val());\n\n                        return max >= val;\n                    }\n                    return true;\n                },\n                step: function(input) {\n                    if (input.filter(NUMBERINPUTSELECTOR + \",[\" + kendo.attr(\"type\") + \"=number]\").filter(\"[step]\").length && input.val() !== \"\") {\n                        var min = parseFloat(input.attr(\"min\")) || 0,\n                            step = parseFloat(input.attr(\"step\")) || 1,\n                            val = parseFloat(input.val()),\n                            decimals = numberOfDecimalDigits(step),\n                            raise;\n\n                        if (decimals) {\n                            raise = Math.pow(10, decimals);\n                            return ((Math.floor((val-min)*raise))%(step*raise)) / Math.pow(100, decimals) === 0;\n                        }\n                        return ((val-min)%step) === 0;\n                    }\n                    return true;\n                },\n                email: function(input) {\n                    return matcher(input, \"[type=email],[\" + kendo.attr(\"type\") + \"=email]\", emailRegExp);\n                },\n                url: function(input) {\n                    return matcher(input, \"[type=url],[\" + kendo.attr(\"type\") + \"=url]\", urlRegExp);\n                },\n                date: function(input) {\n                    if (input.filter(\"[type^=date],[\" + kendo.attr(\"type\") + \"=date]\").length && input.val() !== \"\") {\n                        return kendo.parseDate(input.val(), input.attr(kendo.attr(\"format\"))) !== null;\n                    }\n                    return true;\n                },\n                captcha: function (input) {\n                    if (input.filter(\"[\" + kendo.attr(\"role\") + \"=captcha]\").length) {\n                        var that = this,\n                            captcha = kendo.widgetInstance(input),\n                            isValidated = function(isValid){\n                                return typeof(isValid) !== 'undefined' && isValid !== null;\n                            };\n\n                        if (!input.data(\"captcha_validating\") && !isValidated(captcha.isValid()) && !!captcha.getCaptchaId()) {\n                            input.data(\"captcha_validating\", true);\n                            that._validating = true;\n                            captcha.validate().done(function(){\n                                that._validating = false;\n                                that._checkElement(input);\n                            }).fail(function(data){\n                                that._validating = false;\n                                if(data.error && data.error === \"handler_not_defined\") {\n                                    window.console.warn(\"Captcha's validationHandler is not defined! You should either define a proper validation endpoint or declare a callback function to ensure the required behavior.\");\n                                }\n                            });\n                        }\n\n                        if (isValidated(captcha.isValid())){\n                            input.removeData(\"captcha_validating\");\n                            return captcha.isValid();\n                        }\n                    }\n                    return true;\n                }\n            },\n            validateOnBlur: true,\n            validationSummary: false\n        },\n\n        _allowSubmit: function() {\n            return kendo.ui.validator.allowSubmit(this.element, this.errors());\n        },\n\n        _validateOnInit: function() {\n            return kendo.ui.validator.validateOnInit(this.element);\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.element.off(NS);\n\n            if (this.validationSummary) {\n                this.validationSummary.off(NS);\n                this.validationSummary = null;\n            }\n        },\n\n        value: function() {\n            if (!this._isValidated) {\n                return false;\n            }\n\n            return this.errors().length === 0;\n        },\n\n        _submit: function(e) {\n            if ((!this.validate() && !this._allowSubmit()) || this._validating) {\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                e.preventDefault();\n                return false;\n            }\n            return true;\n        },\n\n        _checkElement: function(element) {\n            var state = this.value();\n\n            this.validateInput(element);\n\n            if (this.value() !== state) {\n                this.trigger(CHANGE);\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this;\n\n            if (that.element.is(FORM)) {\n                that.element.on(\"submit\" + NS, proxy(that._submit, that));\n            }\n\n            if (that.options.validateOnBlur) {\n                if (!that.element.is(INPUTSELECTOR)) {\n                    that.element.on(BLUR + NS, that._inputSelector, function() {\n                        that._checkElement($(this));\n                    });\n\n                    that.element.on(\"click\" + NS, that._checkboxSelector, function() {\n                        that._checkElement($(this));\n                    });\n                } else {\n                    that.element.on(BLUR + NS, function() {\n                        that._checkElement(that.element);\n                    });\n\n                    if (that.element.is(CHECKBOXSELECTOR)) {\n                        that.element.on(\"click\" + NS, function() {\n                            that._checkElement(that.element);\n                        });\n                    }\n                }\n            }\n        },\n\n        validate: function() {\n            var inputs;\n            var idx;\n            var result = false;\n            var length;\n\n            var isValid = this.value();\n\n            this._errors = {};\n\n            if (!this.element.is(INPUTSELECTOR)) {\n                var invalid = false;\n\n                inputs = this.element.find(this._inputSelector);\n\n                for (idx = 0, length = inputs.length; idx < length; idx++) {\n                    if (!this.validateInput(inputs.eq(idx))) {\n                        invalid = true;\n                    }\n                }\n\n                result = !invalid;\n            } else {\n                result = this.validateInput(this.element);\n            }\n\n            if (this.options.validationSummary && !isValid) {\n                this.showValidationSummary();\n            }\n\n            this.trigger(VALIDATE, { valid: result, errors: this.errors() });\n\n            if (isValid !== result) {\n                this.trigger(CHANGE);\n            }\n\n            return result;\n        },\n\n        validateInput: function(input) {\n            input = $(input);\n\n\n            this._isValidated = true;\n\n            var that = this,\n                template = that._errorTemplate,\n                result = that._checkValidity(input),\n                valid = result.valid,\n                className = \".\" + INVALIDMSG,\n                fieldName = (input.attr(NAME) || \"\"),\n                lbl = that._findMessageContainer(fieldName).add(input.next(className).filter(function() {\n                    var element = $(this);\n                    if (element.filter(\"[\" + kendo.attr(\"for\") + \"]\").length) {\n                        return element.attr(kendo.attr(\"for\")) === fieldName;\n                    }\n\n                    return true;\n\n                })).addClass(\"k-hidden\"),\n                messageText = !valid ? that._extractMessage(input, result.key) : \"\",\n                messageLabel = !valid ? parseHtml(template({ message: decode(messageText), field: fieldName })) : \"\",\n                wasValid = !input.attr(ARIAINVALID),\n                isInputInner = input.is(INPUTINNER),\n                inputWrapper = input.parent(INPUTWRAPPER);\n\n            input.removeAttr(ARIAINVALID);\n\n            if (!valid && !input.data(\"captcha_validating\")) {\n                that._errors[fieldName] = messageText;\n                var lblId = lbl.attr('id');\n\n                that._decorateMessageContainer(messageLabel, fieldName);\n\n\n                if (lblId) {\n                    messageLabel.attr('id', lblId);\n                }\n\n                if (lbl.length !== 0) {\n                    lbl.replaceWith(messageLabel);\n                } else {\n                    var widgetInstance = kendo.widgetInstance(input);\n                    var parentElement = input.parent().get(0);\n                    var nextElement = input.next().get(0);\n                    var prevElement = input.prev().get(0);\n\n                    // Get the instance of the RadioGroup which is not initialized on the input element\n                    if(!widgetInstance && input.is(\"[type=radio]\")) {\n                        widgetInstance = kendo.widgetInstance(input.closest(\".k-radio-list\"));\n                    }\n\n                    // Get the instance of the CheckBoxGroup which is not initialized on the input element\n                    if(!widgetInstance && input.is(\"[type=checkbox]\")) {\n                        widgetInstance = kendo.widgetInstance(input.closest(\".k-checkbox-list\"));\n                    }\n\n                    if (widgetInstance && widgetInstance.wrapper) {\n                        messageLabel.insertAfter(widgetInstance.wrapper);\n                    } else if (parentElement && parentElement.nodeName === \"LABEL\") {\n                        // Input inside label\n                        messageLabel.insertAfter(parentElement);\n                    } else if (nextElement && isLabelFor(nextElement, input[0])) {\n                        // Input before label\n                        messageLabel.insertAfter(nextElement);\n                    } else if (prevElement && isLabelFor(prevElement, input[0])) {\n                        // Input after label\n                        messageLabel.insertAfter(input);\n                    } else if (isInputInner && inputWrapper.length) {\n                        // Input after input wrapper\n                        messageLabel.insertAfter(inputWrapper);\n                    } else {\n                        messageLabel.insertAfter(input);\n                    }\n                }\n\n                messageLabel.removeClass(\"k-hidden\");\n\n                input.attr(ARIAINVALID, true);\n            } else {\n                delete that._errors[fieldName];\n            }\n\n            if (wasValid !== valid) {\n                this.trigger(VALIDATE_INPUT, { valid: valid, input: input, error: messageText, field: fieldName });\n            }\n\n            if (isInputInner && inputWrapper.length) {\n                inputWrapper.toggleClass(INVALIDINPUT, !valid);\n                inputWrapper.toggleClass(VALIDINPUT, valid);\n            }\n\n            input.toggleClass(INVALIDINPUT, !valid);\n            input.toggleClass(VALIDINPUT, valid);\n\n\n            if (kendo.widgetInstance(input)) {\n                var widget = kendo.widgetInstance(input);\n                var inputWrap = widget._inputWrapper || widget.wrapper;\n                var inputLabel = widget._inputLabel;\n\n                if (inputWrap) {\n                    inputWrap.toggleClass(INVALIDINPUT, !valid);\n                    inputWrap.toggleClass(VALIDINPUT, valid);\n                }\n                if (inputLabel) {\n                    inputLabel.toggleClass(INVALIDLABEL, !valid);\n                }\n            }\n\n            if (wasValid !== valid) {\n                var errorId = messageLabel ? messageLabel.attr(\"id\") : lbl.attr(\"id\");\n\n                that._associateMessageContainer(input, errorId);\n\n                if (this.options.validationSummary && this.options.validateOnBlur) {\n                    this.showValidationSummary();\n                }\n            }\n\n            return valid;\n        },\n\n        hideMessages: function() {\n            var that = this,\n                className = \".\" + INVALIDMSG,\n                element = that.element;\n\n            that._disassociateMessageContainers();\n\n            if (!element.is(INPUTSELECTOR)) {\n                element.find(className).addClass(\"k-hidden\");\n            } else {\n                element.next(className).addClass(\"k-hidden\");\n            }\n        },\n\n        reset: function() {\n            var that = this,\n                inputs = that.element.find(\".\" + INVALIDINPUT),\n                labels = that.element.find(\".\" + INVALIDLABEL);\n\n            that._errors = [];\n\n            that.hideMessages();\n\n            that.hideValidationSummary();\n\n            inputs.removeAttr(ARIAINVALID);\n            inputs.removeClass(INVALIDINPUT);\n            labels.removeClass(INVALIDLABEL);\n        },\n\n        _findMessageContainer: function(fieldName) {\n            var locators = kendo.ui.validator.messageLocators,\n                name,\n                containers = $();\n\n            for (var idx = 0, length = this.element.length; idx < length; idx++) {\n                containers = containers.add(searchForMessageContainer(this.element[idx].getElementsByTagName(\"*\"), fieldName));\n            }\n\n            for (name in locators) {\n                containers = containers.add(locators[name].locate(this.element, fieldName));\n            }\n\n            return containers;\n        },\n\n        _decorateMessageContainer: function(container, fieldName) {\n            var locators = kendo.ui.validator.messageLocators,\n                name;\n\n            container.addClass(INVALIDMSG)\n                .attr(kendo.attr(\"for\"), fieldName || \"\");\n\n            if (!container.attr(\"id\")) {\n                container.attr(\"id\", fieldName + \"-error\");\n            }\n\n            for (name in locators) {\n                locators[name].decorate(container, fieldName);\n            }\n        },\n\n        _extractMessage: function(input, ruleKey) {\n            var that = this,\n                customMessage = that.options.messages[ruleKey],\n                fieldName = input.attr(NAME),\n                nonDefaultMessage;\n\n            if (!kendo.ui.Validator.prototype.options.messages[ruleKey]) {\n                 nonDefaultMessage = kendo.isFunction(customMessage) ? customMessage(input) : customMessage;\n            }\n\n            customMessage = kendo.isFunction(customMessage) ? customMessage(input) : customMessage;\n\n            return kendo.format(input.attr(kendo.attr(ruleKey + \"-msg\")) || input.attr(\"validationMessage\") || nonDefaultMessage || customMessage || input.attr(\"title\") || \"\",\n                fieldName,\n                input.attr(ruleKey) || input.attr(kendo.attr(ruleKey)));\n        },\n\n        _checkValidity: function(input) {\n            var rules = this.options.rules,\n                rule;\n\n            for (rule in rules) {\n                if (!rules[rule].call(this, input)) {\n                    return { valid: false, key: rule };\n                }\n            }\n\n            return { valid: true };\n        },\n\n        errors: function() {\n            var results = [],\n                errors = this._errors,\n                error;\n\n            for (error in errors) {\n                results.push(errors[error]);\n            }\n            return results;\n        },\n\n        setOptions: function(options) {\n            if (options.validationSummary) {\n                this.hideValidationSummary();\n            }\n\n            kendo.deepExtend(this.options, options);\n\n            this.destroy();\n\n            this.init(this.element, this.options);\n\n            this._setEvents(this.options);\n        },\n\n        _getInputNames: function() {\n            var that = this,\n                inputs = that.element.find(that._inputSelector),\n                sorted = [];\n\n            for (var idx = 0, length = inputs.length; idx < length; idx++) {\n                var input = $(inputs[idx]);\n\n                if (hasAttribute(input, NAME)) {\n                    // Add current name if:\n                    // - not present so far;\n                    // - present but not part of CheckBoxGroup or RadioGroup.\n                    if(sorted.indexOf(input.attr(NAME)) === -1 ||\n                        (input.closest(\".k-checkbox-list\").length === 0 &&\n                        input.closest(\".k-radio-list\").length === 0)) {\n                            sorted.push(input.attr(NAME));\n                    }\n                }\n            }\n\n            return sorted;\n        },\n\n        _associateMessageContainer: function(input, errorId) {\n            var nextFocusable = kendo.getWidgetFocusableElement(input);\n\n            if (!nextFocusable || !errorId) {\n                return;\n            }\n\n            kendo.toggleAttribute(nextFocusable, ARIADESCRIBEDBY, errorId);\n        },\n\n        _disassociateMessageContainers: function() {\n            var that = this,\n                inputs = that.element.find(\".\" + INVALIDINPUT).addBack(),\n                input, errorId;\n\n            for (var i = 0; i < inputs.length; i += 1) {\n                input = $(inputs[i]);\n\n                if (input.is(\"input\")) {\n                    errorId = that._findMessageContainer(input.attr(NAME))\n                        .add(input.next(\".\" + INVALIDMSG))\n                        .attr(\"id\");\n\n                    that._associateMessageContainer(input, errorId);\n                }\n            }\n        },\n\n        _errorsByName: function() {\n            var that = this,\n                inputNames = that._getInputNames(),\n                sorted = [];\n\n            for (var i = 0; i < inputNames.length; i += 1) {\n                var name = inputNames[i];\n\n                if (that._errors[name]) {\n                    sorted.push({\n                        field: name,\n                        message: that._errors[name]\n                    });\n                }\n            }\n\n            return sorted;\n        },\n\n        _renderSummary: function() {\n            var that = this,\n                options = this.options.validationSummary,\n                element = this.element,\n                prevElement = element.prev(),\n                container;\n\n            if (options.container) {\n                container = $(options.container);\n            } else if (prevElement && prevElement.hasClass(VALIDATIONSUMMARY)) {\n                container = prevElement;\n            } else {\n                container = $(\"<div />\").insertBefore(that.element);\n            }\n\n            container.addClass([VALIDATIONSUMMARY, MESSAGEBOX].join(\" \"));\n            container.attr(\"role\", \"alert\");\n\n            container.on(\"click\" + NS, proxy(that._summaryClick, that));\n\n            return container;\n        },\n\n        _summaryClick: function(e) {\n            e.preventDefault();\n\n            var that = this,\n                link = $(e.target),\n                target = that.element.find(\"[name='\" + link.data(\"field\") +  \"']\"),\n                nextFocusable;\n\n            if (!target.length) {\n                return;\n            }\n\n            nextFocusable = kendo.getWidgetFocusableElement(target);\n\n            if (nextFocusable) {\n                nextFocusable.trigger(\"focus\");\n            }\n        },\n\n        showValidationSummary: function() {\n            var that = this,\n                summary = that.validationSummary,\n                errors = that._errorsByName(),\n                errorsList;\n\n            if (!summary) {\n                summary = that.validationSummary = that._renderSummary();\n            }\n\n            errorsList = parseHtml(that._summaryTemplate({\n                errors: errors\n            }));\n\n            summary.html(errorsList);\n\n            summary.toggleClass(\"k-hidden\", !errors.length);\n        },\n\n        hideValidationSummary: function() {\n            var that = this,\n                summary = that.validationSummary;\n\n            if (!summary) {\n                return;\n            }\n\n            summary.addClass(\"k-hidden\");\n        }\n    });\n\n    kendo.ui.plugin(Validator);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)();  });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.editable',[ \"./kendo.checkbox\", \"./kendo.dropdownlist\", \"./kendo.datepicker\", \"./kendo.numerictextbox\", \"./kendo.validator\", \"./kendo.binder\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"editable\",\n    name: \"Editable\",\n    category: \"framework\",\n    depends: [ \"checkbox\", \"dropdownlist\", \"datepicker\", \"numerictextbox\", \"validator\", \"binder\" ],\n    hidden: true\n};\n\n/* jshint eqnull: true */\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        extend = $.extend,\n        isFunction = kendo.isFunction,\n        isPlainObject = $.isPlainObject,\n        inArray = $.inArray,\n        POINT = \".\",\n        AUTOCOMPLETEVALUE = \"off\",\n        nameSpecialCharRegExp = /(\"|\\%|'|\\[|\\]|\\$|\\.|\\,|\\:|\\;|\\+|\\*|\\&|\\!|\\#|\\(|\\)|<|>|\\=|\\?|\\@|\\^|\\{|\\}|\\~|\\/|\\||`)/g,\n        ERRORTEMPLATE = '<div class=\"k-tooltip k-tooltip-error k-validator-tooltip\">' +\n            '<span class=\"k-tooltip-icon k-icon k-i-warning\"></span>' +\n            '<span class=\"k-tooltip-content\">#= message #</span>' +\n            '<span class=\"k-callout k-callout-n\"></span>' +\n        '</div>',\n        CHANGE = \"change\";\n    var EQUAL_SET = \"equalSet\";\n    var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n\n    function fieldType(field) {\n        field = field != null ? field : \"\";\n        return field.type || kendo.type(field) || \"string\";\n    }\n\n    function convertToValueBinding(container) {\n        container.find(\":input:not(:button, .k-combobox .k-input, .k-checkbox-list .k-checkbox, .k-radio-list .k-radio, [\" + kendo.attr(\"role\") + \"=listbox], [\" + kendo.attr(\"role\") + \"=upload], [\" + kendo.attr(\"skip\") + \"], [type=file])\").each(function() {\n            var bindAttr = kendo.attr(\"bind\"),\n                binding = this.getAttribute(bindAttr) || \"\",\n                bindingName = this.type === \"checkbox\" || this.type === \"radio\" ? \"checked:\" : \"value:\",\n                isAntiForgeryToken = this.getAttribute(\"name\") === Editable.antiForgeryTokenName,\n                fieldName = this.name;\n\n            if (binding.indexOf(bindingName) === -1 && fieldName && !isAntiForgeryToken) {\n                binding += (binding.length ? \",\" : \"\") + bindingName + fieldName;\n\n                $(this).attr(bindAttr, binding);\n            }\n        });\n    }\n\n    function createAttributes(options) {\n        var field = (options.model.fields || options.model)[options.field],\n            type = fieldType(field),\n            validation = field ? field.validation : {},\n            attributes = field ? field.attributes : {},\n            ruleName,\n            DATATYPE = kendo.attr(\"type\"),\n            BINDING = kendo.attr(\"bind\"),\n            rule,\n            attr = {\n                id: options.id || options.field,\n                name: options.field,\n                title: options.title ? options.title : options.field\n            };\n\n        for (ruleName in validation) {\n            rule = validation[ruleName];\n\n            if (inArray(ruleName, specialRules) >= 0) {\n                attr[DATATYPE] = ruleName;\n            } else if (!isFunction(rule)) {\n                var culture = kendo.getCulture();\n\n                if (typeof rule === \"number\" && culture.name.length) {\n                    var numberFormat = culture.numberFormat;\n                    var stringRule = rule.toString()\n                        .replace(POINT, numberFormat[POINT]);\n\n                    attr[ruleName] = stringRule;\n                } else {\n                    attr[ruleName] = isPlainObject(rule) ? rule.value || ruleName : rule;\n                }\n            }\n\n            attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n\n            attr.autocomplete = AUTOCOMPLETEVALUE;\n        }\n\n        for (var attributeName in attributes) {\n            attr[attributeName] = attributes[attributeName];\n        }\n\n        if (inArray(type, specialRules) >= 0) {\n            attr[DATATYPE] = type;\n        }\n\n        attr[BINDING] = (type === \"boolean\" ? \"checked:\" : \"value:\") + options.field;\n\n        return attr;\n    }\n\n    function addIdAttribute(container, attr) {\n        var id = container.attr(\"id\");\n\n        if (id) {\n            attr.id = id;\n            container.removeAttr(\"id\");\n        }\n\n        return attr;\n    }\n\n    function convertItems(items) {\n        var idx,\n            length,\n            item,\n            value,\n            text,\n            result;\n\n        if (items && items.length) {\n            result = [];\n            for (idx = 0, length = items.length; idx < length; idx++) {\n                item = items[idx];\n                text = item.text || item.value || item;\n                value = item.value == null ? (item.text || item) : item.value;\n\n                result[idx] = { text: text, value: value };\n            }\n        }\n        return result;\n    }\n\n    function getEditorTag(type, options) {\n        var tag;\n\n        if (!type.length) { return; }\n\n        if ((type === \"DropDownTree\" && options && options.checkboxes) || type === \"MultiSelect\") {\n            tag = \"<select />\";\n        } else if (type === \"RadioGroup\" || type === \"CheckBoxGroup\") {\n            tag = \"<ul />\";\n        } else {\n            tag = type === \"Editor\" || type === \"TextArea\" ? \"<textarea />\" : \"<input />\";\n        }\n\n        return tag;\n    }\n\n    var kendoEditors = [\n        \"AutoComplete\", \"CheckBox\", \"CheckBoxGroup\", \"ColorPicker\", \"ComboBox\", \"DateInput\",\n        \"DatePicker\", \"DateTimePicker\", \"DropDownTree\",\n        \"Editor\", \"MaskedTextBox\", \"MultiColumnComboBox\",\"MultiSelect\",\n        \"NumericTextBox\", \"RadioGroup\", \"Rating\", \"Slider\", \"Switch\", \"TimePicker\", \"DropDownList\",\n        \"TextBox\", \"TextArea\", \"Captcha\"\n    ];\n\n    var editors = {\n        \"hidden\": function (container, options) {\n            var attr = createAttributes(options);\n            $('<input type=\"hidden\"/>').attr(attr).appendTo(container);\n        },\n        \"number\": function(container, options) {\n            var attr = createAttributes(options);\n            $('<input type=\"text\"/>').attr(attr).appendTo(container).kendoNumericTextBox({ format: options.format });\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg k-hidden\"/>').appendTo(container);\n        },\n        \"date\": function(container, options) {\n            var attr = createAttributes(options),\n                format = options.format;\n\n            if (format) {\n                format = kendo._extractFormat(format);\n            }\n\n            attr[kendo.attr(\"format\")] = format;\n\n            $('<input type=\"text\"/>').attr(attr).appendTo(container).kendoDatePicker({ format: options.format });\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg k-hidden\"/>').appendTo(container);\n        },\n        \"string\": function(container, options) {\n            var attr = createAttributes(options);\n\n            $('<input type=\"text\"/>').attr(attr).appendTo(container).kendoTextBox();\n        },\n        \"boolean\": function(container, options) {\n            var attr = createAttributes(options);\n            var element = $('<input type=\"checkbox\" />').attr(attr).kendoCheckBox().appendTo(container);\n\n            renderHiddenForMvcCheckbox(element, container, options);\n        },\n        \"values\": function(container, options) {\n            var attr = createAttributes(options);\n            var items = kendo.stringify(convertItems(options.values));\n            $('<select ' + kendo.attr(\"text-field\") + '=\"text\"' + kendo.attr(\"value-field\") + '=\"value\"' +\n                kendo.attr(\"source\") + \"=\\'\" + (items ? items.replace(/\\'/g,\"&apos;\") : items) +\n                \"\\'\" + kendo.attr(\"role\") + '=\"dropdownlist\"/>') .attr(attr).appendTo(container);\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg  k-hidden\"/>').appendTo(container);\n        },\n        \"kendoEditor\": function (container, options) {\n            var attr = createAttributes(options);\n            var type = options.editor;\n            var editor = \"kendo\" + type;\n            var editorOptions = options.editorOptions;\n            var tagElement = getEditorTag(type, editorOptions);\n\n            var element = $(tagElement)\n                .attr(attr)\n                .appendTo(container)\n                [editor](editorOptions);\n\n            renderHiddenForMvcCheckbox(element, container, options);\n        }\n    };\n\n    var mobileEditors = {\n        \"number\": function (container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"number\"/>').attr(attr).appendTo(container);\n        },\n        \"date\": function (container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"date\"/>').attr(attr).appendTo(container);\n        },\n        \"string\": function (container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"text\" />').attr(attr).appendTo(container);\n        },\n        \"boolean\": function (container, options) {\n            var attr = createAttributes(options);\n            attr = addIdAttribute(container, attr);\n\n            $('<input type=\"checkbox\" />').attr(attr).appendTo(container);\n        },\n        \"values\": function (container, options) {\n            var attr = createAttributes(options);\n            var items = options.values;\n            var select = $('<select />');\n\n            attr = addIdAttribute(container, attr);\n\n            for (var index in items) {\n                $('<option value=\"' + items[index].value + '\">' + items[index].text + '</option>').appendTo(select);\n            }\n\n            select.attr(attr).appendTo(container);\n        }\n    };\n\n    function addValidationRules(modelField, rules) {\n        var validation = modelField ? (modelField.validation || {}) : {},\n            rule,\n            descriptor;\n\n        for (rule in validation) {\n            descriptor = validation[rule];\n\n            if (isPlainObject(descriptor) && descriptor.value) {\n                descriptor = descriptor.value;\n            }\n\n            if (isFunction(descriptor)) {\n                rules[rule] = descriptor;\n            }\n        }\n    }\n\n    function renderHiddenForMvcCheckbox(tag, container, field) {\n        var addHidden = field ? (field.shouldRenderHidden || false) : false;\n\n        if (addHidden) {\n            tag.val(true);\n            container.append($(\"<input type='hidden' name='\" + field.field +\"' value='false' data-skip='true' data-validate='false'/>\"));\n        }\n    }\n\n    var Editable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            if (options.target) {\n                options.$angular = options.target.options.$angular;\n\n                if (options.target.pane) {\n                    that._isMobile = true;\n                }\n            }\n            Widget.fn.init.call(that, element, options);\n            that._validateProxy = $.proxy(that._validate, that);\n            that.refresh();\n        },\n\n        events: [CHANGE],\n\n        options: {\n            name: \"Editable\",\n            editors: editors,\n            mobileEditors: mobileEditors,\n            clearContainer: true,\n            validateOnBlur: true,\n            validationSummary: false,\n            errorTemplate: ERRORTEMPLATE,\n            skipFocus: false\n        },\n\n        editor: function(field, modelField) {\n            var that = this,\n                editors = that._isMobile ? mobileEditors : that.options.editors,\n                isObject = isPlainObject(field),\n                fieldName = isObject ? field.field : field,\n                model = that.options.model || {},\n                isValuesEditor = isObject && field.values,\n                type = isValuesEditor ? \"values\" : fieldType(modelField),\n                isHidden = isObject && typeof field.editor === \"string\" && field.editor === \"hidden\",\n                isCustomEditor = isObject && !isHidden && field.editor,\n                isKendoEditor = isObject && $.inArray(field.editor, kendoEditors) !== -1,\n                editor = isCustomEditor ? field.editor : editors[isHidden ? \"hidden\" : type],\n                container = that.element.find(\"[\" + kendo.attr(\"container-for\") + \"=\" + fieldName.replace(nameSpecialCharRegExp, \"\\\\$1\")+ \"]\");\n\n            editor = editor ? editor : editors.string;\n\n            if (isKendoEditor) {\n                editor = editors.kendoEditor;\n            } else if (isCustomEditor && typeof field.editor === \"string\") {\n                editor = function(container) {\n                    container.append(field.editor);\n                };\n            }\n\n            container = container.length ? container : that.element;\n            editor(container, extend(true, {}, isObject ? field : { field: fieldName }, { model: model }));\n        },\n\n        _validate: function(e) {\n            var that = this,\n                input,\n                value = e.value,\n                preventChangeTrigger = that._validationEventInProgress,\n                values = {},\n                bindAttribute = kendo.attr(\"bind\"),\n                fieldName = e.field.replace(nameSpecialCharRegExp, \"\\\\$1\"),\n                bindingRegex = new RegExp(\"(value|checked)\\\\s*:\\\\s*\" + fieldName + \"\\\\s*(,|$)\");\n\n            values[e.field] = e.value;\n\n            input = $(':input[' + bindAttribute + '*=\"' + fieldName + '\"]', that.element)\n                .filter(\"[\" + kendo.attr(\"validate\") + \"!='false']\").filter(function() {\n                   return bindingRegex.test($(this).attr(bindAttribute));\n                });\n            if (input.length > 1) {\n                input = input.filter(function () {\n                    var element = $(this);\n                    return !element.is(\":radio\") || element.val() == value;\n                });\n            }\n\n            try {\n                that._validationEventInProgress = true;\n\n                if (!that.validatable.validateInput(input) || (!preventChangeTrigger && that.trigger(CHANGE, { values: values }))) {\n                    e.preventDefault();\n                }\n\n            } finally {\n                that._validationEventInProgress = false;\n            }\n        },\n\n        end: function() {\n            return this.validatable.validate();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.angular(\"cleanup\", function(){\n                return { elements: that.element };\n            });\n\n            Widget.fn.destroy.call(that);\n\n            that.options.model.unbind(\"set\", that._validateProxy);\n            that.options.model.unbind(EQUAL_SET, that._validateProxy);\n\n            kendo.unbind(that.element);\n\n            if (that.validatable) {\n                that.validatable.destroy();\n            }\n            kendo.destroy(that.element);\n\n            that.element.removeData(\"kendoValidator\");\n\n            if (that.element.is(\"[\" + kendo.attr(\"role\") + \"=editable]\")) {\n                that.element.removeAttr(kendo.attr(\"role\"));\n            }\n        },\n\n        refresh: function() {\n            var that = this,\n                idx,\n                length,\n                fields = that.options.fields || [],\n                container = that.options.clearContainer ? that.element.empty() : that.element,\n                model = that.options.model || {},\n                rules = {},\n                field,\n                isObject,\n                fieldName,\n                modelField,\n                modelFields;\n\n            if (!Array.isArray(fields)) {\n                fields = [fields];\n            }\n\n            for (idx = 0, length = fields.length; idx < length; idx++) {\n                 field = fields[idx];\n                 isObject = isPlainObject(field);\n                 fieldName = isObject ? field.field : field;\n                 modelField = (model.fields || model)[fieldName];\n\n                 addValidationRules(modelField, rules);\n\n                 that.editor(field, modelField);\n            }\n\n            if (that.options.target) {\n                that.angular(\"compile\", function(){\n                    return {\n                        elements: container,\n                        data: container.map(function() { return { dataItem: model }; })\n                    };\n                });\n            }\n\n            if (!length) {\n                modelFields = model.fields || model;\n                for (fieldName in modelFields) {\n                    addValidationRules(modelFields[fieldName], rules);\n               }\n            }\n\n            convertToValueBinding(container);\n\n            if (that.validatable) {\n                that.validatable.destroy();\n            }\n\n            kendo.bind(container, that.options.model);\n\n            if (that.options.validateOnBlur) {\n                that.options.model\n                    .unbind(\"set\", that._validateProxy)\n                    .bind(\"set\", that._validateProxy);\n\n                that.options.model\n                    .unbind(EQUAL_SET, that._validateProxy)\n                    .bind(EQUAL_SET, that._validateProxy);\n            }\n\n            that.validatable = new kendo.ui.Validator(container, {\n                validateOnBlur: that.options.validateOnBlur,\n                validationSummary: that.options.validationSummary,\n                errorTemplate: that.options.errorTemplate || undefined,\n                rules: rules });\n\n            if (!that.options.skipFocus) {\n                container.find(\":kendoFocusable\").eq(0).trigger(\"focus\");\n            }\n        }\n   });\n\n   Editable.antiForgeryTokenName = \"__RequestVerificationToken\";\n\n   ui.plugin(Editable);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.pager',[ \"./kendo.data\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"pager\",\n    name: \"Pager\",\n    category: \"framework\",\n    depends: [ \"data\" ],\n    advanced: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        keys = kendo.keys,\n        template = kendo.template,\n        proxy = $.proxy,\n        FIRST = \".k-i-arrow-end-left\",\n        LAST = \".k-i-arrow-end-right\",\n        PREV = \".k-i-arrow-60-left\",\n        NEXT = \".k-i-arrow-60-right\",\n        SIZE = \"k-pager-md k-pager-sm\",\n        FOCUSABLE = \":kendoFocusable:not([tabindex='-1'])\",\n        CHANGE = \"change\",\n        NS = \".kendoPager\",\n        CLICK = \"click\",\n        KEYDOWN = \"keydown\",\n        DISABLED = \"disabled\",\n        MOUSEDOWN = \"down\",\n        MAX_VALUE = Number.MAX_VALUE,\n        isRtl = false,\n        iconTemplate = kendo.template('<a href=\"\\\\#\" title=\"#=text#\" #if (id !== \"\") {# aria-describedby=\"#=id#\" #}# class=\"k-link k-pager-nav #= wrapClassName #\"><span class=\"k-icon #= className #\"></span></a>');\n\n    function button(options) {\n        return options.template( {\n            idx: options.idx,\n            text: options.text,\n            ns: kendo.ns,\n            numeric: options.numeric,\n            title: options.title || \"\",\n            tabindex: options.navigatable ? 0 : -1,\n            navigatable: options.navigatable\n        });\n    }\n\n    function selectOption(template, idx, text, selected) {\n        return template( {\n            idx: idx,\n            text: text || idx,\n            selected: selected || false\n        });\n    }\n\n    function icon(className, text, wrapClassName, id) {\n        return iconTemplate({\n            className: className.substring(1),\n            text: text,\n            wrapClassName: wrapClassName || \"\",\n            id: id || \"\"\n        });\n    }\n\n    function update(element, selector, page, disabled) {\n       element.find(selector)\n              .parent()\n              .attr(kendo.attr(\"page\"), page)\n              .attr(\"tabindex\", disabled ? -1 : 0)\n              .toggleClass(\"k-state-disabled\", disabled);\n    }\n\n    function first(element, page) {\n        update(element, FIRST, 1, page <= 1);\n    }\n\n    function prev(element, page) {\n        update(element, PREV, Math.max(1, page - 1), page <= 1);\n    }\n\n    function next(element, page, totalPages) {\n        update(element, NEXT, Math.min(totalPages, page + 1), page >= totalPages);\n    }\n\n    function last(element, page, totalPages) {\n        update(element, LAST, totalPages, page >= totalPages);\n    }\n\n    var Pager = Widget.extend( {\n        init: function(element, options) {\n            var that = this, page, totalPages;\n            var sizeClassName = null;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            that._createDataSource(options);\n            that.linkTemplate = kendo.template(that.options.linkTemplate);\n            that.selectTemplate = kendo.template(that.options.selectTemplate);\n            that.currentPageTemplate = kendo.template(that.options.currentPageTemplate);\n            that.numericSelectItemTemplate = kendo.template(that.options.numericSelectItemTemplate);\n\n            page = that.page();\n            totalPages = that.totalPages();\n\n            that._refreshHandler = proxy(that.refresh, that);\n\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n\n            isRtl = kendo.support.isRtl(element);\n\n            that._id = that.element.attr(\"id\") || kendo.guid();\n            that._template();\n\n            if (options.previousNext) {\n                if (!that.element.find(FIRST).length) {\n                    that.element.append(icon(FIRST, options.messages.first, \"k-pager-first\", that._id));\n\n                    first(that.element, page, totalPages);\n                }\n\n                if (!that.element.find(PREV).length) {\n                    that.element.append(icon(PREV, options.messages.previous, null, that._id));\n\n                    prev(that.element, page, totalPages);\n                }\n            }\n\n            if (options.numeric) {\n                if (!that._numericWrap) {\n                    that._numericWrap = that.element.find(\".k-pager-numbers-wrap\");\n\n                    if (that._numericWrap.length === 0) {\n                        that._numericWrap = $(\"<div class='k-pager-numbers-wrap' />\").appendTo(that.element);\n                    }\n                }\n\n                if (!that._numericSelect) {\n                    that._numericSelect = that._numericWrap.find(\".k-dropdown\");\n\n                    if (that._numericSelect.length === 0) {\n                       that._numericSelect = $(\"<select class='k-dropdown k-picker k-dropdown-list' />\").appendTo(that._numericWrap);\n                    }\n                }\n\n                if (!that.list) {\n                    that.list = that._numericWrap.find(\".k-pager-numbers\");\n\n                    if (that.list.length === 0) {\n                       that.list = $('<ul class=\"k-pager-numbers\" />').appendTo(that._numericWrap);\n                    }\n                }\n\n                if (options.dataSource && !options.dataSource.total()) {\n                    that._numericSelect.empty().append(\"<option value='0' />\");\n                    that.list.empty().append(that.selectTemplate({ text: 0, tabindex: options.navigatalbe ? 0 : -1, navigatable: options.navigatable, title: kendo.format(options.messages.pageButtonLabel, 0) }));\n                }\n            }\n\n            if (options.input) {\n                if (!that.element.find(\".k-pager-input\").length) {\n                   that.element.append('<span class=\"k-pager-input k-label\">'+\n                       options.messages.page +\n                       '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" /></span>' +\n                       kendo.format(options.messages.of, totalPages) +\n                       '</span>');\n                }\n\n                that.element.on(KEYDOWN + NS, \".k-pager-input input\", proxy(that._keydown, that));\n            }\n\n            if (options.previousNext) {\n                if (!that.element.find(NEXT).length) {\n                    that.element.append(icon(NEXT, options.messages.next, null, that._id));\n\n                    next(that.element, page, totalPages);\n                }\n\n                if (!that.element.find(LAST).length) {\n                    that.element.append(icon(LAST, options.messages.last, \"k-pager-last\", that._id));\n\n                    last(that.element, page, totalPages);\n                }\n            }\n\n            if (options.pageSizes){\n                if (!that.element.find(\".k-pager-sizes\").length){\n                    var pageSizes = options.pageSizes.length ? options.pageSizes : [\"all\", 5, 10, 20];\n                    var pageItems = $.map(pageSizes, function(size) {\n                        if (size.toLowerCase && size.toLowerCase() === \"all\") {\n                            return \"<option value='all'>\" + options.messages.allPages + \"</option>\";\n                        }\n\n                        return \"<option>\" + size + \"</option>\";\n                    });\n\n                    $('<span class=\"k-pager-sizes k-label\"><select></select>' + options.messages.itemsPerPage + \"</span>\")\n                        .appendTo(that.element)\n                        .find(\"select\").html(pageItems.join(\"\")).end()\n                        .appendTo(that.element);\n                }\n\n                that.element.find(\".k-pager-sizes select\").val(that.pageSize());\n\n                if (kendo.ui.DropDownList) {\n                   that.element.find(\".k-pager-sizes select\").show().attr(\"aria-label\", options.messages.pageSizeDropDownLabel).kendoDropDownList();\n                }\n\n                that.element.on(CHANGE + NS, \".k-pager-sizes select\", proxy(that._change, that));\n            }\n\n            if (options.refresh) {\n                if (!that.element.find(\".k-pager-refresh\").length) {\n                    that.element.append('<a href=\"#\" class=\"k-pager-refresh k-link\" title=\"' + options.messages.refresh +\n                        '\" aria-label=\"' + options.messages.refresh + '\"><span class=\"k-icon k-i-reload\"></span></a>');\n                }\n\n                that.element.on(CLICK + NS, \".k-pager-refresh\", proxy(that._refreshClick, that));\n            }\n\n            if (options.info) {\n                if (!that.element.find(\".k-pager-info\").length) {\n                    that.element.append('<span class=\"k-pager-info k-label\" />');\n                }\n            }\n\n            that.element\n                .on(CLICK + NS , \"a\", proxy(that._click, that))\n                .on(CHANGE + NS , \"select.k-dropdown\", proxy(that._numericSelectChange, that))\n                .addClass(\"k-pager-wrap k-widget k-floatwrap\");\n\n            if (options.autoBind) {\n                that.refresh();\n            }\n\n            that._resizeHandler = proxy(that.resize, that, true);\n            $(window).on(\"resize\" + NS, that._resizeHandler);\n\n            sizeClassName = that._getWidthSizeClass(that.element.outerWidth());\n\n            if (sizeClassName) {\n                that.element.addClass(sizeClassName);\n            }\n\n            that._navigatable();\n\n            kendo.notify(that);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.element.off(NS);\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that._refreshHandler = null;\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n\n            kendo.destroy(that.element);\n            that.element = that.list = null;\n        },\n\n        events: [\n            CHANGE\n        ],\n\n        options: {\n            name: \"Pager\",\n            ARIATemplate: \"Page navigation, page #=page# of #=totalPages#\",\n            selectTemplate: '<li><span tabindex=\"#=tabindex#\" #if (navigatable) {# aria-label=\"#=title#\" #}# class=\"k-link k-state-selected\">#=text#</span></li>',\n            currentPageTemplate: '<li class=\"k-current-page\"><span class=\"k-link k-pager-nav\">#=text#</span></li>',\n            linkTemplate: '<li><a tabindex=\"#=tabindex#\" href=\"\\\\#\" class=\"k-link\" data-#=ns#page=\"#=idx#\" #if (title !== \"\") {# title=\"#=title#\" #}#>#=text#</a></li>',\n            numericItemTemplate: '<li><a tabindex=\"-1\" href=\"\\\\#\" class=\"k-link\" data-#=ns#page=\"#=idx#\" #if (title !== \"\") {# title=\"#=title#\" #}#>#=text#</a></li>',\n            numericSelectItemTemplate: '<option value=\"#= idx #\" #if (selected) {# selected=\"selected\" #}#>#= text #</option>',\n            buttonCount: 10,\n            autoBind: true,\n            numeric: true,\n            info: true,\n            input: false,\n            previousNext: true,\n            pageSizes: false,\n            refresh: false,\n            responsive: true,\n            navigatable: false,\n            messages: {\n                allPages: \"All\",\n                display: \"{0} - {1} of {2} items\",\n                empty: \"No items to display\",\n                page: \"Page\",\n                of: \"of {0}\",\n                itemsPerPage: \"items per page\",\n                pageButtonLabel: \"Page {0}\",\n                pageSizeDropDownLabel: \"Page sizes drop down\",\n                first: \"Go to the first page\",\n                previous: \"Go to the previous page\",\n                next: \"Go to the next page\",\n                last: \"Go to the last page\",\n                refresh: \"Refresh\",\n                morePages: \"More pages\"\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.dataSource = that.options.dataSource = dataSource;\n            dataSource.bind(CHANGE, that._refreshHandler);\n\n            if (that.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        _resize: function(size) {\n            if (size.width) {\n                var sizeClassName = this._getWidthSizeClass(size.width);\n                var el = this.element;\n\n                if (!sizeClassName) {\n                    el.removeClass(SIZE);\n                } else if (!el.hasClass(sizeClassName)) {\n                    el.removeClass(SIZE);\n                    el.addClass(sizeClassName);\n                }\n            }\n        },\n\n        _createDataSource: function(options) {\n            this.dataSource = kendo.data.DataSource.create(options.dataSource);\n        },\n\n        refresh: function(e) {\n            var that = this,\n                idx,\n                end,\n                start = 1,\n                reminder,\n                page = that.page(),\n                html = \"\",\n                selectHtml = \"\",\n                options = that.options,\n                pageSize = that.pageSize(),\n                collapsedTotal = that._collapsedTotal(),\n                total = that.dataSource._isGroupPaged() ? that.dataSource.groupsTotal(true) : that.dataSource.total(),\n                totalPages = that.totalPages(),\n                linkTemplate = that.linkTemplate,\n                navigatable = options.navigatable,\n                numericSelectItemTemplate = that.numericSelectItemTemplate,\n                buttonCount = options.buttonCount;\n\n            if (e && e.action == \"itemchange\") {\n                return;\n            }\n\n            if (options.numeric) {\n\n                if (page > buttonCount) {\n                    reminder = (page % buttonCount);\n                    start = (reminder === 0) ? (page - buttonCount) + 1 : (page - reminder) + 1;\n                }\n\n                end = Math.min((start + buttonCount) - 1, totalPages);\n\n                if (start > 1) {\n                    html += button({\n                        template: linkTemplate,\n                        navigatable: navigatable,\n                        idx: start - 1,\n                        text: \"...\",\n                        numeric: false,\n                        title: options.messages.morePages\n                    });\n                    selectHtml += selectOption(numericSelectItemTemplate, start - 1, options.messages.morePages);\n                }\n\n                for (idx = start; idx <= end; idx++) {\n                    html += button({\n                        template: idx == page ? that.selectTemplate : linkTemplate,\n                        navigatable: navigatable,\n                        idx: idx,\n                        text: idx,\n                        numeric: true,\n                        title: kendo.format(options.messages.pageButtonLabel, idx)\n                    });\n                    selectHtml += selectOption(numericSelectItemTemplate, idx, idx, idx == page);\n                }\n\n                if (end < totalPages) {\n                    html += button({\n                        template: linkTemplate,\n                        navigatable: navigatable,\n                        idx: idx,\n                        text: \"...\",\n                        numeric: numericSelectItemTemplate,\n                        title: options.messages.morePages\n                    });\n                    selectHtml += selectOption(numericSelectItemTemplate, idx, options.messages.morePages);\n                }\n\n                if (html === \"\") {\n                    html = that.selectTemplate({ text: 0, tabindex: navigatable ? 0 : -1, navigatable: navigatable, title: kendo.format(options.messages.pageButtonLabel, 0) });\n                    selectHtml = $(\"<option value='0' />\");\n                }\n\n                that.list.html(html);\n                that._numericSelect.html(selectHtml);\n            }\n\n            if (options.info) {\n                if (total > 0) {\n                    html = kendo.format(options.messages.display,\n                        that.dataSource.options.endless ? 1 : Math.min((page - 1) * (that.dataSource.pageSize() || 0) + 1, collapsedTotal), // first item in the page\n                        Math.min(page * pageSize, collapsedTotal), // last item in the page\n                    total);\n                } else {\n                    html = options.messages.empty;\n                }\n\n                that.element.find(\".k-pager-info\").html(html);\n            }\n\n            if (options.input) {\n                that.element\n                    .find(\".k-pager-input\")\n                    .html(that.options.messages.page +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" aria-label=\"' + page + '\"></span>' +\n                        kendo.format(options.messages.of, totalPages))\n                    .find(\"input\")\n                    .val(page)\n                    .attr(DISABLED, total < 1)\n                    .toggleClass(\"k-state-disabled\", total < 1);\n            }\n\n            if (options.previousNext) {\n                first(that.element, page, totalPages);\n\n                prev(that.element, page, totalPages);\n\n                next(that.element, page, totalPages);\n\n                last(that.element, page, totalPages);\n            }\n\n            if (options.pageSizes) {\n                var hasAll = that.element.find(\".k-pager-sizes option[value='all']\").length > 0;\n                var selectAll = hasAll && (pageSize === this.dataSource.total() || pageSize == MAX_VALUE);\n                var text = pageSize;\n                if (selectAll) {\n                    pageSize = \"all\";\n                    text = options.messages.allPages;\n                }\n\n                that.element\n                    .find(\".k-pager-sizes select\")\n                    .val(pageSize)\n                    .attr(\"aria-label\", pageSize)\n                    .filter(\"[\" + kendo.attr(\"role\") + \"=dropdownlist]\")\n                    .kendoDropDownList(\"value\", pageSize)\n                    .kendoDropDownList(\"text\", text); // handles custom values\n            }\n\n            that._restoreFocus(start, end, totalPages);\n            that._excludeChildrenFromTab();\n            that._updateAria();\n        },\n\n        _excludeChildrenFromTab: function () {\n            var activeElement = kendo._activeElement();\n            if (this.options.navigatable && (activeElement === this.element[0] || !$.contains(this.element[0], activeElement))) {\n                this.element.find(FOCUSABLE).attr(\"tabindex\", -1);\n            }\n        },\n\n        _restoreFocus: function (start, end, totalPages) {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            if (that._focusSelected) {\n                that.element.find(\".k-state-selected\").trigger(\"focus\");\n                that._focusSelected = null;\n            }\n\n            if (that._focusMore !== null) {\n                if (end < totalPages && that._focusMore) {\n                    that.list.find(\"li\").last().find(\"a\").trigger(\"focus\");\n                }\n                if (!that._focusMore && start > 1) {\n                    that.list.find(\"li\").first().find(\"a\").trigger(\"focus\");\n                }\n                that._focusMore = null;\n            }\n        },\n\n        _restoreTabIndexes: function () {\n            this.element\n                .find(\"[tabindex='-1']:not(.k-state-disabled)\")\n                .attr(\"tabindex\", 0);\n        },\n\n        _collapsedTotal: function() {\n            return this.dataSource.total();\n        },\n\n        _keydown: function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                var input = this.element.find(\".k-pager-input\").find(\"input\"),\n                    page = parseInt(input.val(), 10);\n\n                if (isNaN(page) || page < 1 || page > this.totalPages()) {\n                    page = this.page();\n                }\n\n                input.val(page);\n\n                this.page(page);\n            }\n        },\n\n        _refreshClick: function(e) {\n            e.preventDefault();\n\n            this.dataSource.read();\n        },\n\n        _change: function(e) {\n            var value = e.currentTarget.value;\n            var pageSize = parseInt(value, 10);\n            var dataSource = this.dataSource;\n\n            if (!isNaN(pageSize)){\n                dataSource.pageSize(pageSize);\n            } else if ((value + \"\").toLowerCase() == \"all\") {\n                dataSource._pageSize = undefined;\n                dataSource._take = undefined;\n                dataSource._skip = 0;\n                dataSource.fetch();\n            }\n        },\n\n        _template: function() {\n            this._ariaTemplate = proxy(template(this.options.ARIATemplate), this);\n        },\n\n        _updateAria: function () {\n            if (!this.options.navigatable) {\n                return;\n            }\n            this.element.attr(\"aria-label\", this._ariaTemplate({ page: this.page(), totalPages: this.totalPages() }));\n        },\n\n        _navigatable: function () {\n            var that = this;\n            var options = that.options;\n\n            if (!options.navigatable) {\n                return;\n            }\n\n            that.element.attr(\"role\", \"application\");\n            that.element.attr(\"id\", that._id);\n            that._template();\n            that._updateAria();\n\n            that._tabindex(that.element);\n\n            that.element.on(\"keydown\" + NS, that, proxy(that._keyDown, that));\n            that.element.on(\"focusout\" + NS, function() { that.element.removeClass(\"k-state-focused\"); });\n            that.element.on(\"focusin\" + NS,  function(e) {\n                that.element.addClass(\"k-state-focused\");\n\n                if (e.target === that.element[0]) {\n                    that.element.find(FOCUSABLE).attr(\"tabindex\", -1);\n                } else {\n                    that.element.removeClass(\"k-state-focused\");\n                }\n            });\n        },\n\n        _keyDown: function (e) {\n            var that = this;\n            var target = $(e.target);\n            var allFocusable;\n            var handled = false;\n            var focusedIndex;\n\n            if (target[0] === that.element[0] && e.keyCode == keys.ENTER) {\n                that._restoreTabIndexes();\n                that.element.find(FOCUSABLE).first().trigger(\"focus\");\n                handled = true;\n            }\n\n            if (target[0] !== that.element[0] && e.keyCode == keys.ESC) {\n                that.element.trigger(\"focus\");\n                handled = true;\n            }\n\n            if (target[0] === that.element[0] && e.keyCode == keys.HOME) {\n                that.page(1);\n                handled = true;\n            }\n\n            if (target[0] === that.element[0] && e.keyCode == keys.END) {\n                that.page(that.totalPages());\n                handled = true;\n            }\n\n            if (target[0] === that.element[0] && (e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT) || e.keyCode == keys.PAGEDOWN)) {\n                that.page(that.page() + 1);\n                handled = true;\n            }\n\n            if (target[0] === that.element[0] && (e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT) || e.keyCode == keys.PAGEUP)) {\n                that.page((that.page() - 1) || 1);\n                handled = true;\n            }\n\n            if (target[0] !== that.element[0] && e.keyCode== keys.TAB) {\n                allFocusable = that.element.find(FOCUSABLE);\n                focusedIndex = allFocusable.index(target);\n\n                if (e.shiftKey) {\n                    if (focusedIndex - 1 < 0) {\n                        allFocusable.last().trigger(\"focus\");\n                    } else {\n                        allFocusable.eq(focusedIndex - 1).trigger(\"focus\");\n                    }\n                } else {\n                    if (focusedIndex + 1 < allFocusable.length) {\n                        allFocusable.eq(focusedIndex +1 ).trigger(\"focus\");\n                    } else {\n                        allFocusable.first().trigger(\"focus\");\n                    }\n                }\n\n                handled = true;\n            }\n\n            if (handled) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        },\n\n        _numericSelectChange: function(e) {\n            var target = e.currentTarget;\n            var value = target.value;\n            var page = parseInt(value, 10);\n\n            target.blur();\n\n            this.page(page);\n        },\n\n        _click: function(e) {\n            var target = $(e.currentTarget);\n\n            e.preventDefault();\n\n            if (this.options.navigatable) {\n                if (target.attr(\"title\") == this.options.messages.morePages) {\n                    this._focusMore = target.parent().index();\n                } else if(!target.hasClass(\"k-pager-refresh\") && !target.hasClass(\"k-pager-nav\")) {\n                    this._focusSelected = true;\n                }\n            }\n\n            if (!target.is(\".k-state-disabled\")) {\n                this.page(parseInt(target.attr(kendo.attr(\"page\")), 10));\n            }\n        },\n\n        totalPages: function() {\n            return Math.ceil((this.dataSource.total() || 0) / (this.pageSize() || 1));\n        },\n\n        pageSize: function() {\n            return this.dataSource.pageSize() || this.dataSource.total();\n        },\n\n        page: function(page) {\n            if (page) {\n                if (this.trigger(\"pageChange\", { index: page })) {\n                   return;\n                }\n\n                this.dataSource.page(page);\n\n                this.trigger(CHANGE, { index: page });\n            } else {\n                if (this.dataSource.total() > 0) {\n                    return this.dataSource.page();\n                } else {\n                    return 0;\n                }\n            }\n        },\n\n        _getWidthSizeClass: function(width) {\n            var that = this,\n                sizes = SIZE.split(\" \");\n\n            if (!that.options.responsive) {\n                return null;\n            } else if (width <= 480) {\n                return sizes[1];\n            } else if (width <= 600) {\n                return sizes[0];\n            }\n            return null;\n        }\n    });\n\n    ui.plugin(Pager);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.listview',[ \"./kendo.data\", \"./kendo.editable\", \"./kendo.selectable\", \"./kendo.pager\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"listview\",\n    name: \"ListView\",\n    category: \"web\",\n    description: \"The ListView widget offers rich support for interacting with data.\",\n    depends: [ \"data\" ],\n    features: [ {\n        id: \"listview-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\" ]\n    }, {\n        id: \"listview-selection\",\n        name: \"Selection\",\n        description: \"Support for selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"listview-paging\",\n        name: \"Paging\",\n        description: \"Support for paging\",\n        depends: [ \"pager\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        CHANGE = \"change\",\n        KENDO_KEYDOWN = \"kendoKeydown\",\n        CANCEL = \"cancel\",\n        DATABOUND = \"dataBound\",\n        DATABINDING = \"dataBinding\",\n        Widget = kendo.ui.Widget,\n        keys = kendo.keys,\n        EMPTY_STRING = \"\",\n        DOT = \".\",\n        FOCUSSELECTOR = \"> *:not(.k-loading-mask)\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        FOCUSED = \"k-state-focused\",\n        SELECTED = \"k-state-selected\",\n        KEDITITEM = \"k-edit-item\",\n        PAGER_CLASS = \"k-listview-pager\",\n        ITEM_CLASS = \"k-listview-item\",\n        TABINDEX = \"tabindex\",\n        ARIA_SETSIZE = \"aria-setsize\",\n        ARIA_POSINSET = \"aria-posinset\",\n        ARIA_ROLE = \"role\",\n        ARIA_LABEL = \"aria-label\",\n        EDIT = \"edit\",\n        REMOVE = \"remove\",\n        SAVE = \"save\",\n        MOUSEDOWN = \"mousedown\",\n        CLICK = \"click\",\n        TOUCHSTART = \"touchstart\",\n        NS = \".kendoListView\",\n        proxy = $.proxy,\n        activeElement = kendo._activeElement,\n        progress = kendo.ui.progress,\n        DataSource = kendo.data.DataSource;\n\n    var ListView = kendo.ui.DataBoundWidget.extend( {\n        init: function(element, options) {\n            var that = this;\n\n            options = Array.isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n\n            that.wrapper = element = that.element;\n\n            if (element[0].id) {\n                that._itemId = element[0].id + \"_lv_active\";\n            }\n\n            that._element();\n\n            that._layout();\n\n            that._dataSource();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._pageable();\n\n            that._crudHandlers();\n\n            that._scrollable();\n\n            if (that.options.autoBind){\n                that.dataSource.fetch();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            CHANGE,\n            CANCEL,\n            DATABINDING,\n            DATABOUND,\n            EDIT,\n            REMOVE,\n            SAVE,\n            KENDO_KEYDOWN\n        ],\n\n        options: {\n            name: \"ListView\",\n            autoBind: true,\n            selectable: false,\n            navigatable: false,\n            pageable: false,\n            height: null,\n            template: EMPTY_STRING,\n            altTemplate: EMPTY_STRING,\n            editTemplate: EMPTY_STRING,\n            contentTemplate: \"<div data-content='true' />\",\n            contentElement: \"div\",\n            bordered: true,\n            borders: \"\",\n            layout: \"\",\n            flex: {\n                direction: \"row\",\n                wrap: \"nowrap\"\n            },\n            grid: {},\n            scrollable: false\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._layout();\n\n            this._templates();\n\n            if (this.selectable) {\n                this.selectable.destroy();\n                this.selectable = null;\n            }\n\n            this._selectable();\n        },\n\n        _templates: function() {\n            var options = this.options;\n\n            this.template = kendo.template(options.template || EMPTY_STRING);\n            this.altTemplate = kendo.template(options.altTemplate || options.template);\n            this.editTemplate = kendo.template(options.editTemplate || EMPTY_STRING);\n        },\n\n        _item: function(action) {\n            return this.content.children()[action]();\n        },\n\n        items: function() {\n            return this.content.children(\":not(.k-loading-mask)\");\n        },\n\n        dataItem: function(element) {\n            var attr = kendo.attr(\"uid\");\n            var uid = $(element).closest(\"[\" + attr + \"]\").attr(attr);\n\n            return this.dataSource.getByUid(uid);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n            this._dataSource();\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n\n            if (this.options.scrollable === \"endless\") {\n                this._bindScrollable();\n            }\n        },\n\n        _unbindDataSource: function() {\n            var that = this;\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler)\n                            .unbind(PROGRESS, that._progressHandler)\n                            .unbind(ERROR, that._errorHandler);\n        },\n\n        _dataSource: function() {\n            var that = this,\n                pageable = that.options.pageable,\n                dataSource = that.options.dataSource;\n\n            if ($.isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                dataSource.pageSize = pageable.pageSize;\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that._unbindDataSource();\n            } else {\n                that._refreshHandler = proxy(that.refresh, that);\n                that._progressHandler = proxy(that._progress, that);\n                that._errorHandler = proxy(that._error, that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler);\n        },\n\n        _progress: function(toggle) {\n            var element = this.content;\n            progress(element, toggle, { opacity: true});\n        },\n\n        _error: function() {\n            progress(this.content, false);\n        },\n\n        _element: function() {\n            var options = this.options;\n            var height = options.height;\n\n            this.element.addClass(\"k-widget k-listview\");\n\n            if (options.navigatable || options.selectable) {\n                this.element.attr(ARIA_ROLE, \"listbox\");\n            } else {\n                this.element.attr(ARIA_ROLE, \"list\");\n            }\n\n            if (options.contentElement) {\n                this.content = $(document.createElement(options.contentElement)).appendTo(this.element);\n            } else {\n                this.content = this.element;\n            }\n\n            this.content.attr(TABINDEX, -1);\n\n            if (height) {\n                this.element.css(\"height\", height);\n            }\n        },\n\n        _layout: function() {\n            var that = this;\n            var options = that.options;\n            var flex = options.flex;\n            var grid = options.grid;\n            var element = that.element;\n            var elementClassNames = [\"k-widget\", \"k-listview\"];\n            var content = that.content;\n            var contentClassNames = [\"k-listview-content\"];\n\n            element.add(content).removeClass(function (index, className) {\n                if (className.indexOf(\"k-\") >= 0) {\n                    return true;\n                }\n            });\n\n            // Element class names\n            if (options.bordered === true) {\n                elementClassNames.push(\"k-listview-bordered\");\n            }\n\n            if (typeof options.borders === \"string\" && options.borders !== EMPTY_STRING) {\n                elementClassNames.push(\"k-listview-borders-\" + options.borders);\n            }\n\n\n            // Content class names\n            if (typeof options.contentPadding === \"string\" && options.contentPadding !== EMPTY_STRING) {\n                contentClassNames.push(\"k-listview-content-padding-\" + options.contentPadding);\n            }\n\n            if (typeof options.layout === \"string\" && options.layout !== EMPTY_STRING) {\n                contentClassNames.push(\"k-d-\" + options.layout);\n            }\n\n            if (options.layout === \"flex\" && typeof flex === \"object\") {\n                if (typeof flex.direction === \"string\" && flex.direction !== \"\") {\n                    contentClassNames.push(\"k-flex-\" + flex.direction);\n                }\n\n                if (typeof flex.wrap === \"string\" && flex.wrap !== \"\") {\n                    contentClassNames.push(\"k-flex-\" + flex.wrap);\n                }\n            }\n\n            if (options.layout === \"grid\" && typeof grid === \"object\") {\n                if (typeof grid.cols === \"number\") {\n                    content.css(\"grid-template-columns\", \"repeat(\" + grid.cols + \", 1fr)\");\n                } else if (typeof grid.cols === \"string\") {\n                    content.css(\"grid-template-columns\", grid.cols);\n                }\n\n                if (typeof grid.rows === \"number\") {\n                    content.css(\"grid-template-rows\", \"repeat(\" + grid.rows + \", \" + (grid.rowHeight !== undefined ? grid.rowHeight : \"1fr\") + \")\");\n                } else if (typeof grid.rows === \"string\") {\n                    content.css(\"grid-template-rows\", grid.rows);\n                }\n\n                if (typeof grid.gutter === \"number\") {\n                    content.css(\"grid-gap\", grid.gutter);\n                } else if (typeof grid.gutter === \"string\") {\n                    content.css(\"grid-gap\", grid.gutter);\n                }\n            }\n\n            that.element.addClass(elementClassNames.join(\" \"));\n            that.content.addClass(contentClassNames.join(\" \"));\n\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n\n                height = that.wrapper.innerHeight();\n                that.content.height(height);\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                view = that.dataSource.view(),\n                data,\n                items,\n                item,\n                html = \"\",\n                idx,\n                length,\n                template = that.template,\n                altTemplate = that.altTemplate,\n                options = that.options,\n                role = (options.selectable || options.navigatable) ? \"option\" : \"listitem\",\n                active = activeElement(),\n                endlessAppend =  that._endlessFetchInProgress,\n                index = endlessAppend ? that._skipRerenderItemsCount : 0,\n                scrollable = that.options.scrollable;\n\n            e = e || {};\n\n            if (e.action === \"itemchange\") {\n                if (!that._hasBindingTarget() && !that.editable) {\n                    data = e.items[0];\n                    item = that.items().filter(\"[\" + kendo.attr(\"uid\") + \"=\" + data.uid + \"]\");\n\n                    if (item.length > 0) {\n                        idx = item.index();\n\n                        that.angular(\"cleanup\", function() {\n                            return { elements: [ item ]};\n                        });\n\n                        item.replaceWith(template(data));\n                        item = that.items().eq(idx);\n                        item.attr(kendo.attr(\"uid\"), data.uid);\n\n                        that.angular(\"compile\", function() {\n                            return { elements: [ item ], data: [ { dataItem: data } ]};\n                        });\n\n                        that.trigger(\"itemChange\", {\n                            item: item,\n                            data: data\n                        });\n                    }\n                }\n\n                return;\n            }\n\n            if (that.trigger(DATABINDING, { action: e.action || \"rebind\", items: e.items, index: e.index })) {\n                return;\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!endlessAppend) {\n                that._destroyEditable();\n            }\n\n            for (idx = index, length = view.length; idx < length; idx++) {\n                if (idx % 2) {\n                    html += altTemplate(view[idx]);\n                } else {\n                    html += template(view[idx]);\n                }\n            }\n\n            if (endlessAppend) {\n                that.content.append(html);\n            } else {\n                that.content.html(html);\n            }\n\n            items = that.items().not(\".k-loading-mask\");\n\n            if (!view.length) {\n                that.element.removeAttr(ARIA_ROLE);\n                that.element.removeAttr(ARIA_LABEL);\n            }\n\n            for (idx = index, length = view.length; idx < length; idx++) {\n                item = items.eq(idx);\n\n                item.addClass(ITEM_CLASS);\n\n                item.attr(kendo.attr(\"uid\"), view[idx].uid)\n                    .attr(\"role\", role);\n\n                if (that.options.selectable) {\n                    item.attr(\"aria-selected\", \"false\");\n                }\n\n                if (that.options.pageable) {\n                    item.attr(ARIA_SETSIZE, that.dataSource.total());\n                    item.attr(ARIA_POSINSET, that.dataSource.indexOf(that.dataItem(item)) + 1);\n                }\n            }\n\n            if (that.content[0] === active && that.options.navigatable) {\n                if (that._focusNext) {\n                    that.current(that.current().next());\n                } else {\n                    if (!scrollable) {\n                        that.current(items.eq(0));\n                    }\n                }\n            }\n\n            that._setContentHeight();\n            that._angularItems(\"compile\");\n\n            that._progress(false);\n            that._endlessFetchInProgress = null;\n\n            that.trigger(DATABOUND, { action: e.action || \"rebind\", items: e.items, index: e.index });\n        },\n\n        _pageable: function() {\n            var that = this,\n                pageable = that.options.pageable,\n                navigatable = that.options.navigatable,\n                pagerWrap,\n                settings;\n\n            if (!pageable) {\n                return;\n            }\n\n            pagerWrap = that.wrapper.find(DOT + PAGER_CLASS);\n\n            if (!pagerWrap.length) {\n                pagerWrap = $('<div />').addClass(PAGER_CLASS);\n            }\n\n            if (pageable.position === \"top\") {\n                pagerWrap\n                    .addClass(kendo.format(\"{0}-{1}\", PAGER_CLASS, pageable.position))\n                    .prependTo(that.wrapper);\n            } else {\n                pagerWrap.appendTo(that.wrapper);\n            }\n\n            if (that.pager) {\n                that.pager.destroy();\n            }\n\n            if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                that.pager = pageable;\n            } else {\n                pagerWrap = pageable.pagerId ? $(\"#\" + pageable.pagerId) : pagerWrap;\n\n                settings = $.extend({}, pageable, {\n                    dataSource: that.dataSource,\n                    navigatable: navigatable,\n                    pagerId: null\n                });\n\n                that.pager = new kendo.ui.Pager(pagerWrap, settings);\n            }\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                current,\n                selectable = that.options.selectable,\n                navigatable = that.options.navigatable;\n\n            if (selectable) {\n                multi = kendo.ui.Selectable.parseOptions(selectable).multiple;\n\n                that.selectable = new kendo.ui.Selectable(that.element, {\n                    aria: true,\n                    multiple: multi,\n                    filter: that.options.contentElement ? \".k-listview-content \" + FOCUSSELECTOR : FOCUSSELECTOR,\n                    change: function() {\n                        that.trigger(CHANGE);\n                    }\n                });\n\n                if(multi) {\n                    that.element.attr(\"aria-multiselectable\", true);\n                }\n\n                if (navigatable) {\n                    that.element.on(\"keydown\" + NS, function(e) {\n\n                        if (!$(e.target).is(that.element)) { return; }\n\n                        if (e.keyCode === keys.SPACEBAR) {\n                            current = that.current();\n\n                            if (e.target == e.currentTarget) {\n                                e.preventDefault();\n                            }\n\n                            if (multi) {\n                                if (!e.ctrlKey) {\n                                    that.selectable.clear();\n                                } else {\n                                    if (current && current.hasClass(SELECTED)) {\n                                        current.removeClass(SELECTED);\n                                        that.trigger(CHANGE);\n                                        return;\n                                    }\n                                }\n                            } else {\n                                that.selectable.clear();\n                            }\n\n                            that.selectable.value(current);\n                        }\n                    });\n                }\n            }\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var scrollable = that.options.scrollable;\n\n            if (scrollable) {\n\n                that.content.css({\n                    \"overflow-y\": \"scroll\",\n                    \"position\": \"relative\",\n                    \"-webkit-overflow-scrolling\": \"touch\"\n                });\n\n                if (scrollable === \"endless\") {\n                    that._bindScrollable();\n                }\n            }\n        },\n\n        _bindScrollable: function (){\n            var that = this;\n            var originalPageSize = that._endlessPageSize = that.dataSource.options.pageSize;\n\n            that.content\n                .off(\"scroll\" + NS)\n                .on(\"scroll\" + NS, function () {\n                    if (this.scrollTop + this.clientHeight - this.scrollHeight >= -15 &&\n                    !that._endlessFetchInProgress &&\n                    that._endlessPageSize < that.dataSource.total()) {\n                        that._skipRerenderItemsCount =  that._endlessPageSize;\n                        that._endlessPageSize = that._skipRerenderItemsCount  + originalPageSize;\n                        that.dataSource.options.endless = true;\n                        that._endlessFetchInProgress = true;\n                        that.dataSource.pageSize(that._endlessPageSize);\n                    }\n                });\n        },\n\n        current: function(candidate) {\n            var that = this,\n                element = that.element,\n                current = that._current,\n                id = that._itemId;\n\n            if (candidate === undefined) {\n                return current;\n            }\n\n            if (current && current[0]) {\n                if (current[0].id === id) {\n                    current.removeAttr(\"id\");\n                }\n\n                current.removeClass(FOCUSED);\n                element.removeAttr(\"aria-activedescendant\");\n            }\n\n            if (candidate && candidate[0]) {\n                id = candidate[0].id || id;\n\n                that._scrollTo(candidate[0]);\n\n                element.attr(\"aria-activedescendant\", id);\n                candidate.addClass(FOCUSED).attr(\"id\", id);\n            }\n\n            that._current = candidate;\n        },\n\n        _scrollTo: function(element) {\n            var that = this,\n                content = that.content,\n                container,\n                UseJQueryoffset = false,\n                SCROLL = \"scroll\";\n\n            if (content.css(\"overflow\") === \"auto\" || content.css(\"overflow\") === SCROLL || content.css(\"overflow-y\") === SCROLL) {\n                container = content[0];\n            } else {\n                container = window;\n                UseJQueryoffset = true;\n            }\n\n            var scrollDirectionFunc = function(direction, dimension) {\n\n                var elementOffset = UseJQueryoffset ? $(element).offset()[direction.toLowerCase()] : element[\"offset\" + direction],\n                    elementDimension = element[\"client\" + dimension],\n                    containerScrollAmount = $(container)[SCROLL + direction](),\n                    containerDimension = $(container)[dimension.toLowerCase()]();\n\n                if (elementOffset + elementDimension > containerScrollAmount + containerDimension) {\n                    $(container)[SCROLL + direction](elementOffset + elementDimension - containerDimension);\n                } else if (elementOffset < containerScrollAmount) {\n                    $(container)[SCROLL + direction](elementOffset);\n                }\n            };\n\n            scrollDirectionFunc(\"Top\", \"Height\");\n            scrollDirectionFunc(\"Left\", \"Width\");\n        },\n\n        _navigatable: function() {\n            var that = this,\n                navigatable = that.options.navigatable,\n                element = that.element,\n                content = that.content,\n                clickCallback = function(e) {\n                    that.current($(e.currentTarget));\n                    if (!$(e.target).is(\":button, a, :input, a > .k-icon, textarea\")) {\n                        kendo.focusElement(element);\n                    }\n                };\n\n            if (navigatable) {\n                that._tabindex();\n\n                element\n                    .on(\"focus\" + NS, function() {\n                        var current = that._current;\n\n                        if (!current || !current.is(\":visible\")) {\n                            current = that._item(\"first\");\n                        }\n\n                        that.current(current);\n                    })\n                    .on(\"focusout\" + NS, function() {\n                        if (that._current) {\n                            that._current.removeClass(FOCUSED);\n                        }\n                    })\n                    .on(\"keydown\" + NS, that, function(e) {\n                        var key = e.keyCode,\n                            current = that.current(),\n                            target = $(e.target),\n                            canHandle = !target.is(\":button, textarea, a, a > .t-icon, input\"),\n                            isTextBox = target.is(\":text, :password\"),\n                            preventDefault = kendo.preventDefault,\n                            editItem = content.find(\".\" + KEDITITEM),\n                            active = activeElement(), idx,\n                            scrollable = that.options.scrollable;\n\n                        if (!target.is(that.element) || (!canHandle && !isTextBox && key !== keys.ESC) || (isTextBox && key !== keys.ESC && key !== keys.ENTER)) {\n                            return;\n                        }\n\n                        if (key === keys.UP || key === keys.LEFT) {\n                            if (current && current[0]) {\n                                current = current.prev();\n                            }\n\n                            if (current && current[0]) {\n                                that.current(current);\n                            }\n                            else if (!scrollable) {\n                                that.current(that._item(\"last\"));\n                            }\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.DOWN || key === keys.RIGHT) {\n                            if (scrollable) {\n                                if (that.options.scrollable === \"endless\" && !current.next().length) {\n                                    that.content[0].scrollTop = that.content[0].scrollHeight;\n                                    that._focusNext = true;\n                                } else {\n                                    current = current.next();\n\n                                    if (current && current[0]) {\n                                        that.current(current);\n                                    }\n                                }\n                            }\n                            else {\n                                current = current.next();\n                                that.current(!current || !current[0] ? that._item(\"first\") : current);\n                            }\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.PAGEUP) {\n                            that.current(null);\n                            that.dataSource.page(that.dataSource.page() - 1);\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.PAGEDOWN) {\n                            that.current(null);\n                            that.dataSource.page(that.dataSource.page() + 1);\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.HOME) {\n                            that.current(that._item(\"first\"));\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.END) {\n                            that.current(that._item(\"last\"));\n                            preventDefault(e);\n                        }\n\n                        if (key === keys.ENTER) {\n                            if (editItem.length !== 0 && (canHandle || isTextBox)) {\n                                idx = that.items().index(editItem);\n\n                                if (active) {\n                                    active.blur();\n                                }\n\n                                that.save();\n\n                                var focusAgain = function(){\n                                    that.element.trigger(\"focus\");\n                                    that.current(that.items().eq(idx));\n                                };\n\n                                that.one(\"dataBound\", focusAgain);\n                            } else if (that.options.editTemplate !== \"\") {\n                                that.edit(current);\n                            }\n                        }\n\n                        if (key === keys.ESC) {\n                            editItem = content.find(\".\" + KEDITITEM);\n\n                            if (editItem.length === 0) {\n                                return;\n                            }\n\n                            idx = that.items().index(editItem);\n                            that.cancel();\n                            that.element.trigger(\"focus\");\n                            that.current(that.items().eq(idx));\n                        }\n                    });\n\n                element.on(MOUSEDOWN + NS + \" \" + TOUCHSTART + NS, that.options.contentElement ? \".k-listview-content \" + FOCUSSELECTOR : FOCUSSELECTOR, proxy(clickCallback, that));\n            }\n        },\n\n        clearSelection: function() {\n            var that = this;\n            that.selectable.clear();\n            that.trigger(CHANGE);\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable;\n\n            items = $(items);\n\n            if (items.length) {\n                if (!selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n                selectable.value(items);\n                return;\n            }\n\n            return selectable.value();\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n            if (that.editable) {\n                that.editable.destroy();\n                delete that.editable;\n            }\n        },\n\n        _modelFromElement: function(element) {\n            var uid = element.attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(uid);\n        },\n\n        _closeEditable: function() {\n            var that = this,\n                editable = that.editable,\n                options = that.options,\n                role = (options.selectable || options.navigatable) ? \"option\" : \"listitem\",\n                data,\n                item,\n                index,\n                template = that.template;\n\n            if (editable) {\n                if (editable.element.index() % 2) {\n                    template = that.altTemplate;\n                }\n\n                that.angular(\"cleanup\", function() {\n                    return { elements: [ editable.element ]};\n                });\n\n                data = that._modelFromElement(editable.element);\n                that._destroyEditable();\n\n                index = editable.element.index();\n                editable.element.replaceWith(template(data));\n                item = that.items().eq(index);\n                item.attr(kendo.attr(\"uid\"), data.uid);\n                item.attr(\"role\", role);\n\n                if (that._hasBindingTarget()) {\n                    kendo.bind(item, data);\n                }\n\n                that.angular(\"compile\", function() {\n                    return { elements: [ item ], data: [ { dataItem: data } ]};\n                });\n            }\n            return true;\n        },\n\n        edit: function(item) {\n            var that = this,\n                data = that._modelFromElement(item),\n                container,\n                uid = data.uid,\n                index;\n\n            that.cancel();\n\n            item = that.items().filter(\"[\" + kendo.attr(\"uid\") + \"=\" + uid + \"]\");\n            index = item.index();\n            item.replaceWith(that.editTemplate(data));\n            container = that.items().eq(index).addClass(KEDITITEM).attr(kendo.attr(\"uid\"), data.uid);\n            that.editable = container.kendoEditable({\n                model: data,\n                clearContainer: false,\n                errorTemplate: false,\n                target: that\n            }).data(\"kendoEditable\");\n\n            that.trigger(EDIT, { model: data, item: container });\n        },\n\n        save: function() {\n            var that = this,\n                editable = that.editable,\n                model;\n\n            if (!editable) {\n                return;\n            }\n\n            var container = editable.element;\n            model = that._modelFromElement(container);\n\n            if (editable.end() && !that.trigger(SAVE, { model: model, item: container }))  {\n                that._closeEditable();\n                that.dataSource.sync();\n            }\n        },\n\n        remove: function(item) {\n            var that = this,\n                dataSource = that.dataSource,\n                data = that._modelFromElement(item);\n\n            if (that.editable) {\n                dataSource.cancelChanges(that._modelFromElement(that.editable.element));\n                that._closeEditable();\n            }\n\n            if (!that.trigger(REMOVE, { model: data, item: item })) {\n                item.hide();\n                dataSource.remove(data);\n                dataSource.sync();\n            }\n        },\n\n        add: function() {\n            var that = this,\n                dataItem,\n                dataSource = that.dataSource,\n                index = dataSource.indexOf((dataSource.view() || [])[0]);\n\n            if (index < 0) {\n                index = 0;\n            }\n\n            that.cancel();\n            dataItem = dataSource.insert(index, {});\n            that.edit(that.element.find(\"[data-uid='\" + dataItem.uid + \"']\"));\n        },\n\n        cancel: function() {\n            var that = this,\n                dataSource = that.dataSource;\n\n            if (that.editable) {\n                var container = that.editable.element;\n                var model = that._modelFromElement(container);\n\n                if (!that.trigger(CANCEL, { model: model, container: container})) {\n                    dataSource.cancelChanges(model);\n                    that._closeEditable();\n                }\n            }\n        },\n\n        _crudHandlers: function() {\n            var that = this,\n                mousedownNs = MOUSEDOWN + NS,\n                touchstartNs = TOUCHSTART + NS,\n                clickNs = CLICK + NS;\n\n            that.content.on(mousedownNs + \" \" + touchstartNs, \".k-edit-button\", function(e) {\n                e.preventDefault();\n                var item = $(this).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n                setTimeout(function() {\n                    that.edit(item);\n                });\n            });\n\n\n            that.content.on(mousedownNs + \" \" + touchstartNs, \".k-delete-button\", function(e) {\n                e.preventDefault();\n                var item = $(this).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n                 setTimeout(function() {\n                    that.remove(item);\n                 });\n            });\n\n            that.content.on(clickNs, \".k-update-button\", function(e) {\n                that.save();\n                e.preventDefault();\n            });\n\n            that.content.on(clickNs, \".k-cancel-button\", function(e) {\n                that.cancel();\n                e.preventDefault();\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that._unbindDataSource();\n\n            that._destroyEditable();\n\n            that.element.off(NS);\n            that.content.off(NS);\n\n            that._endlessFetchInProgress = that._endlessPageSize = that._skipRerenderItemsCount = that._focusNext = null;\n\n            if (that.pager) {\n                that.pager.destroy();\n            }\n\n            kendo.destroy(that.element);\n        }\n    });\n\n    kendo.ui.plugin(ListView);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.upload',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"upload\",\n    name: \"Upload\",\n    category: \"web\",\n    description: \"The Upload widget uses progressive enhancement to deliver the best possible uploading experience to users.\",\n    depends: [ \"core\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        antiForgeryTokens = kendo.antiForgeryTokens,\n        logToConsole = kendo.logToConsole,\n        rFileExtension = /\\.([^\\.]+)$/,\n        NS = \".kendoUpload\",\n        SELECT = \"select\",\n        UPLOAD = \"upload\",\n        SUCCESS = \"success\",\n        ERROR = \"error\",\n        COMPLETE = \"complete\",\n        CANCEL = \"cancel\",\n        CLEAR = \"clear\",\n        PAUSE = \"pause\",\n        RESUME = \"resume\",\n        PROGRESS = \"progress\",\n        REMOVE = \"remove\",\n        VALIDATIONERRORS = \"validationErrors\",\n        INVALIDMAXFILESIZE = \"invalidMaxFileSize\",\n        INVALIDMINFILESIZE = \"invalidMinFileSize\",\n        INVALIDFILEEXTENSION = \"invalidFileExtension\",\n        PROGRESSHIDEDELAY = 1000,\n        PROGRESSHIDEDURATION = 2000,\n        FOCUS_STATE = \"k-state-focused\",\n        TABINDEX = \"tabindex\";\n\n    var headerStatusIcon = {\n        loading: \"k-i-upload\",\n        warning: \"k-i-warning\",\n        success: \"k-i-check\"\n    };\n\n    var Upload = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.name = element.name;\n            that.multiple = that.options.multiple;\n            that.directory = that.options.directory;\n            that.localization = that.options.localization;\n\n            var activeInput = that.element;\n            that.wrapper = activeInput.closest(\".k-upload\");\n            if (that.wrapper.length === 0) {\n                that.wrapper = that._wrapInput(activeInput);\n            }\n\n            that._activeInput(activeInput);\n            that.toggle(that.options.enabled);\n\n            var ns = that._ns = NS + \"-\" + kendo.guid();\n            activeInput.closest(\"form\")\n                .on(\"submit\" + ns, $.proxy(that._onParentFormSubmit, that))\n                .on(\"reset\" + ns, $.proxy(that._onParentFormReset, that));\n\n            that._initUploadModule();\n\n            that._toggleDropZone();\n\n            that.wrapper\n                .on(\"click\", \".k-upload-action\", $.proxy(that._onFileAction, that))\n                .on(\"click\", \".k-clear-selected\", $.proxy(that._onClearSelected, that))\n                .on(\"click\", \".k-upload-selected\", $.proxy(that._onUploadSelected, that))\n                .on(\"keydown\", $.proxy(that._onKeyDown, that))\n                .on(\"focusout\", $.proxy(that._focusout, that));\n\n            if(that.element.val()) {\n                that._onInputChange({ target: that.element });\n            }\n        },\n\n        events: [\n            SELECT,\n            UPLOAD,\n            SUCCESS,\n            ERROR,\n            COMPLETE,\n            CANCEL,\n            CLEAR,\n            PROGRESS,\n            REMOVE,\n            PAUSE,\n            RESUME\n        ],\n\n        options: {\n            name: \"Upload\",\n            enabled: true,\n            multiple: true,\n            directory: false,\n            showFileList: true,\n            template: \"\",\n            files: [],\n            async: {\n                autoRetryAfter: 0,\n                bufferChunkSize: 10000000,\n                maxAutoRetries: 1,\n                removeVerb: \"POST\",\n                autoUpload: true,\n                withCredentials: true,\n                accept: \"*/*; q=0.5, application/json\",\n                useArrayBuffer: false\n            },\n            localization: {\n                \"select\": \"Select files...\",\n                \"cancel\": \"Cancel\",\n                \"retry\": \"Retry\",\n                \"remove\": \"Remove\",\n                \"pause\": \"Pause\",\n                \"resume\": \"Resume\",\n                \"clearSelectedFiles\": \"Clear\",\n                \"uploadSelectedFiles\": \"Upload\",\n                \"dropFilesHere\": \"Drop files here to upload\",\n                \"invalidFiles\": \"Invalid file(s). Please check file upload requirements.\",\n                \"statusUploading\": \"uploading\",\n                \"statusUploaded\": \"uploaded\",\n                \"statusWarning\": \"warning\",\n                \"statusFailed\": \"failed\",\n                \"headerStatusUploading\": \"Uploading...\",\n                \"headerStatusPaused\": \"Paused\",\n                \"headerStatusUploaded\": \"Done\",\n                \"uploadSuccess\": \"File(s) uploaded successfully.\",\n                \"uploadFail\": \"File(s) failed to upload.\",\n                \"invalidMaxFileSize\": \"File size too large.\",\n                \"invalidMinFileSize\": \"File size too small.\",\n                \"invalidFileExtension\": \"File type not allowed.\"\n            },\n            validation: {\n                allowedExtensions: [],\n                maxFileSize: 0,\n                minFileSize: 0\n            },\n            dropZone: \"\"\n        },\n\n        _initUploadModule: function() {\n            var that = this,\n                options = that.options;\n\n            if (options.async.saveUrl) {\n                that._module = that._supportsFormData() ?\n                new formDataUploadModule(that) :\n                new iframeUploadModule(that);\n                that._async = true;\n\n                var initialFiles = options.files;\n                if (initialFiles.length > 0) {\n                    that._renderInitialFiles(initialFiles);\n                }\n\n            } else {\n                that._module = new syncUploadModule(that);\n            }\n        },\n\n        setOptions: function(options) {\n            var that = this,\n                activeInput = that.element;\n\n            $(that.options.dropZone).off(that._ns);\n\n            Widget.fn.setOptions.call(that, options);\n\n            that.multiple = that.options.multiple;\n            that.directory = that.options.directory;\n\n            activeInput.attr(\"multiple\", that._supportsMultiple() ? that.multiple : false);\n            if(that.directory){\n                activeInput.attr(\"webkitdirectory\", that.directory);\n                activeInput.attr(\"directory\", that.directory);\n            }\n            that.toggle(that.options.enabled);\n\n            that._initUploadModule();\n\n            that._toggleDropZone();\n        },\n\n        enable: function(enable) {\n            enable = typeof (enable) === \"undefined\" ? true : enable;\n            this.toggle(enable);\n        },\n\n        disable: function() {\n            this.toggle(false);\n        },\n\n        toggle: function(enable) {\n            enable = typeof (enable) === \"undefined\" ? enable : !enable;\n            this.wrapper.toggleClass(\"k-state-disabled\", enable);\n            this.element.prop(\"disabled\", enable);\n        },\n\n        focus: function() {\n            this.element.trigger(\"focus\");\n        },\n\n        destroy: function() {\n            var that = this;\n            var customDropZone = $(that.options.dropZone);\n\n            $(document)\n                .add($(\".k-dropzone\", that.wrapper))\n                .add(that.wrapper.closest(\"form\"))\n                .off(that._ns);\n\n            if(customDropZone.length > 0) {\n                customDropZone.off(that._ns);\n            }\n\n            $(that.element).off(NS);\n\n            Widget.fn.destroy.call(that);\n        },\n        pause: function(fileEntry){\n            this._module.onPause({ target: $(fileEntry, this.wrapper) });\n\n            var pauseIcon = fileEntry.find(\".k-i-pause-sm\");\n            pauseIcon.removeClass(\"k-i-pause-sm\").addClass(\"k-i-play-sm\").attr(\"title\", this.localization.resume);\n            $(pauseIcon).parent().attr(\"aria-label\", this.localization.resume);\n        },\n        resume: function(fileEntry){\n            this._module.onResume({ target: $(fileEntry, this.wrapper) });\n\n            var playIcon = fileEntry.find(\".k-i-play-sm\");\n            playIcon.removeClass(\"k-i-play-sm\").addClass(\"k-i-pause-sm\").attr(\"title\", this.localization.pause);\n            $(playIcon).parent().attr(\"aria-label\", this.localization.pause);\n        },\n        upload: function() {\n            var that = this;\n\n            that._module.onSaveSelected();\n        },\n\n        getFiles: function() {\n            var that = this;\n            var filesData;\n            var allFiles = [];\n            var listItems = that.wrapper.find(\".k-file\");\n\n            for(var i = 0; i < listItems.length; i++) {\n                filesData = $(listItems[i]).data(\"fileNames\");\n\n                if(filesData) {\n                    for(var j = 0; j < filesData.length; j++) {\n                        allFiles.push(filesData[j]);\n                    }\n                }\n            }\n\n            return allFiles;\n        },\n\n        clearAllFiles: function() {\n            var that = this;\n            var files = that.wrapper.find(\".k-file\");\n\n            files.each(function(index, file) {\n                that._removeFileByDomElement(file, false);\n            });\n        },\n\n        removeAllFiles: function() {\n            var that = this;\n            var files = that.wrapper.find(\".k-file\");\n\n            files.each(function(index, file) {\n                that._removeFileByDomElement(file, true);\n            });\n        },\n\n        removeFileByUid: function(uid) {\n            this._removeFileByUid(uid, true);\n        },\n\n        clearFileByUid: function(uid) {\n            this._removeFileByUid(uid, false);\n        },\n\n        _removeFileByUid: function(uid, shouldSendRemoveRequest) {\n            var that = this;\n            var fileEntry;\n\n            if(typeof uid !== 'string') { return; }\n\n            fileEntry = $('.k-file[' + kendo.attr('uid') + '=\"' + uid + '\"]', that.wrapper);\n\n            if(fileEntry.length > 0) {\n                that._removeFileByDomElement(fileEntry, shouldSendRemoveRequest);\n            }\n        },\n\n        clearFile: function(callback) {\n            this._removeFile(callback, false);\n        },\n\n        removeFile: function(callback) {\n            this._removeFile(callback, true);\n        },\n\n        _removeFile: function(callback, shouldSendRemoveRequest) {\n            var that = this;\n            var files = that.wrapper.find(\".k-file\");\n            var fileData;\n\n            if(typeof callback === \"function\") {\n                files.each(function(index, file){\n                    fileData = $(file).data(\"fileNames\");\n\n                    if(callback(fileData)) {\n                        that._removeFileByDomElement(file, shouldSendRemoveRequest);\n                    }\n                });\n            }\n        },\n\n        _removeFileByDomElement: function(fileEntry, shouldSendRemoveRequest) {\n            var that = this;\n            var fileData = {\n                target: $(fileEntry, that.wrapper)\n            };\n            var allFiles;\n\n            if(that.options.async.saveUrl) {\n                if($(fileEntry).hasClass(\"k-file-progress\")) {\n                    that._module.onCancel(fileData);\n                } else {\n                    that._module.onRemove(fileData, {}, shouldSendRemoveRequest);\n                }\n\n                allFiles = $(\".k-file\", that.wrapper);\n\n                if(allFiles.length === 0) {\n                    that._hideHeaderUploadstatus();\n                } else {\n                    that._updateHeaderUploadStatus();\n                }\n            } else {\n                that._module.onRemove(fileData, {}, shouldSendRemoveRequest);\n            }\n        },\n\n        _addInput: function(sourceInput) {\n            //check if source input is a DOM element. Required for some unit tests\n            if (!sourceInput[0].nodeType) {\n                return;\n            }\n\n            var that = this,\n                input = sourceInput.clone().val(\"\");\n\n            input\n                .insertAfter(that.element)\n                .data(\"kendo\" + that.options.prefix + that.options.name, that);\n\n            $(that.element)\n                .hide()\n                .attr(TABINDEX, \"-1\")\n                .removeAttr(\"id\")\n                .off(NS);\n\n            that._activeInput(input);\n            that.element.trigger(\"focus\");\n        },\n\n        _activeInput: function(input) {\n            var that = this,\n                wrapper = that.wrapper;\n\n            that.element = input;\n\n            if(that.directory){\n                input.attr(\"webkitdirectory\", that.directory);\n                input.attr(\"directory\", that.directory);\n            }\n\n            input\n                .attr(\"multiple\", that._supportsMultiple() ? that.multiple : false)\n                .attr(\"autocomplete\", \"off\")\n                .on(\"click\" + NS, function(e) {\n                    if (wrapper.hasClass(\"k-state-disabled\")) {\n                        e.preventDefault();\n                    }\n                })\n                .on(\"focus\" + NS, function() {\n                    $(this).parent().addClass(FOCUS_STATE);\n                })\n                .on(\"blur\" + NS, function() {\n                    $(this).parent().removeClass(FOCUS_STATE);\n                })\n                .on(\"change\" + NS, $.proxy(that._onInputChange, that));\n        },\n\n        _adjustFocusState: function(focusedItem, toFocus) {\n            focusedItem.removeClass(FOCUS_STATE);\n            focusedItem.attr(TABINDEX, -1);\n            toFocus.addClass(FOCUS_STATE);\n            toFocus.attr(TABINDEX, 0);\n        },\n\n        _arrowKeyNavigation: function(e, key, focusedItem) {\n            var that = this,\n                kendoKeys = kendo.keys,\n                toFocus;\n\n            if(key === kendoKeys.DOWN) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                toFocus = that.wrapper.find(\".k-upload-files .k-file\").first();\n\n                if(focusedItem.length > 0) {\n                    if(focusedItem.hasClass(\"k-upload-action\")) {\n                        focusedItem.removeClass(FOCUS_STATE);\n                        focusedItem = focusedItem.closest(\".k-file\");\n                    }\n\n                    toFocus = focusedItem.next();\n                }\n\n                that._adjustFocusState(focusedItem, toFocus);\n\n                if(!toFocus || toFocus.length === 0) {\n                    toFocus = that.wrapper.find(\".k-clear-selected\");\n                }\n            } else if(key === kendoKeys.UP) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                toFocus = that.wrapper.find(\".k-upload-files .k-file:last\");\n\n                if(focusedItem.length > 0) {\n                    if(focusedItem.hasClass(\"k-upload-action\")) {\n                        focusedItem.removeClass(FOCUS_STATE);\n                        focusedItem = focusedItem.closest(\".k-file\");\n                    }\n\n                    toFocus = focusedItem.prev();\n                }\n\n                that._adjustFocusState(focusedItem, toFocus);\n            } else if(key === kendoKeys.RIGHT) {\n                if(focusedItem.hasClass(\"k-upload-action\")) {\n                    toFocus = focusedItem.next(\".k-upload-action\");\n\n                    if(!toFocus || toFocus.length === 0) {\n                        toFocus = focusedItem.parent().find(\".k-upload-action:first\");\n                    }\n                } else if(focusedItem.length > 0) {\n                    toFocus = focusedItem.find(\".k-upload-action:first\");\n                }\n\n                if(toFocus && toFocus.length > 0) {\n                    focusedItem.removeClass(FOCUS_STATE);\n                    toFocus.addClass(FOCUS_STATE);\n                }\n            } else if(key === kendoKeys.LEFT) {\n                if(focusedItem.hasClass(\"k-upload-action\")) {\n                    toFocus = focusedItem.prev(\".k-upload-action\");\n\n                    if(!toFocus || toFocus.length === 0) {\n                        toFocus = focusedItem.parent().find(\".k-upload-action:last\");\n                    }\n                } else if(focusedItem.length > 0) {\n                    toFocus = focusedItem.find(\".k-upload-action:last\");\n                }\n\n                if(toFocus && toFocus.length > 0) {\n                    focusedItem.removeClass(FOCUS_STATE);\n                    toFocus.addClass(FOCUS_STATE);\n                }\n            }\n\n            if((!toFocus || toFocus.length === 0) && (key === kendoKeys.UP || key === kendoKeys.DOWN)) {\n                toFocus = that.element;\n            }\n\n            if(toFocus && toFocus.length > 0) {\n                that._preventFocusRemove = true;\n                toFocus.trigger(\"focus\");\n            }\n        },\n\n        _asyncCommandKeyNavigation: function(key, focusedItem, eventArgs) {\n            var that = this,\n                kendoKeys = kendo.keys,\n                fileEntry = $(focusedItem, that.wrapper);\n\n            that._retryClicked = false;\n\n            if (key === kendoKeys.ESC && focusedItem.find(\".k-i-cancel\").length > 0) {\n                that.trigger(CANCEL, eventArgs);\n                that._module.onCancel({ target: fileEntry });\n                that._checkAllComplete();\n                that._updateHeaderUploadStatus();\n                that._preventFocusRemove = true;\n                that.element.trigger(\"focus\");\n            } else if (key === kendoKeys.SPACEBAR) {\n                if (focusedItem.find(\".k-i-pause-sm\").length > 0) {\n                    that.trigger(PAUSE, eventArgs);\n                    that.pause(focusedItem);\n                    that._updateHeaderUploadStatus();\n                } else if (focusedItem.find(\".k-i-play-sm\").length > 0) {\n                    that.trigger(RESUME, eventArgs);\n                    that.resume(focusedItem);\n                }\n            } else if (key === kendoKeys.ENTER && !focusedItem.is(\".k-file-progress, .k-file-success, .k-file-invalid\")) {\n                if(that.options.async.chunkSize && !that.options.async.concurrent && $('.k-file-progress', that.wrapper).length > 0) {\n                    return;\n                }\n\n                $(\".k-i-warning\", focusedItem).remove();\n                $(\".k-progressbar\", focusedItem).finish().show();\n\n                if (!that._module.metaData[fileEntry.data(\"uid\")]) {\n                    that._module.prepareChunk(fileEntry);\n                }\n\n                that._module.onRetry({ target: fileEntry });\n                that._retryClicked = true;\n            }\n        },\n\n        _commandKeyNavigation: function(key, focusedItem) {\n            var that = this,\n                kendoKeys = kendo.keys,\n                files = focusedItem.data(\"fileNames\"),\n                hasValidationErrors = that._filesContainValidationErrors(files),\n                eventArgs = {\n                    files: files,\n                    headers: {}\n                };\n\n            if (key === kendoKeys.DELETE) {\n                if (!that.trigger(REMOVE, eventArgs)) {\n                    that._module.onRemove({target : $(focusedItem, that.wrapper)}, eventArgs, !hasValidationErrors);\n                    that._preventFocusRemove = true;\n                    that.element.trigger(\"focus\");\n                }\n            } else if (key === kendoKeys.TAB) {\n                focusedItem.removeClass(FOCUS_STATE);\n                focusedItem.attr(TABINDEX, -1);\n            } else if(!!that.options.async.saveUrl) {\n                that._asyncCommandKeyNavigation(key, focusedItem, eventArgs);\n            }\n        },\n\n        _focusout: function() {\n            var focusedItem = this.wrapper.find(\".k-upload-files .k-file.\" + FOCUS_STATE);\n\n            if(!this._preventFocusRemove) {\n                focusedItem.removeClass(FOCUS_STATE);\n                focusedItem.attr(TABINDEX, -1);\n            } else {\n                this._preventFocusRemove = false;\n            }\n        },\n\n        _onKeyDown: function(e) {\n            var that = this,\n                focusedItem = that.wrapper.find(\".k-upload-files .k-file.\" + FOCUS_STATE + \",\" + \".k-upload-action.\" + FOCUS_STATE),\n                kendoKeys = kendo.keys,\n                commandKeys = [kendoKeys.DELETE, kendoKeys.ESC, kendoKeys.ENTER, kendoKeys.SPACEBAR, kendoKeys.TAB],\n                key = e.keyCode;\n\n            if(key === kendoKeys.DOWN || key === kendoKeys.UP || key === kendoKeys.LEFT || key === kendoKeys.RIGHT) {\n                that._arrowKeyNavigation(e, key, focusedItem);\n            } else if (focusedItem.length > 0 && focusedItem.hasClass(\"k-file\") && commandKeys.indexOf(key) > -1 && !that.wrapper.hasClass(\"k-state-disabled\")) {\n                if (key === kendoKeys.SPACEBAR) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n\n                that._commandKeyNavigation(key, focusedItem);\n            }\n        },\n\n        _onInputChange: function(e) {\n            var that = this;\n            var input = $(e.target);\n            var files = assignGuidToFiles(that._inputFiles(input), that._isAsyncNonBatch());\n\n            validateFiles(files, that.options.validation);\n\n            var prevented = that.trigger(SELECT, { files: files });\n            if (prevented) {\n                that._addInput(input);\n                input.remove();\n            } else {\n                that._module.onSelect({target : input}, files);\n            }\n        },\n\n        _readDirectory: function(item){\n            var deferred = new $.Deferred();\n            var dirReader = item.createReader();\n            var allFolderFiles = [];\n\n            var readEntries = function () {\n                dirReader.readEntries(function(entries) {\n                    if (!entries.length) {\n                        deferred.resolve(allFolderFiles);\n                    } else {\n                        allFolderFiles = allFolderFiles.concat(entries);\n                        readEntries();\n                    }\n                }, deferred.reject);\n            };\n\n            readEntries();\n\n             return deferred.promise();\n        },\n\n        _readFile: function(item){\n            var that = this;\n            var fullpath = item.fullPath;\n\n            item.file(function(file){\n                    file.relativePath = fullpath.slice(1);\n                    that.droppedFolderFiles.push(file);\n                    that.droppedFolderCounter --;\n                    if(that.droppedFolderCounter === 0){\n                        setTimeout(function(){\n                            if(that.droppedFolderCounter === 0){\n                                if(that.droppedFolderFiles.length){\n                                    that._proceedDroppedItems(that.droppedFolderFiles);\n                                    that.droppedFolderFiles = [];\n                                }\n                            }\n                        },0);\n                    }\n            }, function(){\n                logToConsole(\"File error.\");\n            });\n        },\n\n        _traverseFileTree: function (item, skipCounter) {\n            var that = this;\n            if(!skipCounter){\n                that.droppedFolderCounter--;\n            }\n\n            this._readDirectory(item).then(function(items){\n                that.droppedFolderCounter += items.length;\n                for (var i = 0; i < items.length; i++) {\n                    if(items[i].isFile){\n                        that._readFile(items[i]);\n                    } else if (items[i].isDirectory){\n                        that._traverseFileTree(items[i]);\n                    }\n                }\n            });\n        },\n\n        _onDrop: function (e) {\n            var dt = e.originalEvent.dataTransfer;\n            var that = this;\n            var droppedFiles = dt.files;\n            var length;\n\n            stopEvent(e);\n           if(that.options.directoryDrop && dt.items){\n                length = dt.items.length;\n                that.droppedFolderCounter = 0;\n                that.droppedFolderFiles = [];\n\n                for (var i = 0; i < length; i++) {\n                    if(dt.items[i].webkitGetAsEntry){\n                        var entry = dt.items[i].webkitGetAsEntry();\n\n                        if(entry.isDirectory){\n                            that._traverseFileTree(entry, true);\n                        }else if (entry.isFile){\n                            that.droppedFolderFiles.push(dt.files[i]);\n                        }\n                    }else{\n                         that._proceedDroppedItems(droppedFiles);\n                    }\n                }\n           }else{\n               that._proceedDroppedItems(droppedFiles);\n           }\n        },\n\n        _proceedDroppedItems: function(droppedFiles){\n            var that = this;\n            var files = assignGuidToFiles(getAllFileInfo(droppedFiles), that._isAsyncNonBatch());\n\n              if (droppedFiles.length > 0 && !that.wrapper.hasClass(\"k-state-disabled\")) {\n                if (!that.multiple && files.length > 1) {\n                    files.splice(1, files.length - 1);\n                }\n\n                validateFiles(files, that.options.validation);\n\n                var prevented = that.trigger(SELECT, { files: files });\n                if (!prevented) {\n                    that._module.onSelect({target : $(\".k-dropzone\", that.wrapper) }, files);\n                }\n            }\n        },\n\n        _filesContainValidationErrors: function(files) {\n            var hasErrors = false;\n\n            $(files).each(function(index, file){\n                if(file[VALIDATIONERRORS] && file[VALIDATIONERRORS].length > 0) {\n                    hasErrors = true;\n                    return false;\n                }\n            });\n\n            return hasErrors;\n        },\n\n        _isAsyncNonBatch: function () {\n            return (this._async && !this.options.async.batch) || false;\n        },\n\n        _renderInitialFiles: function(files) {\n            var that = this;\n            var idx = 0;\n            files = assignGuidToFiles(files, true);\n\n            for (idx = 0; idx < files.length; idx++) {\n                var currentFile = files[idx];\n\n                var fileEntry = that._enqueueFile(currentFile.name, { fileNames: [ currentFile ] });\n                fileEntry.addClass(\"k-file-success\").data(\"files\", [ files[idx] ]);\n\n                if (that._supportsRemove()){\n                    that._fileAction(fileEntry, REMOVE);\n                }\n            }\n        },\n\n        _prepareTemplateData: function(name, data) {\n            var filesData = data.fileNames,\n                templateData = {},\n                totalSize = 0,\n                idx = 0;\n\n            for (idx = 0; idx < filesData.length; idx++) {\n                totalSize += filesData[idx].size;\n            }\n\n            templateData.name = name;\n            templateData.size = totalSize;\n            templateData.files = data.fileNames;\n\n            return templateData;\n        },\n\n        _prepareDefaultSingleFileEntryTemplate: function(data) {\n            var that = this;\n            var file = data.fileNames[0];\n            var fileSize = getTotalFilesSizeMessage(data.fileNames);\n            var fileGroup = kendo.getFileGroup(file.extension, true);\n            var errors = file[VALIDATIONERRORS];\n            var template = \"\";\n\n            if(errors && errors.length > 0) {\n                template += \"<li class='k-file k-file-invalid'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>\" +\n                \"<span class='k-file-invalid-group-wrapper'>\" +\n                    \"<span class='k-file-group k-icon k-i-\" + fileGroup + \"'></span>\" +\n                    \"<span class='k-file-state'></span>\" +\n                \"</span>\" +\n                \"<span class='k-file-name-size-wrapper'>\" +\n                    \"<span class='k-file-name k-file-name-invalid' title='\" + file.name + \"'>\" + file.name + \"</span>\" +\n                    \"<span class='k-file-validation-message k-text-error'>\" + that.localization[errors[0]] + \"</span>\" +\n                \"</span>\";\n            } else {\n                template += \"<li class='k-file'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>\" +\n                \"<span class='k-file-group-wrapper'>\" +\n                    \"<span class='k-file-group k-icon k-i-\" + fileGroup + \"'></span>\" +\n                    \"<span class='k-file-state'></span>\" +\n                \"</span>\" +\n                \"<span class='k-file-name-size-wrapper'><span class='k-file-name' title='\" + file.name + \"'>\" + file.name + \"</span>\" +\n                \"<span class='k-file-size'>\" + fileSize + \"</span></span>\";\n            }\n\n            template += \"<strong class='k-upload-status'></strong>\";\n\n            return $(template);\n        },\n\n        _prepareDefaultMultipleFileEntriesTemplate: function(data) {\n            var that = this;\n            var files = data.fileNames;\n            var filesHaveValidationErrors = that._filesContainValidationErrors(files);\n            var totalFileSize = getTotalFilesSizeMessage(files);\n            var template = \"\";\n            var i, currentFile;\n\n            if(filesHaveValidationErrors) {\n                template += \"<li class='k-file k-file-invalid'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>\" +\n                    \"<span class='k-multiple-files-invalid-group-wrapper'>\" +\n                    \"<span class='k-file-group k-icon k-i-files'></span>\";\n            } else {\n                template += \"<li class='k-file'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div>\" +\n                    \"<span class='k-multiple-files-group-wrapper'>\" +\n                        \"<span class='k-file-group k-icon k-i-files'></span>\";\n            }\n\n            template += \"<span class='k-file-state'></span></span>\";\n\n            files.sort(function(a, b){\n                if(a[VALIDATIONERRORS]) { return -1; }\n\n                if (b[VALIDATIONERRORS]) { return 1; }\n\n                return 0;\n            });\n\n            template += \"<span class='k-multiple-files-wrapper'>\";\n            for(i = 0; i < files.length; i++) {\n                currentFile = files[i];\n                var fileSize = getTotalFilesSizeMessage([currentFile]);\n\n                template += \"<span class='k-file-name-size-wrapper'>\";\n                if(currentFile[VALIDATIONERRORS] && currentFile[VALIDATIONERRORS].length > 0) {\n                    template += \"<span class='k-file-name k-file-name-invalid' title='\" + currentFile.name + \"'>\" + currentFile.name + \"</span>\";\n                } else {\n                    template += \"<span class='k-file-name' title='\" + currentFile.name + \"'>\" + currentFile.name + \"</span>\";\n                }\n                template += \"<span class='k-file-size'>\" + fileSize + \"</span></span>\";\n            }\n\n            if(filesHaveValidationErrors) {\n                template += \"<span class='k-file-validation-message k-text-error'>\" + that.localization.invalidFiles +\"</span>\";\n            } else {\n                template += \"<span class='k-file-information'>Total: \" + files.length + \" files, \" + totalFileSize + \"</span>\";\n            }\n\n            template += \"</span><strong class='k-upload-status'></strong>\";\n\n            return $(template);\n        },\n\n        _enqueueFile: function(name, data) {\n            var that = this;\n            var existingFileEntries;\n            var fileEntry;\n            var fileUid = data.fileNames[0].uid;\n            var fileList =  $(\".k-upload-files\", that.wrapper);\n            var options = that.options;\n            var template = options.template;\n            var templateData;\n            var removeEventArgs;\n\n            if (fileList.length === 0) {\n                fileList = $(\"<ul class='k-upload-files k-reset'></ul>\").appendTo(that.wrapper);\n                if (!that.options.showFileList) {\n                    fileList.hide();\n                }\n\n                that.wrapper.removeClass(\"k-upload-empty\");\n            }\n\n            existingFileEntries = $(\".k-file\", fileList);\n\n            if (!template) {\n                if(data.fileNames.length === 1) {\n                    fileEntry = that._prepareDefaultSingleFileEntryTemplate(data);\n                } else {\n                    fileEntry = that._prepareDefaultMultipleFileEntriesTemplate(data);\n                }\n            } else {\n                templateData = that._prepareTemplateData(name, data);\n                template = kendo.template(template);\n\n                fileEntry = $(\"<li class='k-file'>\" + template(templateData) + \"</li>\");\n                fileEntry.find(\".k-upload-action\").addClass(\"k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base\");\n\n                that.angular(\"compile\", function(){\n                    return {\n                        elements: fileEntry,\n                        data: [ templateData ]\n                    };\n                });\n            }\n\n            fileEntry\n                .attr(kendo.attr(\"uid\"), fileUid)\n                .appendTo(fileList)\n                .data(data);\n\n            if (!that._async) {\n                $(\".k-progress\", fileEntry).width('100%');\n            }\n\n            if (!that.multiple && existingFileEntries.length > 0) {\n                removeEventArgs = {\n                    files: existingFileEntries.data(\"fileNames\"),\n                    headers: {}\n                };\n                if (!that.trigger(REMOVE, removeEventArgs)) {\n                    that._module.onRemove({target : $(existingFileEntries, that.wrapper)}, removeEventArgs);\n                }\n            }\n\n            return fileEntry;\n        },\n\n        _removeFileEntry: function(fileEntry) {\n            var that = this;\n            var fileList = fileEntry.closest(\".k-upload-files\");\n            var allFiles, allCompletedFiles, allInvalidFiles;\n\n            fileEntry.remove();\n            allFiles = $(\".k-file\", fileList);\n            allCompletedFiles = $(\".k-file-success, .k-file-error\", fileList);\n            allInvalidFiles = $(\".k-file-invalid\", fileList);\n\n            if (allCompletedFiles.length === allFiles.length || allInvalidFiles.length === allFiles.length) {\n                this._hideActionButtons();\n            }\n\n            if (allFiles.length === 0) {\n                fileList.remove();\n                that.wrapper.addClass(\"k-upload-empty\");\n                that._hideHeaderUploadstatus();\n            } else {\n                that._updateHeaderUploadStatus();\n            }\n        },\n\n        _fileAction: function(fileElement, actionKey, skipClear) {\n            var classDictionary = { remove: \"k-i-x\", cancel: \"k-i-cancel\", retry: \"k-i-retry\", pause: \"k-i-pause-sm\"};\n            var iconsClassDictionary = {remove: \"k-i-close\", cancel: \"k-i-cancel\", retry: \"k-i-reload-sm\", pause: \"k-i-pause-sm\"};\n            var firstActionButton;\n\n            if (!classDictionary.hasOwnProperty(actionKey)) {\n                return;\n            }\n            if(!skipClear){\n                this._clearFileAction(fileElement);\n            }\n            if (!this.options.template) {\n                if(!skipClear){\n                    fileElement.find(\".k-upload-status .k-upload-action\").remove();\n                }\n                fileElement.find(\".k-upload-status\").append(\n                    this._renderAction(classDictionary[actionKey], this.localization[actionKey], iconsClassDictionary[actionKey])\n                );\n            } else {\n                firstActionButton = fileElement.find(\".k-upload-action\").first();\n                if(!firstActionButton.find(\".k-icon\").length){\n                firstActionButton\n                        .addClass(\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button\")\n                        .append(\"<span class='k-button-icon k-icon \" + iconsClassDictionary[actionKey] + \" \" + classDictionary[actionKey] +\n                                \"' title='\" + this.localization[actionKey] + \"'\" +\n                                \"aria-label='\" + this.localization[actionKey] + \"'></span>\")\n                        .show();\n                }else if (firstActionButton.next(\".k-upload-action\").length){\n                    firstActionButton.next(\".k-upload-action\")\n                        .addClass(\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button\")\n                        .append(\"<span class='k-button-icon k-icon \" + iconsClassDictionary[actionKey] + \" \" + classDictionary[actionKey] +\n                                \"' title='\" + this.localization[actionKey] + \"'\" +\n                                \"aria-label='\" + this.localization[actionKey] + \"'></span>\")\n                        .show();\n                }\n            }\n        },\n\n        _fileState: function(fileEntry, stateKey) {\n            var localization = this.localization,\n                states = {\n                    uploading: {\n                        text : localization.statusUploading\n                    },\n                    uploaded: {\n                        text : localization.statusUploaded\n                    },\n                    failed: {\n                        text : localization.statusFailed\n                    }\n                },\n                currentState = states[stateKey];\n\n            if (currentState) {\n                $(\"span.k-file-state\", fileEntry).text(currentState.text);\n            }\n        },\n\n        _renderAction: function (actionClass, actionText, iconClass) {\n            if (actionClass !== \"\") {\n                return $(\n                \"<button type='button' class='k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-upload-action' aria-label='\" + actionText + \"' tabindex='-1'>\" +\n                    \"<span class='k-button-icon k-icon \"+ iconClass + \" \" + actionClass + \"' title='\" + actionText + \"'></span>\" +\n                \"</button>\"\n                ).on(\"focus\", function() { $(this).addClass(FOCUS_STATE); })\n                 .on(\"blur\", function() { $(this).removeClass(FOCUS_STATE); });\n            }\n            else {\n                return $(\n                \"<button type='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'>\" +\n                    '<span class=\"k-button-text\">' +\n                        actionText +\n                    '</span>' +\n                \"</button>\"\n                );\n            }\n        },\n\n        _clearFileAction: function(fileElement) {\n            $(\".k-upload-action\", fileElement).empty().hide();\n        },\n\n        _onFileAction: function(e) {\n            var that = this;\n            if (!that.wrapper.hasClass(\"k-state-disabled\")) {\n                var button = $(e.target).closest(\".k-upload-action\");\n                var icon = button.find(\".k-icon\");\n                var fileEntry = button.closest(\".k-file\");\n                var files = fileEntry.data(\"fileNames\");\n                var hasValidationErrors = that._filesContainValidationErrors(files);\n                var eventArgs = {\n                    files: files,\n                    headers: {}\n                };\n\n                that._retryClicked = false;\n\n                if (icon.hasClass(\"k-i-x\")) {\n                    if (!that.trigger(REMOVE, eventArgs)) {\n                        that._module.onRemove({target : $(fileEntry, that.wrapper)}, eventArgs, !hasValidationErrors);\n                        that.element.trigger(\"focus\");\n                    }\n                } else if (icon.hasClass(\"k-i-cancel\")) {\n                    that.trigger(CANCEL, eventArgs);\n                    that._module.onCancel({ target: $(fileEntry, that.wrapper) });\n                    that._checkAllComplete();\n                    that._updateHeaderUploadStatus();\n                    that.element.trigger(\"focus\");\n                } else if (icon.hasClass(\"k-i-pause-sm\")) {\n                    that.trigger(PAUSE, eventArgs);\n                    that.pause(fileEntry);\n                    that._updateHeaderUploadStatus();\n                } else if (icon.hasClass(\"k-i-play-sm\")) {\n                    that.trigger(RESUME, eventArgs);\n                    that.resume(fileEntry);\n                }else if (icon.hasClass(\"k-i-retry\")) {\n                    $(\".k-i-warning\", fileEntry).remove();\n                    $(\".k-progressbar\", fileEntry).finish().show();\n                    that._module.onRetry({ target: $(fileEntry, that.wrapper) });\n                    that._retryClicked = true;\n                }\n\n                fileEntry.addClass(FOCUS_STATE);\n            }\n\n            return false;\n        },\n\n        _onUploadSelected: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (!wrapper.hasClass(\"k-state-disabled\")) {\n                this._module.onSaveSelected();\n            }\n\n            return false;\n        },\n\n        _onClearSelected: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            var clearEventArgs = { };\n            if(!wrapper.hasClass(\"k-state-disabled\") && !that.trigger(CLEAR, clearEventArgs)) {\n                that.clearAllFiles();\n            }\n\n            return false;\n        },\n\n        _onFileProgress: function(e, percentComplete) {\n            var progressPct;\n\n            if (percentComplete > 100) {\n                percentComplete = 100;\n            }\n\n            $(\".k-progressbar\", e.target).removeClass('k-hidden');\n\n            if (!this.options.template) {\n                progressPct = $(\".k-upload-pct\", e.target);\n\n                if (progressPct.length === 0) {\n                    $(\".k-upload-status\", e.target).prepend(\"<span class='k-upload-pct'></span>\");\n                }\n\n                if(percentComplete !== 100){\n                    $(\".k-upload-pct\", e.target).text(percentComplete + \"%\");\n                }else{\n                     $(\".k-upload-pct\", e.target).remove();\n                }\n                $(\".k-progress\", e.target).width(percentComplete + \"%\");\n            } else {\n                $(\".k-progress\", e.target).width(percentComplete + \"%\");\n            }\n\n            this.trigger(PROGRESS, {\n                files: getFileEntry(e).data(\"fileNames\"),\n                percentComplete: percentComplete\n            });\n        },\n\n        _onUploadSuccess: function(e, response, xhr) {\n            var that = this;\n            var fileEntry = getFileEntry(e);\n            var files = fileEntry.data(\"fileNames\");\n            var fileInfo = fileEntry.find('.k-file-information');\n            var fileSize = fileEntry.find('.k-file-size');\n\n            var prevented = that.trigger(SUCCESS, {\n                files: fileEntry.data(\"fileNames\"),\n                response: response,\n                operation: \"upload\",\n                XMLHttpRequest: xhr\n            });\n\n            if(prevented) {\n                that._setUploadErrorState(fileEntry);\n            } else {\n                that._fileState(fileEntry, \"uploaded\");\n                fileEntry.removeClass('k-file-progress').addClass('k-file-success');\n\n                if(fileInfo.length > 0) {\n                    fileInfo.addClass('k-hidden')\n                        .after('<span class=\"k-file-validation-message k-text-success\">' + files.length + ' ' + that.localization.uploadSuccess + '</span>');\n                } else if (fileSize.length > 0) {\n                    fileSize.addClass('k-hidden')\n                        .after('<span class=\"k-file-validation-message k-text-success\">' + that.localization.uploadSuccess + '</span>');\n                }\n\n                that._updateHeaderUploadStatus();\n\n                if (that._supportsRemove()) {\n                    that._fileAction(fileEntry, REMOVE);\n                } else {\n                    that._clearFileAction(fileEntry);\n                }\n            }\n\n            that._hideUploadProgress(fileEntry);\n\n            that._checkAllComplete();\n        },\n\n        _onUploadError: function(e, xhr) {\n            var that = this;\n            var module = that._module;\n            var fileEntry = getFileEntry(e);\n            var fileUid = fileEntry.data(\"uid\");\n\n            that._setUploadErrorState(fileEntry);\n\n            that.trigger(ERROR, {\n                operation: \"upload\",\n                files: fileEntry.data(\"fileNames\"),\n                XMLHttpRequest: xhr\n            });\n\n            logToConsole(\"Server response: \" + xhr.responseText);\n\n            if(!that.options.async.chunkSize){\n                that._hideUploadProgress(fileEntry);\n            }else{\n                if(module._decreasePosition){\n                    module._decreasePosition(fileUid);\n                }\n            }\n\n           that._checkAllComplete();\n\n            if(this.options.async.autoRetryAfter){\n               this._autoRetryAfter(fileEntry);\n            }\n        },\n        _autoRetryAfter: function(fileEntry){\n            var that = this;\n            var retries = this._module.retries;\n\n            if(!retries){\n                return;\n            }\n\n            if(!retries[fileEntry.data(\"uid\")]){\n                retries[fileEntry.data(\"uid\")] = 1;\n            }\n\n            if(retries[fileEntry.data(\"uid\")] <= this.options.async.maxAutoRetries){\n                retries[fileEntry.data(\"uid\")]++;\n                setTimeout(function(){\n                    that._module.performUpload(fileEntry);\n                },this.options.async.autoRetryAfter);\n            }\n        },\n        _setUploadErrorState: function(fileEntry) {\n            var that = this,\n                uploadPercentage,\n                files = fileEntry.data(\"fileNames\"),\n                fileInfo = fileEntry.find('.k-file-information'),\n                fileSize = fileEntry.find('.k-file-size');\n\n            that._fileState(fileEntry, \"failed\");\n            fileEntry.removeClass('k-file-progress').addClass('k-file-error');\n\n            if(fileInfo.length > 0) {\n                fileInfo.addClass('k-hidden')\n                    .after('<span class=\"k-file-validation-message k-text-error\">' + files.length + ' ' + that.localization.uploadFail + '</span>');\n            } else if (fileSize.length > 0) {\n                fileSize.addClass('k-hidden')\n                    .after('<span class=\"k-file-validation-message k-text-error\">' + that.localization.uploadFail + '</span>');\n            }\n\n            that._updateUploadProgress(fileEntry);\n\n            uploadPercentage = $('.k-upload-pct', fileEntry);\n\n            if (uploadPercentage.length > 0) {\n                uploadPercentage.remove();\n            }\n\n            this._updateHeaderUploadStatus();\n            this._fileAction(fileEntry, \"retry\");\n            this._fileAction(fileEntry, REMOVE, true);\n\n            if (that._retryClicked) {\n                fileEntry.trigger(\"focus\");\n            }\n        },\n\n       _updateUploadProgress: function(fileEntry){\n            var that = this;\n\n            if(!that.options.async.chunkSize){\n                $('.k-progress', fileEntry).width(\"100%\");\n            }else{\n                var fileUid = fileEntry.data(\"uid\");\n                if(that._module.metaData){\n                    var fileMetaData = that._module.metaData[fileUid];\n\n                    if(fileMetaData){\n                        var percentComplete = fileMetaData.totalChunks ? Math.round(((fileMetaData.chunkIndex)/fileMetaData.totalChunks)*100):100;\n\n                        that._onFileProgress({ target : $(fileEntry, that.wrapper) }, percentComplete);\n                    }\n                }\n            }\n        },\n\n        _hideUploadProgress: function(fileEntry) {\n            $(\".k-progressbar\", fileEntry)\n                .delay(PROGRESSHIDEDELAY)\n                .fadeOut(PROGRESSHIDEDURATION, function() {\n                    $(this).find('.k-progress').css(\"width\", \"0%\");\n                });\n        },\n\n        _showActionButtons: function() {\n            var that = this;\n            var actionsWrapper = $(\".k-action-buttons\", that.wrapper);\n            var uploadButton = $(\".k-upload-selected\", that.wrapper);\n            var clearButton = $(\".k-clear-selected\", that.wrapper);\n\n            if (uploadButton.length === 0) {\n                uploadButton = that._renderAction(\"\", this.localization.uploadSelectedFiles)\n                                   .addClass(\"k-upload-selected\")\n                                   .addClass(\"k-button-solid-primary\")\n                                   .removeClass(\"k-button-solid-base\");\n\n                clearButton = that._renderAction(\"\", this.localization.clearSelectedFiles)\n                                  .addClass(\"k-clear-selected\");\n            }\n\n            if (!actionsWrapper.length) {\n                actionsWrapper = $(\"<div />\")\n                    .addClass(\"k-action-buttons\")\n                    .append(clearButton, uploadButton);\n            }\n\n\n            this.wrapper.append(actionsWrapper);\n        },\n\n        _hideActionButtons: function() {\n            $(\".k-action-buttons\", this.wrapper).remove();\n        },\n\n        _showHeaderUploadStatus: function(isUploading) {\n            var that = this;\n            var localization = that.localization;\n            var dropZone = $(\".k-dropzone\", that.wrapper);\n            var headerUploadStatus = $('.k-upload-status-total', that.wrapper);\n\n            if (headerUploadStatus.length !== 0) {\n                headerUploadStatus.remove();\n            }\n\n            $('.k-dropzone-hint', that.wrapper).addClass('k-hidden');\n\n            headerUploadStatus = '<strong class=\"k-upload-status k-upload-status-total\"><span class=\"k-icon\"></span></strong>';\n\n            if(isUploading) {\n                headerUploadStatus = $(headerUploadStatus).append(localization.headerStatusUploading);\n                headerUploadStatus.find(\".k-icon\").addClass(headerStatusIcon.loading);\n            } else {\n                headerUploadStatus = $(headerUploadStatus).append(localization.headerStatusUploaded);\n                headerUploadStatus.find(\".k-icon\").addClass(headerStatusIcon.warning);\n            }\n\n            if (dropZone.length > 0) {\n                dropZone.append(headerUploadStatus);\n            } else {\n                $('.k-upload-button', that.wrapper).after(headerUploadStatus);\n            }\n        },\n\n        _updateHeaderUploadStatus: function() {\n            var that = this;\n            var headerUploadStatus = $('.k-upload-status-total', this.wrapper);\n            var currentlyUploading = $('.k-file', that.wrapper).not('.k-file-success, .k-file-error, .k-file-invalid');\n            var currentlyInvalid = $('.k-file-invalid', that.wrapper);\n            var currentlyFailed = $('.k-file-error', that.wrapper);\n            var currentlyPaused = $('.k-file', that.wrapper).find(\".k-i-play-sm\");\n            var failedUploads, headerUploadStatusIcon;\n\n            if(currentlyPaused.length &&\n            (currentlyPaused.length === currentlyUploading.length || !that.options.async.concurrent)){\n                headerUploadStatusIcon = $('.k-icon', headerUploadStatus)\n                                .removeClass()\n                                .addClass(\"k-icon\")\n                                .addClass(\"k-i-pause-sm\");\n\n                headerUploadStatus.html(headerUploadStatusIcon)\n                                  .append(that.localization.headerStatusPaused);\n            }else if (currentlyUploading.length === 0 || currentlyInvalid.length > 0 || currentlyFailed.length > 0) {\n                failedUploads = $('.k-file.k-file-error, .k-file.k-file-invalid', that.wrapper);\n\n                headerUploadStatus = $('.k-upload-status-total', that.wrapper);\n                headerUploadStatusIcon = $('.k-icon', headerUploadStatus).removeClass().addClass(\"k-icon\")\n                                              .addClass(failedUploads.length !== 0 ? headerStatusIcon.warning : headerStatusIcon.success);\n\n                headerUploadStatus.html(headerUploadStatusIcon)\n                                  .append(that.localization.headerStatusUploaded);\n            }\n        },\n\n        _hideHeaderUploadstatus: function() {\n            var that = this,\n                dropZone = that.options.dropZone;\n\n            $('.k-upload-status-total', this.wrapper).remove();\n\n            if (dropZone === \"\") {\n                $('.k-dropzone-hint', that.wrapper).removeClass('k-hidden');\n            }\n        },\n\n        _onParentFormSubmit: function() {\n            var upload = this,\n                element = upload.element;\n\n            if(typeof this._module.onAbort !== 'undefined'){\n                this._module.onAbort();\n            }\n\n            if (!element.value) {\n                var input = $(element);\n\n                // Prevent submitting an empty input\n                input.attr(\"disabled\", \"disabled\");\n\n                window.setTimeout(function() {\n                    // Restore the input so the Upload remains functional\n                    // in case the user cancels the form submit\n                    input.prop(\"disabled\", false);\n                }, 0);\n            }\n        },\n\n        _onParentFormReset: function() {\n            $(\".k-upload-files\", this.wrapper).remove();\n        },\n\n        _supportsFormData: function() {\n            return typeof(FormData) != \"undefined\";\n        },\n\n        _supportsMultiple: function() {\n            var windows = this._userAgent().indexOf(\"Windows\") > -1;\n\n            return !kendo.support.browser.opera &&\n                   !(kendo.support.browser.safari && windows);\n        },\n\n        _supportsDrop: function() {\n            var userAgent = this._userAgent().toLowerCase();\n            var isChrome = /chrome/.test(userAgent);\n            var isSafari = !isChrome && /safari/.test(userAgent);\n            var isWindowsSafari = isSafari && /windows/.test(userAgent);\n\n            return !isWindowsSafari && this._supportsFormData() && (this.options.async.saveUrl);\n        },\n\n        _userAgent: function() {\n            return navigator.userAgent;\n        },\n\n        _setupDropZone: function() {\n            var that = this;\n\n            var ns = that._ns;\n            var dropZone = $(\".k-dropzone\", that.wrapper)\n\n                .on(\"dragenter\" + ns, stopEvent)\n                .on(\"dragover\" + ns, function(e) {\n                    if(e.originalEvent){\n                        e.originalEvent.dataTransfer.dropEffect = \"copy\";\n                    }\n                    e.preventDefault();\n                 })\n                .on(\"drop\" + ns, $.proxy(that._onDrop, that));\n\n            if (!dropZone.find(\".k-dropzone-hint\").length) {\n                dropZone.append($(\"<em class='k-dropzone-hint'>\" + that.localization.dropFilesHere + \"</em>\"));\n            }\n\n            bindDragEventWrappers(dropZone, ns,\n                function() {\n                    if (!dropZone.closest('.k-upload').hasClass(\"k-state-disabled\")) {\n                        dropZone.addClass(\"k-dropzone-hovered\");\n                    }\n                },\n                function() { dropZone.removeClass(\"k-dropzone-hovered\"); });\n\n            that._bindDocumentDragEventWrappers(dropZone);\n        },\n\n        _setupCustomDropZone: function() {\n            var that = this;\n            var dropZone = $(that.options.dropZone);\n\n            if (!that.wrapper.find(\".k-dropzone-hint\").length) {\n                $(\".k-dropzone\", that.wrapper)\n                    .append($(\"<em class='k-dropzone-hint k-hidden'>\" + that.localization.dropFilesHere + \"</em>\"));\n            } else {\n                // Dropzone hint in upload should be hidden if customDropZone is used\n                $('.k-dropzone-hint', that.wrapper).addClass('k-hidden');\n            }\n\n            var ns = that._ns;\n            dropZone.on(\"dragenter\" + ns, stopEvent)\n                    .on(\"dragover\" + ns, function(e) {\n                        if(e.originalEvent){\n                            e.originalEvent.dataTransfer.dropEffect = \"copy\";\n                        }\n                        e.preventDefault();\n                    })\n                    .on(\"drop\" + ns, $.proxy(that._onDrop, that));\n\n            bindDragEventWrappers(dropZone, ns,\n                function(e) {\n                    if (!that.wrapper.hasClass(\"k-state-disabled\")) {\n                        dropZone.removeClass(\"k-dropzone-hovered\");\n                        dropZone.addClass(\"k-dropzone-hovered\");\n                        $(e.target).addClass(\"k-dropzone-hovered\");\n                    }\n                },\n                function() {\n                    dropZone.removeClass(\"k-dropzone-hovered\");\n                    dropZone.find('.k-dropzone-hovered').removeClass(\"k-dropzone-hovered\");\n                }\n            );\n\n            that._bindDocumentDragEventWrappers(dropZone);\n        },\n\n        _bindDocumentDragEventWrappers: function(dropZone) {\n            var that = this;\n            var ns = that._ns;\n\n            bindDragEventWrappers($(document), ns,\n                function() {\n                    if (!that.wrapper.hasClass(\"k-state-disabled\")) {\n                        dropZone.addClass(\"k-dropzone-active\");\n                        dropZone.closest('.k-upload').removeClass('k-upload-empty');\n                        dropZone.find('.k-dropzone-hint').removeClass('k-hidden');\n                    }\n                },\n                function() {\n                    dropZone.removeClass(\"k-dropzone-active\");\n                    dropZone.find('.k-dropzone-hint').addClass('k-hidden');\n                    if ($('li.k-file', dropZone.closest('.k-upload')).length === 0) {\n                        dropZone.closest('.k-upload').addClass('k-upload-empty');\n                    }\n                }\n            );\n        },\n\n        _toggleDropZone: function() {\n            var that = this,\n                dropZone = that.options.dropZone;\n\n            if (!that._supportsDrop()) {\n                return;\n            }\n\n            $(dropZone).off(that._ns);\n            $(\".k-dropzone\", that.wrapper).off(that._ns);\n\n            if (dropZone !== \"\") {\n                that._setupCustomDropZone();\n            } else {\n                that._setupDropZone();\n            }\n        },\n\n        _supportsRemove: function() {\n            return !!this.options.async.removeUrl;\n        },\n\n        _submitRemove: function(fileNames, eventArgs, onSuccess, onError) {\n            var upload = this,\n                removeField = upload.options.async.removeField || \"fileNames\",\n                params = $.extend(eventArgs.data, antiForgeryTokens());\n\n            params[removeField] = fileNames;\n\n            jQuery.ajax({\n                  type: this.options.async.removeVerb,\n                  dataType: \"json\",\n                  dataFilter: normalizeJSON,\n                  url: this.options.async.removeUrl,\n                  traditional: true,\n                  data: params,\n                  headers: eventArgs.headers,\n                  success: onSuccess,\n                  error: onError,\n                  xhrFields:{\n                    withCredentials: this.options.async.withCredentials\n                  }\n            });\n        },\n\n        _wrapInput: function(input) {\n            var that = this;\n            var options = that.options;\n            var hasLabel = !!input.attr(\"id\") && $(\"[for='\" + input.attr(\"id\") + \"']\").length > 0;\n\n            input.wrap(\"<div class='k-widget k-upload'><div class='k-dropzone'><div class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-upload-button'></div></div></div>\");\n\n            if (!options.async.saveUrl) {\n                input.closest(\".k-upload\").addClass(\"k-upload-sync\");\n            } else {\n                input.closest(\".k-upload\").addClass(\"k-upload-async\");\n            }\n\n            input.closest(\".k-upload\").addClass(\"k-upload-empty\");\n\n            input.closest(\".k-button\")\n                .append(\"<span>\" + that.localization.select + \"</span>\");\n\n            if(!hasLabel && !input.attr(\"aria-label\")) {\n                input.attr(\"aria-label\", that.localization.select);\n            }\n\n            return input.closest(\".k-upload\");\n        },\n\n        _checkAllComplete: function() {\n            if ($(\".k-file.k-file-progress\", this.wrapper).length === 0) {\n                this.trigger(COMPLETE);\n            }\n        },\n\n        _inputFiles: function(sourceInput) {\n            return inputFiles(sourceInput);\n        }\n    });\n\n    // Synchronous upload module\n    var syncUploadModule = function(upload) {\n        this.name = \"syncUploadModule\";\n        this.element = upload.wrapper;\n        this.upload = upload;\n        this.element\n            .closest(\"form\")\n                .attr(\"enctype\", \"multipart/form-data\")\n                .attr(\"encoding\", \"multipart/form-data\");\n    };\n\n    syncUploadModule.prototype = {\n        onSelect: function(e, files) {\n            var upload = this.upload;\n            var sourceInput = $(e.target);\n            var filesContainErrors = upload._filesContainValidationErrors(files);\n\n            upload._addInput(sourceInput);\n\n            var fileData = { \"fileNames\": files };\n\n            if(filesContainErrors) {\n                sourceInput.remove();\n            } else {\n                fileData.relatedInput = sourceInput;\n            }\n\n            var file = upload._enqueueFile(getFileName(sourceInput), fileData);\n\n            if(filesContainErrors) {\n                upload._hideUploadProgress(file);\n            }\n\n            upload._fileAction(file, REMOVE);\n        },\n\n        onRemove: function(e) {\n            var fileEntry = getFileEntry(e);\n            var relatedInput = fileEntry.data(\"relatedInput\");\n\n            if(relatedInput) {\n                relatedInput.remove();\n            }\n\n            this.upload._removeFileEntry(fileEntry);\n        }\n    };\n\n    var iframeUploadModule = function(upload) {\n        this.name = \"iframeUploadModule\";\n        this.element = upload.wrapper;\n        this.upload = upload;\n        this.iframes = [];\n    };\n\n    Upload._frameId = 0;\n\n    iframeUploadModule.prototype = {\n        onSelect: function(e, files) {\n            var upload = this.upload;\n            var sourceInput = $(e.target);\n            var hasValidationErrors = upload._filesContainValidationErrors(files);\n\n            var fileEntry = this.prepareUpload(sourceInput, files, hasValidationErrors);\n\n            if (upload.options.async.autoUpload) {\n                if(!hasValidationErrors) {\n                    this.performUpload(fileEntry);\n                } else {\n                    upload._fileAction(fileEntry, REMOVE);\n                    upload._showHeaderUploadStatus(false);\n                }\n            } else {\n                upload._fileAction(fileEntry, REMOVE);\n\n                if(!hasValidationErrors) {\n                    upload._showActionButtons();\n                } else {\n                    upload._updateHeaderUploadStatus();\n                }\n            }\n\n            if(hasValidationErrors) {\n                upload._hideUploadProgress(fileEntry);\n            }\n        },\n\n        prepareUpload: function(sourceInput, files, hasValidationErrors) {\n            var upload = this.upload;\n            var activeInput = $(upload.element);\n            var name = upload.options.async.saveField || sourceInput.attr(\"name\");\n            var fileEntry, fileData, iframe, form;\n\n            upload._addInput(sourceInput);\n            sourceInput.attr(\"name\", name);\n\n            if(!hasValidationErrors) {\n                iframe = this.createFrame(upload.name + \"_\" + Upload._frameId++);\n                this.registerFrame(iframe);\n\n                form = this.createForm(upload.options.async.saveUrl, iframe.attr(\"name\"))\n                           .append(activeInput);\n\n                fileData = { \"frame\": iframe, \"relatedInput\": activeInput, \"fileNames\": files };\n            } else {\n                sourceInput.remove();\n\n                fileData = { \"fileNames\": files };\n            }\n\n            fileEntry = upload._enqueueFile(getFileName(sourceInput), fileData);\n\n            if(iframe) {\n                iframe.data({ \"form\": form, \"file\": fileEntry });\n            }\n\n            return fileEntry;\n        },\n\n        performUpload: function(fileEntry) {\n            var e = { files: fileEntry.data(\"fileNames\") };\n            var iframe = fileEntry.data(\"frame\");\n            var upload = this.upload;\n            var fileValidation = fileEntry.find('.k-file-validation-message');\n            var fileInfo = fileEntry.find('.k-file-information');\n            var fileSize = fileEntry.find('.k-file-size');\n\n            if (!upload.trigger(UPLOAD, e)) {\n                upload._hideActionButtons();\n                upload._showHeaderUploadStatus(true);\n\n                iframe.appendTo(document.body);\n\n                var form = iframe.data(\"form\")\n                    .attr(\"action\", upload.options.async.saveUrl)\n                    .appendTo(document.body);\n\n                e.data = $.extend({ }, e.data, antiForgeryTokens());\n                for (var key in e.data) {\n                    var dataInput = form.find(\"input[name='\" + key + \"']\");\n                    if (dataInput.length === 0) {\n                        dataInput = $(\"<input>\", { type: \"hidden\", name: key })\n                            .prependTo(form);\n                    }\n                    dataInput.val(e.data[key]);\n                }\n\n                upload._fileAction(fileEntry, CANCEL);\n                upload._fileState(fileEntry, \"uploading\");\n                $(fileEntry).removeClass(\"k-file-error\").addClass(\"k-file-progress\");\n\n                if(fileValidation.length > 0) {\n                    fileValidation.remove();\n                }\n\n                if(fileInfo.length > 0) {\n                    fileInfo.removeClass('k-hidden');\n                } else if (fileSize.length > 0) {\n                    fileSize.removeClass('k-hidden');\n                }\n\n                iframe\n                    .one(\"load\", $.proxy(this.onIframeLoad, this));\n\n                form[0].submit();\n            } else {\n                upload._removeFileEntry(iframe.data(\"file\"));\n                this.cleanupFrame(iframe);\n                this.unregisterFrame(iframe);\n            }\n        },\n\n        onSaveSelected: function() {\n            var module = this;\n            var upload = module.upload;\n\n            $(\".k-file\", this.element).each(function() {\n                var fileEntry = $(this);\n                var started = isFileUploadStarted(fileEntry);\n                var hasValidationErrors = upload._filesContainValidationErrors(fileEntry.data(\"fileNames\"));\n\n                if (!started && !hasValidationErrors) {\n                    module.performUpload(fileEntry);\n                }\n            });\n        },\n\n        onIframeLoad: function(e) {\n            var iframe = $(e.target),\n                responseText;\n\n            try {\n                responseText = iframe.contents().text();\n            } catch (ex) {\n                responseText = \"Error trying to get server response: \" + ex;\n            }\n\n            this.processResponse(iframe, responseText);\n        },\n\n        processResponse: function(iframe, responseText) {\n            var fileEntry = iframe.data(\"file\"),\n                module = this,\n                fakeXHR = {\n                    responseText: responseText\n                };\n            tryParseJSON(responseText,\n                function(jsonResult) {\n                    $.extend(fakeXHR, { statusText: \"OK\", status: \"200\" });\n                    module.upload._onFileProgress({ target : $(fileEntry, module.upload.wrapper) }, 100);\n                    module.upload._onUploadSuccess({ target : $(fileEntry, module.upload.wrapper) }, jsonResult, fakeXHR);\n\n                    module.cleanupFrame(iframe);\n                    module.unregisterFrame(iframe);\n                },\n                function() {\n                    $.extend(fakeXHR, { statusText: \"error\", status: \"500\" });\n                    module.upload._onUploadError({ target : $(fileEntry, module.upload.wrapper) }, fakeXHR);\n                }\n            );\n        },\n\n        onCancel: function(e) {\n            var iframe = $(e.target).data(\"frame\");\n\n            this.stopFrameSubmit(iframe);\n            this.cleanupFrame(iframe);\n            this.unregisterFrame(iframe);\n            this.upload._removeFileEntry(iframe.data(\"file\"));\n        },\n\n        onRetry: function(e) {\n            var fileEntry = getFileEntry(e);\n            this.performUpload(fileEntry);\n        },\n\n        onRemove: function(e, eventArgs, shouldSendRemoveRequest) {\n            var module = this;\n            var upload = module.upload;\n            var fileEntry = getFileEntry(e);\n            var iframe = fileEntry.data(\"frame\");\n\n            if (iframe) {\n                module.unregisterFrame(iframe);\n                upload._removeFileEntry(fileEntry);\n                module.cleanupFrame(iframe);\n            } else {\n                if (fileEntry.hasClass(\"k-file-success\")) {\n                    removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest);\n                } else {\n                    upload._removeFileEntry(fileEntry);\n                }\n            }\n        },\n\n        onAbort: function() {\n            var element = this.element,\n                module = this;\n\n            $.each(this.iframes, function() {\n                $(\"input\", this.data(\"form\")).appendTo(element);\n                module.stopFrameSubmit(this[0]);\n                this.data(\"form\").remove();\n                this.remove();\n            });\n\n            this.iframes = [];\n        },\n\n        createFrame: function(id) {\n            return $(\n                \"<iframe\" +\n                \" name='\" + id + \"'\" +\n                \" id='\" + id + \"'\" +\n                \" style='display:none;' />\"\n            );\n        },\n\n        createForm: function(action, target) {\n            return $(\n                \"<form enctype='multipart/form-data' method='POST'\" +\n                \" action='\" + action + \"'\" +\n                \" target='\" + target + \"'\" +\n                \"/>\");\n        },\n\n        stopFrameSubmit: function(frame) {\n            if (typeof(frame.stop) != \"undefined\") {\n                frame.stop();\n            } else if (frame.document) {\n                frame.document.execCommand(\"Stop\");\n            }\n        },\n\n        registerFrame: function(frame) {\n            this.iframes.push(frame);\n        },\n\n        unregisterFrame: function(frame) {\n            this.iframes = $.grep(this.iframes, function(value) {\n                return value.attr(\"name\") != frame.attr(\"name\");\n            });\n        },\n\n        cleanupFrame: function(frame) {\n            var form = frame.data(\"form\");\n\n            frame.data(\"file\").data(\"frame\", null);\n\n            setTimeout(function () {\n                form.remove();\n                frame.remove();\n            }, 1);\n        }\n    };\n\n    // FormData upload module\n    var formDataUploadModule = function(upload) {\n        this.name = \"formDataUploadModule\";\n        this.element = upload.wrapper;\n        this.upload = upload;\n        this.position = {};\n        this.metaData = {};\n        this.cancelled = {};\n        this.resume = {};\n        this.paused = {};\n        this.retries = {};\n    };\n\n    formDataUploadModule.prototype = {\n        onSelect: function(e, files) {\n            var upload = this.upload;\n            var module = this;\n            var sourceElement = $(e.target);\n            var fileEntries = this.prepareUpload(sourceElement, files);\n            var hasValidationErrors;\n            var prev;\n\n            $.each(fileEntries, function(index) {\n                hasValidationErrors = upload._filesContainValidationErrors($(this.data(\"fileNames\")));\n\n                if (upload.options.async.autoUpload) {\n                    if(!hasValidationErrors) {\n                        if(upload.options.async.chunkSize){\n                            module.prepareChunk(this);\n                            prev = this.prev();\n\n                            if(upload.options.async.concurrent || (index === 0 && !prev.length) ||\n                             (index === 0 && prev.hasClass(\"k-file-success\"))){\n                                module.performUpload(this);\n                            }\n                        }else{\n                            module.performUpload(this);\n                        }\n                    } else {\n                        upload._fileAction(this, REMOVE);\n                        upload._showHeaderUploadStatus(false);\n                    }\n                } else {\n                    upload._fileAction(this, REMOVE);\n\n                    if(!hasValidationErrors) {\n                        upload._showActionButtons();\n                        this.addClass(\"k-toupload\");\n                    } else {\n                        upload._updateHeaderUploadStatus();\n                    }\n                }\n\n                if(hasValidationErrors) {\n                    upload._hideUploadProgress(this);\n                }\n            });\n        },\n\n        prepareUpload: function(sourceElement, files) {\n            var fileEntries = this.enqueueFiles(files);\n\n            if (sourceElement.is(\"input\")) {\n                $.each(fileEntries, function() {\n                    $(this).data(\"relatedInput\", sourceElement);\n                });\n                sourceElement.data(\"relatedFileEntries\", fileEntries);\n                this.upload._addInput(sourceElement);\n            }\n\n            return fileEntries;\n        },\n\n        enqueueFiles: function(files) {\n            var upload = this.upload;\n            var name;\n            var i;\n            var filesLength = files.length;\n            var currentFile;\n            var fileEntry;\n            var fileEntries = [];\n\n            if (upload.options.async.batch === true) {\n                name = $.map(files, function(file) { return file.name; }).join(\", \");\n\n                if(upload.directory || upload.options.directoryDrop){\n                    $(files).each(function(){\n                        if(this.rawFile.webkitRelativePath || this.rawFile.relativePath){\n                            this.name = this.rawFile.webkitRelativePath || this.rawFile.relativePath;\n                        }\n                    });\n                }\n\n                fileEntry = upload._enqueueFile(name, { fileNames: files });\n                fileEntry.data(\"files\", files);\n\n                fileEntries.push(fileEntry);\n            } else {\n                for (i = 0; i < filesLength; i++) {\n                    currentFile = files[i];\n                    name = currentFile.name;\n                    if(upload.directory || upload.options.directoryDrop){\n                        if(currentFile.rawFile.webkitRelativePath || currentFile.rawFile.relativePath){\n                            currentFile.name = currentFile.rawFile.webkitRelativePath || currentFile.rawFile.relativePath;\n                        }\n                    }\n                    fileEntry = upload._enqueueFile(name, { fileNames: [ currentFile ] });\n                    fileEntry.data(\"files\", [ currentFile ]);\n\n                    fileEntries.push(fileEntry);\n                }\n            }\n\n            return fileEntries;\n        },\n\n        performUpload: function(fileEntry) {\n            var upload = this.upload,\n                formData = this.createFormData(),\n                xhr = this.createXHR(),\n                e = {\n                    files: fileEntry.data(\"fileNames\"),\n                    XMLHttpRequest: xhr\n                },\n                files;\n            var fileValidation = fileEntry.find('.k-file-validation-message');\n            var fileInfo = fileEntry.find('.k-file-information');\n            var fileSize = fileEntry.find('.k-file-size');\n\n            if (!upload.trigger(UPLOAD, e)) {\n                if (fileEntry.find(\".k-i-cancel\").length === 0) {\n                    if (upload.options.async.chunkSize) {\n                        upload._fileAction(fileEntry, PAUSE);\n                    }\n                    upload._fileAction(fileEntry, CANCEL, upload.options.async.chunkSize);\n                }\n\n                if (!upload.wrapper.find(\".k-toupload\").length) {\n                    upload._hideActionButtons();\n                }\n\n                upload._showHeaderUploadStatus(true);\n\n                if (e.formData) {\n                    formData = e.formData;\n                } else {\n                    e.data = $.extend({ }, e.data, antiForgeryTokens());\n                    for (var key in e.data) {\n                        formData.append(key, e.data[key]);\n                    }\n\n                    files = fileEntry.data(\"files\");\n                    if (files) {\n                        this.populateFormData(formData, files);\n                    }\n                }\n\n                upload._fileState(fileEntry, \"uploading\");\n                $(fileEntry).removeClass(\"k-file-error\").addClass(\"k-file-progress\");\n\n                if(fileValidation.length > 0) {\n                    fileValidation.remove();\n                }\n\n                if(fileInfo.length > 0) {\n                    fileInfo.removeClass('k-hidden');\n                } else if (fileSize.length > 0) {\n                    fileSize.removeClass('k-hidden');\n                }\n\n                if (upload.options.async.useArrayBuffer && window.FileReader) {\n                    this._readFile(upload.options.async.saveUrl, formData, fileEntry, xhr);\n                } else {\n                    this.postFormData(upload.options.async.saveUrl, formData, fileEntry, xhr);\n                }\n            } else {\n                this.removeFileEntry(fileEntry);\n            }\n        },\n\n        _readFile: function(saveUrl, formData, fileEntry, xhr){\n            var that = this;\n            var upload = that.upload;\n            var file = fileEntry.data(\"files\")[0];\n\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                try{\n                    if(!that.fileArrayBuffer){\n                        that.fileArrayBuffer = e.target.result;\n                    }else{\n                        that.fileArrayBuffer = that._appendBuffer(that.fileArrayBuffer, e.target.result);\n                    }\n                }catch(err) {\n                    upload._onUploadError({ target : $(fileEntry, upload.wrapper) }, xhr);\n                    return;\n                }\n\n                if(that.position[file.uid] > file.size){\n                    that.postFormData(upload.options.async.saveUrl, that.fileArrayBuffer, fileEntry, xhr);\n                    that.fileArrayBuffer = null;\n                }else{\n                    that._readFile(saveUrl, formData, fileEntry, xhr);\n                }\n            };\n            reader.onerror = function () {\n                upload._onUploadError({ target : $(fileEntry, upload.wrapper) }, xhr);\n            };\n            reader.readAsArrayBuffer(that._getCurrentChunk(file.rawFile, file.uid));\n        },\n\n        _appendBuffer: function(buffer1, buffer2) {\n            var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n\n            tmp.set(new Uint8Array(buffer1), 0);\n            tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n\n            return tmp.buffer;\n        },\n\n        onSaveSelected: function() {\n            var module = this;\n            var upload = module.upload;\n\n            $(\".k-toupload\", this.element).filter(function() {\n                var fileEntry = $(this);\n                var started = isFileUploadStarted(fileEntry);\n                var hasValidationErrors = upload._filesContainValidationErrors(fileEntry.data(\"fileNames\"));\n\n                return !started && !hasValidationErrors;\n            }).each(function(index) {\n                var fileEntry = $(this);\n                var prevEntry = fileEntry.prev();\n\n                fileEntry.removeClass(\"k-toupload\");\n                if(upload.options.async.chunkSize){\n                    module.prepareChunk(fileEntry);\n\n                    if(upload.options.async.concurrent || (index === 0 && !prevEntry.length) ||\n                        (index === 0 && prevEntry.hasClass(\"k-file-success\") || prevEntry.hasClass(\"k-file-error\"))){\n                        module.performUpload(fileEntry);\n                    }\n                }else{\n                    module.performUpload(fileEntry);\n                }\n            });\n        },\n\n        onCancel: function(e) {\n            var fileEntry = getFileEntry(e);\n\n            if(this.upload.options.async.chunkSize){\n                this.cancelled[fileEntry.data(\"uid\")] = true;\n            }\n            this.stopUploadRequest(fileEntry);\n            this.removeFileEntry(fileEntry);\n        },\n\n        onPause: function(e) {\n            var fileEntry = getFileEntry(e);\n            var fileUid = fileEntry.data(\"uid\");\n            var async = this.upload.options.async;\n\n            if(async.chunkSize){\n                this.retries[fileUid] = async.maxAutoRetries + 1;\n                this.paused[fileUid] = true;\n                this.resume[fileUid] = false;\n            }\n        },\n\n        onResume: function(e) {\n            var fileEntry = getFileEntry(e);\n            var fileUid = fileEntry.data(\"uid\");\n\n            if(this.upload.options.async.chunkSize){\n                delete this.paused[fileUid];\n                this.resume[fileUid] = true;\n                this.retries[fileEntry.data(\"uid\")] = 1;\n                this._increaseChunkIndex(fileUid);\n                this.performUpload(fileEntry);\n            }\n        },\n\n        onRetry: function(e) {\n            var fileEntry = getFileEntry(e);\n            var async = this.upload.options.async;\n\n            if(async.chunkSize){\n                this.retries[fileEntry.data(\"uid\")] = async.maxAutoRetries + 1;\n                delete this.paused[fileEntry.data(\"uid\")];\n            }\n\n            this.performUpload(fileEntry);\n        },\n\n        onRemove: function(e, eventArgs, shouldSendRemoveRequest) {\n            var module = this;\n            var upload = module.upload;\n            var fileEntry = getFileEntry(e);\n            var async = this.upload.options.async;\n\n            if(async.chunkSize){\n                this.retries[fileEntry.data(\"uid\")] = async.maxAutoRetries + 1;\n            }\n\n            if (fileEntry.hasClass(\"k-file-success\")) {\n                removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest);\n            } else {\n                module.removeFileEntry(fileEntry);\n            }\n        },\n\n        createXHR: function() {\n            return new XMLHttpRequest();\n        },\n\n        postFormData: function(url, data, fileEntry, xhr) {\n            var module = this;\n\n            fileEntry.data(\"request\", xhr);\n\n            xhr.addEventListener(\"load\", function(e) {\n                module.onRequestSuccess.call(module, e, fileEntry);\n            }, false);\n\n            xhr.addEventListener(ERROR, function(e) {\n                module.onRequestError.call(module, e, fileEntry);\n            }, false);\n\n            xhr.upload.addEventListener(\"progress\", function(e) {\n                module.onRequestProgress.call(module, e, fileEntry);\n            }, false);\n\n            xhr.open(\"POST\", url, true);\n            xhr.withCredentials = this.upload.options.async.withCredentials;\n\n            var accept = this.upload.options.async.accept;\n            if (accept) {\n                xhr.setRequestHeader(\"Accept\", accept);\n            }\n\n            xhr.send(data);\n        },\n\n        createFormData: function() {\n            return new FormData();\n        },\n\n        populateFormData: function(data, files) {\n            var chunk;\n            var i;\n            var length = files.length;\n            var uid;\n            var upload = this.upload;\n\n            if(upload.options.async.chunkSize){\n                 uid = files[0].uid;\n                 chunk = this._getCurrentChunk(files[0].rawFile, uid);\n\n                data.append(\n                    upload.options.async.saveField || upload.name,\n                    chunk\n                );\n\n                var serializedMetaData = JSON.stringify(this.metaData[uid]);\n                data.append(\"metadata\", serializedMetaData);\n            }else{\n                 for (i = 0; i < length; i++) {\n                    data.append(\n                        upload.options.async.saveField || upload.name,\n                        files[i].rawFile\n                    );\n                 }\n            }\n\n            return data;\n        },\n\n        onRequestSuccess: function(e, fileEntry) {\n            var xhr = e.target,\n                module = this;\n\n            function raiseError() {\n                module.upload._onUploadError({ target : $(fileEntry, module.upload.wrapper) }, xhr);\n            }\n\n            function parseSuccess(jsonResult) {\n                var batch = module.upload.options.async.batch;\n                var chunkSize = module.upload.options.async.chunkSize;\n                var concurrent = module.upload.options.async.concurrent;\n                var fileUid = jsonResult.fileUid;\n\n                if(module.paused[fileUid] || module.cancelled[fileUid]){\n                    return;\n                }\n\n                delete module.retries[fileUid];\n\n                if(chunkSize && !batch && !jsonResult.uploaded){\n\n                    module._increaseChunkIndex(fileUid);\n                    module.performUpload(fileEntry);\n                }else if(chunkSize && !batch && !concurrent && fileEntry.next().length && !fileEntry.next().hasClass(\"k-toupload\")) {\n                        module.upload._onFileProgress({ target : $(fileEntry, module.upload.wrapper) }, 100);\n                        module._resetChunkIndex(fileUid);\n                        module.upload._onUploadSuccess({ target : $(fileEntry, module.upload.wrapper) }, jsonResult, xhr);\n\n                        module.performUpload(fileEntry.next());\n                }else{\n                    module.upload._onFileProgress({ target : $(fileEntry, module.upload.wrapper) }, 100);\n                    module.upload._onUploadSuccess({ target : $(fileEntry, module.upload.wrapper) }, jsonResult, xhr);\n                    module.cleanupFileEntry(fileEntry);\n                }\n            }\n\n            if (xhr.status >= 200 && xhr.status <= 299) {\n                tryParseJSON(xhr.responseText,\n                    parseSuccess,\n                    raiseError\n                );\n            } else {\n                raiseError();\n            }\n        },\n\n        onRequestError: function(e, fileEntry) {\n            var xhr = e.target;\n\n            this.upload._onUploadError({ target : $(fileEntry, this.upload.wrapper) }, xhr);\n        },\n\n        cleanupFileEntry: function(fileEntry) {\n            var relatedInput = fileEntry.data(\"relatedInput\"),\n                uploadComplete = true;\n\n            if (relatedInput) {\n                $.each(relatedInput.data(\"relatedFileEntries\") || [], function() {\n                    // Exclude removed file entries and self\n                    if (this.parent().length > 0 && this[0] != fileEntry[0]) {\n                        uploadComplete = uploadComplete && this.hasClass(\"k-file-success\");\n                    }\n                });\n\n                if (uploadComplete) {\n                    relatedInput.remove();\n                }\n            }\n        },\n\n        removeFileEntry: function(fileEntry) {\n            var chunkSize = this.upload.options.async.chunkSize;\n            var concurrent = this.upload.options.async.concurrent;\n            var isUploadButtonVisible = this.upload.wrapper.find(\".k-upload-selected\").length > 0;\n\n            this.cleanupFileEntry(fileEntry);\n            if(chunkSize && !concurrent && !isUploadButtonVisible){\n                 if(fileEntry.next().length){\n                     this.performUpload(fileEntry.next());\n                 }\n            }\n            this.upload._removeFileEntry(fileEntry);\n        },\n\n        onRequestProgress: function(e, fileEntry) {\n            var percentComplete = Math.round(e.loaded * 100 / e.total);\n            var fileUid = fileEntry.data(\"uid\");\n            var fileMetaData;\n\n            if(this.upload.options.async.chunkSize){\n                fileMetaData = this.metaData[fileUid];\n                percentComplete = fileMetaData && fileMetaData.totalChunks ? Math.round(((fileMetaData.chunkIndex)/fileMetaData.totalChunks)*100):100;\n            }\n            this.upload._onFileProgress({ target : $(fileEntry, this.upload.wrapper) }, percentComplete);\n        },\n\n        stopUploadRequest: function(fileEntry) {\n            if(fileEntry.data(\"request\")) {\n                fileEntry.data(\"request\").abort();\n            }\n        },\n\n        prepareChunk: function (fileEntry) {\n            var file = fileEntry.data(\"files\")[0];\n            var rawFile = file.rawFile;\n            var uid = file.uid;\n            var chunkSize  = this.upload.options.async.chunkSize;\n            this.position[uid] = 0;\n\n            this.metaData[uid] = {\n                chunkIndex: 0,\n                contentType: rawFile.type,\n                fileName: rawFile.name,\n                relativePath: file.name,\n                totalFileSize: rawFile.size,\n                totalChunks: Math.ceil(rawFile.size / chunkSize),\n                uploadUid: uid\n            };\n        },\n\n        _decreaseChunkIndex: function(uid){\n            this.metaData[uid].chunkIndex--;\n        },\n\n        _increaseChunkIndex: function(uid){\n            this.metaData[uid].chunkIndex++;\n        },\n\n        _resetChunkIndex: function(uid){\n            this.metaData[uid].chunkIndex = 0;\n        },\n\n        _decreasePosition: function(uid){\n            this.position[uid] -= this.upload.options.async.chunkSize;\n        },\n\n        _getCurrentChunk: function (file, uid) {\n            var oldPosition = this.position[uid];\n            var methodToInvoke;\n            var async = this.upload.options.async;\n            var chunkSize = async.chunkSize || async.bufferChunkSize;\n\n            if(!this.position[uid]){\n                this.position[uid] = 0;\n            }\n            this.position[uid] += chunkSize;\n\n            if (!!(methodToInvoke = this._getChunker(file))){\n                return file[methodToInvoke](oldPosition, this.position[uid]);\n            }else{\n                return file;\n            }\n        },\n\n        _getChunker: function (file) {\n            if (file.slice) {\n                return \"slice\";\n            }else if (file.mozSlice) {\n                return \"mozSlice\";\n            }else if (file.webkitSlice) {\n                    return \"webkitSlice\";\n            }else {\n                return null;\n            }\n        }\n    };\n\n    // Helper functions\n    function getFileName(input) {\n        return $.map(inputFiles(input), function (file) {\n            return file.name;\n        }).join(\", \");\n    }\n\n    function inputFiles($input) {\n        var input = $input[0];\n\n        if (input.files) {\n            return getAllFileInfo(input.files);\n        } else {\n            return [{\n                name: stripPath(input.value),\n                extension: getFileExtension(input.value),\n                size: null\n            }];\n        }\n    }\n\n    function getAllFileInfo(rawFiles) {\n        return $.map(rawFiles, function (file) {\n            return getFileInfo(file);\n        });\n    }\n\n    function getFileInfo(rawFile) {\n        // Older Firefox versions (before 3.6) use fileName and fileSize\n        var fileName = rawFile.name || rawFile.fileName;\n        return {\n            name: kendo.htmlEncode(fileName),\n            extension: getFileExtension(fileName),\n            size: typeof rawFile.size == \"number\" ? rawFile.size : rawFile.fileSize, //rawFile.size || rawFile.fileSize,\n            rawFile: rawFile\n        };\n    }\n\n    function getFileExtension(fileName) {\n        var matches = fileName.match(rFileExtension);\n        return matches ? matches[0] : \"\";\n    }\n\n    function stripPath(name) {\n        var slashIndex = name.lastIndexOf(\"\\\\\");\n        return (slashIndex != -1) ? name.substr(slashIndex + 1) : name;\n    }\n\n    function assignGuidToFiles(files, unique) {\n        var uid = kendo.guid();\n\n        return $.map(files, function(file){\n            file.uid = unique ? kendo.guid() : uid;\n\n            return file;\n        });\n    }\n\n    function validateFiles(files, validationInfo) {\n        var allowedExtensions = parseAllowedExtensions(validationInfo.allowedExtensions);\n        var maxFileSize = validationInfo.maxFileSize;\n        var minFileSize = validationInfo.minFileSize;\n\n        for(var i = 0; i < files.length; i++) {\n            validateFileExtension(files[i], allowedExtensions);\n            validateFileSize(files[i], minFileSize, maxFileSize);\n        }\n    }\n\n    function parseAllowedExtensions(extensions) {\n        var allowedExtensions = $.map(extensions, function(ext){\n            var parsedExt = (ext.substring(0, 1) === \".\") ? ext : (\".\" + ext);\n            return parsedExt.toLowerCase();\n        });\n\n        return allowedExtensions;\n    }\n\n    function validateFileExtension(file, allowedExtensions) {\n        if(allowedExtensions.length > 0) {\n            if(allowedExtensions.indexOf(file.extension.toLowerCase()) < 0) {\n                file.validationErrors = file.validationErrors || [];\n                if($.inArray(INVALIDFILEEXTENSION, file.validationErrors) === -1) {\n                    file.validationErrors.push(INVALIDFILEEXTENSION);\n                }\n            }\n        }\n    }\n\n    function validateFileSize(file, minFileSize, maxFileSize) {\n        if(minFileSize !== 0 && file.size < minFileSize) {\n            file.validationErrors = file.validationErrors || [];\n            if($.inArray(INVALIDMINFILESIZE, file.validationErrors) === -1) {\n                file.validationErrors.push(INVALIDMINFILESIZE);\n            }\n        }\n\n        if(maxFileSize !== 0 && file.size > maxFileSize) {\n            file.validationErrors = file.validationErrors || [];\n            if($.inArray(INVALIDMAXFILESIZE, file.validationErrors) === -1) {\n                file.validationErrors.push(INVALIDMAXFILESIZE);\n            }\n        }\n    }\n\n    function getTotalFilesSizeMessage(files) {\n        var totalSize = 0;\n\n        if(typeof files[0].size == \"number\") {\n            for(var i = 0; i < files.length; i++) {\n                if(files[i].size) {\n                    totalSize += files[i].size;\n                }\n            }\n        } else {\n            return \"\";\n        }\n\n        totalSize /= 1024;\n\n        if(totalSize < 1024) {\n            return totalSize.toFixed(2) + \" KB\";\n        } else {\n            return (totalSize / 1024).toFixed(2) + \" MB\";\n        }\n    }\n\n    function shouldRemoveFileEntry(upload) {\n        return !upload.multiple && $(\".k-file\", upload.wrapper).length > 1;\n    }\n\n    function removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest) {\n        if (!upload._supportsRemove()) {\n            if(shouldRemoveFileEntry(upload) || !shouldSendRemoveRequest) {\n                upload._removeFileEntry(fileEntry);\n            }\n\n            return;\n        }\n\n        var files = fileEntry.data(\"fileNames\");\n        var fileNames = $.map(files, function(file) { return file.name; });\n\n        if(shouldSendRemoveRequest === false) {\n            upload._removeFileEntry(fileEntry);\n\n            return;\n        }\n\n        upload._submitRemove(fileNames, eventArgs,\n            function onSuccess(data, textStatus, xhr) {\n                var prevented = upload.trigger(SUCCESS, {\n                    operation: \"remove\",\n                    files: files,\n                    response: data,\n                    XMLHttpRequest: xhr\n                });\n\n                if(!prevented) {\n                    upload._removeFileEntry(fileEntry);\n                }\n            },\n\n            function onError(xhr) {\n                if(shouldRemoveFileEntry(upload)) {\n                    upload._removeFileEntry(fileEntry);\n                }\n\n                upload.trigger(ERROR, {\n                    operation: \"remove\",\n                    files: files,\n                    XMLHttpRequest: xhr\n                });\n\n                logToConsole(\"Server response: \" + xhr.responseText);\n            }\n        );\n    }\n\n    function tryParseJSON(input, onSuccess, onError) {\n        var success = false,\n            json = \"\";\n\n        try {\n            json = JSON.parse(normalizeJSON(input));\n            success = true;\n        } catch (e) {\n            onError();\n        }\n\n        if (success) {\n            onSuccess(json);\n        }\n    }\n\n    function normalizeJSON(input) {\n        if (typeof input === \"undefined\" || input === \"\") {\n            input = \"{}\";\n        }\n\n        return input;\n    }\n\n    function stopEvent(e) {\n        if(e.originalEvent){\n            e.originalEvent.dataTransfer.dropEffect = \"copy\";\n        }\n        e.stopPropagation(); e.preventDefault();\n    }\n\n    function bindDragEventWrappers(element, namespace, onDragEnter, onDragLeave) {\n        var hideInterval, lastDrag;\n\n        element\n            .on(\"dragenter\" + namespace, function(e) {\n                onDragEnter(e);\n                lastDrag = new Date();\n\n                if (!hideInterval) {\n                    hideInterval = setInterval(function() {\n                        var sinceLastDrag = new Date() - lastDrag;\n                        if (sinceLastDrag > 100) {\n                            onDragLeave();\n\n                            clearInterval(hideInterval);\n                            hideInterval = null;\n                        }\n                    }, 100);\n                }\n            })\n            .on(\"dragover\" + namespace, function() {\n                lastDrag = new Date();\n            });\n    }\n\n    function isFileUploadStarted(fileEntry) {\n        return fileEntry.is(\".k-file-progress, .k-file-success, .k-file-error\");\n    }\n\n    function getFileEntry(e) {\n        return $(e.target).closest(\".k-file\");\n    }\n\n    kendo.ui.plugin(Upload);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.breadcrumb',[ \"./kendo.core\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"breadcrumb\",\n    name: \"Breadcrumb\",\n    category: \"web\",\n    description: \"The Breadcrumb widget displays navigation breadcrumb.\",\n    depends: [ \"core\" ]\n};\n\n(function ($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n\n        proxy = $.proxy,\n\n        BREADCRUMB = \".kendoBreadcrumb\",\n\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_LABEL = \"aria-label\",\n\n        CLICK = \"click\",\n        FOCUS = \"focus\",\n        BLUR = \"blur\",\n        KEYDOWN = \"keydown\",\n        CHANGE = \"change\",\n        DOT = \".\";\n\n    var breadcrumbStyles = {\n        widget: \"k-widget k-breadcrumb\",\n        overlay: \"k-breadcrumb-container\",\n        textbox: \"k-input-inner\",\n        textboxWrapper: \"k-textbox k-input k-input-md k-rounded-md k-input-solid\",\n        link: \"k-breadcrumb-link\",\n        item: \"k-breadcrumb-item\",\n        delimiter: \"k-breadcrumb-delimiter-icon\",\n        rootItem: \"k-breadcrumb-root-item\",\n        rootLink: \"k-breadcrumb-root-link\",\n        overflowIcon: \"k-breadcrumb-overflow-icon\",\n        focused: \"k-state-focused\",\n        hidden: \"k-hidden\",\n        inputWrapper: \"k-breadcrumb-input-container\"\n    };\n\n    var Breadcrumb = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            Widget.fn.init.call(that, element, options);\n\n            that._wrapper();\n\n            if(options.editable) {\n                that._editable();\n                that._tabindex();\n            }\n\n            that.wrapper.on(CLICK + BREADCRUMB, \"a:not(.k-state-disabled)\", proxy(that._click, that));\n\n            if(options.value || options.bindToLocation || !options.items) {\n                that._value();\n            } else if (options.items) {\n                that.items(options.items);\n            }\n\n            that._resizeHandler = kendo.onResize(function() {\n                that.resize(true);\n            });\n        },\n\n        options: {\n            editable: false,\n            navigational: false,\n            bindToLocation: false,\n            items: null,\n            name: \"Breadcrumb\",\n            gap: 0,\n            rootIcon: \"home\",\n            delimiterIcon: \"arrow-chevron-right\",\n            messages: {\n                rootTitle: \"Go to root\"\n            }\n        },\n\n        events: [ CHANGE, CLICK ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            kendo.unbindResize(that._resizeHandler);\n\n            that.wrapper\n                .add(that.wrapper.find(\"input\"))\n                .add(that.wrapper.find(\"a\"))\n                .off(BREADCRUMB);\n        },\n\n        items: function(items) {\n            var that = this;\n\n            if(items === undefined) {\n                return that.options.items;\n            }\n\n            that.options.items = items;\n            that._segments = items;\n            that.refresh();\n        },\n\n        _update: function(val) {\n            var that = this;\n\n            if (val !== that.value()) {\n                that._generateSegments(val);\n                that.refresh();\n                that.trigger(CHANGE, { sender: this, value: val });\n            }\n        },\n\n        _generateSegments: function (value) {\n            var that = this,\n                options = that.options,\n                items = options.items,\n                path, segments;\n\n            segments = that._split(value);\n\n            if(!items) {\n                that.options.items = that._segments = segments;\n                return;\n            }\n\n            that._segments = [];\n\n            for (var i = 0; i < segments.length; i++) {\n                path = that._path(items.slice(0, i + 1));\n\n                if (path !== \"\" && value.indexOf(path) > -1 && items[i] && items[i].text === segments[i]) {\n                    that._segments.push(items[i]);\n                } else {\n                    that._segments.push(segments[i]);\n                }\n            }\n        },\n\n        _click: function(e) {\n            var that = this,\n                options = that.options,\n                item = $(e.target).closest(DOT + breadcrumbStyles.item),\n                previousDomItems = item.prevAll().addBack(),\n                previousItems = that._getItems(previousDomItems),\n                path = that._path(previousItems),\n                segment = that._segments[item.index()];\n\n            if(!options.navigational) {\n                e.preventDefault();\n            }\n\n            if(!that.trigger(CLICK, { sender: that, originalEvent: e, isRoot: segment.type === \"rootitem\", item: segment})) {\n                that._update(path);\n            }\n        },\n\n        _getItems: function(items) {\n            var that = this;\n\n            return $.map(items, function(item) {\n                return that._segments[$(item).index()] || item.innerText;\n            });\n        },\n\n        _edit: function() {\n            var that = this,\n                input = that.input;\n\n            that.oldValue = that.value();\n            that.inputWrapper.css(\"height\", that.wrapper.height());\n            that.overlay.hide();\n            that.input.val(that.value());\n            that.input.attr(ARIA_HIDDEN, false);\n            that.inputWrapper.show();\n\n            setTimeout(function() {\n                input.select();\n            });\n        },\n\n        _blur: function(shouldRestoreValue) {\n            var that = this,\n                input = that.input,\n                inputWrapper = that.inputWrapper,\n                wrapper = that.wrapper,\n                overlay = that.overlay,\n                val = input.val().replace(/\\/{2,}/g, \"/\");\n\n            if (overlay.is(\":visible\")) {\n                return;\n            }\n\n            if (shouldRestoreValue) {\n                val = that.oldValue;\n            }\n\n            input.attr(ARIA_HIDDEN, true);\n            inputWrapper.hide();\n            overlay.show();\n            input.val(\"\");\n            that._update(val);\n            wrapper.removeClass(breadcrumbStyles.focused);\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                isEnter = key === kendo.keys.ENTER,\n                isEsc = key === kendo.keys.ESC;\n\n            if (isEnter || isEsc) {\n                that._blur(isEsc);\n\n                setTimeout(function() {\n                    that.overlay.find(\"a\").first().trigger(\"focus\");\n                });\n            }\n        },\n\n        isNavigational: function(target) {\n            var canNavigate =\n                target.hasClass(breadcrumbStyles.textbox) ||\n                target.closest(DOT + breadcrumbStyles.item);\n\n            if(target[0] === this.wrapper[0]) {\n                return false;\n            }\n\n            return canNavigate && !target.hasClass(\"k-breadcrumb-last-item\");\n        },\n\n        _wrapperKeydown: function (ev) {\n            var that = this,\n                target = $(ev.target),\n                isNavigational = that.isNavigational(target);\n\n            if (ev.keyCode === kendo.keys.ENTER && !isNavigational) {\n                that._edit();\n            }\n        },\n\n        _wrapperClick: function (ev) {\n            var that = this,\n                target = $(ev.target),\n                isNavigational = that.isNavigational(target);\n\n            if(!isNavigational) {\n                this._edit();\n            }\n        },\n\n        _wrapperFocus: function(ev) {\n            $(ev.target).addClass(breadcrumbStyles.focused);\n        },\n\n        _wrapperBlur: function(ev) {\n            $(ev.target).removeClass(breadcrumbStyles.focused);\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = this.element,\n                elementIsInput = element.is(\"input\"),\n                inputWrapper = $(\"<div class=\\\"\" + breadcrumbStyles.inputWrapper + \"\\\"><span class=\\\"\" + breadcrumbStyles.textboxWrapper + \"\\\"></span></div>\");\n\n            that.wrapper = elementIsInput ? element\n                .wrap($(\"<nav />\"))\n                .parent() : element;\n\n            if (elementIsInput) {\n                that.element\n                    .wrap(inputWrapper)\n                    .addClass(breadcrumbStyles.textbox);\n\n                that.inputWrapper = that.wrapper.find(DOT + breadcrumbStyles.inputWrapper).hide();\n            } else {\n                that.inputWrapper = that.wrapper\n                    .append(inputWrapper)\n                    .find(DOT + breadcrumbStyles.inputWrapper).hide();\n            }\n\n            that.wrapper.addClass(breadcrumbStyles.widget);\n            that.wrapper.attr(ARIA_LABEL, \"Breadcrumb\");\n\n            that.overlay = that.wrapper\n                .append($(\"<ol />\").addClass(breadcrumbStyles.overlay))\n                .find(DOT + breadcrumbStyles.overlay);\n        },\n\n\n        _editable: function(){\n            var that = this,\n                element = that.element,\n                elementIsInput = element.is(\"input\");\n\n            if(elementIsInput) {\n                that.input = that.element;\n            } else {\n                that.input = $(\"<input />\");\n            }\n\n            that.inputWrapper.find(DOT + breadcrumbStyles.textboxWrapper.split(' ')[0]).append(that.input);\n\n            that.input\n                .addClass(breadcrumbStyles.textbox)\n                .attr(ARIA_HIDDEN, true);\n\n            that.input\n                .on(BLUR + BREADCRUMB, proxy(that._blur, that, false))\n                .on(KEYDOWN + BREADCRUMB, proxy(that._keydown, that));\n\n            that.wrapper\n                .on(FOCUS + BREADCRUMB, proxy(that._wrapperFocus, that))\n                .on(BLUR + BREADCRUMB, proxy(that._wrapperBlur, that))\n                .on(KEYDOWN + BREADCRUMB, proxy(that._wrapperKeydown, that))\n                .on(CLICK + BREADCRUMB, proxy(that._wrapperClick, that));\n        },\n\n        _value: function () {\n            var that = this,\n                options = that.options;\n\n            if (options.value) {\n                that.value(options.value);\n            } else if (options.bindToLocation) {\n                that.value(window.location.href.replace(/http(s?):\\/\\//,\"\").replace(/\\/$/, \"\"));\n            } else {\n                that.value(\"\");\n            }\n        },\n\n        _split: function(value) {\n            return value.split(\"/\").filter(function (item, index) {\n                if(index > 0 && item === \"\") {\n                    return false;\n                }\n\n                return true;\n            });\n        },\n\n        isRtl: function() {\n            return kendo.support.isRtl(this.wrapper);\n        },\n\n        refresh: function() {\n            var that = this,\n                options = that.options,\n                messages = options.messages,\n                delimiterIcon = that.options.delimiterIcon,\n                html = \"\",\n                href = \"\",\n                isOnlyRoot = that.value() === \"\",\n                segments = that._segments,\n                segment,\n                idx,\n                length, isLastSegment;\n\n            if (delimiterIcon == \"arrow-chevron-right\" && that.isRtl()) {\n                delimiterIcon = \"arrow-chevron-left\";\n            }\n\n            for (idx = 0, length = segments.length; idx < length; idx++) {\n                segment = segments[idx];\n                isLastSegment = idx === segments.length - 1;\n\n                if (segment !== undefined) {\n                    if(!html) {\n                        href = \"/\";\n                    } else {\n                        href += segment.text || segment || \"\";\n                    }\n\n                    if(typeof segment === \"string\") {\n                        segment = {\n                            type: !html ? \"rootitem\" : \"item\",\n                            href: options.navigational ? href : \"#\",\n                            text: segment,\n                            showIcon: !html,\n                            showText: !!html,\n                            icon: !html ? options.rootIcon : \"\",\n                            itemClass: !html ? \"k-breadcrumb-root-item\" : \"\",\n                            linkClass: !html ? breadcrumbStyles.rootLink : \"\",\n                            delimiterIcon: delimiterIcon,\n                            renderDelimiter: !isLastSegment && !isOnlyRoot,\n                            lastSegment: isLastSegment,\n                            iconClass: \"\"\n                        };\n\n                        that._segments.splice(idx, 1, segment);\n                    } else if (isPlainObject(segment)) {\n                        segment = extend({}, segment, {\n                            type: segment.type ? segment.type.toLowerCase() : \"item\"\n                        });\n\n                        segment = extend({}, segment, {\n                            text: segment.text || \"\",\n                            title: segment.text || \"\",\n                            icon: segment.icon || (segment.type === \"rootitem\" ? options.rootIcon : \"\"),\n                            iconClass: segment.iconClass || \"\",\n                            lastSegment: isLastSegment,\n                            renderDelimiter: !isLastSegment && segments.length > 1,\n                            href: options.navigational ? segment.href : \"#\",\n                            delimiterIcon: delimiterIcon,\n                            itemClass: segment.itemClass || \"\",\n                            linkClass: segment.linkClass || \"\",\n                            showIcon: segment.showIcon === undefined ? segment.type === \"rootitem\" && segment.type !== \"item\" : segment.showIcon,\n                            showText: segment.showText === undefined ? segment.type === \"item\" && segment.type !== \"rootitem\" : segment.showText\n                        });\n\n                        if(segment.type === \"rootitem\") {\n                            segment.itemClass += \" k-breadcrumb-root-item\";\n                            segment.linkClass += \" \" +  breadcrumbStyles.rootLink;\n                        }\n                    }\n\n                    if(segment.type === \"rootitem\" && segment.text === \"\") {\n                        segment.title = messages.rootTitle;\n                    }\n\n                    href += href.match(/\\/$/) ? \"\" : \"/\";\n\n                    html += kendo.template(this.itemTemplate)(segment);\n                }\n            }\n\n            this.overlay\n                .empty()\n                .append($(html));\n\n            this.resize(true);\n        },\n\n        itemTemplate: '<li class=\"k-breadcrumb-item #:itemClass# #if(lastSegment){#k-breadcrumb-last-item#}#\">' +\n            '<a href=\"#:href#\" class=\"#:linkClass# ' +\n                                     '#if(type !== \"rootitem\"){# k-breadcrumb-link#}#' +\n                                     '#if(showText && showIcon){# k-breadcrumb-icontext-link#}#' +\n                                     '#if(showIcon && !showText){# k-breadcrumb-icon-link#}#' +\n                                     '#if(lastSegment && type !== \"rootitem\"){# k-state-disabled#}#\"' +\n                                     '#if(lastSegment){# aria-current=\"page\"#}# title=\"#:text || title#\">' +\n                '#if(showIcon) {#' +\n                    '<span class=\"#if(icon){#k-icon k-i-#:icon##}# #:iconClass#\"></span>' +\n                '#}#' +\n                '#if(showText) {#' +\n                    '#:text#' +\n                '#}#' +\n            '</a>' +\n            '#if(renderDelimiter) {#' +\n                '<span class=\"k-breadcrumb-delimiter-icon k-icon k-i-#:delimiterIcon#\" aria-hidden=\"true\"></span>' +\n            '#}#' +\n            '#if(type === \"rootitem\" && renderDelimiter) {#' +\n                '<span class=\"k-breadcrumb-delimiter-icon k-hidden k-icon k-i-#:delimiterIcon#\" aria-hidden=\"true\"></span>' +\n            '#}#' +\n        '</li>',\n\n        _displayOverflowIcons: function(visible) {\n            var that = this,\n                rootItem = that.wrapper.find(DOT + breadcrumbStyles.rootItem);\n\n            if (visible) {\n                rootItem.find(DOT + breadcrumbStyles.delimiter)\n                    .addClass(breadcrumbStyles.overflowIcon)\n                    .removeClass(breadcrumbStyles.hidden);\n            } else {\n                rootItem.find(DOT + breadcrumbStyles.overflowIcon)\n                    .removeClass(breadcrumbStyles.overflowIcon)\n                    .last().addClass(breadcrumbStyles.hidden);\n            }\n        },\n\n        _shrinkItems: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                overlay = that.overlay,\n                items = that.overlay.find(DOT + breadcrumbStyles.item + \":visible:not(.k-breadcrumb-root-item)\"),\n                availableWidth = wrapper.width() - that.options.gap,\n                item;\n\n            if (items.length == 1) {\n                return;\n            }\n\n            for (var i = 0; i < items.length; i += 1) {\n                item = $(items[i]);\n\n                if (kendo._outerWidth(overlay) >= availableWidth) {\n                    if (i == items.length - 1) {\n                        break;\n                    }\n\n                    item.hide();\n                    that._displayOverflowIcons(true);\n                }\n            }\n        },\n\n        _showItem: function(item, overlayWidth, availableWidth) {\n            if (item.length && availableWidth > overlayWidth + kendo._outerWidth(item, true)) {\n                item.show();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _stretchItems: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                overlay = that.overlay,\n                items = that.overlay.find(DOT + breadcrumbStyles.item + \":hidden:not(.k-breadcrumb-root-item)\"),\n                availableWidth = wrapper.width() - that.options.gap,\n                item, overlayWidth;\n\n            if (!items.length) {\n                that._displayOverflowIcons(false);\n            }\n\n            for (var i = items.length - 1; i >= 0; i--) {\n                item = $(items[i]);\n\n                overlayWidth = kendo._outerWidth(overlay);\n\n                if (overlayWidth > availableWidth || !this._showItem(item, overlayWidth, availableWidth)) {\n                    break;\n                }\n            }\n        },\n\n        _resize: function() {\n            this._shrinkItems();\n            this._stretchItems();\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.wrapper);\n        },\n\n        value: function(val) {\n            var that = this;\n\n            if (val !== undefined) {\n                that._generateSegments(val);\n                that.refresh();\n                return;\n            }\n\n            return that._path(that._segments);\n        },\n\n        _path: function(trail) {\n            return $.map(trail, function(b) {\n                var text = isPlainObject(b) ? b.text : b;\n                return text === \"/\" ? \"\" : text;\n            }).join(\"/\");\n        }\n    });\n\n    kendo.ui.plugin(Breadcrumb);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.filebrowser',[ \"./kendo.listview\", \"./kendo.dropdownlist\", \"./kendo.upload\", \"./kendo.breadcrumb\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"filebrowser\",\n    name: \"FileBrowser\",\n    category: \"web\",\n    description: \"\",\n    hidden: true,\n    depends: [ \"selectable\", \"listview\", \"dropdownlist\", \"upload\", \"breadcrumb\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        isPlainObject = $.isPlainObject,\n        proxy = $.proxy,\n        extend = $.extend,\n        placeholderSupported = kendo.support.placeholder,\n        isFunction = kendo.isFunction,\n        trimSlashesRegExp = /(^\\/|\\/$)/g,\n        CHANGE = \"change\",\n        APPLY = \"apply\",\n        ERROR = \"error\",\n        CLICK = \"click\",\n        NS = \".kendoFileBrowser\",\n        SEARCHBOXNS = \".kendoSearchBox\",\n        NAMEFIELD = \"name\",\n        SIZEFIELD = \"size\",\n        TYPEFIELD = \"type\",\n        DEFAULTSORTORDER = { field: TYPEFIELD, dir: \"asc\" },\n        EMPTYTILE = kendo.template('<div class=\"k-listview-item k-listview-item-empty\"><span class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-none\"></span></span><span class=\"k-file-name\">${text}</span></div>'),\n        TOOLBARTMPL = '<div class=\"k-widget k-filebrowser-toolbar k-toolbar k-floatwrap\">' +\n\n                            '# if (showCreate) { #' +\n                                '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button\"><span class=\"k-i-button-icon k-icon k-i-folder-add\"></span></button>' +\n                            '# } #' +\n\n                            '# if (showUpload) { # ' +\n                                '<div class=\"k-widget k-upload\">' +\n                                    '<div class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-upload-button\">' +\n                                        '<span class=\"k-button-icon k-icon k-i-plus\"></span>' +\n                                        '<span class=\"k-button-text\">#=messages.uploadFile#</span>' +\n                                        '<input type=\"file\" name=\"file\" />' +\n                                    '</div>' +\n                                '</div>' +\n                            '# } #' +\n\n                            '# if (showDelete) { #' +\n                                '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-disabled\"><span class=\"k-button-icon k-icon k-i-close\"></span></button>' +\n                            '# } #' +\n                            '<div class=\"k-tiles-arrange\">' +\n                                '<label>#=messages.orderBy#: <select></select></label>' +\n                            '</div>' +\n\n                            '<span class=\"k-toolbar-spacer\"></span>' +\n\n                            '<input data-role=\"searchbox\" />' +\n\n                        '</div>';\n\n    extend(true, kendo.data, {\n        schemas: {\n            \"filebrowser\": {\n                data: function(data) {\n                    return data.items || data || [];\n                },\n                model: {\n                    id: \"name\",\n                    fields: {\n                        name: \"name\",\n                        size: \"size\",\n                        type: \"type\"\n                    }\n                }\n            }\n        }\n    });\n\n    extend(true, kendo.data, {\n        transports: {\n            \"filebrowser\": kendo.data.RemoteTransport.extend({\n                init: function(options) {\n                    kendo.data.RemoteTransport.fn.init.call(this, $.extend(true, {}, this.options, options));\n                },\n                _call: function(type, options) {\n                    options.data = $.extend({}, options.data, { path: this.options.path() });\n\n                    if (isFunction(this.options[type])) {\n                        this.options[type].call(this, options);\n                    } else {\n                        kendo.data.RemoteTransport.fn[type].call(this, options);\n                    }\n                },\n                read: function(options) {\n                    this._call(\"read\", options);\n                },\n                create: function(options) {\n                    this._call(\"create\", options);\n                },\n                destroy: function(options) {\n                    this._call(\"destroy\", options);\n                },\n                update: function() {\n                    //updates are handled by the upload\n                },\n                options: {\n                    read: {\n                        type: \"POST\"\n                    },\n                    update: {\n                        type: \"POST\"\n                    },\n                    create: {\n                        type: \"POST\"\n                    },\n                    destroy: {\n                        type: \"POST\"\n                    }\n                }\n            })\n        }\n    });\n\n    function bindDragEventWrappers(element, onDragEnter, onDragLeave) {\n        var hideInterval, lastDrag;\n\n        element\n            .on(\"dragenter\" + NS, function() {\n                onDragEnter();\n                lastDrag = new Date();\n\n                if (!hideInterval) {\n                    hideInterval = setInterval(function() {\n                        var sinceLastDrag = new Date() - lastDrag;\n                        if (sinceLastDrag > 100) {\n                            onDragLeave();\n\n                            clearInterval(hideInterval);\n                            hideInterval = null;\n                        }\n                    }, 100);\n                }\n            })\n            .on(\"dragover\" + NS, function() {\n                lastDrag = new Date();\n            });\n    }\n\n    function concatPaths(path, name) {\n        if(path === undefined || !path.match(/\\/$/)) {\n            path = (path || \"\") + \"/\";\n        }\n        return path + name;\n    }\n\n    function sizeFormatter(value) {\n        if(!value) {\n            return \"\";\n        }\n\n        var suffix = \" bytes\";\n\n        if (value >= 1073741824) {\n            suffix = \" GB\";\n            value /= 1073741824;\n        } else if (value >= 1048576) {\n            suffix = \" MB\";\n            value /= 1048576;\n        } else  if (value >= 1024) {\n            suffix = \" KB\";\n            value /= 1024;\n        }\n\n        return Math.round(value * 100) / 100 + suffix;\n    }\n\n    function fieldName(fields, name) {\n        var descriptor = fields[name];\n\n        if (isPlainObject(descriptor)) {\n            return descriptor.from || descriptor.field || name;\n        }\n        return descriptor;\n    }\n\n    var FileBrowser = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            Widget.fn.init.call(that, element, options);\n\n            that.element.addClass(\"k-filebrowser\");\n\n            that.element\n                .on(CLICK + NS, \".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-close)\", proxy(that._deleteClick, that))\n                .on(CLICK + NS, \".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-folder-add)\", proxy(that._addClick, that))\n                .on(\"keydown\" + NS, \".k-listview-item.k-state-selected input\", proxy(that._directoryKeyDown, that))\n                .on(\"blur\" + NS, \".k-listview-item.k-state-selected input\", proxy(that._directoryBlur, that));\n\n            that._dataSource();\n\n            that.refresh();\n\n            that.path(that.options.path);\n        },\n\n        options: {\n            name: \"FileBrowser\",\n            messages: {\n                uploadFile: \"Upload\",\n                orderBy: \"Arrange by\",\n                orderByName: \"Name\",\n                orderBySize: \"Size\",\n                directoryNotFound: \"A directory with this name was not found.\",\n                emptyFolder: \"Empty Folder\",\n                deleteFile: 'Are you sure you want to delete \"{0}\"?',\n                invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n                overwriteFile: \"A file with name \\\"{0}\\\" already exists in the current directory. Do you want to overwrite it?\",\n                dropFilesHere: \"drop file here to upload\",\n                search: \"Search\"\n            },\n            transport: {},\n            path: \"/\",\n            fileTypes: \"*.*\"\n        },\n\n        events: [ERROR, CHANGE, APPLY],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource\n                .unbind(ERROR, that._errorHandler);\n\n            that.element\n                .add(that.list)\n                .add(that.toolbar)\n                .off(NS);\n\n            kendo.destroy(that.element);\n        },\n\n        value: function() {\n            var that = this,\n                selected = that._selectedItem(),\n                path,\n                fileUrl = that.options.transport.fileUrl;\n\n            if (selected && selected.get(TYPEFIELD) === \"f\") {\n                path = concatPaths(that.path(), selected.get(NAMEFIELD)).replace(trimSlashesRegExp, \"\");\n                if (fileUrl) {\n                    path = isFunction(fileUrl) ? fileUrl(path) : kendo.format(fileUrl, encodeURIComponent(path));\n                }\n                return path;\n            }\n        },\n\n        _selectedItem: function() {\n            var listView = this.listView,\n                selected = listView.select();\n\n            if (selected.length) {\n                return this.dataSource.getByUid(selected.attr(kendo.attr(\"uid\")));\n            }\n        },\n\n        _toolbar: function() {\n            var that = this,\n                template = kendo.template(TOOLBARTMPL),\n                messages = that.options.messages,\n                arrangeBy = [\n                    { text: messages.orderByName, value: \"name\" },\n                    { text: messages.orderBySize, value: \"size\" }\n                ];\n\n            that.toolbar = $(template({\n                    messages: messages,\n                    showUpload: that.options.transport.uploadUrl,\n                    showCreate: that.options.transport.create,\n                    showDelete: that.options.transport.destroy\n                }))\n                .appendTo(that.element)\n                .find(\".k-upload input\")\n                .kendoUpload({\n                    multiple: false,\n                    localization: {\n                        dropFilesHere: messages.dropFilesHere\n                    },\n                    async: {\n                        saveUrl: that.options.transport.uploadUrl,\n                        autoUpload: true\n                    },\n                    upload: proxy(that._fileUpload, that),\n                    error: function(e) {\n                        that._error({ xhr: e.XMLHttpRequest, status: \"error\" });\n                    }\n                }).end();\n\n            that.upload = that.toolbar\n                .find(\".k-upload input\")\n                .data(\"kendoUpload\");\n\n            that.arrangeBy = that.toolbar.find(\".k-tiles-arrange select\")\n                .kendoDropDownList({\n                    dataSource: arrangeBy,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    change: function() {\n                        that.orderBy(this.value());\n                    }\n                })\n                .data(\"kendoDropDownList\");\n\n            that.searchBox = that.toolbar.find(\"input[data-role='searchbox']\")\n                .kendoSearchBox({\n                    label: that.options.messages.search,\n                    change: function() {\n                        that.search(this.value());\n                    }\n                }).data(\"kendoSearchBox\");\n\n            that._attachDropzoneEvents();\n        },\n\n        _attachDropzoneEvents: function() {\n            var that = this;\n\n            if (that.options.transport.uploadUrl) {\n                bindDragEventWrappers($(document.documentElement),\n                    $.proxy(that._dropEnter, that),\n                    $.proxy(that._dropLeave, that)\n                );\n                that._scrollHandler = proxy(that._positionDropzone, that);\n            }\n        },\n\n        _dropEnter: function() {\n            this._positionDropzone();\n            $(document).on(\"scroll\" + NS, this._scrollHandler);\n        },\n\n        _dropLeave: function() {\n            this._removeDropzone();\n            $(document).off(\"scroll\" + NS, this._scrollHandler);\n        },\n\n        _positionDropzone: function() {\n            var that = this,\n                element = that.element,\n                offset = element.offset();\n\n            that.toolbar.find(\".k-dropzone\")\n                .addClass(\"k-filebrowser-dropzone\")\n                .offset(offset)\n                .css({\n                    width: element[0].clientWidth,\n                    height: element[0].clientHeight,\n                    lineHeight: element[0].clientHeight + \"px\"\n                });\n        },\n\n        _removeDropzone: function() {\n            this.toolbar.find(\".k-dropzone\")\n                .removeClass(\"k-filebrowser-dropzone\")\n                .css({ width: \"\", height: \"\", lineHeight: \"\", top: \"\", left: \"\" });\n        },\n\n        _deleteClick: function() {\n            var that = this,\n                item = that.listView.select(),\n                message = kendo.format(that.options.messages.deleteFile, item.find(\".k-file-name\").text());\n\n            if (item.length && that._showMessage(message, \"confirm\")) {\n                that.listView.remove(item);\n            }\n        },\n\n        _addClick: function() {\n            this.createDirectory();\n        },\n\n        _getFieldName: function(name) {\n            return fieldName(this.dataSource.reader.model.fields, name);\n        },\n\n        _fileUpload: function(e) {\n            var that = this,\n                options = that.options,\n                fileTypes = options.fileTypes,\n                filterRegExp = new RegExp((\"(\" + fileTypes.split(\",\").join(\")|(\") + \")\").replace(/\\*\\./g , \".*.\"), \"i\"),\n                fileName = e.files[0].name,\n                fileSize = e.files[0].size,\n                fileNameField = NAMEFIELD,\n                sizeField = SIZEFIELD,\n                file;\n\n            if (filterRegExp.test(fileName)) {\n                e.data = { path: that.path() };\n\n                file = that._createFile(fileName, fileSize);\n\n                if (!file) {\n                    e.preventDefault();\n                } else {\n                    that.upload.one(\"success\", function(e) {\n                        var model = that._insertFileToList(file);\n\n                        if(model._override) {\n                            model.set(fileNameField, e.response[that._getFieldName(fileNameField)]);\n                            model.set(sizeField, e.response[that._getFieldName(sizeField)]);\n\n                            that.listView.dataSource.pushUpdate(model);\n                        }\n\n                        that._tiles = that.listView.items().filter(\"[\" + kendo.attr(\"type\") + \"=f]\");\n                    });\n                }\n            } else {\n                e.preventDefault();\n                that._showMessage(kendo.format(options.messages.invalidFileType, fileName, fileTypes));\n            }\n        },\n\n        _findFile: function(name) {\n            var data = this.dataSource.data(),\n                idx,\n                result,\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                length;\n\n            name = name.toLowerCase();\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].get(typeField) === \"f\" &&\n                    data[idx].get(nameField).toLowerCase() === name) {\n\n                    result = data[idx];\n                    break;\n                }\n            }\n            return result;\n        },\n\n        _createFile: function(fileName, fileSize) {\n            var that = this,\n                model = {},\n                typeField = TYPEFIELD,\n                file = that._findFile(fileName);\n\n            if (file) {\n                if (!that._showMessage(kendo.format(that.options.messages.overwriteFile, fileName), \"confirm\")) {\n                    return null;\n                } else {\n                    file._override = true;\n                    return file;\n                }\n            }\n\n            model[typeField] = \"f\";\n            model[NAMEFIELD] = fileName;\n            model[SIZEFIELD] = fileSize;\n\n            return model;\n        },\n\n        _insertFileToList: function(model) {\n            var index;\n            if(model._override) {\n                return model;\n            }\n\n            var dataSource = this.dataSource;\n            var view = dataSource.view();\n\n            for (var i = 0, length = view.length; i < length; i++) {\n                if (view[i].get(TYPEFIELD) === \"f\") {\n                    index = i;\n                    break;\n                }\n            }\n\n            return dataSource.insert(++index, model);\n        },\n\n        createDirectory: function() {\n            var that = this,\n                idx,\n                length,\n                lastDirectoryIdx = 0,\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                view = that.dataSource.data(),\n                name = that._nameDirectory(),\n                model = new that.dataSource.reader.model();\n\n            for (idx = 0, length = view.length; idx < length; idx++) {\n                if (view[idx].get(typeField) === \"d\") {\n                    lastDirectoryIdx = idx;\n                }\n            }\n\n            model.set(typeField, \"d\");\n            model.set(nameField, name);\n\n            that.listView.one(\"dataBound\", function() {\n                var selected = that.listView.items()\n                    .filter(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n\n                if (selected.length) {\n                    this.edit(selected);\n                }\n\n                this.element.scrollTop(selected.attr(\"offsetTop\") - this.element[0].offsetHeight);\n\n                setTimeout(function() {\n                    that.listView.element.find('.k-edit-item input').select();\n                });\n            })\n            .one(\"save\", function(e) {\n                var value = e.model.get(nameField);\n\n                if (!value) {\n                    e.model.set(nameField, name);\n                } else {\n                    e.model.set(nameField, that._nameExists(value, model.uid) ? that._nameDirectory() : value);\n                }\n            });\n\n            that.dataSource.insert(++lastDirectoryIdx, model);\n        },\n\n        _directoryKeyDown: function(e) {\n            if (e.keyCode == 13) {\n                e.currentTarget.blur();\n            }\n        },\n\n        _directoryBlur: function() {\n            this.listView.save();\n        },\n\n        _nameExists: function(name, uid) {\n            var data = this.dataSource.data(),\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                idx,\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].get(typeField) === \"d\" &&\n                    data[idx].get(nameField).toLowerCase() === name.toLowerCase() &&\n                    data[idx].uid !== uid) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _nameDirectory: function() {\n            var name = \"New folder\",\n                data = this.dataSource.data(),\n                directoryNames = [],\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                candidate,\n                idx,\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].get(typeField) === \"d\" && data[idx].get(nameField).toLowerCase().indexOf(name.toLowerCase()) > -1) {\n                    directoryNames.push(data[idx].get(nameField));\n                }\n            }\n\n            if ($.inArray(name, directoryNames) > -1) {\n                idx = 2;\n\n                do {\n                    candidate = name + \" (\" + idx + \")\";\n                    idx++;\n                } while ($.inArray(candidate, directoryNames) > -1);\n\n                name = candidate;\n            }\n\n            return name;\n        },\n\n        orderBy: function(field) {\n            this.dataSource.sort([\n                { field: TYPEFIELD, dir: \"asc\" },\n                { field: field, dir: \"asc\" }\n            ]);\n        },\n\n        search: function(name) {\n            this.dataSource.filter({\n                field: NAMEFIELD,\n                operator: \"contains\",\n                value: name\n            });\n        },\n\n        _content: function() {\n            var that = this;\n\n            that.list = $('<div class=\"k-filemanager-listview\" />')\n                .appendTo(that.element)\n                .on(\"dblclick\" + NS, \".k-listview-item\", proxy(that._dblClick, that));\n\n            that.listView = new kendo.ui.ListView(that.list, {\n                layout: \"flex\",\n                flex: {\n                    direction: \"row\",\n                    wrap: \"wrap\"\n                },\n                dataSource: that.dataSource,\n                template: that._itemTmpl(),\n                editTemplate: that._editTmpl(),\n                selectable: true,\n                autoBind: false,\n                dataBinding: function(e) {\n                    that.toolbar.find(\".k-i-close\").parent().addClass(\"k-disabled\");\n\n                    if (e.action === \"remove\" || e.action === \"sync\") {\n                        e.preventDefault();\n                        kendo.ui.progress(that.listView.content, false);\n                    }\n                },\n                dataBound: function() {\n                    if (that.dataSource.view().length) {\n                        that._tiles = this.items().filter(\"[\" + kendo.attr(\"type\") + \"=f]\");\n                    } else {\n                        this.content.append(EMPTYTILE({ text: that.options.messages.emptyFolder }));\n                    }\n                },\n                change: proxy(that._listViewChange, that)\n            });\n        },\n\n        _dblClick: function(e) {\n            var that = this,\n                li = $(e.currentTarget);\n\n            if (li.hasClass(\"k-edit-item\")) {\n                that._directoryBlur();\n            }\n\n            if (li.filter(\"[\" + kendo.attr(\"type\") + \"=d]\").length) {\n                var folder = that.dataSource.getByUid(li.attr(kendo.attr(\"uid\")));\n                if (folder) {\n                    that.path(concatPaths(that.path(), folder.get(NAMEFIELD)));\n                    that.breadcrumbs.value(\"/\" + that.path());\n                }\n            } else if (li.filter(\"[\" + kendo.attr(\"type\") + \"=f]\").length) {\n                that.trigger(APPLY);\n            }\n        },\n\n        _listViewChange: function() {\n            var selected = this._selectedItem();\n\n            if (selected) {\n                this.toolbar.find(\".k-i-close\").parent().removeClass(\"k-disabled\");\n                this.trigger(CHANGE, { selected: selected });\n            }\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                transport = options.transport,\n                typeSortOrder = extend({}, DEFAULTSORTORDER),\n                nameSortOrder = { field: NAMEFIELD, dir: \"asc\" },\n                schema,\n                dataSource = {\n                    type: transport.type || \"filebrowser\",\n                    sort: [typeSortOrder, nameSortOrder]\n                };\n\n            if (isPlainObject(transport)) {\n                transport.path = proxy(that.path, that);\n                dataSource.transport = transport;\n            }\n\n            if (isPlainObject(options.schema)) {\n                dataSource.schema = options.schema;\n            } else if (transport.type && isPlainObject(kendo.data.schemas[transport.type])) {\n                schema = kendo.data.schemas[transport.type];\n            }\n\n            if (that.dataSource && that._errorHandler) {\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            } else {\n                that._errorHandler = proxy(that._error, that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(dataSource)\n                .bind(ERROR, that._errorHandler);\n        },\n\n        _navigation: function() {\n            var that = this,\n                navigation = $('<div class=\"k-floatwrap\"><nav></nav></div>')\n                    .appendTo(this.element);\n\n            that.breadcrumbs = navigation.find(\"nav\").first()\n                    .kendoBreadcrumb({\n                        editable: true,\n                        gap: 50,\n                        value: that.options.path || \"/\",\n                        change: function() {\n                            that.path(this.value());\n                        }\n                    }).data(\"kendoBreadcrumb\");\n        },\n\n        _error: function(e) {\n            var that = this,\n                status;\n\n            if (!that.trigger(ERROR, e)) {\n                status = e.xhr.status;\n\n                if (e.status == 'error') {\n                    if (status == '404') {\n                        that._showMessage(that.options.messages.directoryNotFound);\n                    } else if (status != '0') {\n                        that._showMessage('Error! The requested URL returned ' + status + ' - ' + e.xhr.statusText);\n                    }\n                } else if (status == 'timeout') {\n                    that._showMessage('Error! Server timeout.');\n                }\n\n                var dataSource = that.dataSource;\n                if (dataSource.hasChanges()) {\n                    dataSource.cancelChanges();\n                }\n            }\n        },\n\n        _showMessage: function(message, type) {\n            return window[type || \"alert\"](message);\n        },\n\n        refresh: function() {\n            var that = this;\n            that._navigation();\n            that._toolbar();\n            that._content();\n        },\n\n        _editTmpl: function() {\n            var html = '<div class=\"k-listview-item k-state-selected\" ' + kendo.attr(\"uid\") + '=\"#=uid#\" ';\n\n            html += kendo.attr(\"type\") + '=\"${' + TYPEFIELD + '}\">';\n            html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n            html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-folder\"></span></div>';\n            html += \"#}else{#\";\n            html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-loading\"></span></div>';\n            html += \"#}#\";\n            html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n            html += '<span class=\"k-file-name\"><span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" ' + kendo.attr(\"bind\") + '=\"value:' + NAMEFIELD + '\"/></span></span>';\n            html += \"#}#\";\n            html += '</div>';\n\n            return proxy(kendo.template(html), { sizeFormatter: sizeFormatter } );\n        },\n\n        _itemTmpl: function() {\n            var html = '<div class=\"k-listview-item\" ' + kendo.attr(\"uid\") + '=\"#=uid#\" ';\n\n            html += kendo.attr(\"type\") + '=\"${' + TYPEFIELD + '}\">';\n            html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n            html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-folder\"></span></div>';\n            html += \"#}else{#\";\n            html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-file\"></span></div>';\n            html += \"#}#\";\n            html += '<span class=\"k-file-name\">${' + NAMEFIELD + '}</span>';\n            html += '#if(' + TYPEFIELD + ' == \"f\") { # <span class=\"k-file-size\">${this.sizeFormatter(' + SIZEFIELD + ')}</span> #}#';\n            html += '</div>';\n\n            return proxy(kendo.template(html), { sizeFormatter: sizeFormatter } );\n        },\n\n        path: function(value) {\n            var that = this,\n                path = that._path || \"\";\n\n            if (value !== undefined) {\n                that._path = value.replace(trimSlashesRegExp, \"\") + \"/\";\n                that.dataSource.read({ path: that._path });\n                return;\n            }\n\n            if (path) {\n                path = path.replace(trimSlashesRegExp, \"\");\n            }\n\n            return path === \"/\" || path === \"\" ? \"\" : (path + \"/\");\n        }\n    });\n\n    var SearchBox = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            Widget.fn.init.call(that, element, options);\n\n            if (placeholderSupported) {\n                that.element.attr(\"placeholder\", that.options.label);\n            }\n\n            that._wrapper();\n\n            that.element\n                .on(\"keydown\" + SEARCHBOXNS, proxy(that._keydown, that))\n                .on(\"change\" + SEARCHBOXNS, proxy(that._updateValue, that));\n\n            that.wrapper\n                .on(CLICK + SEARCHBOXNS, \"a\", proxy(that._click, that));\n\n            if (!placeholderSupported) {\n                that.element.on(\"focus\" + SEARCHBOXNS, proxy(that._focus, that))\n                    .on(\"blur\" + SEARCHBOXNS, proxy(that._blur, that));\n            }\n        },\n\n        options: {\n            name: \"SearchBox\",\n            label: \"Search\",\n            value: \"\"\n        },\n\n        events: [ CHANGE ],\n\n        destroy: function() {\n            var that = this;\n\n            that.wrapper\n                .add(that.element)\n                .add(that.label)\n                .off(SEARCHBOXNS);\n\n            Widget.fn.destroy.call(that);\n        },\n\n        _keydown: function(e) {\n            if (e.keyCode === 13) {\n                this._updateValue();\n            }\n        },\n\n        _click: function(e) {\n            e.preventDefault();\n            this._updateValue();\n        },\n\n        _updateValue: function() {\n            var that = this,\n                value = that.element.val();\n\n            if (value !== that.value()) {\n                that.value(value);\n\n                that.trigger(CHANGE);\n            }\n        },\n\n        _blur: function() {\n            this._updateValue();\n            this._toggleLabel();\n        },\n\n        _toggleLabel: function() {\n            if (!placeholderSupported) {\n                this.label.toggle(!this.element.val());\n            }\n        },\n\n        _focus: function() {\n            this.label.hide();\n        },\n\n        _wrapper: function() {\n            var element = this.element,\n                wrapper = element.parents(\".k-search-wrap\");\n\n            element[0].style.width = \"\";\n            element.addClass(\"k-input-inner\");\n\n            if (!wrapper.length) {\n                wrapper = element.wrap($('<div class=\"k-widget k-search-wrap\"><span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"></span></div>')).parents(\".k-search-wrap\");\n                if (!placeholderSupported) {\n                    $('<label style=\"display:block\">' + this.options.label + '</label>').insertBefore(element);\n                }\n                $('<span class=\"k-input-suffix\"><a href=\"#\" class=\"k-icon k-i-zoom k-search\"/></span>').appendTo(wrapper.find(\".k-textbox\"));\n            }\n\n            this.wrapper = wrapper;\n            this.label = wrapper.find(\">label\");\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value !== undefined) {\n                that.options.value = value;\n                that.element.val(value);\n                that._toggleLabel();\n                return;\n            }\n            return that.options.value;\n        }\n    });\n\n    kendo.ui.plugin(FileBrowser);\n    kendo.ui.plugin(SearchBox);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.imagebrowser',[ \"./kendo.filebrowser\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"imagebrowser\",\n    name: \"ImageBrowser\",\n    category: \"web\",\n    description: \"\",\n    hidden: true,\n    depends: [ \"filebrowser\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        FileBrowser = kendo.ui.FileBrowser,\n        isPlainObject = $.isPlainObject,\n        proxy = $.proxy,\n        extend = $.extend,\n        isFunction = kendo.isFunction,\n        trimSlashesRegExp = /(^\\/|\\/$)/g,\n        ERROR = \"error\",\n        NS = \".kendoImageBrowser\",\n        NAMEFIELD = \"name\",\n        SIZEFIELD = \"size\",\n        TYPEFIELD = \"type\",\n        DEFAULTSORTORDER = { field: TYPEFIELD, dir: \"asc\" },\n        EMPTYTILE = kendo.template('<div class=\"k-listview-item k-listview-item-empty\"><span class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-none\"></span></span><span class=\"k-file-name\">${text}</span></div>');\n\n    extend(true, kendo.data, {\n        schemas: {\n            \"imagebrowser\": {\n                data: function(data) {\n                    return data.items || data || [];\n                },\n                model: {\n                    id: \"name\",\n                    fields: {\n                        name: \"name\",\n                        size: \"size\",\n                        type: \"type\"\n                    }\n                }\n            }\n        }\n    });\n\n    extend(true, kendo.data, {\n        transports: {\n            \"imagebrowser\": kendo.data.RemoteTransport.extend({\n                init: function(options) {\n                    kendo.data.RemoteTransport.fn.init.call(this, $.extend(true, {}, this.options, options));\n                },\n                _call: function(type, options) {\n                    options.data = $.extend({}, options.data, { path: this.options.path() });\n\n                    if (isFunction(this.options[type])) {\n                        this.options[type].call(this, options);\n                    } else {\n                        kendo.data.RemoteTransport.fn[type].call(this, options);\n                    }\n                },\n                read: function(options) {\n                    this._call(\"read\", options);\n                },\n                create: function(options) {\n                    this._call(\"create\", options);\n                },\n                destroy: function(options) {\n                    this._call(\"destroy\", options);\n                },\n                update: function() {\n                    //updates are handled by the upload\n                },\n                options: {\n                    read: {\n                        type: \"POST\"\n                    },\n                    update: {\n                        type: \"POST\"\n                    },\n                    create: {\n                        type: \"POST\"\n                    },\n                    destroy: {\n                        type: \"POST\"\n                    }\n                }\n            })\n        }\n    });\n\n    function offsetTop(element) {\n        return element.offsetTop - $(element).height();\n    }\n\n    function concatPaths(path, name) {\n        if(path === undefined || !path.match(/\\/$/)) {\n            path = (path || \"\") + \"/\";\n        }\n        return path + name;\n    }\n\n    function sizeFormatter(value) {\n        if(!value) {\n            return \"\";\n        }\n\n        var suffix = \" bytes\";\n\n        if (value >= 1073741824) {\n            suffix = \" GB\";\n            value /= 1073741824;\n        } else if (value >= 1048576) {\n            suffix = \" MB\";\n            value /= 1048576;\n        } else  if (value >= 1024) {\n            suffix = \" KB\";\n            value /= 1024;\n        }\n\n        return Math.round(value * 100) / 100 + suffix;\n    }\n\n    var ImageBrowser = FileBrowser.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            FileBrowser.fn.init.call(that, element, options);\n\n            that.element.addClass(\"k-imagebrowser\");\n        },\n\n        options: {\n            name: \"ImageBrowser\",\n            fileTypes: \"*.png,*.gif,*.jpg,*.jpeg\"\n        },\n\n        value: function () {\n            var that = this,\n                selected = that._selectedItem(),\n                path,\n                imageUrl = that.options.transport.imageUrl;\n\n            if (selected && selected.get(TYPEFIELD) === \"f\") {\n                path = concatPaths(that.path(), selected.get(NAMEFIELD)).replace(trimSlashesRegExp, \"\");\n                if (imageUrl) {\n                    path = isFunction(imageUrl) ? imageUrl(path) : kendo.format(imageUrl, encodeURIComponent(path));\n                }\n                return path;\n            }\n        },\n\n        _fileUpload: function(e) {\n            var that = this,\n                options = that.options,\n                fileTypes = options.fileTypes,\n                filterRegExp = new RegExp((\"(\" + fileTypes.split(\",\").join(\")|(\") + \")\").replace(/\\*\\./g , \".*.\"), \"i\"),\n                fileName = e.files[0].name,\n                fileSize = e.files[0].size,\n                fileNameField = NAMEFIELD,\n                sizeField = SIZEFIELD,\n                file;\n\n            if (filterRegExp.test(fileName)) {\n                e.data = { path: that.path() };\n\n                file = that._createFile(fileName, fileSize);\n\n                if (!file) {\n                    e.preventDefault();\n                } else {\n                    file._uploading = true;\n\n                    that.upload.one(\"error\", function() {\n                        file = undefined;\n                    });\n\n                    that.upload.one(\"success\", function(e) {\n                        if (file) {\n                            delete file._uploading;\n\n                            var model = that._insertFileToList(file);\n\n                            model.set(fileNameField, e.response[that._getFieldName(fileNameField)]);\n                            model.set(sizeField, e.response[that._getFieldName(sizeField)]);\n\n                            that._tiles = that.listView.items().filter(\"[\" + kendo.attr(\"type\") + \"=f]\");\n                            that._scroll();\n                        }\n                    });\n                }\n            } else {\n                e.preventDefault();\n                that._showMessage(kendo.format(options.messages.invalidFileType, fileName, fileTypes));\n            }\n        },\n\n        _content: function() {\n            var that = this;\n\n            that.list = $('<div class=\"k-filemanager-listview\" />')\n                .appendTo(that.element)\n                .on(\"dblclick\" + NS, \".k-listview-item\", proxy(that._dblClick, that));\n\n            that.listView = new kendo.ui.ListView(that.list, {\n                layout: \"flex\",\n                flex: {\n                    direction: \"row\",\n                    wrap: \"wrap\"\n                },\n                dataSource: that.dataSource,\n                template: that._itemTmpl(),\n                editTemplate: that._editTmpl(),\n                selectable: true,\n                autoBind: false,\n                dataBinding: function(e) {\n\n                    that.toolbar.find(\".k-i-close\").parent().addClass(\"k-disabled\");\n\n                    if (e.action === \"remove\" || e.action === \"sync\") {\n                        e.preventDefault();\n                        kendo.ui.progress(that.listView.content, false);\n                    }\n                },\n                dataBound: function() {\n                    if (that.dataSource.view().length) {\n                        that._tiles = this.items().filter(\"[\" + kendo.attr(\"type\") + \"=f]\");\n                        that._scroll();\n                    } else {\n                        this.content.append(EMPTYTILE({ text: that.options.messages.emptyFolder }));\n                    }\n                },\n                change: proxy(that._listViewChange, that)\n            });\n\n            that.listView.content.on(\"scroll\" + NS, proxy(that._scroll, that));\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                transport = options.transport,\n                typeSortOrder = extend({}, DEFAULTSORTORDER),\n                nameSortOrder = { field: NAMEFIELD, dir: \"asc\" },\n                schema,\n                dataSource = {\n                    type: transport.type || \"imagebrowser\",\n                    sort: [typeSortOrder, nameSortOrder]\n                };\n\n            if (isPlainObject(transport)) {\n                transport.path = proxy(that.path, that);\n                dataSource.transport = transport;\n            }\n\n            if (isPlainObject(options.schema)) {\n                dataSource.schema = options.schema;\n            } else if (transport.type && isPlainObject(kendo.data.schemas[transport.type])) {\n                schema = kendo.data.schemas[transport.type];\n            }\n\n            if (that.dataSource && that._errorHandler) {\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            } else {\n                that._errorHandler = proxy(that._error, that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(dataSource)\n                .bind(ERROR, that._errorHandler);\n        },\n\n        _loadImage: function(li) {\n            var that = this,\n                element = $(li),\n                dataItem = that.dataSource.getByUid(element.attr(kendo.attr(\"uid\"))),\n                name = dataItem.get(NAMEFIELD),\n                thumbnailUrl = that.options.transport.thumbnailUrl,\n                img = $(\"<img />\", { alt: name }),\n                urlJoin = \"?\";\n\n            if (dataItem._uploading) {\n                return;\n            }\n\n            img.hide()\n               .on(\"load\" + NS, function() {\n                   $(this).prev().remove().end().addClass(\"k-image k-file-image\").fadeIn();\n               });\n\n            element.find(\".k-i-loading\").after(img);\n\n            if (isFunction(thumbnailUrl)) {\n                thumbnailUrl = thumbnailUrl(that.path(), encodeURIComponent(name));\n            } else {\n                if (thumbnailUrl.indexOf(\"?\") >= 0) {\n                    urlJoin = \"&\";\n                }\n\n                thumbnailUrl = thumbnailUrl + urlJoin + \"path=\" + encodeURIComponent(that.path() + name);\n                if (dataItem._override) {\n                    thumbnailUrl += \"&_=\" + new Date().getTime();\n                    delete dataItem._override;\n                }\n            }\n\n            // IE8 will trigger the load event immediately when the src is assigned\n            // if the image is loaded from the cache\n            img.attr(\"src\", thumbnailUrl);\n\n            li.loaded = true;\n        },\n\n        _scroll: function() {\n            var that = this;\n            if (that.options.transport && that.options.transport.thumbnailUrl) {\n                clearTimeout(that._timeout);\n\n                that._timeout = setTimeout(function() {\n\n                    var height = kendo._outerHeight(that.listView.content),\n                        viewTop = that.listView.content.scrollTop(),\n                        viewBottom = viewTop + height;\n\n                    that._tiles.each(function() {\n                        var top = offsetTop(this),\n                            bottom = top + this.offsetHeight;\n\n                        if ((top >= viewTop && top < viewBottom) || (bottom >= viewTop && bottom < viewBottom)) {\n                            that._loadImage(this);\n                        }\n\n                        if (top > viewBottom) {\n                            return false;\n                        }\n                    });\n\n                    that._tiles = that._tiles.filter(function() {\n                        return !this.loaded;\n                    });\n\n                }, 250);\n            }\n        },\n\n        _itemTmpl: function() {\n            var that = this,\n                html = '<div class=\"k-listview-item\" ' + kendo.attr(\"uid\") + '=\"#=uid#\" ';\n\n            html += kendo.attr(\"type\") + '=\"${' + TYPEFIELD + '}\">';\n            html += '#if(' + TYPEFIELD + ' == \"d\") { #';\n            html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-folder\"></span></div>';\n            html += \"#}else{#\";\n            if (that.options.transport && that.options.transport.thumbnailUrl) {\n                html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-loading\"></span></div>';\n            } else {\n                html += '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-file\"></span></div>';\n            }\n            html += \"#}#\";\n            html += '<span class=\"k-file-name\">${' + NAMEFIELD + '}</span>';\n            html += '#if(' + TYPEFIELD + ' == \"f\") { # <span class=\"k-file-size\">${this.sizeFormatter(' + SIZEFIELD + ')}</span> #}#';\n            html += '</div>';\n\n            return proxy(kendo.template(html), { sizeFormatter: sizeFormatter } );\n        }\n    });\n\n    kendo.ui.plugin(ImageBrowser);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define) {\n    define('kendo.tabstrip',[ \"./kendo.data\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"tabstrip\",\n    name: \"TabStrip\",\n    category: \"web\",\n    description: \"The TabStrip widget displays a collection of tabs with associated tab content.\",\n    depends: [ \"data\" ],\n    features: [ {\n        id: \"tabstrip-fx\",\n        name: \"Animation\",\n        description: \"Support for animation\",\n        depends: [ \"fx\" ]\n    } ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        map = $.map,\n        each = $.each,\n        trim = kendo.trim,\n        extend = $.extend,\n        isFunction = kendo.isFunction,\n        template = kendo.template,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        Widget = ui.Widget,\n        excludedNodesRegExp = /^(a|div)$/i,\n        NS = \".kendoTabStrip\",\n        IMG = \"img\",\n        HREF = \"href\",\n        PREV = \"prev\",\n        NEXT = \"next\",\n        SHOW = \"show\",\n        LINK = \"k-link\",\n        LAST = \"k-last\",\n        CLICK = \"click\",\n        ERROR = \"error\",\n        EMPTY = \":empty\",\n        IMAGE = \"k-image\",\n        FIRST = \"k-first\",\n        SELECT = \"select\",\n        ACTIVATE = \"activate\",\n        CONTENT = \"k-tabstrip-content k-content\",\n        CONTENTURL = \"contentUrl\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        CONTENTLOAD = \"contentLoad\",\n        DISABLEDSTATE = \"k-state-disabled\",\n        ACTIVESTATE = \"k-state-active\",\n        FOCUSEDSTATE = \"k-state-focused\",\n        HOVERSTATE = \"k-state-hover\",\n        TABONTOP = \"k-tab-on-top\",\n        NAVIGATABLEITEMS = \".k-item:not(.\" + DISABLEDSTATE + \")\",\n        KEYBOARDNAVIGATABLEITEMS = \".k-item\",\n        HOVERABLEITEMS = \".k-tabstrip-items > \" + NAVIGATABLEITEMS + \":not(.\" + ACTIVESTATE + \")\",\n        DEFAULTDISTANCE = 200,\n\n        templates = {\n            content: template(\n                \"<div class='k-tabstrip-content k-content' #= contentAttributes(data) # tabindex='0'>#= content(item) #</div>\"\n            ),\n            itemWrapper: template(\n                \"<#= tag(item) # class='k-link' #= contentUrl(item) # #= textAttributes(item) #>\" +\n                    \"#= image(item) ##= sprite(item) ##= text(item) #\" +\n                \"</#= tag(item) #>\"\n            ),\n            item: template(\n                \"<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \\\"aria-selected='true'\\\" : ''#>\" +\n                    \"#= itemWrapper(data) #\" +\n                \"</li>\"\n            ),\n            image: template(\"<img class='k-image' alt='' src='#= imageUrl #' />\"),\n            sprite: template(\"<span class='k-sprite #= spriteCssClass #'></span>\"),\n            empty: template(\"\")\n        },\n\n        rendering = {\n            wrapperCssClass: function(group, item) {\n                var result = [\"k-tabstrip-item\", \"k-item\"],\n                    index = item.index;\n\n                if (item.enabled === false) {\n                    result.push(\"k-state-disabled\");\n                }\n\n                if (index === 0) {\n                    result.push(\"k-first\");\n                }\n\n                if (index == group.length - 1) {\n                    result.push(\"k-last\");\n                }\n\n                return result.join(\" \");\n            },\n            textAttributes: function(item) {\n                return item.url ? \" href='\" + item.url + \"'\" : \"\";\n            },\n            text: function(item) {\n                return item.encoded === false ? item.text : kendo.htmlEncode(item.text);\n            },\n            tag: function(item) {\n                return item.url ? \"a\" : \"span\";\n            },\n            contentAttributes: function(content) {\n                return content.active !== true ? \" style='display:none' aria-hidden='true' aria-expanded='false'\" : \"\";\n            },\n            content: function(item) {\n                return item.content ? item.content : item.contentUrl ? \"\" : \"&nbsp;\";\n            },\n            contentUrl: function(item) {\n                return item.contentUrl ? kendo.attr(\"content-url\") + '=\"' + item.contentUrl + '\"' : \"\";\n            }\n        };\n\n    function updateTabClasses(tabs) {\n        tabs.children(IMG)\n            .addClass(IMAGE);\n\n        tabs.children(\"a\")\n            .addClass(LINK)\n            .children(IMG)\n            .addClass(IMAGE);\n\n        tabs.filter(\"li[disabled]\")\n            .addClass(DISABLEDSTATE)\n            .attr(\"aria-disabled\", \"true\")\n            .prop(\"disabled\", false);\n\n        tabs.filter(\":not([class*=k-state])\")\n            .children(\"a\")\n            .filter(\":focus\")\n            .parent()\n            .addClass(ACTIVESTATE + \" \" + TABONTOP);\n\n        tabs.attr(\"role\", \"tab\");\n        tabs.filter(\".\" + ACTIVESTATE)\n            .attr(\"aria-selected\", true);\n\n\n        tabs.each(function() {\n            var item = $(this);\n\n            if (!item.children(\".\" + LINK).length) {\n                item\n                    .contents() // exclude groups, real links, templates and empty text nodes\n                    .filter(function() { return (!this.nodeName.match(excludedNodesRegExp) && !(this.nodeType == 3 && !trim(this.nodeValue))); })\n                    .wrapAll(\"<span UNSELECTABLE='on' class='\" + LINK + \"'/>\");\n            }\n        });\n\n    }\n\n    function updateFirstLast(tabGroup) {\n        var tabs = tabGroup.children(\".k-item\");\n\n        tabs.filter(\".k-first:not(:first-child)\").removeClass(FIRST);\n        tabs.filter(\".k-last:not(:last-child)\").removeClass(LAST);\n        tabs.filter(\":first-child\").addClass(FIRST);\n        tabs.filter(\":last-child\").addClass(LAST);\n    }\n\n    function scrollButtonHtml(buttonClass, iconClass) {\n        return \"<span class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-tabstrip-\" + buttonClass + \"' unselectable='on'><span class='k-button-icon k-icon \" + iconClass + \"'></span></span>\";\n    }\n\n    var TabStrip = Widget.extend({\n        init: function(element, options) {\n            var that = this, value;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._animations(that.options);\n\n            options = that.options;\n\n            that._contentUrls = options.contentUrls || [];\n\n            that._wrapper();\n\n            that._isRtl = kendo.support.isRtl(that.wrapper);\n\n            that._tabindex();\n            that._updateClasses();\n            that._dataSource();\n\n            that.tabGroup.attr(\"role\", \"none\");\n            that.wrapper.attr(\"role\", \"tablist\");\n\n            if (options.dataSource) {\n                that.dataSource.fetch();\n            }\n\n            that._tabPosition();\n            that._scrollable();\n            that._processContentUrls();\n            that._attachEvents();\n\n            if (that.options.value) {\n                value = that.options.value;\n            }\n\n            that._initialActivate();\n            that.value(value);\n            kendo.notify(that);\n        },\n\n        events: [\n            SELECT,\n            ACTIVATE,\n            SHOW,\n            ERROR,\n            CONTENTLOAD,\n            \"change\",\n            \"dataBinding\",\n            \"dataBound\"\n        ],\n\n        options: {\n            name: \"TabStrip\",\n            dataEncodedField: \"\",\n            dataTextField: \"\",\n            dataContentField: \"\",\n            dataImageUrlField: \"\",\n            dataUrlField: \"\",\n            dataSpriteCssClass: \"\",\n            dataContentUrlField: \"\",\n            tabPosition: \"top\",\n            animation: {\n                open: {\n                    effects: \"expand:vertical fadeIn\",\n                    duration: 200\n                },\n                close: { // if close animation effects are defined, they will be used instead of open.reverse\n                    duration: 200\n                }\n            },\n            collapsible: false,\n            navigatable: true,\n            contentUrls: false,\n            scrollable: {\n                distance: DEFAULTDISTANCE\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n\n            that.options.dataSource = dataSource;\n            that._dataSource();\n            that.dataSource.fetch();\n        },\n\n        setOptions: function(options) {\n            var that = this,\n                animation = that.options.animation;\n\n            that._animations(options);\n\n            if (options.contentUrls) {\n                that._contentUrls = options.contentUrls;\n            }\n\n            options.animation = extend(true, animation, options.animation);\n\n            if (options.navigatable) {\n                that.wrapper.on(\"keydown\" + NS, that._keyDownProxy);\n            } else {\n                that.wrapper.off(\"keydown\" + NS, that._keyDownProxy);\n            }\n\n            Widget.fn.setOptions.call(that, options);\n        },\n\n        activateTab: function(item) {\n            if (this.tabGroup.children(\"[data-animating]\").length) { return; }\n\n            item = this.tabGroup.find(item);\n\n            var that = this,\n                animationSettings = that.options.animation,\n                animation = animationSettings.open,\n                close = extend({}, animationSettings.close),\n                hasCloseAnimation = close && \"effects\" in close,\n                neighbours = item.parent().children(),\n                oldTab = neighbours.filter(\".\" + ACTIVESTATE),\n                itemIndex = neighbours.index(item),\n                isAnimationEnabled = animation && \"duration\" in animation && \"effects\" in animation;\n\n            close = extend( hasCloseAnimation ? close : extend({ reverse: true }, animation), { hide: true });\n            // deactivate previously active tab\n            if (kendo.size(animation.effects)) {\n                oldTab.kendoRemoveClass(ACTIVESTATE, { duration: close.duration });\n                item.kendoRemoveClass(HOVERSTATE, { duration: close.duration });\n            } else {\n                oldTab.removeClass(ACTIVESTATE);\n                item.removeClass(HOVERSTATE);\n            }\n\n            // handle content elements\n            var contentAnimators = that.contentAnimators;\n\n            if (that.inRequest) {\n                that.xhr.abort();\n                that.inRequest = false;\n            }\n\n            if (contentAnimators.length === 0) {\n                that.tabGroup.find(\".\" + TABONTOP).removeClass(TABONTOP);\n                item.addClass(TABONTOP) // change these directly to bring the tab on top.\n                    .css(\"z-index\");\n\n                item.addClass(ACTIVESTATE);\n                that._current(item);\n\n                that.trigger(\"change\");\n\n                if (that._scrollableModeActive) {\n                    that._scrollTabsToItem(item);\n                }\n\n                return false;\n            }\n\n            var visibleContents = contentAnimators.filter(\".\" + ACTIVESTATE),\n                contentHolder = that.contentHolder(itemIndex),\n                contentElement = contentHolder.closest(\".k-content\");\n\n            that.tabsHeight = outerHeight(that.tabGroup) +\n                              parseInt(that.wrapper.css(\"border-top-width\"), 10) +\n                              parseInt(that.wrapper.css(\"border-bottom-width\"), 10);\n\n            if (contentHolder.length === 0) {\n                visibleContents\n                    .removeClass( ACTIVESTATE )\n                    .attr(\"aria-hidden\", true)\n                    .kendoStop(true, true)\n                    .kendoAnimate( close );\n                return false;\n            }\n\n            item.attr(\"data-animating\", true);\n\n            var isAjaxContent = (item.children(\".\" + LINK).data(CONTENTURL) || that._contentUrls[itemIndex] || false) && contentHolder.is(EMPTY),\n                showContentElement = function() {\n                    oldTab.removeAttr(\"aria-selected\");\n                    item.attr(\"aria-selected\", true);\n\n                    that._current(item);\n\n                    contentElement\n                        .addClass(ACTIVESTATE)\n                        .removeAttr(\"aria-hidden\")\n                        .kendoStop(true, true)\n                        .attr(\"aria-expanded\", true)\n                        .kendoAnimate( extend({ init: function() {\n                            that.trigger(SHOW, { item: item[0], contentElement: contentHolder[0] });\n                            kendo.resize(contentHolder);\n                        } }, animation, {\n                            complete: function() {\n                                item.removeAttr(\"data-animating\");\n\n                                that.trigger(ACTIVATE, { item: item[0], contentElement: contentHolder[0] });\n                                kendo.resize(contentHolder);\n\n                                // Force IE and Edge rendering to fix visual glitches telerik/kendo-ui-core#2777.\n                                if (isAnimationEnabled && (kendo.support.browser.msie || kendo.support.browser.edge)) {\n                                    contentHolder.finish().animate({\n                                        opacity: 0.9\n                                    },\"fast\", \"linear\", function() {\n                                        contentHolder.finish().animate({\n                                            opacity: 1\n                                        },\"fast\", \"linear\");\n                                    });\n                                }\n                            }\n                        } ) );\n                },\n                showContent = function() {\n                    if (!isAjaxContent) {\n                        showContentElement();\n                        that.trigger(\"change\");\n                    } else {\n                        item.removeAttr(\"data-animating\");\n                        that.ajaxRequest(item, contentHolder, function() {\n                            item.attr(\"data-animating\", true);\n                            showContentElement();\n                            that.trigger(\"change\");\n                        });\n                    }\n\n                    if (that._scrollableModeActive) {\n                        that._scrollTabsToItem(item);\n                    }\n\n                };\n\n            // See https://github.com/telerik/kendo-ui-core/issues/6660\n            var oldMinHeight = that.element.css('min-height');\n            that.element.css('min-height', that.element.outerHeight());\n\n            visibleContents\n                    .removeClass(ACTIVESTATE);\n\n            that.tabGroup.find(\".\" + TABONTOP).removeClass(TABONTOP);\n                    item.addClass(TABONTOP) // change these directly to bring the tab on top.\n                        .css(\"z-index\");\n\n            if (kendo.size(animation.effects)) {\n                item.kendoAddClass(ACTIVESTATE, { duration: animation.duration });\n            } else {\n                item.addClass(ACTIVESTATE);\n            }\n\n            visibleContents.attr(\"aria-hidden\", true);\n            visibleContents.attr(\"aria-expanded\", false);\n\n            if (visibleContents.length) {\n                visibleContents\n                    .kendoStop(true, true)\n                    .kendoAnimate(extend( {\n                        complete: showContent\n                   }, close ));\n            } else {\n                showContent();\n            }\n\n            that.element.css('min-height', oldMinHeight);\n\n            return true;\n        },\n\n        ajaxRequest: function(element, content, complete, url) {\n            element = this.tabGroup.find(element);\n\n            var that = this,\n                xhr = $.ajaxSettings.xhr,\n                link = element.find(\".\" + LINK),\n                data = {},\n                halfWidth = element.width() / 2,\n                fakeProgress = false,\n                statusIcon = element.find(\".k-loading\").removeClass(\"k-complete\");\n\n            if (!statusIcon[0]) {\n                statusIcon = $(\"<span class='k-loading'/>\").prependTo(element);\n            }\n\n            var endState = halfWidth * 2 - statusIcon.width();\n\n            var oldProgressAnimation = function() {\n                statusIcon.animate({ marginLeft: (parseInt(statusIcon.css(\"marginLeft\"), 10) || 0) < halfWidth ? endState : 0 }, 500, oldProgressAnimation);\n            };\n\n            if (kendo.support.browser.msie && kendo.support.browser.version < 10) {\n                setTimeout(oldProgressAnimation, 40);\n            }\n\n             url = url || link.data(CONTENTURL) || that._contentUrls[element.index()] || link.attr(HREF);\n            that.inRequest = true;\n\n            var ajaxOptions = {\n                type: \"GET\",\n                cache: false,\n                url: url,\n                dataType: \"html\",\n                data: data,\n                xhr: function() {\n                    var current = this,\n                        request = xhr(),\n                        event = current.progressUpload ? \"progressUpload\" : current.progress ? \"progress\" : false;\n\n                    if (request) {\n                        $.each([ request, request.upload ], function() {\n                            if (this.addEventListener) {\n                                this.addEventListener(\"progress\", function(evt) {\n                                    if (event) {\n                                        current[event](evt);\n                                    }\n                                }, false);\n                            }\n                        });\n                    }\n\n                    current.noProgress = !(window.XMLHttpRequest && ('upload' in new XMLHttpRequest()));\n                    return request;\n                },\n\n                progress: function(evt) {\n                    if (evt.lengthComputable) {\n                        var percent = parseInt((evt.loaded / evt.total * 100), 10) + \"%\";\n                        statusIcon\n                            .stop(true)\n                            .addClass(\"k-progress\")\n                            .css({\n                                \"width\": percent,\n                                \"marginLeft\": 0\n                            });\n                    }\n                },\n\n                error: function(xhr, status) {\n                    if (that.trigger(\"error\", { xhr: xhr, status: status })) {\n                        this.complete();\n                    }\n                },\n\n                stopProgress: function() {\n                    clearInterval(fakeProgress);\n                    statusIcon\n                        .stop(true)\n                        .addClass(\"k-progress\")\n                        [0].style.cssText = \"\";\n                },\n\n                complete: function(xhr) {\n                    that.inRequest = false;\n                    if (this.noProgress) {\n                        setTimeout(this.stopProgress, 500);\n                    } else {\n                        this.stopProgress();\n                    }\n\n                    if (xhr.statusText == \"abort\") {\n                        statusIcon.remove();\n                    }\n                },\n\n                success: function(data) {\n                    statusIcon.addClass(\"k-complete\");\n                    try {\n                        var current = this,\n                            loaded = 10;\n\n                        if (current.noProgress) {\n                            statusIcon.width(loaded + \"%\");\n                            fakeProgress = setInterval(function() {\n                                current.progress({ lengthComputable: true, loaded: Math.min(loaded, 100), total: 100 });\n                                loaded += 10;\n                            }, 40);\n                        }\n\n                        that.angular(\"cleanup\", function() { return { elements: content.get() }; });\n                        kendo.destroy(content);\n                        content.html(data);\n                    } catch (e) {\n                        var console = window.console;\n\n                        if (console && console.error) {\n                            console.error(e.name + \": \" + e.message + \" in \" + url);\n                        }\n                        this.error(this.xhr, \"error\");\n                    }\n\n                    if (complete) {\n                        complete.call(that, content);\n                    }\n\n                    that.angular(\"compile\", function() { return { elements: content.get() }; });\n\n                    that.trigger(CONTENTLOAD, { item: element[0], contentElement: content[0] });\n                }\n            };\n\n            if (typeof url === \"object\") {\n                ajaxOptions = $.extend(true, {}, ajaxOptions, url);\n\n                if (isFunction(ajaxOptions.url)) {\n                    ajaxOptions.url = ajaxOptions.url();\n                }\n            }\n\n            that.xhr = $.ajax(ajaxOptions);\n        },\n\n        append: function(tab) {\n            var that = this,\n                inserted = that._create(tab);\n\n            each(inserted.tabs, function(idx) {\n                var contents = inserted.contents[idx];\n                that.tabGroup.append(this);\n                if (that.options.tabPosition == \"bottom\") {\n                    that.tabWrapper.before(contents);\n                } else {\n                    that.wrapper.append(contents);\n                }\n                that.angular(\"compile\", function() { return { elements: [ contents ] }; });\n            });\n\n            updateFirstLast(that.tabGroup);\n            that._updateContentElements();\n            that.resize(true);\n\n            return that;\n        },\n\n        contentElement: function(itemIndex) {\n            if (isNaN(itemIndex - 0)) {\n                return undefined;\n            }\n\n            var contentElements = this.contentElements && this.contentElements[0] && !kendo.kineticScrollNeeded ? this.contentElements : this.contentAnimators;\n            var id = $(this.tabGroup.children()[itemIndex]).attr(\"aria-controls\");\n\n            if (contentElements) {\n                for (var i = 0, len = contentElements.length; i < len; i++) {\n                    if (contentElements.eq(i).closest(\".k-content\")[0].id == id) {\n                        return contentElements[i];\n                    }\n                }\n            }\n\n            return undefined;\n        },\n\n        contentHolder: function(itemIndex) {\n            var contentElement = $(this.contentElement(itemIndex)),\n                scrollContainer = contentElement.children(\".km-scroll-container\");\n\n            return kendo.support.touch && scrollContainer[0] ? scrollContainer : contentElement;\n        },\n\n        deactivateTab: function(item) {\n            var that = this,\n                animationSettings = that.options.animation,\n                animation = animationSettings.open,\n                close = extend({}, animationSettings.close),\n                hasCloseAnimation = close && \"effects\" in close;\n            item = that.tabGroup.find(item);\n\n            close = extend( hasCloseAnimation ? close : extend({ reverse: true }, animation), { hide: true });\n\n            if (kendo.size(animation.effects)) {\n                item.kendoRemoveClass(ACTIVESTATE, { duration: animation.duration });\n            } else {\n                item.removeClass(ACTIVESTATE);\n            }\n\n            item.removeAttr(\"aria-selected\");\n\n            that.contentAnimators\n                    .filter(\".\" + ACTIVESTATE)\n                    .kendoStop(true, true)\n                    .kendoAnimate( close )\n                    .removeClass(ACTIVESTATE)\n                    .attr(\"aria-hidden\", true);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            if (that._refreshHandler) {\n                that.dataSource.unbind(\"change\", that._refreshHandler);\n            }\n\n            that.wrapper.off(NS);\n            that.tabGroup.off(NS);\n\n            if (that._scrollableModeActive) {\n                that._scrollPrevButton.off().remove();\n                that._scrollNextButton.off().remove();\n            }\n\n            kendo.destroy(that.wrapper);\n        },\n\n        disable: function(element) {\n            this._toggleDisabled(element, false);\n\n            return this;\n        },\n\n        enable: function(element, state) {\n            this._toggleDisabled(element, state !== false);\n\n            return this;\n        },\n\n        insertAfter: function(tab, referenceTab) {\n            if ($(tab).is($(referenceTab))) {\n                referenceTab = this.tabGroup.find(referenceTab).prev();\n            } else {\n                referenceTab = this.tabGroup.find(referenceTab);\n            }\n\n            var that = this,\n                inserted = that._create(tab),\n                referenceContent = that.element.find(\"[id='\" + referenceTab.attr(\"aria-controls\") + \"']\");\n\n            each(inserted.tabs, function(idx) {\n                var contents = inserted.contents[idx];\n                var fromIndex = inserted.newTabsCreated ? that._contentUrls.length - (inserted.tabs.length - idx) : $(contents).index() - 1;\n\n                referenceTab.after(this);\n                referenceContent.after(contents);\n\n                that._moveUrlItem(fromIndex, $(this).index());\n                that.angular(\"compile\", function() { return { elements: [ contents ] }; });\n            });\n\n            updateFirstLast(that.tabGroup);\n            that._updateContentElements(inserted.newTabsCreated);\n            that.resize(true);\n\n            return that;\n        },\n\n        insertBefore: function(tab, referenceTab) {\n            if ($(tab).is($(referenceTab))) {\n                referenceTab = this.tabGroup.find(referenceTab).next();\n            } else {\n                referenceTab = this.tabGroup.find(referenceTab);\n            }\n\n            var that = this,\n                inserted = that._create(tab),\n                referenceContent = that.element.find(\"[id='\" + referenceTab.attr(\"aria-controls\") + \"']\");\n\n            each(inserted.tabs, function(idx) {\n                var contents = inserted.contents[idx];\n                var fromIndex = inserted.newTabsCreated ? that._contentUrls.length - (inserted.tabs.length - idx) : $(contents).index() - 1;\n\n                referenceTab.before(this);\n                referenceContent.before(contents);\n\n                that._moveUrlItem(fromIndex, $(this).index());\n                that.angular(\"compile\", function() { return { elements: [ contents ] }; });\n            });\n\n            updateFirstLast(that.tabGroup);\n            that._updateContentElements(inserted.newTabsCreated);\n            that.resize(true);\n\n            return that;\n        },\n\n        items: function() {\n            return this.tabGroup[0].children;\n        },\n\n        refresh: function(e) {\n            var that = this,\n                options = that.options,\n                encoded = kendo.getter(options.dataEncodedField),\n                text = kendo.getter(options.dataTextField),\n                content = kendo.getter(options.dataContentField),\n                contentUrl = kendo.getter(options.dataContentUrlField),\n                image = kendo.getter(options.dataImageUrlField),\n                url = kendo.getter(options.dataUrlField),\n                sprite = kendo.getter(options.dataSpriteCssClass),\n                idx,\n                tabs = [],\n                tab,\n                action,\n                view = that.dataSource.view(),\n                length;\n\n\n            e = e || {};\n            action = e.action;\n\n            if (action) {\n               view = e.items;\n            }\n\n            for (idx = 0, length = view.length; idx < length; idx ++) {\n                tab = {\n                    text: text(view[idx])\n                };\n\n                if (options.dataEncodedField) {\n                    tab.encoded = encoded(view[idx]);\n                }\n\n                if (options.dataContentField) {\n                    tab.content = content(view[idx]);\n                }\n\n                if (options.dataContentUrlField) {\n                    tab.contentUrl = contentUrl(view[idx]);\n                }\n\n                if (options.dataUrlField) {\n                    tab.url = url(view[idx]);\n                }\n\n                if (options.dataImageUrlField) {\n                    tab.imageUrl = image(view[idx]);\n                }\n\n                if (options.dataSpriteCssClass) {\n                    tab.spriteCssClass = sprite(view[idx]);\n                }\n\n                tabs[idx] = tab;\n            }\n\n            if (e.action == \"add\") {\n                if (e.index < that.tabGroup.children().length) {\n                    that.insertBefore(tabs, that.tabGroup.children().eq(e.index));\n                } else {\n                    that.append(tabs);\n                }\n            } else if (e.action == \"remove\") {\n                for (idx = 0; idx < view.length; idx++) {\n                   that.remove(e.index);\n                }\n            } else if (e.action == \"itemchange\") {\n                idx = that.dataSource.view().indexOf(view[0]);\n                if (e.field === options.dataTextField) {\n                    that.tabGroup.children().eq(idx).find(\".k-link\").text(view[0].get(e.field));\n                }\n\n                if (e.field === options.dataUrlField) {\n                    that._contentUrls[idx] = view[0].get(e.field);\n                }\n            } else {\n                that.trigger(\"dataBinding\");\n                that.remove(\"li\");\n                that._contentUrls = [];\n                that.append(tabs);\n                that.trigger(\"dataBound\");\n            }\n        },\n\n        reload: function(element) {\n            element = this.tabGroup.find(element);\n            var that = this;\n            var contentUrls = that._contentUrls;\n\n            element.each(function() {\n                var item = $(this),\n                    contentUrl = item.find(\".\" + LINK).data(CONTENTURL) || contentUrls[item.index()],\n                    content = that.contentHolder(item.index());\n\n                if (contentUrl) {\n                    that.ajaxRequest(item, content, null, contentUrl);\n                }\n            });\n\n            return that;\n        },\n\n        remove: function(elements) {\n            var that = this;\n            var type = typeof elements;\n            var contents;\n\n            if (type === \"string\") {\n                elements = that.tabGroup.find(elements);\n            } else if (type === \"number\") {\n                elements = that.tabGroup.children().eq(elements);\n            }\n\n            contents = elements.map(function() {\n                var idx = $(this).index();\n                var content = that.contentElement(idx);\n\n                kendo.destroy(content);\n                that._removeUrlItem(idx);\n\n                return content;\n            });\n\n            elements.remove();\n            contents.empty();\n            contents.remove();\n\n            that._updateContentElements();\n            that.resize(true);\n\n            return that;\n        },\n\n        select: function(element) {\n            var that = this;\n\n            if (arguments.length === 0) {\n                return that.tabGroup.children(\"li.\" + ACTIVESTATE);\n            }\n\n            if (!isNaN(element)) {\n                element = that.tabGroup.children().get(element);\n            }\n\n            element = that.tabGroup.find(element);\n            $(element).each(function(index, item) {\n                item = $(item);\n                if (!item.hasClass(ACTIVESTATE) && !that.trigger(SELECT, { item: item[0], contentElement: that.contentHolder(item.index())[0] })) {\n                    that.activateTab(item);\n                }\n            });\n\n            return that;\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value !== undefined) {\n                if (value != that.value()) {\n                   that.tabGroup.children().each(function() {\n                        if (kendo.trim($(this).text()) == value) {\n                            that.select(this);\n                        }\n                   });\n                }\n            } else {\n                return that.select().text();\n            }\n        },\n\n        _active: function() {\n            var item = this.tabGroup.children().filter(\".\" + ACTIVESTATE);\n\n            item = item[0] ? item : this._endItem(\"first\");\n            if (item[0]) {\n                this._current(item);\n            }\n        },\n\n        _animations: function(options) {\n            if (options && (\"animation\" in options) && !options.animation) {\n                options.animation = { open: { effects: {} }, close: { effects: {} } }; // No animation\n            }\n        },\n\n        _appendUrlItem: function(url) {\n            this._contentUrls.push(url);\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                options = that.options;\n\n            that.wrapper\n                .on(MOUSEENTER + NS + \" \" + MOUSELEAVE + NS, HOVERABLEITEMS, that._toggleHover)\n                .on(\"focus\" + NS, $.proxy(that._active, that))\n                .on(\"blur\" + NS, function() { that._current(null); });\n\n            that._keyDownProxy = $.proxy(that._keydown, that);\n\n            if (options.navigatable) {\n                that.wrapper.on(\"keydown\" + NS, that._keyDownProxy);\n            }\n\n            that.tabGroup\n                .on(CLICK + NS, \".k-state-disabled .k-link\", false)\n                .on(CLICK + NS, \" > \" + NAVIGATABLEITEMS, $.proxy(that._itemClick, that));\n        },\n\n        _click: function(item) {\n            var that = this,\n                link = item.find(\".\" + LINK),\n                href = link.attr(HREF),\n                collapse = that.options.collapsible,\n                index = item.index(),\n                contentHolder = that.contentHolder(index),\n                prevent, isAnchor,\n                neighbours = item.parent().children(),\n                oldFocusedTab = neighbours.filter(\".\" + FOCUSEDSTATE);\n\n            if (item.closest(\".k-widget\")[0] != that.wrapper[0]) {\n                return;\n            }\n\n            if (item.is(\".\" + DISABLEDSTATE + (!collapse ? \",.\" + ACTIVESTATE : \"\"))) {\n                oldFocusedTab.removeClass(FOCUSEDSTATE);\n                that._focused = item;\n\n                item.addClass(FOCUSEDSTATE);\n                that._current(item);\n\n                if (that._scrollableModeActive) {\n                    that._scrollTabsToItem(item);\n                }\n                return true;\n            }\n\n            isAnchor = link.data(CONTENTURL) || that._contentUrls[index] || (href && (href.charAt(href.length - 1) == \"#\" || href.indexOf(\"#\" + that.element[0].id + \"-\") != -1));\n            prevent = !href || isAnchor;\n\n            if (that.tabGroup.children(\"[data-animating]\").length) {\n                return prevent;\n            }\n\n            if (that.trigger(SELECT, { item: item[0], contentElement: contentHolder[0] })) {\n                return true;\n            }\n\n            if (prevent === false) {\n                return;\n            }\n\n            if (collapse && item.is(\".\" + ACTIVESTATE)) {\n                that.deactivateTab(item);\n                return true;\n            }\n\n            if (that.activateTab(item)) {\n                prevent = true;\n            }\n\n            return prevent;\n        },\n\n        _create: function(tab) {\n            var that = this,\n            tabs,\n            contents,\n            content,\n            newTabsCreated = false;\n\n            tab = tab instanceof kendo.data.ObservableArray ? tab.toJSON() : tab;\n\n            if ($.isPlainObject(tab) || Array.isArray(tab)) {\n                tab = Array.isArray(tab) ? tab : [tab];\n                newTabsCreated = true;\n\n                tabs = map(tab, function(value, idx) {\n                            that._appendUrlItem(tab[idx].contentUrl || null);\n\n                            return $(TabStrip.renderItem({\n                                group: that.tabGroup,\n                                item: extend(value, { index: idx })\n                            }));\n                        });\n\n                contents = map( tab, function(value, idx) {\n                            if (typeof value.content == \"string\" || value.contentUrl) {\n                                return $(TabStrip.renderContent({\n                                    item: extend(value, { index: idx })\n                                }));\n                            }\n                        });\n            } else {\n                if (typeof tab == \"string\" && tab[0] != \"<\") {\n                    tabs = that.element.find(tab);\n                } else {\n                    tabs = $(tab);\n                }\n                contents = $();\n                tabs.each(function() {\n                    if (/k-tabstrip-items/.test(this.parentNode.className)) {\n                        var element = that.element.find(\"[id='\" + this.getAttribute(\"aria-controls\") + \"']\");\n                        content = element;\n                    } else {\n                        content = $(\"<div class='\" + CONTENT + \"'/>\");\n                    }\n\n                    contents = contents.add(content);\n                });\n\n                updateTabClasses(tabs);\n            }\n\n            return { tabs: tabs, contents: contents, newTabsCreated: newTabsCreated };\n        },\n\n        _current: function(candidate) {\n            var that = this,\n                focused = that._focused;\n\n            if (candidate === undefined) {\n                return focused;\n            }\n\n            if (focused) {\n                focused.removeClass(FOCUSEDSTATE);\n            }\n\n            if (candidate) {\n                if (!candidate.hasClass(ACTIVESTATE)) {\n                    candidate.addClass(FOCUSEDSTATE);\n                }\n\n                if (candidate[0].id) {\n                    that.element.attr(\"aria-activedescendant\", candidate[0].id);\n                }\n            }\n\n            that._focused = candidate;\n        },\n\n        _dataSource: function() {\n            var that = this;\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(\"change\", that._refreshHandler);\n            } else {\n                that._refreshHandler = $.proxy(that.refresh, that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(that.options.dataSource)\n                                .bind(\"change\", that._refreshHandler);\n        },\n\n        _elementId: function(element, idx, tab) {\n            var elementId = element.attr(\"id\"),\n                wrapperId = this.element.attr(\"id\"),\n                guid = kendo.guid();\n\n            if (!elementId || elementId.indexOf(wrapperId + \"-\") > -1) {\n                var tabStripID = (wrapperId || guid) + \"-\";\n\n                if (tab) {\n                    tabStripID += \"tab-\";\n                }\n\n                return tabStripID + (idx + 1);\n            }\n\n            return elementId;\n        },\n\n        _endItem: function(action) {\n            return this.tabGroup.children(NAVIGATABLEITEMS)[action]();\n        },\n\n        _getItem: function(action) {\n            return this.tabGroup.children(KEYBOARDNAVIGATABLEITEMS)[action]();\n        },\n\n        _initialActivate: function() {\n            var that = this,\n                selectedItems = that.tabGroup.children(\"li.\" + ACTIVESTATE),\n                content = that.contentHolder(selectedItems.index());\n\n            if (selectedItems[0] && content.length > 0 && content[0].childNodes.length === 0) {\n                that.activateTab(selectedItems.eq(0));\n            }\n        },\n\n        _item: function(item, action) {\n            var endItem;\n            if (action === PREV) {\n                endItem = \"last\";\n            } else {\n                endItem = \"first\";\n            }\n\n            if (!item) {\n                return this._endItem(endItem);\n            }\n\n            item = item[action]();\n\n            if (!item[0]) {\n                item = this.tabGroup.children(KEYBOARDNAVIGATABLEITEMS)[endItem]();\n            }\n\n            if (item.hasClass(DISABLEDSTATE)) {\n                item.addClass(FOCUSEDSTATE);\n            }\n            if (item.hasClass(DISABLEDSTATE) || item.hasClass(ACTIVESTATE)) {\n                this._focused = item;\n            }\n\n            return item;\n        },\n\n        _itemClick: function(e) {\n            var that = this,\n                wr = that.wrapper[0];\n\n            if (wr !== document.activeElement) {\n                var msie = kendo.support.browser.msie;\n                if (msie) {\n                    try {\n                        // does not scroll to the active element\n                        wr.setActive();\n                    } catch (j) {\n                        wr.focus();\n                    }\n                } else {\n                    wr.focus();\n                }\n            }\n\n            if (that._click($(e.currentTarget))) {\n                e.preventDefault();\n            }\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                current = that._current(),\n                rtl = that._isRtl,\n                isHorizontal = /top|bottom/.test(that.options.tabPosition),\n                action;\n\n            if (e.target != e.currentTarget || !current) {\n                return;\n            }\n\n            if (key === keys.DOWN && !isHorizontal) {\n                action = NEXT;\n            } else if (key === keys.UP && !isHorizontal) {\n                action = PREV;\n            } else if (key === keys.RIGHT && isHorizontal) {\n                action = rtl ? PREV : NEXT;\n            } else if (key === keys.LEFT && isHorizontal) {\n                action = rtl ? NEXT : PREV;\n            } else if (key == keys.ENTER || key == keys.SPACEBAR) {\n                that._click(current);\n                e.preventDefault();\n            } else if (key == keys.HOME) {\n                that._click(that._getItem(\"first\"));\n                e.preventDefault();\n                return;\n            } else if (key == keys.END) {\n                that._click(that._getItem(\"last\"));\n                e.preventDefault();\n                return;\n            }\n\n            if (action) {\n                that._click(that._item(current, action));\n                e.preventDefault();\n            }\n        },\n\n        _moveUrlItem: function(from, to) {\n            this._contentUrls.splice(to, 0, this._contentUrls.splice(from, 1)[0]);\n        },\n\n        _processContentUrls: function() {\n            var that = this;\n\n            if (that._contentUrls.length) {\n                that.tabGroup.children(\".k-item\")\n                    .each(function(index, item) {\n                        var url = that._contentUrls[index];\n\n                        if (typeof url === 'string') {\n                            $(item).find(\">.\" + LINK).data(CONTENTURL, url);\n                        }\n                    });\n            } else {\n                that._contentUrls.length = that.tabGroup.find(\"li.k-item\").length;\n            }\n        },\n\n        _removeUrlItem: function(index) {\n            this._contentUrls.splice(index, 1);\n        },\n\n        _resize: function() {\n            this._scrollable();\n        },\n\n        _scrollable: function() {\n            var that = this,\n                options = that.options,\n                wrapperOffsetWidth,\n                tabGroupScrollWidth,\n                scrollPrevButton,\n                scrollNextButton;\n\n            if (that._scrollableAllowed()) {\n\n                that.wrapper.addClass(\"k-tabstrip-scrollable\");\n\n                wrapperOffsetWidth = that.wrapper[0].offsetWidth;\n                tabGroupScrollWidth = that.tabGroup[0].scrollWidth;\n\n                if (tabGroupScrollWidth > wrapperOffsetWidth && !that._scrollableModeActive) {\n                    that._nowScrollingTabs = false;\n                    that._isRtl = kendo.support.isRtl(that.element);\n                    var mouseDown = kendo.support.touch ? \"touchstart\" : \"mousedown\";\n                    var mouseUp = kendo.support.touch ? \"touchend\" : \"mouseup\";\n                    var browser = kendo.support.browser;\n                    var isRtlScrollDirection = that._isRtl && !browser.msie && !browser.edge;\n\n                    that.tabWrapper.prepend(scrollButtonHtml(\"prev\", \"k-i-arrow-60-left\"));\n                    that.tabWrapper.append(scrollButtonHtml(\"next\", \"k-i-arrow-60-right\"));\n\n                    scrollPrevButton = that._scrollPrevButton = that.tabWrapper.children(\".k-tabstrip-prev\");\n                    scrollNextButton = that._scrollNextButton = that.tabWrapper.children(\".k-tabstrip-next\");\n\n                    scrollPrevButton.on(mouseDown + NS, function() {\n                        that._nowScrollingTabs = true;\n                        that._scrollTabsByDelta(options.scrollable.distance * (isRtlScrollDirection ? 1 : -1));\n                    });\n\n                    scrollNextButton.on(mouseDown + NS, function() {\n                        that._nowScrollingTabs = true;\n                        that._scrollTabsByDelta(options.scrollable.distance * (isRtlScrollDirection ? -1 : 1));\n                    });\n\n                    scrollPrevButton.add(scrollNextButton).on(mouseUp + NS, function() {\n                        that._nowScrollingTabs = false;\n                    });\n\n                    that._scrollableModeActive = true;\n\n                    that._toggleScrollButtons();\n                } else if (that._scrollableModeActive && tabGroupScrollWidth <= wrapperOffsetWidth) {\n                    that._scrollableModeActive = false;\n\n                    that.wrapper.removeClass(\"k-tabstrip-scrollable\");\n\n                    that._scrollPrevButton.off().remove();\n                    that._scrollNextButton.off().remove();\n                } else if (!that._scrollableModeActive) {\n                    that.wrapper.removeClass(\"k-tabstrip-scrollable\");\n                } else {\n                    that._toggleScrollButtons();\n                }\n            }\n        },\n\n        _scrollableAllowed: function() {\n            var options = this.options;\n\n            if (options.scrollable && !options.scrollable.distance) {\n                options.scrollable = { distance: DEFAULTDISTANCE };\n            }\n\n            return options.scrollable && !isNaN(options.scrollable.distance) && (options.tabPosition == \"top\" || options.tabPosition == \"bottom\");\n        },\n\n        _scrollTabsToItem: function(item) {\n            var that = this,\n                tabGroup = that.tabGroup,\n                currentScrollOffset = kendo.scrollLeft(tabGroup),\n                itemWidth = outerWidth(item),\n                itemOffset = that._isRtl ? item.position().left : item.position().left - tabGroup.children().first().position().left,\n                tabGroupWidth = tabGroup[0].offsetWidth,\n                browser = kendo.support.browser,\n                itemPosition;\n\n            if (that._isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                currentScrollOffset = currentScrollOffset * -1;\n            }\n\n            if (that._isRtl) {\n                if (itemOffset < 0) {\n                    itemPosition = currentScrollOffset + itemOffset - (tabGroupWidth - currentScrollOffset);\n                } else if (itemOffset + itemWidth > tabGroupWidth) {\n                    itemPosition = currentScrollOffset + itemOffset - itemWidth;\n                }\n            } else {\n                if (currentScrollOffset + tabGroupWidth < itemOffset + itemWidth) {\n                    itemPosition = itemOffset + itemWidth - tabGroupWidth;\n                } else if (currentScrollOffset > itemOffset) {\n                    itemPosition = itemOffset;\n                }\n            }\n\n            tabGroup.finish().animate({ \"scrollLeft\": itemPosition }, \"fast\", \"linear\", function() {\n                that._toggleScrollButtons();\n            });\n        },\n\n        _scrollTabsByDelta: function(delta) {\n            var that = this;\n            var tabGroup = that.tabGroup;\n            var scrLeft = kendo.scrollLeft(tabGroup);\n            var browser = kendo.support.browser;\n\n            if (that._isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrLeft = scrLeft * -1;\n            }\n\n            tabGroup.finish().animate({ \"scrollLeft\": scrLeft + delta }, \"fast\", \"linear\", function() {\n                if (that._nowScrollingTabs && !jQuery.fx.off) {\n                    that._scrollTabsByDelta(delta);\n                } else {\n                    that._toggleScrollButtons();\n                }\n            });\n        },\n\n        _tabPosition: function() {\n            var that = this,\n                tabPosition = that.options.tabPosition;\n\n            that.wrapper.addClass(\"k-floatwrap k-tabstrip-\" + tabPosition);\n\n            if (tabPosition == \"bottom\") {\n                that.tabWrapper.appendTo(that.wrapper);\n            }\n\n            if (tabPosition === \"left\" || tabPosition === \"right\") {\n                that.wrapper.attr(\"aria-orientation\", \"vertical\");\n            }\n\n            that.resize(true);\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVERSTATE, e.type == MOUSEENTER);\n        },\n\n        _toggleDisabled: function(element, enable) {\n            element = this.tabGroup.find(element);\n            element.each(function() {\n                $(this)\n                    .toggleClass(DISABLEDSTATE, !enable)\n                    .attr(\"aria-disabled\", !enable);\n            });\n        },\n\n        _toggleScrollButtons: function() {\n            var that = this,\n                ul = that.tabGroup,\n                scrollLeft = kendo.scrollLeft(ul);\n\n                that._scrollPrevButton.toggleClass('k-disabled', scrollLeft === 0);\n                that._scrollNextButton.toggleClass('k-disabled', scrollLeft === ul[0].scrollWidth - ul[0].offsetWidth);\n        },\n\n        _updateClasses: function() {\n            var that = this,\n                tabs, activeItem, activeTab;\n            var isHorizontal = /top|bottom/.test(that.options.tabPosition);\n\n            that.wrapper.addClass(\"k-widget k-tabstrip\");\n\n            if (!that.tabGroup) {\n                that.tabGroup = that.wrapper.children(\"ul\");\n                that.tabGroup.wrap('<div />');\n                that.tabWrapper = that.tabGroup.parent();\n            }\n\n            if (!that.tabGroup[0]) {\n                that.tabGroup = $(\"<ul />\").prependTo(that.wrapper);\n                that.tabGroup.wrap('<div />');\n                that.tabWrapper = that.tabGroup.parent();\n            }\n\n            that.tabWrapper.addClass('k-tabstrip-items-wrapper');\n            that.tabWrapper.addClass(isHorizontal ? 'k-hstack' : 'k-vstack');\n            that.tabGroup.addClass('k-tabstrip-items k-reset');\n\n            tabs = that.tabGroup.find(\"li\").addClass(\"k-tabstrip-item k-item\");\n\n            if (tabs.length) {\n                activeItem = tabs.filter(\".\" + ACTIVESTATE).index();\n                activeTab = activeItem >= 0 ? activeItem : undefined;\n\n                that.tabGroup // Remove empty text nodes\n                    .contents()\n                    .filter(function() { return (this.nodeType == 3 && !trim(this.nodeValue)); })\n                    .remove();\n            }\n\n            if (activeItem >= 0) {\n                tabs.eq(activeItem).addClass(TABONTOP);\n            }\n\n            that.contentElements = that.wrapper.children(\"div:not(.k-tabstrip-items-wrapper)\");\n\n            that.contentElements\n                .addClass(CONTENT)\n                .eq(activeTab)\n                .addClass(ACTIVESTATE)\n                .css({ display: \"block\" });\n\n            if (tabs.length) {\n                updateTabClasses(tabs);\n\n                updateFirstLast(that.tabGroup);\n                that._updateContentElements(true);\n            }\n        },\n\n        _updateContentElements: function(isInitialUpdate) {\n            var that = this,\n                contentUrls = that._contentUrls,\n                items = that.tabGroup.children(\".k-item\"),\n                contentElements = that.wrapper.children(\"div:not(.k-tabstrip-items-wrapper)\"),\n                _elementId = that._elementId.bind(that);\n\n            if (contentElements.length && (items.length > contentElements.length)) {\n                contentElements.each(function(idx) {\n                    // Generate an ID for each content element\n                    var contentId = _elementId($(this), idx),\n                        item = items.filter(\"[aria-controls=\" + (contentId || 0) + \"]\")[0],\n                        tabId;\n\n                    if (!item && isInitialUpdate) {\n                        // On initialization of the widget get the tab by its index\n                        item = items[idx];\n                    }\n\n                    if (item) {\n                        // set the tab aria-controls attribute to the content ID\n                        item.setAttribute(\"aria-controls\", contentId);\n                        tabId = item.id = _elementId($(item), idx, true);\n                        this.setAttribute(\"aria-labelledby\", tabId);\n                    }\n\n                    // set the get (possibly existing) ID on the content element\n                    this.setAttribute(\"id\", contentId);\n                });\n            } else {\n                items.each(function(idx) {\n                    var currentContent = contentElements.eq(idx),\n                        contentId = _elementId(currentContent, idx),\n                        tabId;\n\n                    // set the tab aria-controls attribute to the content ID\n                    this.setAttribute(\"aria-controls\", contentId);\n\n                    tabId = this.id = _elementId($(this), idx, true);\n\n                    if (!currentContent.length && contentUrls[idx]) {\n                        // Append content element in case contentUrl is used\n                        $(\"<div class='\" + CONTENT + \"'/>\").appendTo(that.wrapper).attr(\"id\", contentId);\n                    } else {\n                        // set the ID on the content element\n                        currentContent.attr(\"id\", contentId);\n\n                        if (!$(this).children(\".k-loading\")[0] && !contentUrls[idx]) {\n                            $(\"<span class='k-loading k-complete'/>\").prependTo(this);\n                        }\n                    }\n\n                    currentContent.attr(\"role\", \"tabpanel\");\n                    currentContent.attr(\"tabindex\", \"0\");\n                    currentContent.attr(\"aria-labelledby\", tabId);\n                    currentContent.filter(\":not(.\" + ACTIVESTATE + \")\").attr(\"aria-hidden\", true).attr(\"aria-expanded\", false);\n                    currentContent.filter(\".\" + ACTIVESTATE).attr(\"aria-expanded\", true);\n                });\n            }\n\n            that.contentElements = that.contentAnimators = that.wrapper.children(\"div:not(.k-tabstrip-items-wrapper)\"); // refresh the contents\n\n            that.tabsHeight = outerHeight(that.tabGroup) +\n                              parseInt(that.wrapper.css(\"border-top-width\"), 10) +\n                              parseInt(that.wrapper.css(\"border-bottom-width\"), 10);\n\n            if (kendo.kineticScrollNeeded && kendo.mobile.ui.Scroller) {\n                kendo.touchScroller(that.contentElements);\n                that.contentElements = that.contentElements.children(\".km-scroll-container\");\n            }\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (that.element.is(\"ul\")) {\n                that.wrapper = that.element.wrapAll(\"<div />\").parent();\n            } else {\n                that.wrapper = that.element;\n            }\n        }\n    });\n\n    // client-side rendering\n    extend(TabStrip, {\n        renderItem: function(options) {\n            options = extend({ tabStrip: {}, group: {} }, options);\n\n            var empty = templates.empty,\n                item = options.item;\n\n            return templates.item(extend(options, {\n                image: item.imageUrl ? templates.image : empty,\n                sprite: item.spriteCssClass ? templates.sprite : empty,\n                itemWrapper: templates.itemWrapper\n            }, rendering));\n        },\n\n        renderContent: function(options) {\n            return templates.content(extend(options, rendering));\n        }\n    });\n\n    kendo.ui.plugin(TabStrip);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n\n/** \n * Kendo UI v2022.1.301 (http://www.telerik.com/kendo-ui)                                                                                                                                               \n * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('util/undoredostack',[ \"../kendo.core\" ], f);\n})(function(){\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n/*jshint scripturl: true */\n(function(f, define){\n    define('editor/main',[\n        \"../util/undoredostack\",\n        \"../kendo.combobox\",\n        \"../kendo.dropdownlist\",\n        \"../kendo.window\",\n        \"../kendo.colorpicker\"\n    ], f);\n})(function(){\n\n(function($,undefined) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        proxy = $.proxy,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys;\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS= \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    // options can be: template (as string), cssClass, title, defaultValue\n    var ToolTemplate = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        getHtml: function() {\n            var options = this.options;\n            return kendo.template(options.template, {useWithBlock:false})(options);\n        }\n    });\n\n    var EditorUtils = {\n        editorWrapperTemplate:\n            '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' +\n                '<tbody>' +\n                    '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' +\n                    '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' +\n                '</tbody>' +\n            '</table>',\n\n        buttonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        iconTextButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"k-button-icon #= iconCssClass #\"></span>' +\n                '<span class=\"k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        tableWizardButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">'+\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text\">#= data.title #</span>'+\n            '</button>',\n\n        colorPickerTemplate:\n            '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n\n        comboBoxTemplate:\n            '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n\n        dropDownListTemplate:\n            '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n\n        separatorTemplate:\n            '<span class=\"k-separator\"></span>',\n\n        overflowAnchorTemplate:\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\" data-popup' +\n                ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' +\n                '<span class=\"k-icon k-i-more-vertical k-button-icon\"></span>' +\n            '</button>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function (name) {\n            var toolCssClassNames = {\n\n                superscript: \"sup-script\",\n                subscript: \"sub-script\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent-increase\",\n                outdent: \"indent-decrease\",\n                createLink: \"link-horizontal\",\n                unlink: \"unlink-horizontal\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"html\",\n                foreColor: \"foreground-color\",\n                backColor: \"paint\",\n                createTable: \"table-insert\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableWizard: \"table-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-left\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-right\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n            if(cssClass) {\n                return cssClass;\n            }\n            return name;\n        },\n\n        registerTool: function(toolName, tool) {\n            var toolOptions = tool.options;\n            if (toolOptions && toolOptions.template) {\n                toolOptions.template.options.cssClass = \"k-\" + EditorUtils.getToolCssClass(toolName);\n            }\n\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function (content, comments) {\n            for(var index in comments){\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function (content, comments) {\n            for(var index in comments){\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Ok\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableTab: \"Table\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Accessibility\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        background: \"Background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Select All Cells\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedBrowser = !os || (os.ios && os.flatVersion >= 500) || (!os.ios && typeof(document.documentElement.contentEditable) != 'undefined');\n\n    var toolGroups = {\n        basic: [ \"bold\", \"italic\", \"underline\" ],\n        alignment: [ \"justifyLeft\", \"justifyCenter\", \"justifyRight\" ],\n        lists: [ \"insertUnorderedList\", \"insertOrderedList\" ],\n        indenting: [ \"indent\", \"outdent\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ],\n        links: [ \"createLink\", \"unlink\" ],\n        tables: [ \"tableWizard\", \"createTable\", \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\", \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\", \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function (element, options) {\n            var that = this,\n                value,\n                editorNS = kendo.ui.editor,\n                toolbarContainer,\n                toolbarOptions,\n                type, comments;\n            var domElement;\n            var dom = editorNS.Dom;\n\n            /* suppress initialization in mobile webkit devices (w/o proper contenteditable support) */\n            if (!supportedBrowser) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n            that.options.tools = that.options.tools.slice();\n\n            element = that.element;\n            domElement = element[0];\n\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", proxy(that.update, that, undefined)\n            );\n\n            toolbarOptions = extend({}, that.options);\n            toolbarOptions.editor = that;\n\n            if (type == \"textarea\") {\n                that._wrapTextarea();\n\n                toolbarContainer = that.wrapper.find(\".k-editor-toolbar\");\n\n                if (domElement.id) {\n                    toolbarContainer.attr(\"aria-controls\", domElement.id);\n                }\n            } else {\n                that.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n\n                toolbarOptions.popup = true;\n\n                toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n            }\n\n            that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n\n            that.toolbar.bindTo(that);\n\n            if (type == \"textarea\") {\n                setTimeout(function () {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n\n            that._resizable();\n            that._initializeContentElement(that);\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n\n            that.clipboard = new editorNS.Clipboard(this);\n\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if(!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n\n            // using $.proxy here will break #5337\n            this._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n            if (options.tools) {\n                editor.toolbar.bindTo(editor);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if(!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return  show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\"td\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = proxy(editor._showElementResizeHandles, editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate,\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang =\"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if(!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor.toolbar.decorateFrom(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                \"<style>\" +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href){\n                    return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if(textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function (){\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", proxy(this._mouseup, this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                editor.toolbar.decorateFrom(editor.body);\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", proxy(this._blur, this));\n            editor._registerHandler(mousedownTrigger, \"down\", proxy(editor._mousedown, editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch(e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e){\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e){\n                    var restoreHeight = function(){\n                        if (editor._cachedHeight !== undefined && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function(){\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function (e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        // Handling with timeout to avoid the default IE menu\n                        setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.toolbar.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function () {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function (e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function(){\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function (e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function () {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-state-active\");\n                        editor.toolbar.show();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = toolbar.window.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                            $(body).removeClass(\"k-state-active\");\n                            toolbar.hide();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if(!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = \"<style id='\"+ PLACEHOLDER_TAG_ID +\"'>.\" +\n                        PLACEHOLDER_CLASS +  \":before { content: '\"+ placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initializeImmutables: function(){\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables){\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _mousedown: function (e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target &&  target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if(e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function(){\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _runPostContentKeyCommands: function (e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({range: range});\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\",  value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [].concat.call(\n                [\"formatting\"],\n                toolGroups.basic,\n                [\"undo\", \"redo\"],\n                toolGroups.alignment,\n                toolGroups.formatPainter,\n                toolGroups.lists,\n                toolGroups.indenting,\n                toolGroups.links,\n                [\"insertImage\"],\n                toolGroups.tables\n            )\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _focusOutside: function () {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _destroyUploadWidget: function(){\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        state: function(toolName) {\n            var tool = Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        value: function (html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n\n            this.toolbar.refreshTools();\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if(!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if(activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        focus: function () {\n            this.restoreSelection();\n        },\n\n        update: function (value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        encodedValue: function () {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        createRange: function (document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        getSelection: function () {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        getRange: function () {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        _containsRange: function (range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _deleteSavedRange: function () {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        paste: function (html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        exec: function (name, params) {\n            var that = this;\n            var command = null;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            name = name.toLowerCase();\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.toolbar.toolById(name);\n\n            if (!tool) {\n                // execute non-toolbar tool\n                for (var id in Editor.defaultTools) {\n                    if (id.toLowerCase() == name) {\n                        tool = Editor.defaultTools[id];\n                        break;\n                    }\n                }\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = proxy(that._selectionChange, that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        initialize: function(ui, options) {\n            ui.attr({ unselectable: \"on\", title: options.title, \"aria-label\": options.title });\n        },\n\n        command: function (commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function (editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command:  $.noop,\n        update: function (ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name;\n\n            switch (name) {\n                case \"undo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ template: new ToolTemplate({template: EditorUtils.separatorTemplate})}));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Undo\"})}));\n    EditorUtils.registerTool(\"redo\", new UndoTool({key: \"Y\", ctrl: true, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Redo\"})}));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if(browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            ToolTemplate: ToolTemplate,\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/dom',[ \"./main\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\"));\n\nvar normalize = function (node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function (rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function () {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function (color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function (x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function (value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&'+entity+';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if(Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function (node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function (node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while(child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function (node){\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length  > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function (node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", {\"innerHTML\": \"&#xfeff;\"});\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function (target, offsetParent) {\n        var result = {top: target.offsetTop, left: target.offsetLeft};\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function (parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function (newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function (newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function (node) {\n        if(node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node){\n        while(node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function (parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if(typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)){\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function (node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function (node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function (referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function (node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function (node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function (el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    create: function (document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function (document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function (element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function (origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if(this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function(){\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function (node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function (node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function () {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function (node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function (table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function (table, colAttr) {\n        $(table).find(\"[\"+ colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function (table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if(cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if(registeredColumns[rowIndex]) {\n                    while(registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if(cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function (cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if(!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if(registeredColumns[rowIndex]) {\n                    while(registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if(table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while(theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for(k = 0; k < rowspan; k++) {\n                    for(l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row){\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while(tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for(k = 0; k < rowspan; k++) {\n                    for(l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row){\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for(i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if(currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for(i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for(j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if(this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if(currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if(number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while(row && length && this.is(row.cells[0], \"th\")) {\n                for(j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if(!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if(row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number ;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n\n(function(f, define){\n    define('editor/serializer',[ \"./dom\" ], f);\n})(function(){\n\n(function($, undefined) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)){\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)){\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if(dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root){\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if(isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function (node) { mapStart(node, \"iframe\"); },\n                end: function () { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function (node) { mapStart(node, \"script\"); },\n                end: function () { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function (node) { mapStart(node, \"b\"); },\n                end: function () { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function (node) { mapStart(node, \"i\"); },\n                end: function () { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function (node) { mapStart(node, \"strong\"); },\n                end: function () { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function (node) { mapStart(node, \"em\"); },\n                end: function () { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function (node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item){ return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\"};\n\n                    if (style) {\n                        styleObj.value  = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function () { result.push('</span>'); }\n            },\n            font: {\n                semantic: false,\n                start: function (node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function () {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while(!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if(isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n\n\n(function(f, define){\n    define('editor/components',[ \"./serializer\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    DropDownList = kendo.ui.DropDownList,\n    dom = kendo.ui.editor.Dom;\n\nvar SelectBox = DropDownList.extend({\n    init: function(element, options) {\n        var that = this;\n\n        DropDownList.fn.init.call(that, element, options);\n\n        // overlay drop-down with popout for snappier interaction\n        if (kendo.support.mobileOS.ios) {\n            this._initSelectOverlay();\n            this.bind(\"dataBound\", $.proxy(this._initSelectOverlay, this));\n        }\n\n        that.text(that.options.title);\n\n        that.element.attr(\"title\", that.options.title);\n        that.wrapper.attr(\"title\", that.options.title);\n\n        that.bind(\"open\", function() {\n            if (that.options.autoSize) {\n                var list = that.list,\n                    listWidth;\n\n                list.css({\n                        whiteSpace: \"nowrap\",\n                        width: \"auto\"\n                    });\n\n                listWidth = list.width();\n\n                if (listWidth > 0) {\n                    listWidth += 20;\n                } else {\n                    listWidth = that._listWidth;\n                }\n\n                list.css(\"width\", listWidth + kendo.support.scrollbar());\n\n                that._listWidth = listWidth;\n            }\n        });\n    },\n    options: {\n        name: \"SelectBox\",\n        index: -1\n    },\n\n    _initSelectOverlay: function() {\n        var selectBox = this;\n        var value = selectBox.value();\n        var view = this.dataSource.view();\n        var item;\n        var html = \"\";\n        var encode = kendo.htmlEncode;\n\n        for (var i = 0; i < view.length; i++) {\n            item = view[i];\n\n            html += \"<option value='\" + encode(item.value) + \"'\";\n\n            if (item.value == value) {\n                html += \" selected\";\n            }\n\n            html += \">\" + encode(item.text) + \"</option>\";\n        }\n\n        var select = $(\"<select class='k-select-overlay'>\" + html + \"</select>\");\n        var wrapper = $(this.element).closest(\".k-widget\");\n\n        wrapper.next(\".k-select-overlay\").remove();\n\n        select.insertAfter(wrapper);\n\n        select.on(\"change\", function() {\n            selectBox.value(this.value);\n            selectBox.trigger(\"change\");\n        });\n    },\n\n    value: function(value) {\n        var that = this,\n            result = DropDownList.fn.value.call(that, value);\n\n        if (value === undefined) {\n            return result;\n        }\n\n        if (!DropDownList.fn.value.call(that)) {\n           that.text(that.options.title);\n        }\n    },\n\n    decorate: function(body) {\n        var that = this,\n            dataSource = that.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            that.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        for (i = 0; i < items.length; i++) {\n            tag = items[i].tag || \"span\";\n            className = items[i].className;\n\n            style = dom.inlineStyle(body, tag, { className : className });\n\n            style = style.replace(/\"/g, \"'\");\n\n            items[i].style = style + \";display:inline-block\";\n        }\n\n        dataSource.trigger(\"change\");\n    }\n});\n\n\nkendo.ui.plugin(SelectBox);\nkendo.ui.editor.SelectBox = SelectBox;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n/*jshint boss: true */\n\n(function(f, define){\n    define('editor/range',[ \"./components\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if(!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function (node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function (node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function (node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function (node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function (node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function (node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function (node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function (node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function (toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function () {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function () {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function () {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function (node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function () {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function () {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function () {\n        return !!this._next;\n    },\n\n    next: function () {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function (callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function (originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function () {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function () {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function(){\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function (range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function () {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function () {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) &&  // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function () {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function () {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function () {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function () {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function () {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function (range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function (range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function (range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function (range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        return new RangeEnumerator(range).enumerate();\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n        }\n\n        return nodes;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function (node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function (range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index-1] && dom.insignificant(parent[index-1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function (range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function (range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\r\n    define('editor/immutables',[ \"./range\" ], f);\r\n})(function(){\r\n\r\n(function($, undefined) {\r\n    var kendo = window.kendo,\r\n        Class = kendo.Class,\r\n        Editor = kendo.ui.editor,\r\n        dom = Editor.Dom,\r\n        template = kendo.template,\r\n        RangeUtils = Editor.RangeUtils,\r\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\r\n        toolsToBeUpdated = [\r\n            \"bold\",\r\n            \"italic\",\r\n            \"underline\",\r\n            \"strikethrough\",\r\n            \"superscript\",\r\n            \"subscript\",\r\n            \"forecolor\",\r\n            \"backcolor\",\r\n            \"fontname\",\r\n            \"fontsize\",\r\n            \"createlink\",\r\n            \"unlink\",\r\n            \"autolink\",\r\n            \"addcolumnleft\",\r\n            \"addcolumnright\",\r\n            \"addrowabove\",\r\n            \"addrowbelow\",\r\n            \"deleterow\",\r\n            \"deletecolumn\",\r\n            \"mergecells\",\r\n            \"formatting\",\r\n            \"cleanformatting\" ],\r\n        IMMUTABALE = \"k-immutable\",\r\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\r\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\r\n\r\n    var rootCondition = function(node) {\r\n        return $(node).is(\"body,.k-editor\");\r\n    };\r\n\r\n    var immutable = function(node) {\r\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\r\n    };\r\n\r\n    var immutableParent = function (node) {\r\n        return dom.closestBy(node, immutable, rootCondition);\r\n    };\r\n\r\n    var expandImmutablesIn = function(range) {\r\n        var startImmutableParent = immutableParent(range.startContainer);\r\n        var endImmutableParent = immutableParent(range.endContainer);\r\n\r\n        if (startImmutableParent || endImmutableParent) {\r\n            if (startImmutableParent){\r\n                range.setStartBefore(startImmutableParent);\r\n            }\r\n            if (endImmutableParent){\r\n                range.setEndAfter(endImmutableParent);\r\n            }\r\n        }\r\n    };\r\n\r\n    var immutablesContext = function(range) {\r\n        if (immutableParent(range.commonAncestorContainer)) {\r\n            return true;\r\n        } else if(immutableParent(range.startContainer) || immutableParent(range.endContainer)){\r\n            var editableNodes = RangeUtils.editableTextNodes(range);\r\n            if (editableNodes.length === 0){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    var randomId = function(length) {\r\n        var result = '';\r\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        for (var i = length || 10; i > 0; --i) {\r\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\r\n        }\r\n        return result;\r\n    };\r\n\r\n    var removeImmutables = function (root) {\r\n        var serializedImmutables = {empty: true}, nodeName, id, serialized;\r\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node){\r\n            nodeName = dom.name(node);\r\n            id = randomId();\r\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\r\n            serializedImmutables[id] = {node: node, style: $(node).attr(\"style\")};\r\n            serializedImmutables.empty = false;\r\n            $(node).replaceWith(serialized);\r\n        });\r\n\r\n        return serializedImmutables;\r\n    };\r\n\r\n    var restoreImmutables = function(root, serializedImmutables) {\r\n        var id, immutable;\r\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\r\n            id = node.getAttribute(IMMUTABALE);\r\n            immutable = serializedImmutables[id];\r\n            $(node).replaceWith(immutable.node);\r\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\r\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\r\n            }\r\n        });\r\n    };\r\n\r\n    var deletingKey = function (keyCode) {\r\n        var keys = kendo.keys;\r\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\r\n    };\r\n    var updateToolOptions = function(tool) {\r\n        var options = tool ? tool.options : undefined;\r\n        if (options && options.finder) {\r\n            options.finder._initOptions({immutables: true});\r\n        }\r\n    };\r\n\r\n    var Immutables = Class.extend({\r\n        init: function (editor) {\r\n            this.editor = editor;\r\n            this.serializedImmutables = {};\r\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\r\n\r\n            var tools = editor.toolbar.tools;\r\n            updateToolOptions(tools.justifyLeft);\r\n            updateToolOptions(tools.justifyCenter);\r\n            updateToolOptions(tools.justifyRight);\r\n            updateToolOptions(tools.justifyFull);\r\n        },\r\n\r\n        serialize: function(node) {\r\n            var result = this._toHtml(node),\r\n                id;\r\n\r\n            if (result.indexOf(IMMUTABALE) === -1) {\r\n                id = this.randomId();\r\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\r\n            } else {\r\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\r\n            }\r\n\r\n            this.serializedImmutables[id] = node;\r\n            return result;\r\n        },\r\n\r\n        _toHtml: function(node){\r\n            var serialization = this.options.serialization;\r\n            var serializationType = typeof serialization;\r\n            var nodeName;\r\n\r\n            switch (serializationType) {\r\n                case \"string\":\r\n                    return template(serialization)(node);\r\n                case \"function\":\r\n                    return serialization(node);\r\n                default:\r\n                    nodeName = dom.name(node);\r\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\r\n            }\r\n        },\r\n\r\n        deserialize: function(node) {\r\n            var that = this;\r\n            var deserialization = this.options.deserialization;\r\n\r\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\r\n                var id = this.getAttribute(IMMUTABALE);\r\n                var immutable = that.serializedImmutables[id];\r\n                if (kendo.isFunction(deserialization)) {\r\n                    deserialization(this, immutable);\r\n                }\r\n                $(this).replaceWith(immutable);\r\n            });\r\n\r\n            that.serializedImmutables = {};\r\n        },\r\n\r\n        randomId: function (length) {\r\n            return randomId(length);\r\n        },\r\n\r\n        keydown: function(e, range) {\r\n            var isDeleting = deletingKey(e.keyCode);\r\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\r\n                (!isDeleting && this._cancelTyping(e, range));\r\n\r\n            if (shouldCancelEvent) {\r\n                e.preventDefault();\r\n                return true;\r\n            }\r\n        },\r\n\r\n        _cancelTyping: function(e, range) {\r\n            var editor = this.editor;\r\n            var keyboard = editor.keyboard;\r\n\r\n            return range.collapsed && !keyboard.typingInProgress &&\r\n                keyboard.isTypingKey(e) && immutablesContext(range);\r\n        },\r\n\r\n        _cancelDeleting: function(e, range) {\r\n            var keys = kendo.keys;\r\n            var backspace = e.keyCode === keys.BACKSPACE;\r\n            var del = e.keyCode == keys.DELETE;\r\n\r\n            if (!backspace && !del) {\r\n                return false;\r\n            }\r\n            var cancelDeleting = false;\r\n            if (range.collapsed) {\r\n                if (immutablesContext(range)) {\r\n                    return true;\r\n                }\r\n                var immutable = this.nextImmutable(range, del);\r\n                if (immutable && backspace) {\r\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\r\n                    if (closestSelectionLi) {\r\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\r\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\r\n                            return cancelDeleting;\r\n                        }\r\n                    }\r\n                }\r\n                if (immutable && !dom.tableCell(immutable)) {\r\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\r\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\r\n                            immutable = immutable.parentNode;\r\n                        }\r\n                        if (dom.tableCell(immutable)) {\r\n                            return cancelDeleting;\r\n                        }\r\n                        this._removeImmutable(immutable, range);\r\n                    }\r\n                    cancelDeleting = true;\r\n                }\r\n            }\r\n            return cancelDeleting;\r\n        },\r\n\r\n        nextImmutable: function(range, forwards) {\r\n            var commonContainer = range.commonAncestorContainer;\r\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\r\n                var next = this._nextNode(commonContainer, forwards);\r\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\r\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\r\n                        next = next.children[forwards ? 0 : next.children.length - 1];\r\n                    }\r\n                }\r\n                return immutableParent(next);\r\n            }\r\n        },\r\n\r\n        _removeImmutable: function(immutable, range) {\r\n            var editor = this.editor;\r\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\r\n            dom.remove(immutable);\r\n            Editor._finishUpdate(editor, startRestorePoint);\r\n        },\r\n\r\n        _nextNode: function(node, forwards) {\r\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\r\n            var current = node, next;\r\n            while(current && !next) {\r\n                next = current[sibling];\r\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)){\r\n                    current = next;\r\n                    next = current[sibling];\r\n                }\r\n                if (!next){\r\n                    current = current.parentNode;\r\n                }\r\n            }\r\n            return next;\r\n        }\r\n    });\r\n\r\n    Immutables.immutable = immutable;\r\n    Immutables.immutableParent = immutableParent;\r\n    Immutables.expandImmutablesIn = expandImmutablesIn;\r\n    Immutables.immutablesContext = immutablesContext;\r\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\r\n    Immutables.removeImmutables = removeImmutables;\r\n    Immutables.restoreImmutables = restoreImmutables;\r\n\r\n    Editor.Immutables = Immutables;\r\n})(window.kendo.jQuery);\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n(function(f, define){\n    define('editor/command',[ \"./immutables\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor.toolbar.refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, {immutables: options.immutables});\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function () {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function (expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function (range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function () {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function () {\n        this.exec();\n    },\n\n    createDialog: function (content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\").toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function () {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function(){\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function () {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function () {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/toolbar',[ \"./range\" ], f);\n})(function(){\n\n(function($,undefined) {\n    var kendo = window.kendo;\n    var ui = kendo.ui;\n    var editorNS = ui.editor;\n    var Widget = ui.Widget;\n    var extend = $.extend;\n    var proxy = $.proxy;\n    var keys = kendo.keys;\n    var NS = \".kendoEditor\";\n    var EditorUtils = editorNS.EditorUtils;\n    var ToolTemplate = editorNS.ToolTemplate;\n    var Tool = editorNS.Tool;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var OVERFLOWANCHOR = \"overflowAnchor\";\n\n    var focusable = \".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),\" +\n                    \".k-tool.k-overflow-anchor:visible,\" +\n                    \".k-tool-group:visible .k-colorpicker:not(input),\" +\n                    \".k-tool-group:visible .k-selectbox,\" +\n                    \".k-tool-group:visible .k-dropdown,\" +\n                    \".k-tool-group:visible .k-combobox .k-input-inner\";\n\n    var toolNamesByCssClass = {\n        \"k-i-sup-script\": \"superscript\",\n        \"k-i-sub-script\": \"subscript\",\n        \"k-i-align-left\": \"justifyLeft\",\n        \"k-i-align-center\": \"justifyCenter\",\n        \"k-i-align-right\": \"justifyRight\",\n        \"k-i-align-justify\": \"justifyFull\",\n        \"k-i-list-unordered\": \"insertUnorderedList\",\n        \"k-i-list-ordered\": \"insertOrderedList\",\n        \"k-i-list-roman-upper\": \"insertUpperRomanList\",\n        \"k-i-list-roman-lower\": \"insertLowerRomanList\",\n        \"k-i-import\": \"import\",\n        \"k-i-indent-increase\": \"indent\",\n        \"k-i-indent-decrease\": \"outdent\",\n        \"k-i-link-horizontal\": \"createLink\",\n        \"k-i-unlink-horizontal\": \"unlink\",\n        \"k-i-image\": \"insertImage\",\n        \"k-i-file-add\": \"insertFile\",\n        \"k-i-html\": \"viewHtml\",\n        \"k-i-foreground-color\": \"foreColor\",\n        \"k-i-paint\": \"backColor\",\n        \"k-i-table-insert\": \"createTable\",\n        \"k-i-table-column-insert-left\": \"addColumnLeft\",\n        \"k-i-table-column-insert-right\": \"addColumnRight\",\n        \"k-i-table-row-insert-above\": \"addRowAbove\",\n        \"k-i-table-row-insert-below\": \"addRowBelow\",\n        \"k-i-table-row-delete\": \"deleteRow\",\n        \"k-i-table-column-delete\": \"deleteColumn\",\n        \"k-i-table-properties\": \"tableWizard\",\n        \"k-i-table-wizard\": \"tableWizardInsert\",\n        \"k-i-table-position-left\": \"tableAlignLeft\",\n        \"k-i-table-position-center\": \"tableAlignCenter\",\n        \"k-i-table-position-right\": \"tableAlignRight\",\n        \"k-i-clear-css\": \"cleanFormatting\",\n        \"k-i-cells-merge-horizontally\": \"mergeCellsHorizontally\",\n        \"k-i-cells-merge-vertically\": \"mergeCellsVertically\",\n        \"k-i-cell-split-horizontally\": \"splitCellHorizontally\",\n        \"k-i-cell-split-vertically\": \"splitCellVertically\",\n        \"k-i-copy-format\": \"copyFormat\",\n        \"k-i-apply-format\": \"applyFormat\",\n        \".k-i-undo\": \"undo\",\n        \"k-i-redo\": \"redo\",\n\n    };\n\n    var OverflowAnchorTool = Tool.extend({\n        initialize: function(ui, options) {\n            var toolbar = options.editor.toolbar;\n\n            ui.attr(\"aria-controls\", options.editor.element.attr(\"id\"))\n                .on(\"click\", $.proxy(function() {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n        },\n\n        options: {\n            name: OVERFLOWANCHOR\n        },\n\n        command: $.noop,\n        update: $.noop,\n        destroy: $.noop\n\n    });\n\n    EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n        key: \"\",\n        ctrl: true,\n        template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n    }));\n\n    var Toolbar = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = extend({}, options, { name: \"EditorToolbar\" });\n\n            Widget.fn.init.call(that, element, options);\n\n            if (options.popup) {\n                that._initPopup();\n            }\n\n            if (options.resizable && options.resizable.toolbar) {\n                that._resizeHandler = kendo.onResize(function() {\n                    that.resize(true);\n                });\n\n                that.element.addClass(\"k-toolbar-resizable\");\n            }\n        },\n\n        events: [\n            \"execute\"\n        ],\n\n        groups: {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\", \"indent\", \"outdent\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            advanced: [ \"viewHtml\", \"cleanFormatting\", \"print\", \"pdf\", \"exportAs\", \"import\"],\n            fonts: [ \"fontName\", \"fontSize\" ],\n            colors: [ \"foreColor\", \"backColor\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        },\n\n        overflowFlaseTools: [ \"formatting\", \"fontName\", \"fontSize\", \"foreColor\", \"backColor\", \"insertHtml\" ],\n\n        _initPopup: function() {\n            var that = this;\n            this.window = $(this.element)\n                .wrap(\"<div class='editorToolbarWindow' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e){\n                    if (!$(e.target).is(\".k-icon\")) {\n                        that.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function(){\n                    that.options.editor.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _toggleOverflowStyles: function(element, show) {\n            element\n                .find(\"> li\").toggleClass(\"k-item\", show)\n                .find(\".k-tool:not(.k-disabled), .k-overflow-button\").toggleClass(\"k-overflow-button\", show);\n        },\n\n        _initOverflowPopup: function(ui) {\n            var that = this;\n            var popupTemplate = \"<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>\";\n\n            that.overflowPopup = $(popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                origin: kendo.support.isRtl(that.element) ? \"bottom left\" : \"bottom right\",\n                position: kendo.support.isRtl(that.element) ? \"top left\" : \"top right\",\n                copyAnchorStyles: false,\n                open: function(e) {\n                    if (this.element.is(\":empty\")) {\n                        e.preventDefault();\n                    }\n\n                    that._toggleOverflowStyles(this.element, true);\n                    ui.attr(\"aria-expanded\", true);\n                },\n                close: function() {\n                    ui.attr(\"aria-expanded\", false);\n                },\n                activate: proxy(that.focusOverflowPopup, that)\n            }).data(\"kendoPopup\");\n        },\n\n        items: function() {\n            var isResizable = this.options.resizable && this.options.resizable.toolbar,\n                popup, result;\n\n            result = this.element.children().find(\"> *, select\");\n\n            if (isResizable) {\n                popup = this.overflowPopup;\n                result = result.add(popup.element.children().find(\"> *\"));\n            }\n\n            return result;\n        },\n\n        focused: function() {\n            var active = kendo._activeElement(),\n                popup = this.window,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        toolById: function(name) {\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (id.toLowerCase() == name) {\n                    return tools[id];\n                }\n            }\n        },\n\n        toolGroupFor: function(toolName) {\n            var i, groups = this.groups;\n\n            if (this.isCustomTool(toolName)) {\n                return \"custom\";\n            }\n\n            for (i in groups) {\n                if ($.inArray(toolName, groups[i]) >= 0) {\n                    return i;\n                }\n            }\n        },\n\n        bindTo: function(editor) {\n            var that = this,\n                window = that.window;\n\n            // detach from editor that was previously listened to\n            if (that._editor) {\n                that._editor.unbind(\"select\", proxy(that.resize, that));\n            }\n\n            that._editor = editor;\n\n            if (that.options.resizable && that.options.resizable.toolbar) {\n                editor.options.tools.push(OVERFLOWANCHOR);\n            }\n\n            // re-initialize the tools\n            that.tools = that.expandTools(editor.options.tools);\n            that.render();\n\n            that.element.find(\".k-combobox .k-input-inner\").on(\"keydown\", function(e) {\n                var combobox = $(this).closest(\".k-combobox\").data(\"kendoComboBox\"),\n                    key = e.keyCode;\n\n                if (key == keys.RIGHT || key == keys.LEFT) {\n                    combobox.close();\n                } else if (key == keys.DOWN) {\n                    if (!combobox.dropDown.isOpened()) {\n                        e.stopImmediatePropagation();\n                        combobox.open();\n                    }\n                }\n            });\n\n            that._attachEvents();\n\n            that.items().each(function initializeTool() {\n\n                var toolName = that._toolName(this),\n                    tool = toolName !== \"moreVertical\" ? that.tools[toolName] : that.tools.overflowAnchor,\n                    options = tool && tool.options,\n                    messages = editor.options.messages,\n                    description = options && options.tooltip || messages[toolName],\n                    ui = $(this);\n\n                if (!tool || !tool.initialize) {\n                    return;\n                }\n\n                if (toolName == \"fontSize\" || toolName == \"fontName\") {\n                    var inheritText = messages[toolName + \"Inherit\"];\n\n                    ui.find(\"input\").val(inheritText).end()\n                      .find(\"span.k-input-inner\").text(inheritText).end();\n                }\n\n                tool.initialize(ui, {\n                    title: that._appendShortcutSequence(description, tool),\n                    editor: that._editor\n                });\n\n                ui.closest(\".k-widget\", that.element).addClass(\"k-editor-widget\");\n\n                ui.closest(\".k-colorpicker\", that.element).next(\".k-colorpicker\").addClass(\"k-editor-widget\");\n            });\n\n            editor.bind(\"select\", proxy(that.resize, that));\n\n            that.update();\n\n            if (window) {\n                window.wrapper.css({top: \"\", left: \"\", width: \"\"});\n            }\n        },\n\n        show: function() {\n            var that = this,\n                window = that.window,\n                editorOptions = that.options.editor,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (window) {\n                wrapper = window.wrapper;\n                editorElement = editorOptions.element;\n\n                if (!wrapper.is(\":visible\") || !that.window.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!window._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                        setTimeout(function() {\n                            window.open();\n                        }, 0);\n                    } else {\n                        window.open();\n                    }\n                }\n            }\n        },\n\n        _getWindowWidth: function(){\n            var that = this,\n                wrapper = that.window.wrapper,\n                editorElement = that.options.editor.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _overlaps: function(box) {\n            var toolbarWrapper = this.window.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        hide: function() {\n            if (this.window) {\n                this.window.close();\n            }\n        },\n\n        focus: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            // Chrome can't focus something which has already been focused\n            element.attr(TABINDEX, tabIndex || 0).trigger(\"focus\")\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        focusOverflowPopup: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.overflowPopup.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            element.closest(\".k-animation-container\").addClass(\"k-overflow-wrapper\");\n\n            element.attr(TABINDEX, tabIndex || 0)\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        _appendShortcutSequence: function(localizedText, tool) {\n            if (!tool.key) {\n                return localizedText;\n            }\n\n            var res = localizedText + \" (\";\n\n            if (tool.ctrl) {\n                res += \"Ctrl + \";\n            }\n\n            if (tool.shift) {\n                res += \"Shift + \";\n            }\n\n            if (tool.alt) {\n                res += \"Alt + \";\n            }\n\n            res += tool.key + \")\";\n\n            return res;\n        },\n\n        _nativeTools: [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ],\n\n        tools: {}, // tools collection is copied from defaultTools during initialization\n\n        isCustomTool: function(toolName) {\n            return !(toolName in kendo.ui.Editor.defaultTools);\n        },\n\n        // expand the tools parameter to contain tool options objects\n        expandTools: function(tools) {\n            var currentTool,\n                i,\n                nativeTools = this._nativeTools,\n                options,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                result = {},\n                name;\n\n            for (i = 0; i < tools.length; i++) {\n                currentTool = tools[i];\n                name = currentTool.name;\n\n                if ($.isPlainObject(currentTool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result[name] = extend({}, defaultTools[name]);\n                        extend(result[name].options, currentTool);\n                    } else {\n                        // custom tool\n                        options = extend({ cssClass: \"k-i-gear\", type: \"button\", title: \"\" }, currentTool);\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        if (!options.template && options.type == \"button\") {\n                            options.template = editorNS.EditorUtils.buttonTemplate;\n                            options.title = options.title || options.tooltip;\n                        }\n\n                        result[name] = {\n                            options: options\n                        };\n                    }\n                } else if (defaultTools[currentTool]) {\n                    // tool by name\n                    result[currentTool] = defaultTools[currentTool];\n                }\n            }\n\n            for (i = 0; i < nativeTools.length; i++) {\n                if (!result[nativeTools[i]]) {\n                    result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                }\n            }\n\n            return result;\n        },\n\n        render: function() {\n            var that = this,\n                tools = that.tools,\n                options, template, toolElement,\n                toolName,\n                editorElement = that._editor.element,\n                element = that.element.empty(),\n                groupName, newGroupName,\n                toolConfig = that._editor.options.tools,\n                group, i, groupPosition = 0,\n                resizable = that.options.resizable && that.options.resizable.toolbar,\n                overflowFlaseTools = this.overflowFlaseTools;\n\n            function stringify(template) {\n                var result = \"\";\n\n                if (template.getHtml) {\n                    result = template.getHtml();\n                } else {\n                    if (!kendo.isFunction(template)) {\n                        template = kendo.template(template);\n                    }\n\n                    result = template(options);\n                }\n\n                return kendo.trim(result);\n            }\n\n            function endGroup() {\n                if (group.children().length) {\n                    if (resizable) {\n                        group.data(\"position\", groupPosition);\n                        groupPosition++;\n                    }\n\n                    group.appendTo(element);\n                }\n            }\n\n            function startGroup(toolName) {\n                if (toolName !== OVERFLOWANCHOR) {\n                    group = $(\"<li class='k-tool-group' role='presentation' />\");\n                    group.data(\"overflow\", $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                } else {\n                    group = $(\"<li class='k-overflow-tools' />\");\n                }\n            }\n\n            element.empty();\n\n            if (toolConfig.length) {\n                toolName = toolConfig[0].name || toolConfig[0];\n            }\n            startGroup(toolName, overflowFlaseTools);\n\n            for (i = 0; i < toolConfig.length; i++) {\n                toolName = toolConfig[i].name || toolConfig[i];\n                options = tools[toolName] && tools[toolName].options;\n\n                if (!options && $.isPlainObject(toolName)) {\n                    options = toolName;\n                }\n\n                template = options && options.template;\n\n                if (toolName == \"break\") {\n                    endGroup();\n                    $(\"<li class='k-row-break' role='presentation' />\").appendTo(that.element);\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (!template) {\n                    continue;\n                }\n\n                newGroupName = that.toolGroupFor(toolName);\n\n                if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                    groupName = newGroupName;\n                }\n\n                if (toolName == OVERFLOWANCHOR) {\n                    template.options.title = that.options.messages.overflowAnchor;\n                }\n\n                template = stringify(template);\n\n                toolElement = $(template).appendTo(group);\n\n                if (newGroupName == \"custom\") {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (options.exec && toolElement.hasClass(\"k-tool\")) {\n                    toolElement.on(\"click\", proxy(options.exec, editorElement[0]));\n                }\n            }\n\n            endGroup();\n\n            $(that.element).children(\":has(> .k-tool)\").not(\".k-overflow-tools\").addClass(\"k-button-group\");\n\n            that.updateGroups();\n\n            if (resizable) {\n                that._initOverflowPopup(that.element.find(\".k-overflow-anchor\"));\n            }\n\n            that.angular(\"compile\", function(){\n                return { elements: that.element };\n            });\n        },\n\n        updateGroups: function() {\n            $(this.element).children().not(\".k-overflow-tools\").each(function() {\n                $(this).children()\n                    .removeClass(\"k-group-start k-group-end\")\n                    .first().addClass(\"k-group-start\").end()\n                    .last().addClass(\"k-group-end\").end();\n            });\n        },\n\n        decorateFrom: function(body) {\n            this.items().filter(\".k-decorated\")\n                .each(function() {\n                    var selectBox = $(this).data(\"kendoSelectBox\");\n\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (tools[id].destroy) {\n                    tools[id].destroy();\n                }\n            }\n\n            if (this.window) {\n                this.window.destroy();\n            }\n\n            if (this._resizeHandler) {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            if (this.overflowPopup) {\n                this.overflowPopup.destroy();\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n\n            that.attachToolsEvents(that.element.add(popupElement));\n        },\n\n        attachToolsEvents: function(element) {\n            var that = this,\n                buttons = \"[role=button].k-tool\",\n                enabledButtons = buttons + \":not(.k-disabled)\" + \", [role=button].k-i-import:not(.k-disabled)\",\n                disabledButtons = buttons + \".k-disabled\",\n                dropdown = \".k-dropdown\",\n                colorpicker = \".k-colorpicker\",\n                editorTools = [buttons, dropdown, colorpicker].join(\",\");\n\n            element.off(NS)\n                .on(\"mouseenter\" + NS, enabledButtons, function() { $(this).addClass(\"k-hover\"); })\n                .on(\"mouseleave\" + NS, enabledButtons, function() { $(this).removeClass(\"k-hover\"); })\n                .on(\"mousedown\" + NS, editorTools, function(e) {\n                    e.preventDefault();\n                })\n                .on(\"keydown\" + NS, focusable, function(e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement,\n                        currentContainer,\n                        keyCode = e.keyCode;\n\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n\n                        return tools[index];\n                    }\n\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is(\".k-dropdown\")) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass(\"k-overflow-tool-group\") ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n\n                        // skip tabbing to disabled tools, and focus the editing area when running out of tools\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n\n                            if (!focusElement || $(focusElement).closest(\".k-overflow-tools\").css(\"visibility\") === \"hidden\") {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ( $(current).is(\"button\") || $(current).is(\"a\") ) && !$(current).attr(\"href\") ) {\n                        //anchors without href attribute do not respond to Enter key\n                        that._executeToolCommand(current, e);\n                    }\n                })\n                .on(\"click\" + NS, enabledButtons, function(e) {\n                    that._executeToolCommand(this, e);\n                })\n                .on(\"click\" + NS, disabledButtons, function(e) { e.preventDefault(); });\n\n        },\n\n        _executeToolCommand: function(toolElement, e) {\n            var that = this;\n            var button = $(toolElement);\n            e.preventDefault();\n            e.stopPropagation();\n            button.removeClass(\"k-hover\");\n            if (!button.is(\"[data-popup]\")) {\n                that._editor.exec(that._toolName(toolElement));\n            }\n        },\n\n        _toolName: function (element) {\n            if (!element) {\n                return;\n            }\n\n            var className = element.className;\n\n            if (/k-tool\\b/i.test(className)) {\n                className = element.firstChild.className;\n            }\n\n            var tool = $.grep(className.split(\" \"), function (x) {\n                return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n            });\n\n            if (tool[0]) {\n                var toolname = tool[0];\n                if (toolNamesByCssClass[toolname]) {\n                    toolname = toolNamesByCssClass[toolname];\n                }\n                if (toolname.indexOf(\"k-i-\") >=0) {\n                    return kendo.toCamelCase(toolname.substring(toolname.indexOf(\"k-i-\") + 4));\n                }\n                else {\n                    return toolname.substring(toolname.lastIndexOf(\"-\") + 1);\n                }\n            }\n            return \"custom\";\n        },\n\n        refreshTools: function() {\n            var that = this,\n                editor = that._editor,\n                range = editor.getRange(),\n                nodes = editorNS.RangeUtils.textNodes(range),\n                immutables = editor.options.immutables,\n                immutablesContext = that._immutablesContext(range);\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.items().each(function() {\n                var tool = that.tools[that._toolName(this)];\n                if (tool) {\n                    var ui = $(this);\n                    if (tool.update) {\n                        tool.update(ui, nodes, editor.undoRedoStack);\n                    }\n\n                    if (immutables) {\n                        that._updateImmutablesState(tool, ui, immutablesContext);\n                    }\n                }\n            });\n            this.update();\n        },\n\n        _immutablesContext: function(range) {\n            if (this._editor.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var name = tool.name;\n            var uiElement = ui;\n\n            var trackImmutables = tool.options.trackImmutables;\n            if (trackImmutables === undefined) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                var display = immutablesContext ? \"none\" : \"\";\n                if (!ui.is(\".k-tool\")) {\n                    var uiData = ui.data();\n                    for (var key in uiData) {\n                        if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                            var widget = uiData[key];\n                            uiElement = widget.wrapper;\n                            break;\n                        }\n                    }\n                }\n                uiElement.css(\"display\", display);\n                var groupUi = uiElement.closest(\"li\");\n                if (groupUi.children(\":visible\").length === 0) {\n                    groupUi.css(\"display\", display);\n                }\n            }\n        },\n\n        update: function() {\n            this.updateGroups();\n        },\n\n        _resize: function(e) {\n            var containerWidth = e.width;\n            var resizable = this.options.resizable && this.options.resizable.toolbar;\n            var popup = this.overflowPopup;\n            var editorElement = this.options.editor.element;\n            var toolbarWindow = this.window;\n\n            this.refreshTools();\n\n            if (!resizable) {\n                return;\n            }\n\n            if(toolbarWindow) {\n                toolbarWindow.wrapper.width(this._getWindowWidth());\n\n                if(!toolbarWindow._moved) {\n                    toolbarWindow.wrapper.css({\n                        left: Math.max(0, parseInt(editorElement.offset().left, 10))\n                    });\n                }\n            }\n\n            if (popup.visible()) {\n                popup.close(true);\n            }\n\n            this._refreshWidths();\n\n            this._shrink(containerWidth);\n            this._stretch(containerWidth);\n\n            this._toggleOverflowStyles(this.element, false);\n            this._toggleOverflowStyles(this.overflowPopup.element, true);\n\n            this.element\n                .children(\"li.k-overflow-tools\")\n                .css(\"visibility\", popup.element.is(\":empty\") ? \"hidden\" : \"visible\");\n        },\n\n        _refreshWidths: function() {\n            this.element.children(\"li\").each(function(idx, element) {\n                var group = $(element);\n                group.data(\"outerWidth\", outerWidth(group, true));\n            });\n        },\n\n        _shrink: function(width) {\n            var group, visibleGroups;\n\n            if (width < this._groupsWidth()) {\n                visibleGroups = this._visibleGroups().filter(\":not(.k-overflow-tools)\");\n\n                for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                    group = visibleGroups.eq(i);\n                    if (width > this._groupsWidth()) {\n                        break;\n                    } else {\n                        this._hideGroup(group);\n                    }\n                }\n            }\n        },\n\n        _stretch: function(width) {\n            var group, hiddenGroups;\n\n            if (width > this._groupsWidth()) {\n                hiddenGroups = this._hiddenGroups();\n\n                for (var i = 0; i < hiddenGroups.length ; i++) {\n                    group = hiddenGroups.eq(i);\n                    if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        _hiddenGroups: function() {\n            var popup = this.overflowPopup;\n\n            var hiddenGroups = this.element.children(\"li.k-tool-group\").filter(\":hidden\");\n\n            hiddenGroups = hiddenGroups.add(popup.element.children(\"li\"));\n\n            hiddenGroups.sort(function(a, b) {\n                return ($(a).data(\"position\") > $(b).data(\"position\")) ? 1 : -1;\n            });\n\n            return hiddenGroups;\n        },\n\n        _visibleGroups: function() {\n            return this.element.children(\"li.k-tool-group, li.k-overflow-tools\").filter(\":visible\");\n        },\n\n        _groupsWidth: function() {\n            var width = 0;\n\n            this._visibleGroups().each(function() {\n                width += $(this).data(\"outerWidth\");\n            });\n\n            return Math.ceil(width);\n        },\n\n        _hideGroup: function(group) {\n            if (group.data(\"overflow\")) {\n                var popup = this.overflowPopup;\n                group.detach().prependTo(popup.element).addClass(\"k-overflow-tool-group\");\n            } else {\n                group.addClass(\"k-hidden\");\n            }\n        },\n\n        _showGroup: function(group, width) {\n            var position, previous, groupWidth;\n\n            if (group.hasClass('k-disabled')) {\n                return true;\n            }\n\n            if (group.hasClass(\"k-overflow-tool-group\")) {\n                groupWidth = group.data(\"outerWidth\");\n            } else {\n                group.removeClass(\"k-hidden\");\n                groupWidth = outerWidth(group, true);\n                group.addClass(\"k-hidden\");\n            }\n\n            if (group.length && width > this._groupsWidth() + groupWidth) {\n                if (group.hasClass(\"k-overflow-tool-group\")) {\n                    position = group.data(\"position\");\n\n                    if (position === 0) {\n                        group.detach().prependTo(this.element);\n                    } else {\n                        previous = this.element.children().filter(function(idx, element) {\n                            return $(element).data(\"position\") === position - 1;\n                        });\n\n                        group.detach().insertAfter(previous);\n                    }\n\n                    group.removeClass(\"k-overflow-tool-group\");\n\n                } else {\n                    group.removeClass(\"k-hidden\");\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n    });\n\n$.extend(editorNS, {\n    Toolbar: Toolbar\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/viewhtml',[ \"../command\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        this.createDialog(dialog, {\n            title: messages.viewHtml,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .find(\".k-dialog-update\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .data(\"kendoWindow\").center().open();\n\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: \"\" +\n    \"<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'>\" +\n        \"<span class='k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea'><textarea class='k-input-inner !k-overflow-auto !k-resize-none'></textarea></span>\" +\n        \"<div class='k-edit-buttons'>\" +\n            \"<button class='k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary'><span class='k-button-text'>#: dialogUpdate #</span></button>\" +\n            \"<button class='k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class='k-button-text'>#: dialogCancel #</span></button>\" +\n        \"</div>\" +\n    \"</div>\",\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"View HTML\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/format',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function (options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({immutables: options.immutables});\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function (options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function (commandArguments) {\n        var that = this;\n        return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes);\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/inlineformat',[ \"./format\" ], f);\n})(function(){\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    EditorUtils = Editor.EditorUtils,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function (sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function (sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function (nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function (range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function(){\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function (nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function (node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function (nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function (range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function (nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function (node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function (nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function (nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function () { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = (kendo.support.browser.msie || kendo.support.touch) ? \"kendoDropDownList\" : \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function (commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function () {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function (ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            defaultValue = [];\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n\n        ui.attr({ title: initOptions.title});\n        ui[this.type]({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: dataSource,\n            change: function () {\n                editor._range = range;\n                Tool.exec(editor, toolName, this.value());\n            },\n            close: function () {\n                setTimeout(function(){\n                    editor._deleteSavedRange();\n                },0);\n            },\n            highlightFirst: false\n        });\n\n        ui.closest(\".k-widget\").removeClass(\"k-\" + toolName).find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        var widget = ui.data(this.type);\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"]}];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function (commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function () {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var that = this,\n            editor = initOptions.editor,\n            toolName = this.name,\n            options =  extend({}, ColorTool.fn.options, this.options),\n            palette = options.palette,\n            columns = options.columns;\n\n        ui = this._widget = new kendo.ui.ColorPicker(ui, {\n            closeOnSelect: true,\n            views: [\"palette\"],\n            preview: false,\n            input: false,\n            buttons: false,\n            toolIcon: \"k-icon k-i-\" + EditorUtils.getToolCssClass(options.name),\n            palette: palette,\n            columns: columns,\n            change: function() {\n                var color = ui.value();\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n                editor.focus();\n            },\n            open: function (e) {\n                var picker = e.sender;\n                that.storedRange = editor.getRange();\n\n                picker._popup.element.on(MOUSEDOWN_NS, function(e){\n                    if(!$(e.target).is(\"input.k-color-value\")){\n                        e.preventDefault();\n                    }\n                });\n\n                if(!picker._popup.element.is(\"[unselectable='on']\")) {\n                    picker._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function(){\n                            that._inputFocused = true;\n                        });\n                }\n            },\n            close: function(e) {\n                e.sender._popup.element.off(MOUSEDOWN_NS);\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n            },\n            activate: function(e) {\n                e.preventDefault();\n\n                if (e.sender._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                ui.trigger(\"change\");\n            }\n        });\n        ui.wrapper\n            .attr({ title: initOptions.title, unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        ui.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\"}} } ]);\nregisterTool(\"bold\", new InlineFormatTool({ key: \"B\", ctrl: true, format: formats.bold, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Bold\"}) }));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\"}} } ]);\nregisterTool(\"italic\", new InlineFormatTool({ key: \"I\", ctrl: true, format: formats.italic, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Italic\"})}));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\"}} }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({ key: \"U\", ctrl: true, format: formats.underline, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Underline\"})}));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\"}} } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({format: formats.strikethrough, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Strikethrough\"})}));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({format: formats.superscript, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Superscript\"})}));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({format: formats.subscript, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Subscript\"})}));\n\nregisterTool(\"foreColor\", new ColorTool({cssAttr:\"color\", fontAttr: \"color\", domAttr:\"color\", name:\"foreColor\", template: new ToolTemplate({template: EditorUtils.colorPickerTemplate, title: \"Color\"})}));\n\nregisterTool(\"backColor\", new ColorTool({cssAttr:\"background-color\", domAttr: \"backgroundColor\", name:\"backColor\", template: new ToolTemplate({template: EditorUtils.colorPickerTemplate, title: \"Background Color\"})}));\n\nregisterTool(\"fontName\", new FontTool({cssAttr:\"font-family\", fontAttr: \"face\", domAttr: \"fontFamily\", name:\"fontName\", defaultValue: [{ text: \"fontNameInherit\",  value: \"inherit\" }], template: new ToolTemplate({template: EditorUtils.comboBoxTemplate, title: \"Font Name\"})}));\n\nregisterTool(\"fontSize\", new FontTool({cssAttr:\"font-size\", fontAttr: \"size\", domAttr:\"fontSize\", name:\"fontSize\", defaultValue: [{ text: \"fontSizeInherit\",  value: \"inherit\" }], template: new ToolTemplate({template: EditorUtils.comboBoxTemplate, title: \"Font Size\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/link',[ \"./inlineformat\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function (sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function (range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length-1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"]}], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle : function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"]}]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    _dialogTemplate: function() {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-url'>#: messages.linkWebAddress #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label k-editor-link-text-row'>\" +\n                        \"<label for='k-editor-link-text'>#: messages.linkText #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field k-editor-link-text-row'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-title'>#: messages.linkToolTip #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'></div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'>\" +\n                        \"<label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-buttons'>\" +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    \"</div>\" +\n                \"</div>\" +\n            \"</div>\"\n        )({\n            messages: this.editor.options.messages\n        });\n    },\n\n    exec: function () {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(this._dialogTemplate(), {\n            title: messages.createLink,\n            close: proxy(this._close, this),\n            visible: false\n        });\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog\n            .find(\".k-dialog-insert\").on(\"click\", proxy(this._apply, this)).end()\n            .find(\".k-dialog-close\").on(\"click\", proxy(this._close, this)).end()\n            .find(\".k-edit-field input\").on(\"keydown\", proxy(this._keydown, this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").attr(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.data(\"kendoWindow\").center().open();\n\n        $(\"#k-editor-link-url\", dialog).trigger(\"focus\").select();\n    },\n\n    _keydown: function (e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function (e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function (e) {\n        e.preventDefault();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function (nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function () {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function (options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function () {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function () {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function (linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{tags:[\"a\"]}]);\n\n        Tool.fn.init.call(this, $.extend(options, {command:UnlinkCommand}));\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function (ui, nodes) {\n        ui.toggleClass(\"k-disabled\", !this.finder.isFormatted(nodes))\n          .removeClass(\"k-hover\");\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function (traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function () {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse($.proxy(this._detectEnd, this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse($.proxy(this._detectStart, this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset |0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function (options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function (callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function (callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {}, //jshint ignore: line\n    next: function(node) {}, //jshint ignore: line\n    subText: function(text, offset) {} //jshint ignore: line\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Create Link\"})}));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Remove Link\"})}));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/formatblock',[ \"./format\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function (nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes){\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function (sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if(until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function (nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function (nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function (format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function (nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function (nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function (nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function (range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function (format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function (nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function (range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function (options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function () {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" }} },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" }} }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Left\"\n    })\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" }} },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" }} }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Center\"\n    })\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" }} },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" }} }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Right\"\n    })\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" }} },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" }} },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" }} }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Full\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/lists',[ \"./formatblock\" ], f);\n})(function(){\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function (node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node){\n        return dom.list(node);\n    },\n\n    isFormatted: function (nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function (nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function () {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function (candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function (range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while(formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while(formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function (nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if(!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function (section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, $.proxy(function(node) {\n                    return this.containsAny(node, nodes);\n                }, this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if(dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function (nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while(li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function (nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function (range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function (commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({tag:'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert unordered list\"})}));\nregisterTool(\"insertOrderedList\", new ListTool({tag:'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert ordered list\"})}));\nregisterTool(\"insertUpperRomanList\", new ListTool({tag:'ol', attr: { style: { listStyleType: \"upper-roman\" }}, altAttr: { type: \"I\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert upper roman list\"})}));\nregisterTool(\"insertLowerRomanList\", new ListTool({tag:'ol', attr: { style: { listStyleType: \"lower-roman\" }}, altAttr: { type: \"i\" }, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert lower roman list\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/formatting',[ \"./inlineformat\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoSelectBox\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function (args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function () {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor;\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var selectBox;\n\n        that.editor = editor;\n\n        ui.width(options.width);\n\n        selectBox = ui.kendoSelectBox({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: options.items || editor.options[toolName],\n            title: editor.options.messages[toolName],\n            autoSize: true,\n            change: function () {\n                var dataItem = this.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = this.dataSource.data();\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n            },\n            highlightFirst: false,\n            template: kendo.template(\n                '<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'\n            )\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass(\"k-decorated\")\n            .closest(\".k-widget\")\n                .removeClass(\"k-\" + toolName)\n                .find(\"*\").addBack()\n                    .attr(\"unselectable\", \"on\");\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\"+item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for(var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length-1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Format\" }) }));\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Clean formatting\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/image',[ \"../../kendo.imagebrowser\", \"../command\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function(){\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser k-imagebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function () {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function () {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function (ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if(isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert Image\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/import',[ \"../main\" ], f);\n})(function(){\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function(){\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: proxy(cmd._onUploadSuccess, cmd),\n            progress: proxy(cmd._onUploadProgress, cmd),\n            select: proxy(cmd._onUploadSelect, cmd),\n            error: proxy(cmd._onUploadError, cmd),\n            complete: proxy(cmd._onUploadComplete, cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl:  importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev){\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev){\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev){\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev){\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev){\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function (){\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({position: \"relative\"}).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function(){\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    template: new ToolTemplate({template: EditorUtils.iconTextButtonTemplate, title: \"Import\"})\n}));\n\n}(window.kendo.jQuery));\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/insert',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml;\n\n        this._selectBox = new editorNS.SelectBox(ui, {\n            dataSource: dataSource,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            change: function () {\n                Tool.exec(editor, 'insertHtml', this.value());\n            },\n            title: editor.options.messages.insertHtml,\n            highlightFirst: false\n        });\n\n        ui.attr(\"title\", initOptions.title);\n        this._selectBox.wrapper.attr(\"title\", initOptions.title);\n    },\n\n    command: function (commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var selectbox = ui.data(\"kendoSelectBox\") || ui.find(\"select\").data(\"kendoSelectBox\");\n        selectbox.close();\n        selectbox.value(selectbox.options.title);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({template: new ToolTemplate({template: EditorUtils.dropDownListTemplate, title: \"Insert HTML\", initialValue: \"Insert HTML\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/export',[ \"../main\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoSelectBox';\n    },\n\n    options: {\n        items: defaultExportAsItems,\n        width: 140\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var tool = this;\n        var editor = initOptions.editor;\n        var options = tool.options;\n        var toolName = options.name;\n        var changeHandler = proxy(tool.changeHandler, tool);\n        var dataSource = options.items || editor.options[toolName];\n        var displayName = editor.options.messages[toolName];\n        var selectBox;\n\n        dataSource.unshift({\n            text: displayName,\n            value: \"\"\n        });\n        tool.editor = editor;\n        ui.width(options.width);\n        selectBox = ui.kendoSelectBox({\n            dataTextField: 'text',\n            dataValueField: 'value',\n            dataSource: dataSource,\n            autoSize: true,\n            change: changeHandler,\n            open: function(e) {\n                var sender = e.sender;\n                sender.items()[0].style.display = \"none\";\n                sender.unbind(\"open\");\n            },\n            highlightFirst: false,\n            template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'),\n            valueTemplate: '<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">' + displayName + '</span></span>'\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n    },\n\n    changeHandler: function(e) {\n        var sender = e.sender;\n        var dataItem = sender.dataItem();\n        var value = dataItem && dataItem.value;\n\n        this._exec(value);\n        sender.value(\"\");\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    template: new ToolTemplate({\n        template: EditorUtils.dropDownListTemplate,\n        title: 'Export As'\n    })\n}));\n\n}(window.kendo.jQuery));\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/indent',[ \"./formatblock\" ], f);\n})(function(){\n\n(function($, undefined) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{tags:dom.blockElements}]);\n    },\n\n    apply: function (nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{tags:[\"p\"]}], {style:{marginLeft:30}});\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function (list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes){\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function (node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle : $.proxy(function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }, that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle : $.proxy(function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }, that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{tags:blockElements}]);\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        $.extend(this.options, {\n            immutables: options.editor && options.editor.options.immutables\n        });\n\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function (ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                ui.removeClass(\"k-disabled\");\n                return;\n            }\n        }\n\n        ui.addClass(\"k-disabled\").removeClass(\"k-hover\");\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Indent\"}) }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Outdent\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/linebreak',[ \"./formatblock\" ], f);\n})(function(){\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function (node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function () {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') &&  marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p']}]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function (node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function () {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent =  $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if(kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if(!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/file',[ \"../../kendo.filebrowser\", \"./link\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", {href: attributes.href});\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function () {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function () {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function (ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if(isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Insert File\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/tables',[ \"./formatblock\", \"./insert\" ], f);\n})(function(){\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    proxy = $.proxy,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-state-active\",\n    SELECTEDSTATE = \"k-state-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = \"<td style='width:#=width#%;'>#=content#</td>\";\n\nvar tableFormatFinder = new BlockFormatFinder([{tags:[TABLE]}]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: proxy(this._open, this),\n            activate: proxy(this._activate, this),\n            close: proxy(this._close, this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", proxy(this._toggle, this))\n          .on(\"keydown\", proxy(this._keydown, this));\n\n        var editor = this._editor = options.editor;\n        this._popup = popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            template: new ToolTemplate({ template: EditorUtils.tableWizardButtonTemplate, title: editor.options.messages.tableWizard }),\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        var twTool = $(\"<div>\" + tableWizard.options.template.getHtml() + \"</div>\");\n        twTool.appendTo(popup.element);\n\n        if (editor.toolbar) {\n            editor.toolbar.attachToolsEvents(twTool);\n        }\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n        var key = e.keyCode;\n\n        if (key == keys.DOWN && e.altKey) {\n            this._popup.open();\n        } else if (key == keys.ESC) {\n            this._popup.close();\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        this._popup.destroy();\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-state-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-state-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el){\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function (table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function (table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex +\"]\");\n\n            if(cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function (editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function (row, colIndex){\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i  +\"]\");\n            if(td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while(colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while(colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for(i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if(cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if(td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i +\"]\");\n\n            if (cell.length) {\n                if(cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if(rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i +\"]\");\n            if(createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell){\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell){\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if(newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if(colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function (row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex +\"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index +\"]\")[0];\n\n            if(cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if(!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if(colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect){\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if(!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if(rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if(rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if(!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function (range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function (table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if(cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex+1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if(adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if(!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function (td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if(rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if(td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if(cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if(colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function (row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if(cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if(cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function (td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if(colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if(td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if(!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if(!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if(td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if(td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function (td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow,  bottomTd;\n\n            if(!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if(!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if(td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function (td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function () {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if(type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")){\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function (td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function (td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function (td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan/2);\n\n            if(colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if(rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if(td.hasAttribute(SCOPE)) {\n                if(td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if(!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function (td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan/2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if(rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if(colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if(nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if(td.hasAttribute(SCOPE)) {\n                if(td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if(!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\"){\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function (options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function () {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if(editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    initialize: function(ui, options) {\n        BlockFormatTool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes);\n        var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n\n        if (isTable === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node){\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\nregisterTool(\"createTable\", new InsertTableTool({ template: new ToolTemplate({template: EditorUtils.buttonTemplate, popup: true, title: \"Create table\"})}));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add column on the left\"})}));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add column on the right\"})}));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add row above\"})}));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Add row below\"})}));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Delete row\"})}));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Delete column\"})}));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({type: \"row\", action: \"merge\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Merge Cell Right\"})}));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({type: \"column\", action: \"merge\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Merge Cell Down\"})}));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({type: \"row\", action: \"split\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Split Cell\"})}));\nregisterTool(\"splitCellVertically\", new TableModificationTool({type: \"column\", action: \"split\", template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Split Cell\"})}));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" }} },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" }} },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Center\"\n    })\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" }} },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/clipboard',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = $.proxy(deferred.resolve, deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items){\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done($.proxy(function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }, this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className:'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', $.proxy(this.onpaste, this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e){\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e){\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth : \"0px\",\n            width : \"0px\",\n            height : \"0px\",\n            overflow: \"hidden\",\n            margin : \"0\",\n            padding : \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant : \"normal\",\n                fontWeight : \"normal\",\n                lineSpacing : \"normal\",\n                lineHeight : \"normal\",\n                textDecoration : \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\" : translate\n        });\n    },\n    _caretOffset: function (range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if(isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if(rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range){\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function (html, options) {\n        var editor = this.editor,\n            i, l, childNodes;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if(!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n        var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm){\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if(focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while(lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if(lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i+1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function ($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function (html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if(bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function (element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            borderStyles = [],\n            addBorderStyles = function(val) {\n                if (val.trim().indexOf(\"border\") === 0) {\n                    borderStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n\n                    attributeValues.forEach(addBorderStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (borderStyles.length > 0) {\n            element.setAttribute(\"style\", borderStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeDefaultColors: function(spans) {\n        for (var i = 0; i < spans.length; i++) {\n            if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                dom.unwrap(spans[i]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for(i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for(j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if(currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n            that.removeDefaultColors(tables.eq(i).find(\"span\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function (placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', {innerHTML: html});\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', {innerHTML: html});\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', {innerHTML: html});\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return {text: \" \", line: \" \"};\n        } else {\n            return {text: \" \", line: \"<br/>\"};\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({all: true});\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/keyboard',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function (range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function (node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function (start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function (node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function (e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function () {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function (e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function () {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if(!dom.emptyNode(node)) {\n            if(node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if(dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset-count >= 0 && text[offset-count-1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset-count, count);\n\n            range.setStart(node, Math.max(0, offset-count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if(block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if(block.innerText === ''){\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if(range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if(end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset-1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function (marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if(startParent && RangeUtils.isStartOf(range, startParent)){\n            dom.insertBefore(start, startParent);\n        }\n\n        if(endParent && RangeUtils.isEndOf(range, endParent)){\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function (range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function () {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function () {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function (e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function () {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function (e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)){\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)){\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function (tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function (e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function (tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function (toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function (e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function (e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function (e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function (callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function (force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n        }\n    },\n\n    isTypingInProgress: function () {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function () {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function (e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function (e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('editor/plugins/exportpdf',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Export PDF\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\r\n    define('editor/plugins/print',[ \"../command\" ], f);\r\n})(function(){\r\n\r\n(function($) {\r\n\r\n    // Imports ================================================================\r\n    var kendo = window.kendo,\r\n        editorNS = kendo.ui.editor,\r\n        Command = editorNS.Command,\r\n        EditorUtils = editorNS.EditorUtils,\r\n        registerTool = EditorUtils.registerTool,\r\n        Tool = editorNS.Tool,\r\n        ToolTemplate = editorNS.ToolTemplate,\r\n        extend = $.extend;\r\n\r\nvar PrintCommand = Command.extend({\r\n    init: function(options) {\r\n        Command.fn.init.call(this, options);\r\n\r\n        this.managesUndoRedo = true;\r\n    },\r\n\r\n    exec: function() {\r\n        var editor = this.editor;\r\n\r\n        if (kendo.support.browser.msie) {\r\n            editor.document.execCommand(\"print\", false, null);\r\n        } else if (editor.window.print) {\r\n            editor.window.print();\r\n        }\r\n    }\r\n});\r\n\r\nextend(editorNS, {\r\n    PrintCommand: PrintCommand\r\n});\r\n\r\nregisterTool(\"print\", new Tool({ command: PrintCommand, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Print\"})}));\r\n\r\n})(window.kendo.jQuery);\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n(function(f, define){\n    define('editor/plugins/formatpainter',[ \"../command\" ], f);\n})(function(){\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function (options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function(){\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if(rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while(node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if(dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for(i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for(i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if(attributeKey === \"style\") {\n                continue;\n            } else if(attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function (options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function(){\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if(markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if(markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if(nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if(nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for(i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for(i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if(this.immutableParent(node)) {\n                continue;\n            }\n\n            while(parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for(j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if(!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if(dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if(blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while(previous) {\n                        if(!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if(previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for(j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while(next) {\n                        if(!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if(nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for(j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if(blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while(dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if(blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for(i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if(topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if(topNode) {\n            for(i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if(dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while(newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function (options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function (commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function (options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function (commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Copy format\" }) }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Apply format\" }) }));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\r\n    define('editor/resizing/resizing-utils',[\"../main\"], f);\r\n})(function() {\r\n\r\n(function(kendo, undefined) {\r\n    var global = window;\r\n    var math = global.Math;\r\n    var min = math.min;\r\n    var max = math.max;\r\n    var parseFloat = global.parseFloat;\r\n\r\n    var $ = kendo.jQuery;\r\n    var extend = $.extend;\r\n\r\n    var Editor = kendo.ui.editor;\r\n\r\n    var PERCENTAGE = \"%\";\r\n    var PIXEL = \"px\";\r\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\r\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\r\n    var STRING = \"string\";\r\n\r\n    function constrain(options) {\r\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\r\n    }\r\n\r\n    function getScrollBarWidth(element) {\r\n        if  (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\r\n            return kendo.support.scrollbar();\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    function calculatePercentageRatio(value, total) {\r\n        if (inPercentages(value)) {\r\n            return parseFloat(value);\r\n        }\r\n        else {\r\n            return ((parseFloat(value) / total) * 100);\r\n        }\r\n    }\r\n\r\n    function inPercentages(value) {\r\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\r\n    }\r\n\r\n    function inPixels(value) {\r\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\r\n    }\r\n\r\n    function toPercentages(value) {\r\n        return (parseFloat(value) + PERCENTAGE);\r\n    }\r\n\r\n    function toPixels(value) {\r\n        return (parseFloat(value) + PIXEL);\r\n    }\r\n\r\n    var ResizingUtils = {\r\n        constrain: constrain,\r\n        getScrollBarWidth: getScrollBarWidth,\r\n        calculatePercentageRatio: calculatePercentageRatio,\r\n        inPercentages: inPercentages,\r\n        inPixels: inPixels,\r\n        toPercentages: toPercentages,\r\n        toPixels: toPixels\r\n    };\r\n\r\n    extend(Editor, {\r\n        ResizingUtils: ResizingUtils\r\n    });\r\n})(window.kendo);\r\n\r\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\r\n\n(function(f, define) {\n    define('editor/resizing/table-element-resizing',[\"../main\", \"../../kendo.resizable\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n    var proxy = $.proxy;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: proxy(that.onResizeStart, that),\n                resize: proxy(that.onResize, that),\n                resizeend: proxy(that.onResizeEnd, that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/column-resizing',[\"../main\", \"./resizing-utils\", \"./table-element-resizing\", \"../dom\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if(rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if(rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if(column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/row-resizing',[\"../main\", \"./resizing-utils\", \"./table-element-resizing\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>'+\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if(options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead =  $(that.element).children(THEAD);\n            var tableBody =  $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/element-resize-handle',[\"../main\",  \"../../kendo.draganddrop\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n    var proxy = $.proxy;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\"+\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, proxy(that._onMouseOver, that))\n                .on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: proxy(that._onDragStart, that),\n                drag: proxy(that._onDrag, that),\n                dragend: proxy(that._onDragEnd, that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable : function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if(options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n    define('editor/resizing/element-resizing',[\"../main\", \"./element-resize-handle\", \"./resizing-utils\"], f);\n})(function() {\n\n(function(kendo, undefined) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n    var proxy = $.proxy;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n\n                if(handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, proxy(that._onResizeHandleDragVertical, that));\n                } else if(handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, proxy(that._onResizeHandleDragHorizontal, that));\n                } else {\n                    handle.bind(DRAG, proxy(that._onResizeHandleDragLocked, that));\n                }\n\n                handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if(min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if(node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if(hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if(image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define) {\n   define('editor/table-wizard/table-wizard-command',[\"./../plugins/tables\"], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{tags:[\"table\"]}]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{tags:[\"td\",\"th\"]}]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: $.proxy(cmd.onDialogClose, cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open();\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function (table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while(lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if(lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], {id: cellProp.id || null});\n        }\n        (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell){\n            cmd._updateCellProperties(cell, cellProp);\n        });\n\n        cmd._updateCaption(table, tableProp);\n\n        if(tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header){\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if(headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if(headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count){\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if(tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if(tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var cellPropToAll = cellProp.selectAllCells;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if(headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n                cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row){\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while(rowColumns > columns) {\n                    if(lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data){\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data){\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for(i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for(j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if(!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if(cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if(tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while(thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while(thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if(thead) {\n            while(thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while(tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for(i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if(!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if(!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if(cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if(cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for(i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for(j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if(cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return {\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        };\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return {textAlign: textAlign, verticalAlign: verticalAlign};\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if(cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = {cells: []};\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return {textAlign: hAlign};\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if(hAlign && vAlign) {\n            return {textAlign: hAlign, verticalAlign: vAlign};\n        }\n        if(!hAlign && vAlign) {\n            return {textAlign: \"left\", verticalAlign: vAlign};\n        }\n        if(hAlign && !vAlign) {\n            return {textAlign: hAlign, verticalAlign: \"top\"};\n        }\n        return {textAlign: \"\", verticalAlign: \"\"};\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function (options) {\n        options.insertNewTable = this.options.insertNewTable;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, template: new ToolTemplate({template: EditorUtils.buttonTemplate, title: \"Table Wizard\"})}));\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)(); });\n(function(f, define) {\n   define('editor/table-wizard/table-wizard-dialog',[\"./table-wizard-command\", \"../../kendo.tabstrip\"], f);\n})(function() {\n\n(function($, undefined) {\n\nvar kendo = window.kendo,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar dialogTemplate =\n    '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' +\n        '<div class=\"k-edit-form-container\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    '<li class=\"k-state-active\">#= messages.tableTab #</li>' +\n                    '<li>#= messages.cellTab #</li>' +\n                    '<li>#= messages.accessibilityTab #</li>' +\n                '</ul>' +\n                '<div id=\"k-table-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-width\" />' +\n                        '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-height\" />' +\n                        '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-columns\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-rows\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-border-width\" />' +\n                        '<input id=\"k-editor-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-cell-properties\">' +\n\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-width\" />' +\n                        '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-height\" />' +\n                        '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' +\n                        '<input id=\"k-editor-cell-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-accessibility-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"><textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-input-inner k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<select id=\"k-editor-cells-headers\">' +\n                            '<option value=\"none\">#= messages.associateNone #</option>' +\n                            '<option value=\"scope\">#= messages.associateScope #</option>' +\n                            '<option value=\"ids\">#= messages.associateIds #</option>' +\n                        '</select>' +\n                    '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"k-edit-buttons\">' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\"><span class=\"k-button-text\">#= messages.dialogOk #</span></button>' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\"><span class=\"k-button-text\">#= messages.dialogCancel #</span></button>' +\n            '</div>' +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    open: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.title = messages.tableWizard;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._initTabStripComponent(element);\n        that._initTableViewComponents(element, tableData);\n        that._initCellViewComponents(element, tableData);\n        that._initAccessibilityViewComponents(element, tableData);\n\n        dialog.center();\n        dialog.open();\n\n        if(isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n\n    _initTabStripComponent: function(element){\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectCellViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.className = tableView.className.value;\n        tableProperties.id = tableView.id.value;\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.checked;\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.checked;\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value;\n        cellData.id = cellView.id.value;\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapText.checked;\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value;\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value;\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value){\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n    _initTableViewComponents: function(element, table) {\n        var that = this;\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n\n        var onColumnsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if(numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        };\n\n        var onRowsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if(numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        };\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n\n        that._initNumericTextbox(element.find(\"#k-editor-table-width\"), \"width\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-height\"), \"height\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-columns\"), \"columns\", tableProperties, tableView, {min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onColumnsNumberChange});\n        that._initNumericTextbox(element.find(\"#k-editor-table-rows\"), \"rows\", tableProperties, tableView, {min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onRowsNumberChange});\n        that._initDropDownList(element.find(\"#k-editor-table-width-type\"), \"widthUnit\", tableProperties, tableView, units);\n        that._initDropDownList(element.find(\"#k-editor-table-height-type\"), \"heightUnit\", tableProperties, tableView, units);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-spacing\"), \"cellSpacing\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-padding\"), \"cellPadding\", tableProperties, tableView);\n        that._initTableAlignmentDropDown(element.find(\"#k-editor-table-alignment\"), tableProperties);\n        that._initColorPicker(element.find(\"#k-editor-table-bg\"), \"bgColor\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-css-class\"), \"className\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-id\"), \"id\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-border-width\"), \"borderWidth\", tableProperties, tableView);\n        that._initColorPicker(element.find(\"#k-editor-border-color\"), \"borderColor\", tableProperties, tableView);\n        that._initBorderStyleDropDown(element.find(\"#k-editor-border-style\"), \"borderStyle\", tableProperties, tableView, borderStyles);\n        that._initCheckbox(element.find(\"#k-editor-collapse-borders\"), \"collapseBorders\", tableProperties, tableView);\n    },\n\n    _initCellViewComponents: function(element, table) {\n        var components = this.components;\n        var cellView = components.cellView = {};\n        table.selectedCells = table.selectedCells = table.selectedCells || [];\n        var cellProperties = table.selectedCells[0] || {borderStyle: \"\", wrapText: true};\n        this._addUnit(units, cellProperties.widthUnit);\n        this._addUnit(units, cellProperties.heightUnit);\n\n        this._initCheckbox(element.find(\"#k-editor-selectAllCells\"), \"selectAllCells\", table.tableProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-width\"), \"width\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-height\"), \"height\", cellProperties, cellView);\n        this._initDropDownList(element.find(\"#k-editor-cell-width-type\"), \"widthUnit\", cellProperties, cellView, units);\n        this._initDropDownList(element.find(\"#k-editor-cell-height-type\"), \"heightUnit\", cellProperties, cellView, units);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cell-margin\"), \"cellMargin\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cells-padding\"), \"cellPadding\", cellProperties, cellView);\n        this._initCellAlignmentDropDown(element.find(\"#k-editor-cell-alignment\"), cellProperties);\n        this._initColorPicker(element.find(\"#k-editor-cell-bg\"), \"bgColor\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-css-class\"), \"className\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-id\"), \"id\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-border-width\"), \"borderWidth\", cellProperties, cellView);\n        this._initColorPicker(element.find(\"#k-editor-cell-border-color\"), \"borderColor\", cellProperties, cellView);\n        this._initBorderStyleDropDown(element.find(\"#k-editor-cell-border-style\"), \"borderStyle\", cellProperties, cellView, borderStyles);\n        this._initCheckbox(element.find(\"#k-editor-wrap-text\"), \"wrapText\", cellProperties, cellView);\n    },\n\n    _initAccessibilityViewComponents: function(element, table) {\n        var components = this.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n\n        this._initInput(element.find(\"#k-editor-table-caption\"), \"captionContent\", tableProperties, accessibilityView);\n        this._initAccessibilityAlignmentDropDown(element.find(\"#k-editor-accessibility-alignment\"), tableProperties);\n        this._initInput(element.find(\"#k-editor-accessibility-summary\"), \"summary\", tableProperties, accessibilityView);\n        this._initAssociationDropDown(element.find(\"#k-editor-cells-headers\"), \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-rows\"), \"headerRows\", tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-columns\"), \"headerColumns\", tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTableAlignmentDropDown: function (element, data) {\n        var messages = this.options.messages;\n        var tableView =  this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function (element, data) {\n        var messages = this.options.messages;\n        var cellView =  this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function (element, data) {\n        var messages = this.options.messages;\n        var accessibilityView =  this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align').css('width', '110px');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property){\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({buttons: false, clearButton: true}).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.value = data[property];\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.checked = data[property];\n        }\n    },\n\n    destroy: function() {\n        this._destroyComponents(this.components.tableView);\n        this._destroyComponents(this.components.cellView);\n        this._destroyComponents(this.components.accessibilityView);\n        this._destroyComponents(this.components);\n\n        delete this.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages) {\n        return kendo.template(dialogTemplate)({ messages: messages });\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) {\n    (a3 || a2)(); });\n(function(f, define){\n    define('kendo.editor',[\n        \"./kendo.combobox\", \"./kendo.dropdownlist\", \"./kendo.resizable\", \"./kendo.window\", \"./kendo.colorpicker\", \"./kendo.imagebrowser\", \"./kendo.numerictextbox\",\n\n        \"./util/undoredostack\",\n        \"./editor/main\",\n        \"./editor/dom\",\n        \"./editor/serializer\",\n        \"./editor/range\",\n        \"./editor/command\",\n        \"./editor/components\",\n        \"./editor/toolbar\",\n        \"./editor/immutables\",\n\n        \"./editor/plugins/viewhtml\",\n        \"./editor/plugins/link\",\n        \"./editor/plugins/lists\",\n        \"./editor/plugins/formatting\",\n        \"./editor/plugins/image\",\n        \"./editor/plugins/import\",\n        \"./editor/plugins/insert\",\n        \"./editor/plugins/export\",\n        \"./editor/plugins/indent\",\n        \"./editor/plugins/linebreak\",\n        \"./editor/plugins/format\",\n        \"./editor/plugins/inlineformat\",\n        \"./editor/plugins/formatblock\",\n        \"./editor/plugins/file\",\n        \"./editor/plugins/tables\",\n        \"./editor/plugins/clipboard\",\n        \"./editor/plugins/keyboard\",\n        \"./editor/plugins/exportpdf\",\n        \"./editor/plugins/print\",\n        \"./editor/plugins/formatpainter\",\n\n        \"./editor/resizing/column-resizing\",\n        \"./editor/resizing/row-resizing\",\n        \"./editor/resizing/element-resizing\",\n        \"./editor/resizing/element-resize-handle\",\n        \"./editor/table-wizard/table-wizard-command\",\n        \"./editor/table-wizard/table-wizard-dialog\"\n    ], f);\n})(function(){\n\n    var __meta__ = { // jshint ignore:line\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\n\n\treturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n\n(function(f, define){\n            define('kendo.custom',[\"./kendo.editor\"], f);\n        })(function(){\n            \"bundle all\";\n            return window.kendo;\n        }, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n"],"names":["define","__meta__","id","name","category","description","$","jQuery","window","undefined","kendo","cultures","extend","each","isArray","Array","proxy","noop","math","Math","Template","JSON","support","percentRegExp","formatRegExp","boxShadowRegExp","numberRegExp","FUNCTION","STRING","NUMBER","OBJECT","NULL","BOOLEAN","UNDEFINED","PREFIX","getterCache","setterCache","slice","cssPropertiesNames","noDepricateExtend","src","copyIsArray","copy","options","clone","target","arguments","i","length","deep","this","isPlainObject","Class","version","replace","proto","base","member","that","subclass","init","apply","fn","prototype","constructor","Object","_initOptions","deepExtend","isFunction","preventDefault","_defaultPrevented","isDefaultPrevented","Observable","_events","bind","eventName","handlers","one","idx","eventNames","original","handler","handlersIsFunction","events","unbind","push","first","unshift","trigger","e","sender","call","splice","compilePart","part","stringPart","split","join","charAt","rest","substring","argumentNameRegExp","encodeRegExp","escapedCurlyRegExp","curlyRegExp","escapedSharpRegExp","sharpRegExp","zeros","pad","number","digits","end","paramName","useWithBlock","render","template","data","html","compile","settings","argumentName","match","functionBody","parts","Function","_slotCount","floor","Error","format","escapable","gap","indent","meta","\b","\t","\n","\f","\r","\"","\\","rep","toString","Date","toJSON","isFinite","valueOf","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","String","Number","Boolean","quote","string","lastIndex","test","a","c","charCodeAt","str","key","holder","k","v","mind","partial","value","type","hasOwnProperty","stringify","replacer","space","","dateFormatRegExp","standardFormatRegExp","literalRegExp","commaRegExp","EMPTY","POINT","COMMA","SHARP","ZERO","PLACEHOLDER","EN","objectToString","findCulture","culture","numberFormat","getCulture","current","formatDate","date","calendar","calendars","standard","days","months","patterns","minutes","result","sign","getDate","namesAbbr","getDay","names","getMonth","getFullYear","getHours","getMinutes","getSeconds","getMilliseconds","AM","PM","getTimezoneOffset","abs","formatNumber","decimal","precision","decimals","pattern","literals","symbol","isCurrency","isPercent","customPrecision","formatAndPrecision","negative","integer","fraction","integerLength","fractionLength","replacement","ch","hasGroup","hasNegativeFormat","decimalIndex","sharpIndex","zeroIndex","hasZero","hasSharp","percentIndex","currencyIndex","startZeroIndex","start","toLocaleString","exec","toLowerCase","currency","percent","exp","toExponential","round","groupInteger","indexOf","quoteChar","literal","lastIndexOf","rounded","max",",",".","groupSize","abbr","namesShort","d","D","F","g","G","m","M","s","t","T","u","y","Y","/",":","firstDay","twoDigitYearMax","cultureName","groupSizes","shift","newGroupSize","reverse","toFixed","min","fmt","nonBreakingSpaceRegExp","values","index","placeholderFormat","parseInt","_extractFormat","_activeElement","document","activeElement","documentElement","_round","_outerWidth","element","includeMargin","outerWidth","_outerHeight","outerHeight","spaceRegExp","exponentRegExp","shortTimeZoneRegExp","longTimeZoneRegExp","dateRegExp","offsetRegExp","FORMATS_SEQUENCE","STANDARD_FORMATS","2","3","4","outOfRange","designatorPredicate","designator","mapDesignators","designators","map","adjustDST","hours","setHours","lowerArray","array","lowerLocalInfo","localInfo","newLocalInfo","property","parseExact","strict","lookAhead","getNumber","size","rg","RegExp","substr","valueIdx","getIndexByName","lower","nameLength","matchLength","matchIdx","subValue","checkLiteral","year","month","day","seconds","milliseconds","defaultYear","count","pmHour","UTC","matches","amDesignators","pmDesignators","hoursOffset","minutesOffset","hasTime","_lowerDays","_lowerMonths","parseFloat","isNaN","setFullYear","parseMicrosoftFormatOffset","offset","getDefaultFormats","cultureFormats","formatIdx","formats","concat","internalParseDate","tzoffset","timezone","convert","getShadows","shadow","css","transitions","radius","blur","left","right","bottom","wrap","autosize","percentage","parent","windowOuterWidth","removeClass","hasClass","width","style","height","percentWidth","percentHeight","forceWidth","is","addClass","boxSizing","mozBoxSizing","webkitBoxSizing","wrapResize","wrapper","wrapperStyle","display","position","destination","deepExtendOne","source","ObservableArray","LazyObservableArray","DataSource","HierarchicalDataSource","propValue","propType","propInit","destProp","ArrayBuffer","getTime","testRx","agent","rxs","dflt","rx","toHyphens","toCamelCase","strMatch","g1","toUpperCase","getComputedStyles","properties","styles","computedStyle","defaultView","getComputedStyle","getPropertyValue","currentStyle","isScrollable","className","overflow","scrollLeft","webkit","browser","mozila","mozilla","browserVersion","el","isRtl","safari","scrollWidth","clientWidth","parseDate","parseExactDate","percentSymbol","_scrollbar","scrollbar","refresh","div","createElement","cssText","innerHTML","body","appendChild","offsetWidth","removeChild","closest","table","tbodyInnerHtml","touch","docStyle","transforms","elementProto","HTMLElement","hasHW3D","WebKitCSSMatrix","cssFlexbox","prefix","hasTransitions","lowPrefix","event","devicePixelRatio","screenWidth","screen","availWidth","innerWidth","screenHeight","availHeight","innerHeight","detectOS","ua","os","minorVersion","notAndroidPhone","agentRxs","wp","fire","android","iphone","ipad","meego","webos","blackberry","playbook","windows","tizen","sailfish","ffos","osRxs","ios","flat","formFactorRxs","tablet","browserRxs","omini","omobile","firefox","mobilesafari","ie","chrome","navigator","device","majorVersion","flatVersion","cordova","PhoneGap","appMode","standalone","location","protocol","mobileOS","userAgent","wpDevicePixelRatio","hasNativeScrolling","delayedClick","attr","mouseAndTouchPresent","detectBrowser","chromiumEdgeMatch","edge","opera","msie","documentMode","chromiumEdge","detectClipboardAccess","commands","queryCommandSupported","cut","paste","clipboard","zoomLevel","ie11WidthCorrection","docEl","scrollHeight","clientHeight","top","cssClass","docElement","eventCapture","addEventListener","input","placeholder","propertyChangeEvent","types","setAttribute","cssFloat","stableSort","threshold","sorted","field","sort","b","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","selector","nodeList","querySelectorAll","parentNode","matchMedia","pushState","history","hashChange","customElements","mobileChrome","crios","obj","getOffset","positioned","pointers","msPointers","pageYOffset","pageXOffset","MSPointerEvent","PointerEvent","kineticScrollNeeded","directions","down","up","in","out","parseEffects","effects","fx","Element","prepareAnimationOptions","duration","complete","teardown","hide","completeCallback","animate","instance","queue","promise","toggleClass","classes","add","enabled","dequeue","disable","promiseShim","enable","animatedPromise","kendoStop","clearQueue","gotoEnd","stop","kendoAnimate","kendoAddClass","kendoRemoveClass","kendoToggleClass","toggle","ampRegExp","ltRegExp","quoteRegExp","aposRegExp","gtRegExp","htmlEncode","unescape","decodeURIComponent","error","_","m1","m2","fromCharCode","eventTarget","touches","originalEvent","changedTouches","elementFromPoint","clientX","clientY","callback","on","mousedown","mouseup","mousemove","mousecancel","click","resize","wrapExpression","members","localUrlRe","Widget","widgets","_widgetRegisteredCallbacks","ui","mobile","dataviz","drawing","spreadsheet","messages","keys","INSERT","DELETE","BACKSPACE","TAB","ENTER","ESC","LEFT","UP","RIGHT","DOWN","END","HOME","SPACEBAR","PAGEUP","PAGEDOWN","F2","F10","F12","NUMPAD_PLUS","NUMPAD_MINUS","NUMPAD_DOT","ns","isLocalUrl","url","expr","expression","safe","getter","setter","accessor","get","set","guid","random","chars","roleSelector","role","directiveSelector","directives","selectors","triggeredByInput","tagName","onWidgetRegistered","len","logToConsole","message","console","suppressLog","log","angular","dataSource","props","componentTypes","componentType","defaults","_hasBindingTarget","kendoBindingTarget","_tabindex","TABINDEX","tabindex","removeAttr","setOptions","_clearCssClasses","_setEvents","_applyCssClasses","force","getSize","currentSize","_size","_resize","dimensions","setSize","destroy","removeData","_destroy","_muteAngularRebind","_muteRebind","protoOptions","__proto__","prop","validFill","widgetName","cssProperties","propertyDictionary","_altname","getValidClass","widget","propName","fillMode","fill","newOptions","currentOptions","themeColor","DataBoundWidget","dataItems","flatView","_angularItems","cmd","elements","items","dataItem","templateRegExp","domElement","offsetHeight","notify","jsonRegExp","jsonFormatRegExp","dashRegExp","parseOption","option","getAttribute","parseOptions","containmentComparer","contains","resizableWidget","inArray","initWidget","roles","fullPath","widgetKeyRegExp","nodeType","widgetKey","isEmptyObject","rolesFromNamespaces","namespaces","find","addBack","filter","widgetsArray","makeArray","widgetInstance","progress","container","mask","leftRight","webkitCorrection","containerScrollLeft","scrollTop","opacity","loading","prependTo","remove","plugin","register","widgetEntry","args","method","ContainerNullObject","nullObject","MobileWidget","autoApplyNS","kendoDestroy","view","viewElement","viewHasNativeScrolling","useNativeScrolling","eq","focusable","isTabIndexNotNaN","nodeName","disabled","href","visible","pseudos","parents","appLevelNativeScrolling","application","themes","views","touchScroller","useNative","Scroller","kendoMobileScroller","suites","elementData","editorToolbar","onResize","setTimeout","unbindResize","off","attrValue","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","kendoFocusable","MOUSE_EVENTS","EXCLUDE_BUST_CLICK_SELECTOR","MouseEventNormalizer","setupMouseMute","mouseTrap","bustClick","captureMouse","stopPropagation","muteMouse","clearTimeout","mouseTrapTimeoutID","unMuteMouse","eventMap","move","cancel","MSPointerEnter","MSPointerLeave","orig","fix","special","delegateType","bindType","handle","ret","related","relatedTarget","handleObj","origType","getEventMap","eventRegEx","applyEventMap","keyDownHandler","kendoKeydown","preventKendoKeydown","kendoJQuery","context","rootjQuery","animationFrame","pop","search","touchstart","touchend","keyDownCallBack","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Sun","Mon","Tue","Wed","Thu","Fri","Sat","ruleToDate","rule","targetDay","ourDay","time","cache","getUTCDay","setUTCDate","findRule","utcTime","rules","zone","grep","from","to","findZone","zones","zoneRules","until","zoneAndRule","info","fromOffset","toOffset","tempToOffset","diff","fromLocalOffset","toLocalOffset","toLocalDate","MS_PER_MINUTE","MS_PER_DAY","setDayOfWeek","dir","setDate","dayOfWeek","firstDayOfMonth","lastDayOfMonth","last","timeOffset","firstDayOfYear","lastDayOfYear","moveDateToWeekStart","weekStartDay","addDays","calcWeekInYear","firstWeekInYear","newDate","diffInMS","weekInYear","prevWeekDate","nextWeekDate","weekNumber","toUtcTime","toInvariantTime","isInTimeRange","msMin","msMax","msValue","isInDateRange","setTime","ignoreDST","difference","today","isToday","staticDate","addYear","currentDate","nextDay","previousDay","MS_PER_HOUR","nextYear","previousYear","stripWhitespace","createNodeIterator","iterator","NodeFilter","SHOW_TEXT","node","FILTER_ACCEPT","FILTER_REJECT","nextNode","referenceNode","textContent","trim","childNodes","child","nodeValue","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","animationQueue","themeColorValues","queueAnimation","runNextAnimation","parseQueryStringParams","queryString","params","paramParts","elementUnderCursor","x","client","wheelDeltaY","jQueryEvent","deltaY","delta","wheelDelta","detail","axis","VERTICAL_AXIS","throttle","delay","timeout","lastExecTime","throttled","elapsed","caret","rangeElement","isPosition","selectionStart","focus","setSelectionRange","selectionEnd","selection","createTextRange","collapse","moveStart","moveEnd","select","rangeDuplicated","duplicate","moveToBookmark","createRange","getBookmark","setEndPoint","text","compileMobileDirective","scope","injector","invoke","$compile","$$phase","$digest","antiForgeryTokens","tokens","csrf_token","csrf_param","cycleForm","form","firstElement","lastElement","keyCode","shiftKey","focusElement","scrollTopPositions","scrollableParents","parentsUntil","setActive","focusNextElement","focussable","nextElement","getWidgetFocusableElement","nextFocusable","addAttribute","attribute","removeAttribute","toggleAttribute","matchesMedia","mediaQuery","media","_bootstrapToMedia","bootstrapMedia","xs","sm","md","lg","xl","fileGroupMap","audio","video","image","txt","presentation","programming","pdf","config","zip","disc-image","getFileGroup","extension","withPrefix","fileTypeMap","groups","extensions","getFileSizeMessage","sizes","pow","selectorFromClasses","fillValues","shapeValues","sizeValues","roundedValues","positionModeValues","resizeValues","overflowValues","postToProxy","dataURI","fileName","proxyURL","proxyTarget","action","contentType","base64","appendTo","submit","defaultValues","registerPrefix","dict","registerValues","j","newValues","currentValue","registerCssClass","shorthand","registerCssClasses","arr","widgetProperties","widgetValues","validValue","fillModeValues","propertyToCssClassMap","getValidCssClass","whenAll","resolveValues","remaining","deferred","Deferred","failed","rejectContexts","rejectValues","resolveContexts","updateFunc","contexts","notifyWith","done","fail","resolveWith","fileSaver","downloadAttribute","saveAsBlob","blob","atob","Uint8Array","Blob","buffer","msSaveBlob","saveAsDataURI","URL","createObjectURL","download","createEvent","initMouseEvent","dispatchEvent","revokeObjectURL","saveAs","save","forceProxy","proxyModelSetters","observable","forEach","defineProperty","dirty","getSeriesColors","seriesColorsTemplate","series","colors","item","isElement","HTMLDocument","setDefaults","path","curr","class2type","_i","amd","a1","a2","a3","depends","hidden","NEWLINE","DOUBLELINE","odataFilters","neq","gt","gte","lt","lte","doesnotcontain","endswith","startswith","isnull","isnotnull","isnullorempty","isnotnullorempty","isempty","isnotempty","odataFiltersVersionFour","mappers","pageSize","page","useVersionFour","toOdataFilter","$filter","orderby","order","$orderby","skip","$skip","take","$top","defaultDataType","read","dataType","useOdataFour","logic","operator","ignoreCase","filters","stripMetadata","hex16","createBoundary","createDelimeter","boundary","close","createCommand","transport","httpVerb","command","transportUrl","commandPrefix","getOperationHeader","changeset","changeId","header","getOperationContent","content","getOperations","collection","skipContent","requestBody","processCollection","colection","getBoundary","createBatchRequest","colections","batch","batchURL","headers","Content-Type","updated","destroyed","created","parseBatchResponse","responseText","responseMarkers","markerIndex","collections","changeBody","status","code","marker","jsonModel","models","passed","parse","schemas","odata","results","total","transports","jsonp","update","create","parameterMap","$inlinecount","$format","odata-v4","$count","ajax","success","response","responses","XmlDataReader","model","errors","serialize","modelBase","Model","fields","idField","xpathToMember","evaluate","modelInstance","record","_parse","xmlParse","xml","parseDOM","parsedNode","attributes","attributeCount","firstChild","nextSibling","intermediateResult","tree","parseXML","raw","readers","features","ASCENDING","CREATE","READ","UPDATE","DESTROY","CHANGE","SYNC","GET","ERROR","REQUESTSTART","PROGRESS","REQUESTEND","crud","identity","o","objectKeys","ObservableObject","wrapAll","at","serializeFunctions","json","object","omitChangeEvent","howMany","children","thisArg","reduce","reduceRight","every","some","empty","Symbol","_parent","eventHandler","_notifyChange","ownKeys","ignoreObjectKeys","filteredObjectKeys","getOwnPropertyNames","getPrototypeOf","_handlers","uid","shouldSerialize","f","_set","composite","paths","isSetPrevented","change","isObservableArray","isDataSource","equal","xtype","ytype","parsers","boolean","default","getFieldByName","fieldName","_initializers","dirtyFields","_defaultId","editable","accept","isNew","Comparer","originalName","functionFields","nullable","defaultValue","compare","localeCompare","combine","comparers","StableComparer","asc","valueA","valueB","__position","desc","operators","textOp","impl","ignore","accentFoldingFiltering","toLocaleLowerCase","op","getMatchRegexp","esc","doesnotstartwith","n","doesnotendwith","doesnotmatch","Query","normalizeSort","descriptor","descriptors","sortFields","sorts","sortObject","filterExpr","expressions","and","or","fieldFunctions","operatorFunctions","operatorMap","==","equals","isequalto","equalto","!=","ne","notequals","isnotequalto","notequalto","notequal","<","islessthan","lessthan","less","<=","le","islessthanorequalto","lessthanequal",">","isgreaterthan","greaterthan","greater",">=","isgreaterthanorequalto","greaterthanequal","ge","notsubstringof","normalizeOperator","normalizeFilter","compareDescriptor","f1","f2","normalizeDescriptor","fieldComparer","compareFilters","expr1","expr2","filters1","filters2","normalizeAggregate","normalizeGroup","skipItemSorting","aggregates","normalizeGroupWithoutCompare","anyGroupDescriptorHasCompare","groupDescriptors","groupValueComparer","calculateAggregate","accumulator","state","aggr","functionName","aggregate","functions","toArray","range","inPlace","orderBy","orderByDescending","comparer","compiled","predicate","group","allData","groupPaging","groupAllData","hasSubgroups","itemCount","subgroupCount","groupBy","_sortForGrouping","groupValue","_sortGroups","sum","isNumber","average","isDate","val","process","customGroupSort","query","groupDescriptorsWithoutCompare","normalizedSort","groupDescriptorsWithoutSort","filterCallback","flatGroups","groupDescriptor","LocalTransport","RemoteTransport","Cache","setup","parameters","operation","_store","clear","serializeRecords","getters","originalFieldNames","fieldNames","setters","convertRecords","convertGroup","wrapDataAccess","originalFunction","converter","wrapDataAccessBase","store","inmemory","DataReader","schema","dataFunction","_dataAccessFunction","groupsFunction","serializeFunction","serializeGetters","fromName","_wrapDataAccessBase","fillLastGroup","originalGroup","newGroup","currOriginal","currentNew","mergeGroups","dest","indexFunction","groupsLength","indexFn","groupIndex","itemIndex","flattenGroups","wrapGroupItems","eachGroupItems","func","replaceInRanges","ranges","replaceInRange","replaceWithObservable","serverGrouping","viewIndex","removeModel","indexOfPristineModel","indexOfModel","fieldNameFromModel","convertFilterDescriptorsField","convertDescriptorsField","_map","_prefetch","_data","_pristineData","_ranges","_view","_pristineTotal","_destroyed","_pageSize","_page","_sort","_sortFields","_filter","_group","_aggregate","_total","_groupPaging","_groupsState","_shouldDetachObservableParents","Transport","pushCreate","_pushCreate","pushUpdate","_pushUpdate","pushDestroy","_pushDestroy","offlineStorage","_storage","getItem","localStorage","setItem","reader","_detachObservableParents","_observe","_online","serverSorting","serverPaging","serverFiltering","serverAggregates","inPlaceSort","online","sync","resolve","offlineData","_isServerGrouped","_isServerGroupPaged","_isGroupPaged","_push","_readData","_flatData","useRanges","getByUid","_getByUid","_storeData","_addRange","_process","_observeView","insert","_createNewModel","_wrapInEmptyGroup","_insertModelInRange","pushInsert","rangeSpan","_getCurrentRangeSpan","pushed","autoSync","pristine","pristineData","_updatePristineForModel","_removeItems","removePristine","shouldRemovePristine","found","_eachItem","_removePristineForModel","pushMove","_moveItems","moved","hasGroups","_removeModelFromRanges","promises","_sendSubmit","_send","when","then","_accept","_syncEnd","_change","cancelChanges","_cancelModel","_changesCanceled","_markOfflineUpdatesAsDirty","__state__","hasChanges","serverGroup","_handleCustomErrors","_executeOnPristineForModel","_eachPristineItem","_pristineForModel","_modelCanceled","_submit","reject","_promise","converted","_params","_queueRequest","isPrevented","_dequeueRequest","_readAggregates","replaceSubset","_serverGroupsTotal","_aggregateResult","itemIds","_skip","endless","_changeHandler","updatePristine","timestamp","_timeStamp","outerStart","outerEnd","_sortRanges","_groupsFlat","_appendToGroupsFlat","_updateOuterRangesLength","_getGroupByUid","xhr","errorThrown","_requestInProgress","_pending","_shouldWrap","arrayType","_updateTotalForAction","_calculateAggregates","_take","currentRangeStart","_clearEmptyGroups","_queryProcess","dataToAggregate","_setView","_setFilterTotal","_mergeState","_currentRangeStart","remote","moreItemsCount","_hasExpandedSubGroups","_findGroupedRange","itemsLength","groupCount","itemsToSkip","taken","_fetchGroupItems","_fetchingGroupItems","skipped","includeParents","excludeHeader","currentItems","_expandedSubGroupItemsCount","includeCurrentItems","subGroup","endSpecified","temp","groupItemsSkip","firstItem","lastItem","groupItemCount","expandedSubGroupItemsCount","getGroupItems","notFetched","subgroups","_composeItemsFilter","findSubgroups","_timeout","_groupItemsSuccessHandler","totalField","totalCount","_updateRangePristineData","countAdded","_currentRequestTimeStamp","_skipRequestsInProgress","indexOfCurrentGroup","rangesLength","currentGroup","dataLength","indexes","currIdx","_containsSubGroup","_cloneGroup","subgroup","currentSubGroup","filterTotal","setDefaultValue","fetch","_query","next","totalPages","prev","_pageableQueryOptions","getGroupsFlat","groupsTotal","includeExpanded","_calculateGroupsTotal","itemsField","ignoreState","_groupsTotal","countGroupRange","_emptyAggregates","ceil","inRange","_findRange","lastRange","firstItemUid","enableRequestsInProgress","pageSkip","_processRangeData","_originalPageSkip","_originalSize","_adjustPageSkip","_groupRangeExists","_rangeExists","prefetch","skipIdx","takeIdx","startIndex","endIndex","rangeData","rangeEnd","processed","flatData","groupMapOptions","prevRangeEnd","isGroupPaged","startField","endField","currentDataLength","_mergeGroups","_getRangesMismatch","mismatch","prevGroup","eventData","_omitPrefetch","paging","sorting","filtering","_prefetchSuccessHandler","_multiplePrefetch","prevRange","_getPrevRange","_getNextRange","availableItemsCount","_removeModelFromRange","_updateRangesLength","mismatchFound","mismatchLength","lengthDifference","rangeLength","inferSelect","firstField","secondField","optgroup","label","specified","inferTable","tbody","tBodies","rows","fieldIndex","fieldCount","cells","cell","transportOptions","Node","hasChildren","childrenField","childrenOptions","hasChildrenObject","_childrenOptions","_initChildren","_loaded","_updateChildrenField","append","loaded","level","_childrenLoaded","load","_matchFilter","dataMethod","_attachBubbleHandlers","_hierarchicalFilter","_markHierarchicalQuery","_updateHierarchicalFilter","_find","inferList","list","textField","urlField","spriteCssClassField","imageUrlField","textChild","_dataSource","Buffer","viewSize","disablePrefetch","_prefetching","_reset","_syncWithDataSource","setViewSize","_recalculate","itemPresent","dataOffset","prefetchThreshold","midPageThreshold","nextMidRange","nextPageThreshold","nextFullRange","pullBackThreshold","previousMidRange","previousFullRange","_goToRange","nextRange","syncDataSource","prefetchOffset","expanding","_expanding","_syncPending","_firstItemUid","BatchBuffer","batchSize","batchBuffer","endreached","prefetching","prefetched","reset","advanced","OPEN","CLOSE","DEACTIVATE","ACTIVATE","CENTER","TOP","BOTTOM","ABSOLUTE","HIDDEN","BODY","LOCATION","POSITION","VISIBLE","EFFECTS","ACTIVE","ACTIVEBORDER","ACTIVEBORDERREGEXP","ACTIVECHILDREN","MOUSEDOWN","DOCUMENT_ELEMENT","WINDOW","SCROLL","cssPrefix","TRANSFORM","NS","Popup","parentPopup","origin","collisions","collision","downEvent","anchor","_hovered","scrollArea","animation","open","_activated","_trigger","_animationClose","_mousedownProxy","_mousedown","_resizeProxy","toggleTarget","toggleEvent","viewport","copyAnchorStyles","modal","adjustSize","transition","omitOriginOffsets","_hideDirClass","_closing","_toggleResize","fixed","isFixed","flipped","_position","_openAnimation","_showDirClass","show","_location","direction","dirClass","slideIn","skipEffects","openEffects","closeEffects","popup","ev","_resizeTimeout","_scrollableParents","_fit","viewPortSize","output","_flip","anchorSize","boxSize","isWindow","origins","positions","siblingContainer","parentZIndex","zIndex","viewportOffset","viewportWidth","viewportHeight","siblings","_align","pos","offsetParent","anchorParent","offsets","flipPos","elementHeight","wrapperHeight","verticalOrigin","horizontalOrigin","verticalPosition","horizontalPosition","anchorOffset","appendToOffset","anchorWidth","anchorHeight","tabKeyTrapNS","focusableNodesSelector","TabKeyTrap","trap","_keepInTrap","removeTrap","shouldTrap","which","_focusableElements","sortedElements","_sortFocusableElements","_nextFocusable","_focus","tabIndex","attrName","contentWindow","_haveSelectionRange","elementType","percentageUnitsRegex","ID","FOCUSED","HOVER","KSELECTED","LOADING","LIST","TABLE","DATA_TABLE","TABLE_MD","LIST_UL","TABLE_LIST","FIXED_GROUP_HEADER","GROUP_LABEL","ITEMSELECTOR","LABELIDPART","CASCADE","SELECT","CLICK","MOUSELEAVE","MOUSEENTER","DATA_BINDING","DATA_BOUND","SELECTED_ITEM_CHANGE","SELECTED","BLUR","FOCUS","FOCUSOUT","HIDDENCLASS","WIDTH","TEXT","VALUE","isIE","quotRegExp","alternativeNames","ComboBox","DropDownList","MultiColumnComboBox","UL_EL","LIST_EL","NO_DATA_EL","LIST_FOOTER_EL","TABLE_FOOTER_EL","LIST_SUFFIX","LISTBOX_SUFFIX","ARIA_LABELLEDBY","ARIA_LABEL","ARIA_ACTIVEDESCENDANT","ARIA_AUTOCOMPLETE","ARIA_CONTROLS","ARIA_LIVE","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_BUSY","ARIA_MULTISELECTABLE","ARIA_SELECTED","GROUP_ROW_SEL","List","_isSelect","dataTextField","dataValueField","_listSize","ul","aria-hidden","columns","_columnsHeader","_header","_noData","_footer","_accessors","_initValue","valuePrimitive","footerTemplate","headerTemplate","noDataTemplate","noData","_renderFooter","_renderNoData","_focused","readonly","_editable","_angularElement","before","columnsHeader","colGroup","row","currentColumn","title","columnsHeaderTemplate","currentWidth","currentWidthInt","widthStyle","prepend","footer","footerEl","_listOptions","virtual","changeEventOption","_listChange","listBoundHandler","_listBound","focusedElm","inputId","labelElm","labelledBy","_generateLabelId","autoBind","selectable","_click","activate","_activateItem","deactivate","_deactivateItem","dataBinding","dataBound","groupTemplate","fixedGroupTemplate","ariaLabel","ariaLabelledBy","listSize","$angular","_initList","listOptions","selectedItemChange","listView","StaticList","VirtualList","_setListValue","_updateSelectionState","_listMousedown","filterInput","_isFilterEnabled","_hideClear","_clear","_showClear","_clearValue","_clearText","_accessor","_customOption","enforceMinLength","word","highlightFirst","_clearFilter","bound","_filterSource","isMultiColumnFiltering","filterFields","resetPageSettings","removed","removeFiltersForField","_clearFilterExpressions","newExpression","_pushFilterExpression","isValidFilterExpr","_cascading","setDSFilter","dataSourceState","filtersToRemove","_toggleNoData","_toggleHeader","groupHeader","_allowOpening","_old","_ignoreCase","candidate","widgetOptions","fromFilter","_buildExpression","_open","_clearButton","clearTitle","clearButton","_inputValue","_typingTimeout","minLength","_state","_emptySearch","_searchByWord","_unbindDataSource","_form","_resetHandler","selectedDataItems","valueField","_text","_value","_aria","autocomplete","suggest","aria-owns","aria-controls","_ariaLabel","inputElm","labelId","_blur","_userTriggered","_isValueChanged","unifyType","selectedIndex","optionValue","_valueBeforeCascade","_oldIndex","isFiltered","_typing","typing","_enable","_dataValue","_offsetHeight","prevAll","_height","isMccb","offsetTop","popups","_openHandler","_adjustListWidth","computedWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","autoWidth","minWidth","whiteSpace","_closeHandler","_focusItem","noFocusedItem","scrollToIndex","_calculateGroupPadding","li","padding","_calculatePopupHeight","_calculateColumnsHeaderPadding","_refreshScroll","enableYScroll","overflowX","overflowY","_resizePopup","_popup","_toggleHover","currentTarget","_toggle","preventFocus","touchEnabled","MSPointers","_prevent","_triggerCascade","_cascadeTriggered","_cascadedValue","userTriggered","_triggerChange","_requestStartHandler","_requestEndHandler","_errorHandler","requireValueMapper","hasValue","valueMapper","Select","_initial","setDataSource","_initialIndex","_current","_parentWidget","_cascadeSelect","_select","_cascadeValue","_accessorInput","_accessorSelect","getSelectedOption","selected","_custom","_syncValueAndText","custom","_hideBusy","_busy","_arrowIcon","_showBusy","_request","_requestEnd","_firstItem","focusFirst","_lastItem","focusLast","_nextItem","focusNext","_prevItem","focusPrev","_getNormalizedDataItem","isIndex","hasOptionLabel","optionLabel","getElementIndex","dataItemByIndex","_getNormalizedSelectCandidate","normalizedCandidate","_move","isVirtual","pressed","moveIndex","selectCandidate","altKey","_fetch","_get","activeFilter","shouldTrigger","_focusElement","focusout","scrollWith","_fetchData","hasItems","cascadeFrom","_options","htmlElement","dataText","dataValue","formId","parentElement","_cascade","cascade","_cascadeHandlerProxy","_cascadeHandler","_cascadeFilterRequests","_selectedValue","_toggleCascadeOnFocus","valueBeforeCascade","_clearSelection","_cascadeChange","filterValue","cascadeFromParentField","cascadeFromField","currentHandler","STATIC_LIST_NS","_touchHandlers","thead","_optionID","_selectedIndices","_dataItems","_values","_getter","_templates","_onScroll","_scrollId","_renderHeader","_refreshHandler","_fixedHeader","startY","endY","tapPosition","pageY","_touchTriggered","_triggerClick","_render","scroll","itemOffsetTop","itemOffsetHeight","contentScrollTop","contentOffsetHeight","bottomDistance","_getValues","_valueGetter","hasCandidate","focusIndex","skipUpdate","_skipUpdate","indices","singleSelection","selectedIndices","uiSelectedIndices","added","filtered","_deselectFiltered","_deselect","_valueComparer","removeAt","setValue","_valueDeferred","_valueIndices","_valueExpr","normalized","_valueType","_dataItemPosition","valueExpr","removedIndices","_template","templates","templateText","_normalizeIndices","newIndices","_firstVisibleItem","itemHeight","lastChild","forward","previousSibling","isGrouped","visibleItem","_renderItem","notFirstItem","hasColumns","altRow","isLastGroupedItem","_renderColumns","dataContext","_selected","_lastDSFilter","skipUpdateOnBind","isItemChange","mapChangedItems","changed","unchanged","_bound","itemsToMatch","selectedLength","scaleProperties","scale","scalex","scaley","scale3d","translateProperties","translate","translatex","translatey","translate3d","hasZoom","zoom","matrix3dRegExp","cssParamsRegExp","translateXRegExp","oldEffectsRegExp","singleEffectRegExp","unitRegExp","transformProps","transform2d","transform2units","rotate","skew","BLANK","PX","NONE","AUTO","HEIGHT","ORIGIN","ABORT_ID","OVERFLOW","TRANSLATE","COMPLETE_CALLBACK","TRANSITION","BACKFACE","PERSPECTIVE","DEFAULT_PERSPECTIVE","TRANSFORM_PERSPECTIVE","vertical","modifier","horizontal","stopQueue","animationProperty","transformValue","step","elem","now","curProxy","cur","parseInteger","parseCSS","acc","propertyName","strip3DTransforms","normalizeCSS","transformation","cssValues","lowerKey","isTransformed","exclusive","ease","mirror","redirectedEffect","resolved","$1","$2","effect","effectBody","oldKeys","timeoutID","stopTransitionCalled","stopTransition","speeds","merge","uniqueSort","unique","taskKeys","retainPosition","transform","computed","atan2","EffectSet","restore","run","jdx","childrenLength","setReverse","addRestoreProperties","prepare","effectName","restoreCallback","Effect","effectClass","effectSet","parsedEffects","capitalize","useTransition","multiple","single","originalPosition","dX","dY","marginLeft","marginTop","_direction","_additionalEffects","_reverse","play","additional","_duration","compositeRun","_complete","shouldHide","createEffect","definition","opt1","opt2","opt3","theDirection","FOUR_DIRECTIONS","IN_OUT","createToggleEffect","defaultStart","defaultEnd","startValue","_startValue","endValue","_endValue","_shouldHide","startDataValue","startDataValueIsSet","divisor","tmp","previous","previousDivisor","margin","setLength","oldLength","realLength","TRANSFER_START_STATE","CLIPS","outerBox","box","innerBox","currentScale","fillScale","transformOrigin","ROTATIONS","clipInHalf","_container","rotation","_clipInHalf","clip","face","_face","temporary","back","reverseDirection","faceClone","backClone","staticPage","turningPage","transformStyle","RESTORE_OVERFLOW","IGNORE_TRANSITION_EVENT_SELECTOR","Animation","_before","_after","transitionClass","_previous","_transitionClass","beforeTransition","afterTransition","_both","_element","_containerClass","containerClass","completeProxy","isAbsolute","both","originalOverflow","_tickProxy","_tick","_started","tick","onEnd","onCancel","Transition","timePassed","startDate","moveTo","movable","initial","_easeProxy","moveAxis","easeOutExpo","easeOutBack","inner","outer","fitScale","OS","invalidZeroEvents","DEFAULT_MIN_HOLD","CLICK_DELAY","DEFAULT_THRESHOLD","PRESS","HOLD","START","MOVE","CANCEL","TAP","DOUBLETAP","RELEASE","GESTURESTART","GESTURECHANGE","GESTUREEND","GESTURETAP","THRESHOLD","api","mouse","pointer","ENABLE_GLOBAL_SURFACE","touchDelta","touch1","touch2","x1","y1","x2","y2","dx","dy","center","distance","sqrt","getTouches","identifier","pointerId","TouchAxis","_updateLocationData","startLocation","velocity","timeStamp","timeDelta","initialDelta","Touch","userEvents","touchInfo","useClickAsTap","initialTouch","pressEvent","_clicks","supportDoubleTap","_moved","_finished","press","_holdTimeout","minHold","_tap","_clickTimeout","_hold","preventMove","_shouldNotMove","_withinIgnoreThreshold","UserEvents","_start","dispose","endTime","activeTouches","isMoved","startTime","xDelta","yDelta","withEachUpEvent","downEvents","_maxTouches","multiTouch","allowSelection","captureUpIfMoved","fastTap","eventNS","surface","global","ownerDocument","defaultAction","touchAction","preventDragEvent","root","surfaceElement","preventIfMovingProxy","preventIfMoving","_isMoved","removeEventListener","_disposeAll","capture","_isMultiTouch","_apiCall","_maxTouchesReached","_eachTouch","_end","pageX","methodName","matchingTouch","defaultThreshold","$window","draggables","dropTargets","dropAreas","lastDropTarget","KEYUP","DRAGSTART","DRAG","DRAGEND","DRAGCANCEL","HINTDESTROYED","DRAGENTER","DRAGLEAVE","DROP","numericCssPropery","within","containerBoundaries","minX","minY","maxX","maxY","checkTarget","targets","areas","theTarget","theFilter","targetLen","areaLen","targetElement","TapCapture","_press","_release","attachEvent","captureNext","cancelCapture","PaneDimension","forcedEnabled","measure","scrollSize","makeVirtual","_virtualMin","_virtualMax","virtualSize","outOfBounds","forceEnabled","getTotal","rescale","silent","scaledTotal","minScale","centerOffset","PaneDimensions","forcedMinScale","maxScale","newScale","centerCoordinates","PaneAxis","dimension","dragMove","resistance","translateAxis","Pane","elastic","gesturestart","gesture","gesturechange","previousGesture","previousCenter","scaleDelta","coordinates","offsetX","offsetY","scaleWith","TRANSFORM_STYLE","Movable","webkitTransformOrigin","_saveCoordinates","by","scaleTo","newCoordinates","destroyDroppable","groupName","droppables","DropTarget","draggable","dropTarget","_over","_out","_drop","dropped","DropTargetArea","destroyGroup","_cache","Draggable","hold","_drag","_cancel","_afterEndHandler","_afterEnd","_captureEscape","cursorOffset","holdToDrag","autoScroll","cancelHold","_updateHint","boundaries","hintOffset","hint","_shouldIgnoreTarget","ignoreSelector","currentTargetOffset","scopeTarget","scopeFrom","cursorElement","_elementUnderCursor","_cursorElement","_scrollableParent","findScrollableParent","_lastEvent","_processMovement","autoScrollVelocity","scrollableViewPort","_scrollCompenstation","_scrollVelocity","clearInterval","_scrollInterval","setInterval","_withDropTarget","_autoScroll","compensation","yIsScrollable","xIsScrollable","isRootNode","scrollableRoot","yInBounds","xInBounds","initialTarget","mouseX","mouseY","rect","AUTO_SCROLL_AREA","utils","SNAPBACK_DURATION","SCROLLBAR_OPACITY","FRICTION","VELOCITY_MULTIPLIER","MAX_VELOCITY","OUT_OF_BOUNDS_FRICTION","ANIMATED_SCROLLER_PRECISION","RELEASECLASS","REFRESHCLASS","PULL","RESIZE","MOUSE_WHEEL_ID","ZoomSnapBack","tapCapture","DragInertia","freeze","_moveTo","paneAxis","_snapBack","velocityMultiplier","friction","snapBack","AnimatedScroller","_updateCoordinates","setCoordinates","setCallback","ScrollBar","controlsId","elementSize","scrollMovable","alwaysVisible","paneSize","sizeRatio","_ariaValue","visibility","_native","scrollElement","fixedContainer","wrapInner","avoidScrolling","velocityX","velocityY","horizontalSwipe","originatedFromFixedContainer","verticalSwipe","pane","zoomSnapBack","animatedScroller","scrollTo","mousewheelScrolling","pulled","_initAxis","_wheelEnd","_wheel","_wheelY","pullToRefresh","_initPullToRefresh","_wheelScroll","ctrlKey","_wheelTimeout","pullOffset","visibleScrollHints","pullTemplate","releaseTemplate","refreshTemplate","contentResized","_scale","zoomOut","animatedScrollTo","pullHandled","refreshHint","hintContainer","yinertia","xinertia","_paneChange","_dragEnd","elementId","scrollBar","LIST_CONTENT","TABLE_CONTENT","HEADER","LIST_ITEM","TABLE_ITEM","HEIGHTCONTAINER","GROUPITEM","LISTBOUND","ITEMCHANGE","VIRTUAL_LIST_NS","lastFrom","isPrimitive","getItemCount","listScreens","getDefaultItemHeight","mockList","lineHeight","bufferSizes","opposite","listValidator","downThreshold","upThreshold","lastScrollTop","scrollCallback","syncList","reorder","webkitTransform","map2","arr1","arr2","reshift","itemTemplate","placeholderTemplate","renderColumns","isActivePromise","contentClasses","_fetching","_selectedDataItems","_selectedIndexes","_rangesList","_promisesList","_renderItems","_triggerListBound","_selectable","oppositeBuffer","mapValueTo","itemClass","_selectProxy","_items","_clean","_deferValueSet","mute","_selectingValue","_highlightSelectedItems","_getElementByDataItem","_mute","_createList","_removeSelectedDataItem","valueGetter","_forcePrefetch","shouldClear","_prefetchByValue","_checkValuesOrder","_removedAddedIndexes","newValue","dataView","_dataView","forSelection","mapValueToIndex","mapValueToDataItem","_getIndecies","deferredRange","defs","low","high","pages","existingRange","isEmptyList","_activeDeferred","_getSkip","_findDataItem","_getRange","triggerEvent","_getElementByIndex","_focusedIndex","_getElementLocation","_screenHeight","heightContainer","initialIndices","prefetchStarted","isAlreadySelected","_selectDeferred","_deselectCurrentValues","_listCreated","_lastScrollTop","hasData","setScreenHeight","yPosition","yDownPostion","screenEnd","_generateItems","minHeight","_saveInitialRanges","_buildValueGetter","_setHeight","getList","_listItems","_whenChanged","_reorderList","currentHeight","padHeight","lastRequestedRange","lastRangeStart","rangeStart","_getterDeferred","firstItemIndex","_indexConstraint","flatGroup","groupLength","currentVisibleGroup","firstVisibleDataItemIndex","firstVisibleDataItem","firstVisibleGroup","fixedGroupText","_itemMapper","listType","currentIndex","_currentGroup","_range","_getDataItemsCollection","_listIndex","theValidator","theNew","currentOffset","Infinity","list2","range2","_bufferSizes","buffers","elementIndex","selectedIndexes","removedindexesCounter","_deselectSingleItem","oldSkip","_clickHandler","HTMLBase","stylingOptions","_addClasses","outerHTML","KBUTTON","KBUTTONICON","KBUTTONTEXT","renderButton","HTMLButton","iconElement","_textElement","icon","iconClass","spriteCssClass","imageUrl","shape","span","img","isEmpty","contents","newSpan","createTextNode","replaceChild","classList","placeholderSupported","nsFocusEvent","DISABLED","READONLY","STATEDISABLED","ARIA_DISABLED","ARIA_READONLY","AUTOCOMPLETEVALUE","STATE_FILTER","STATE_ACCEPT","STATE_REBIND","HOVEREVENTS","newLineRegEx","NON_PRINTABLE_KEYS","_focusHandler","_wrapper","_input","_attachFocusEvents","_setText","_placeholder","_toggleCloseVisibility","syncValueAndText","_pasteTimeout","_arrow","_oldText","hasText","isCustom","_inputFocus","_inputFocusout","_arrowClick","isClearButton","_inputPaste","arrow","_keydown","_search","reinitialized","_openPopup","_scrollToFocusedItem","_buildOptions","_updateSelection","initialIndex","hasInitialIndex","_selectValue","_updateItemFocus","isActive","isFirstPage","_presetValue","keepState","_setDomInputValue","currentCaret","caretStart","_prev","preventShow","caretIdx","_last","loweredText","accessKey","SELECTOR","maxLength","arrowBtn","aria-expanded","insertAfter","isFkey","isNonPrintableKey","_preselect","CLICKEVENTS","MSG_INVALID_OPTION_LABEL","_focusInputHandler","_focusInput","_optionLabel","_inputTemplate","_word","_span","_mobile","_filterHeader","_attachFocusHandlers","_attachAriaActiveDescendant","_textAccessor","_optionLabelText","valueTemplate","optionLabelTemplate","filterTitle","_resizeFilterInput","_focusFilter","originalPrevent","isInputActive","_optionLabelDataItem","_valueSetter","_assignInstance","optionLabelValue","_filterPaste","_focusinHandler","_focusoutHandler","isIFrame","self","_wrapperMousedown","_wrapperClick","dropDownWrapper","_keypress","handled","isPopupVisible","_getElementDataItem","_matchText","_shuffleData","splitIndex","optionDataItem","_selectNext","isInLoop","sameCharsOnly","oldFocusedItem","normalizeIndex","character","charCode","_popupOpen","active","compareElement","jQueryCandidate","_resetOptionLabel","focusedItem","additionalClass","filterTemplate","aria-label","aria-haspopup","aria-autocomplete","DOMelement","accesskey","unselectable","optionLabelText","getElements","assign","HORIZONTAL","VERTICAL","RESIZEEND","Resizable","orientation","_positionMouse","_sizingDom","draggableElement","drag","dragcancel","dragstart","dragend","_stop","_max","hintSize","_initialElementPosition","_min","_initialMousePosition","_maxPosition","_minPosition","maxPosition","minPosition","currentPosition","invalidClass","resizing","targetPosition","MODAL_NS","KWINDOW","KWINDOWTITLE","KWINDOWTITLEBAR","KWINDOWCONTENT","KDIALOGCONTENT","KWINDOWRESIZEHANDLES","KOVERLAY","KCONTENTFRAME","KHOVERSTATE","KFOCUSEDSTATE","MAXIMIZEDSTATE","INLINE_FLEX","CURSOR","REFRESH","MINIMIZE","MAXIMIZE","RESIZESTART","RESTORE","KENDOKEYDOWN","DATADOCOVERFLOWRULE","ZINDEX","MINIMIZE_MAXIMIZE","KPIN","KUNPIN","PIN_UNPIN","TITLEBAR_BUTTONS","REFRESHICON","WINDOWEVENTSHANDLED","zero","SIZE","small","medium","large","defined","toInt","constrain","normalizedValue","executableScript","getPosition","offsetLeft","parentOverflowX","parentOverflowY","Window","isVisible","windowContent","windowFrame","globalWindow","suppressActions","actions","containment","_createWindow","_dimensions","minTop","minLeft","maxTop","maxLeft","toFront","_overlay","_buttonEnter","_buttonLeave","_windowActionHandler","_keydownContent","windowInstance","not","_resizable","_draggable","pinned","pin","aria-labelledby","_resizeHandler","_onDocumentResize","_marker","_tabKeyTrap","maxHeight","sizeClass","contentBoxSizing","lrBorderWidth","tbBorderWidth","paddingTop","_isPinned","_updateBoundaries","maxWidth","containmentTop","containmentLeft","_animationOptions","basicAnimation","resizable","toggleMaximization","resizeHandle","WindowResizing","dragging","WindowDragging","dragHandle","_actions","titlebar","windowSpecificCommands","doc","cachedOptions","_containerScrollTop","_containerScrollLeft","scrollable","_enableDocumentScrolling","fade","autoFocus","isMaximized","isMinimized","_closable","_close","newWidth","newHeight","w","h","unpin","maximize","minimize","overlay","insertBefore","preventScroll","_stopDocumentScrolling","_actionForIcon","k-i-close","k-i-window-maximize","k-i-window-minimize","k-i-window-restore","k-i-refresh","k-i-pin","k-i-unpin","_modals","windowElements","modals","_object","documentWindow","newTop","newLeft","_scrollIsAppended","encoded","titleBar","titleElement","scrollContainer","showOptions","contentElement","otherModalsVisible","containmentContext","Fade","overlayFx","fadeIn","_activate","_removeOverlay","suppressAnimation","hideOverlay","hideOptions","fadeOut","systemTriggered","defaultPrevented","_deactivate","iframe","lastModal","_actionable","_shouldFocus","avoidFocus","currentWindow","openAnimation","originalZIndex","windowObject","zIndexNew","windowTop","restoreOptions","shouldRestrictTop","_sizingAction","actionId","_storeOverflowRule","$body","$html","_restoreOverflowRule","$element","_isOverflowStored","overflowRule","win","wnd","initOptions","showIframe","_ajaxRequest","contentFrame","_triggerRefresh","_ajaxComplete","_loadingIconTimeout","_ajaxError","_ajaxSuccess","contentTemplate","_showLoading","contentHtml","iframeSrcAttributes","editor","owner","_preventDragging","addOverlay","removeOverlay","elementPadding","initialPosition","resizeDirection","initialSize","containerOffset","hasMargin","wrapperPosition","relativeElMarginLeft","relativeElMarginTop","_relativeElMarginLeft","_relativeElMarginTop","rtl","leftRtlOffset","scrollOffset","windowBottom","windowRight","newWindowTop","initialWindowPosition","initialPointerPosition","startPosition","_finishDrag","namedColors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","matchNamedColor","color","colorNames","regexp","BaseColor","toHSV","toRGB","toHex","toBytes","toCss","toCssRgba","rgb","toDisplay","parseColor","other","NaN","c1","c2","r","Bytes","RGB","ref","HSV","toHSL","l","HSL","hex","alpha","p","q","hue2rgb","alphaFromHex","DARK_TRESHOLD","Color","this$1","resolvedColor","resolveColor","formatRegex","re","processor","channels","normalizeByte","padDigit","brightness","percBrightness","isDark","fromBytes","fromRGB","fromHSV","fromHSL","SLIDE","MOUSE_DOWN","TRACK_MOUSE_DOWN","MOUSE_UP","TRACK_MOUSE_UP","MOVE_SELECTION","KEY_DOWN","MOUSE_OVER","DRAG_HANDLE","TRACK_SELECTOR","TICK_SELECTOR","STATE_SELECTED","STATE_FOCUSED","STATE_DISABLED","ARIA_VALUETEXT","ARIA_VALUENOW","SliderBase","_isHorizontal","_isRtl","_sizeFn","_outerSize","tooltip","smallStep","_createHtml","_trackDiv","_maxSelection","_sliderItemsInit","rtlDirectionSign","_keyMap","37","40","39","38","35","36","33","largeStep","34","tickPlacement","_distance","_refresh","sizeBetweenTicks","pixelWidths","_calculateItemsWidth","removeFraction","createSliderItems","_setItemsTitle","_calculateSteps","_setItemsLargeTick","titleNumber","valueWithoutFraction","itemsCount","trackDivSize","preciseItemsCount","pixelStep","itemWidth","_roundWidths","pixelWidthsArray","balance","_addAdditionalSize","additionalSize","_pixelSteps","_getValueFromPosition","mousePosition","draggableArea","halfStep","startPoint","_getFormattedValue","tooltipTemplate","_getDraggableArea","endPoint","inputs","formatValue","createWrapper","showButtons","after","createButton","createTrack","_firstHandleDrag","_activeHandle","_lastHandleDrag","_activeHandleDrag","_updateTooltip","_focusWithMouse","_setTooltipTimeout","_removeTooltip","_tooltipTimeout","_clearTooltipTimeout","tooltipDiv","_formResetHandler","isHorizontal","orientationCssClass","cssClasses","tickPlacementCssClass","buttonCssClass","dragHandleCount","firstDragHandleTitle","leftDragHandleTitle","dragHandleTitle","elementValue","minElementValue","maxElementValue","rightDragHandleTitle","stepValue","calculatePrecision","power","parseAttr","Slider","_selection","Selection","Drag","_refreshAriaAttr","increaseButtonTitle","decreaseButtonTitle","clickHandler","_update","newVal","_nextValueByIndex","_valueIndex","_setValueInRange","mouseDownHandler","timer","_clearTimer","formattedValue","_tooltipDiv","RangeSlider","moveSelection","selectionValue","selectionDiv","rtlCorrection","_dragstart","_activeDragHandle","_setZIndex","oldVal","_createTooltip","calloutCssClass","tooltipInnerDiv","_scrollOffset","moveTooltip","slideParams","constrainValue","noAnimation","callout","dragHandles","sdhOffset","viewPortEnd","maxOverflow","firstInput","secondInput","warn","selectionStartValue","selectionEndValue","dragSelectionStart","dragSelectionEnd","activeHandleDrag","selectionStartIndex","selectionEndIndex","makeSelection","selectionPosition","iconTemplate","svgIconTemplate","Badge","_content","_appearance","cutoutBorder","align","_classNames","_themeColor","_shape","_sizes","_fill","_cutoutBorder","_visible","_updateClassNames","classNames","keepClassNames","sizeAbbr","iconTemplateFunction","_icon","MOUSEUP","MOUSEOUT","DISABLEDSTATE","FOCUSEDSTATE","SELECTEDSTATE","BUTTON_DEFAULTS","Button","badge","_badge","_removeActive","_addActive","_isNativeButton","err","badgeOptions","badgeEelement","button","binders","SOURCE","EVENTS","CHECKED","CSS","deleteExpando","Binding","dependencies","_access","_parents","dependency","currentSource","EventBinding","TemplateBinding","Binder","bindings","binding","TypedBinder","parsedValue","_parseValue","dataSourceBinding","bindingName","_dataBinding","_dataBound","_itemChange","itemChange","bindElement","_ns","removedItems","unbindElementTree","all","addedItems","hds","addedDataItems","multiselect","dropdowntree","MultiSelect","DropDownTree","treeview","retrievePrimitiveValues","dataFormat","invisible","valueUpdate","_initChange","cloneNode","reference","unbindElementChildren","checked","valueIndex","sourceValue","optionIndex","check","floatingLabel","_valueIsObservableObject","_valueIsObservableArray","_source","isObservableObject","valueLength","sourceItem","oldValues","selectedNode","nonPrimitiveValues","_isMultipleSelection","_getAllChecked","newLength","old","same","removeIndex","arraySplice","selectedValue","gantt","_isBound","scheduler","grid","addLength","shifted","shiftedLength","BindingTarget","toDestroy","hasSource","hasEvents","hasChecked","hasCss","widgetBinding","WidgetBindingTarget","specificBinders","applyBinding","binder","bindingTargetForRole","keyValueRegExp","whiteSpaceRegExp","parseBindings","token","colonIndex","createBindings","childrenCopy","unbindElement","dom","destroyWidget","bindingTarget","destroyWidgets","namespace","observableHierarchy","recursiveRead","FLOATINGLABELCONTAINER","NOCLICKCLASS","STATEREADONLY","FloatingLabel","useReadOnlyClass","INPUT","LABELCLASSES","TextBox","_label","unwrap","_floatingLabelContainer","_inputLabel","_focusin","_focusout","floating","labelText","DOMElement","extractFormat","SPIN","TOUCHEND","SYMBOL","CLASS_ICON","STATEINVALID","INTEGER_REGEXP","NumericTextBox","isStep","inputType","_initialOptions","_arrows","_validation","selectValue","factor","restrictDecimals","spinners","selectOnFocus","upArrowText","downArrowText","_toggleText","_upArrowEventHandler","_downArrowEventHandler","_spin","_upArrow","_downArrow","_keyup","_paste","_inputHandler","_arrowsWrap","aria-valuemin","aria-valuemax","_option","adjusted","_adjust","arrows","_spinning","buttonHtml","release","_validationIcon","_focusing","_format","groupRegExp","extractRegExp","caretPosition","_getFactorValue","_culture","_removeInvalidState","_numPadDot","_step","_cachedCaret","decimalSeparator","minInvalid","_isPasted","_numericRegex","_blinkInvalidState","_addInvalidState","_invalidStateTimeout","separator","fractionRule","_separator","_floatRegExp","originalValue","rounder","truncate","isNotNull","ColorSelector","ariaId","_tabIndex","_ariaId","_standalone","_triggerSelect","_updateUI","_onEnable","nohooks","_selectOnHide","colorpicker","AA_CONTRAST","AAA_CONTRAST","STEP_COUNT","getContrast","luminance1","luminance2","brightest","darkest","getContrastFromTwoRGBAs","getLuminance","getRGBFromRGBA","foregroundColor","backgroundColor","r1","fitIntoBounds","b1","r2","g2","b2","contender","isPresent","renderSvgCurveLine","gradientRectMetrics","hsva","findValue","contrast","saturation","mid","currentHsva","currentContrast","getColorFromHSV","reversedComparer","getPaths","stepCount","reversed","points","bezierCommandCalc","bezierCommand","controlPoint","line","svgPath","reducer","point","controlPointCalc","cps","cpe","lineCalc","smooth","angle","PI","cos","sin","pointA","pointB","lengthX","lengthY","hue","contrastToolUtils","KEYS","BACKGROUNDCOLOR","WHITE","BLACK","KEYDOWN_NS","ColorInput","_viewModel","switchMode","keydown","mode","_color","_preventChangeEvent","currentFormat","_tryParseColor","textbox","ColorGradient","previewInput","_hueElements","_colorgradientInputs","_contrastTool","_sliders","_hsvArea","_colorInput","contrastTool","contrastRatio","pass","toggleFormat","_hueSlider","_opacitySlider","_hsvRect","hueSlider","opacitySlider","hueChange","_getHSV","kendoSlider","slide","opacityChange","hsvRect","hsvHandle","rw","rh","_svChange","_hsvEvents","_hsvHandle","setBackgroundColor","_updateColorContrast","dontChangeInput","_updateHsv","_resetHsv","_resetColorContrast","contrastOptions","contrastRatioTemplate","labelTemplate","ratio","limit","_updateContrastSvg","svgClassName","metrics","newSvg","handlePosition","_selectedColor","_colorAsText","ITEMSELECTEDCLASS","ITEMSFOCUSEDCLASS","SIMPLEPALETTE","WEBPALETTE","CLICK_NS","BLUR_NS","relative","ColorPalette","palette","_selectedID","tileSize","ex","MESSAGES","NO_COLOR","PREVIEW_MASK","VIEWS","gradient","FlatColorPicker","autoupdate","_previousColor","_viewsContainer","_changeView","_setViewSize","_clearColor","viewButton","buttons","preview","noColor","clearColor","_updatePreviousColor","selectedColor","hsvColor","_cachedHue","dontChangeView","previewWidth","previewHeight","previewColumns","setProperty","buttonOptions","ColorPicker","_buttonHtml","_inputWrapper","_selector","closeOnSelect","toolIcon","ARIATemplate","_getPopup","selOptions","_noColorIcon","_isInputTypeColor","dontChangeSelector","_ariaTemplate","selectorType","selectorWrapper","kendoPopup","clickedOutside","MouseEvent","ToggleInputBase","_initSettings","_attachEvents","RENDER_INPUT","inputMethod","renderCheckBox","HTMLCheckBox","renderRadioButton","HTMLRadioButton","HTMLInput","labelPosition","inputClass","labelEl","labelClass","wrapperHtml","CheckBox","ARIASELECTED","SELECTABLE","UNSELECT","UNSELECTING","INPUTSELECTOR","supportEventDelegation","Selectable","_marquee","_lastActive","tap","inputSelectors","ignoreOverlapped","addIdToRanges","_isElement","metaKey","selectedClass","whichCode","buttonCode","_allowSelection","selectRange","_firstSelectee","_unselect","_notify","_downTarget","currentElement","useAllItems","_selectElement","_invalidateSelectables","rangeSelectedAttr","_currentlyActive","toSelect","_collidesWithActiveElement","marqueeRect","activeElements","elemRect","getBoundingClientRect","activeElementRect","tempRect","overlaps","selectElement","selectedRanges","rangeId","mapLocation","selectedSingleItems","preventNotify","aria","resetTouchEvents","continuousItems","elementPosition","firstRect","secondRect","selectableMode","asLowerString","transitionOrigin","cellTemplate","emptyCellTemplate","otherMonthCellTemplate","weekNumberTemplate","MIN","MONTH","CENTURY","NAVIGATE","OTHERMONTH","OUTOFRANGE","TODAY","CELLSELECTOR","CELLSELECTORVALID","WEEKCOLUMNSELECTOR","FOCUS_WITH_NS","MOUSEENTER_WITH_NS","PREVARROW","NEXTARROW","DATE","decade","century","HEADERSELECTOR","CLASSIC_HEADER_TEMPLATE","MODERN_HEADER_TEMPLATE","Calendar","disableDates","getDisabledExpr","_viewWrapper","hasFooter","_today","mousetoggle","link","toDateObject","_focusView","focusOnNav","_setCurrent","normalize","_selectDates","_index","restrictValue","_addClassProxy","_active","_cell","todayString","toDateString","getToday","_cellByDate","_removeClassProxy","selectDates","dates","depth","weekColumnHeader","classic","linksSelector","modern","_destroySelectable","navigate","_title","_table","_bindTable","navigateToPast","_navigate","navigateToFuture","navigateUp","navigateDown","isEqualDate","_oldTable","future","currentView","viewWrapper","otherMonth","isWeekColumnVisible","addClassToViewContainer","_animate","_visualizeSelectedDatesInView","_selectCell","validSelectedDates","datesUnique","_validateValue","createDate","isInRange","selectedDates","selectableOptions","_onSelect","_onRelatedTarget","eventArgs","_toggleSelection","_cellsBySelector","_addSelectedCellsToArray","_rangeSelection","currentCell","toDateCell","fromDate","toDate","daysDifference","daysBetweenTwoDates","addDaysToArray","currentDateIndex","_dateInView","firstDateInView","lastDateInView","_isNavigatable","cellIndex","isDisabled","prevent","_keyboardToggleSelection","focusedDate","_nextNavigatable","_keyboardRangeSelection","navigatableDate","_horizontal","viewWidth","float","margin-left","_vertical","_selectedCell","actionAttr","_todayClick","firstDayCurrentMonth","has","isBigger","isEqualMonth","isTodayDisabled","todayClass","_todayClass","_updateAria","ariaTemplate","valueType","firstVisibleDay","calendarInfo","tzOffsetBefore","resultDATE","tzOffsetDiff","getCalendarInfo","navigateUrl","showHeader","hasUrl","currentCalendar","firstDayIdx","shiftArray","shortNames","perRow","build","linkClass","dateString","weekNumberBuild","date1","date2","month1","year1","month2","year2","setMonth","minYear","maxYear","modular","cellsPerRow","otherMonthTemplate","multiplier","endDate","fromDateUTC","endDateUTC","numberOfDays","dateObject","isEqualDatePart","value1","value2","createDisabledExpr","convertDatesArray","disabledDates","searchExpression","oldValue","viewsEnum","INPUT_EVENT_NAME","knownSymbols","DateInput","wrapperClass","skipWrapping","weekday","hour","minute","second","dayperiod","_unbindInput","_bindInput","_updateElementValue","_formElement","_dateTime","getDateObject","customDateTime","_oldValue","stringAndFromat","toPair","_mouseUp","_scroll","blinkInvalid","approximateStringMatching","navigationOnly","valid","parsePart","_selectSegment","difSym","newEvent","_selectNearestSegment","returnValue","initialValue","interval","modifyPart","keycode","begin","initDate","initFormat","initCulture","initMessages","typedMonthPart","typedDayPeriodPart","placeholders","returnsFormat","matcher","mins","formatResult","generateMatcher","retFormat","setExisting","getValue","newMonth","setMinutes","setSeconds","currentChar","lastDateOfMonth","newHours","monthNames","newYear","newMinutes","newSeconds","sampleFormat","oldText","oldFormat","newText","oldTextSeparator","deletedSymbol","DIV","SPAN","MAX","parseFormats","DateView","omitPopup","dateDiv","_dateViewID","DatePicker","_calendar","_setOptions","popupHovered","selectIsClicked","disabledDate","dateView","_updateARIA","_createDateInput","dateInput","_dateIcon","_dateInput","eventType","dateChanged","valueUpdated","textFormatted","stopImmediatePropagation","isSameType","optionsValue","INVALIDMSG","invalidMsgRegExp","INVALIDINPUT","VALIDINPUT","VALIDATIONSUMMARY","INVALIDLABEL","MESSAGEBOX","INPUTINNER","INPUTWRAPPER","ARIAINVALID","ARIADESCRIBEDBY","emailRegExp","urlRegExp","CHECKBOXSELECTOR","NUMBERINPUTSELECTOR","NAME","FORM","NOVALIDATE","VALIDATE","VALIDATE_INPUT","patternMatcher","hasAttribute","validator","allowSubmit","validateOnInit","resolveRules","resolvers","ruleResolvers","decode","numberOfDecimalDigits","parseHtml","parseHTML","searchForMessageContainer","containers","isLabelFor","SUMMARYTEMPLATE","Validator","validateAttributeSelector","_errorTemplate","errorTemplate","_summaryTemplate","validationSummary","_inputSelector","_checkboxSelector","_errors","_isValidated","_validateOnInit","validate","required","email","dateCompare","captcha","noNameCheckbox","namedCheckbox","checkbox","radio","raise","isValidated","isValid","getCaptchaId","_validating","_checkElement","validateOnBlur","_allowSubmit","validateInput","invalid","showValidationSummary","_checkValidity","lbl","_findMessageContainer","messageText","_extractMessage","messageLabel","wasValid","isInputInner","inputWrapper","lblId","_decorateMessageContainer","replaceWith","prevElement","inputWrap","inputLabel","errorId","_associateMessageContainer","hideMessages","_disassociateMessageContainers","labels","hideValidationSummary","locators","messageLocators","getElementsByTagName","locate","decorate","ruleKey","customMessage","nonDefaultMessage","_getInputNames","_errorsByName","inputNames","_renderSummary","_summaryClick","summary","errorsList","nameSpecialCharRegExp","ERRORTEMPLATE","EQUAL_SET","specialRules","fieldType","convertToValueBinding","bindAttr","isAntiForgeryToken","Editable","antiForgeryTokenName","createAttributes","validation","ruleName","DATATYPE","BINDING","stringRule","attributeName","addIdAttribute","convertItems","getEditorTag","tag","checkboxes","kendoEditors","editors","mobileEditors","addValidationRules","modelField","renderHiddenForMvcCheckbox","addHidden","shouldRenderHidden","_isMobile","_validateProxy","_validate","kendoNumericTextBox","kendoDatePicker","kendoTextBox","kendoCheckBox","kendoEditor","editorOptions","tagElement","clearContainer","skipFocus","isObject","isValuesEditor","isHidden","isCustomEditor","isKendoEditor","preventChangeTrigger","_validationEventInProgress","bindAttribute","bindingRegex","validatable","modelFields","FIRST","LAST","PREV","NEXT","FOCUSABLE","KEYDOWN","MAX_VALUE","numeric","navigatable","selectOption","wrapClassName","Pager","sizeClassName","_createDataSource","linkTemplate","selectTemplate","currentPageTemplate","numericSelectItemTemplate","_id","previousNext","_numericWrap","_numericSelect","navigatalbe","pageButtonLabel","of","pageSizes","pageItems","allPages","itemsPerPage","pageSizeDropDownLabel","kendoDropDownList","_refreshClick","_numericSelectChange","_getWidthSizeClass","_navigatable","numericItemTemplate","buttonCount","responsive","morePages","reminder","selectHtml","collapsedTotal","_collapsedTotal","hasAll","selectAll","_restoreFocus","_excludeChildrenFromTab","_focusSelected","_focusMore","_restoreTabIndexes","_keyDown","allFocusable","focusedIndex","KENDO_KEYDOWN","DATABOUND","DATABINDING","EMPTY_STRING","DOT","FOCUSSELECTOR","KEDITITEM","PAGER_CLASS","ITEM_CLASS","ARIA_SETSIZE","ARIA_POSINSET","ARIA_ROLE","EDIT","REMOVE","SAVE","TOUCHSTART","ListView","_itemId","_layout","_setContentHeight","_pageable","_crudHandlers","_scrollable","pageable","altTemplate","editTemplate","bordered","borders","layout","flex","_item","_bindScrollable","_progressHandler","_progress","_error","elementClassNames","contentClassNames","contentPadding","cols","rowHeight","gutter","endlessAppend","_endlessFetchInProgress","_skipRerenderItemsCount","_destroyEditable","_focusNext","pagerWrap","pager","pagerId","multi","overflow-y","-webkit-overflow-scrolling","originalPageSize","_endlessPageSize","_scrollTo","UseJQueryoffset","scrollDirectionFunc","elementOffset","elementDimension","containerScrollAmount","containerDimension","clickCallback","canHandle","isTextBox","editItem","focusAgain","edit","clearSelection","_modelFromElement","_closeEditable","kendoEditable","mousedownNs","touchstartNs","clickNs","rFileExtension","UPLOAD","SUCCESS","COMPLETE","CLEAR","PAUSE","RESUME","VALIDATIONERRORS","INVALIDMAXFILESIZE","INVALIDMINFILESIZE","INVALIDFILEEXTENSION","PROGRESSHIDEDELAY","PROGRESSHIDEDURATION","FOCUS_STATE","headerStatusIcon","warning","Upload","directory","localization","activeInput","_wrapInput","_activeInput","_onParentFormSubmit","_onParentFormReset","_initUploadModule","_toggleDropZone","_onFileAction","_onClearSelected","_onUploadSelected","_onKeyDown","_onInputChange","showFileList","files","async","autoRetryAfter","bufferChunkSize","maxAutoRetries","removeVerb","autoUpload","withCredentials","useArrayBuffer","retry","pause","resume","clearSelectedFiles","uploadSelectedFiles","dropFilesHere","invalidFiles","statusUploading","statusUploaded","statusWarning","statusFailed","headerStatusUploading","headerStatusPaused","headerStatusUploaded","uploadSuccess","uploadFail","invalidMaxFileSize","invalidMinFileSize","invalidFileExtension","allowedExtensions","maxFileSize","minFileSize","dropZone","saveUrl","_module","_supportsFormData","formDataUploadModule","iframeUploadModule","_async","initialFiles","_renderInitialFiles","syncUploadModule","_supportsMultiple","customDropZone","fileEntry","onPause","pauseIcon","onResume","playIcon","upload","onSaveSelected","getFiles","filesData","allFiles","listItems","clearAllFiles","file","_removeFileByDomElement","removeAllFiles","removeFileByUid","_removeFileByUid","clearFileByUid","shouldSendRemoveRequest","clearFile","_removeFile","removeFile","fileData","onRemove","_hideHeaderUploadstatus","_updateHeaderUploadStatus","_addInput","sourceInput","_adjustFocusState","toFocus","_arrowKeyNavigation","kendoKeys","_preventFocusRemove","_asyncCommandKeyNavigation","_retryClicked","_checkAllComplete","chunkSize","concurrent","finish","metaData","prepareChunk","onRetry","_commandKeyNavigation","hasValidationErrors","_filesContainValidationErrors","commandKeys","assignGuidToFiles","_inputFiles","_isAsyncNonBatch","validateFiles","prevented","onSelect","_readDirectory","dirReader","createReader","allFolderFiles","readEntries","entries","_readFile","fullpath","relativePath","droppedFolderFiles","droppedFolderCounter","_proceedDroppedItems","_traverseFileTree","skipCounter","isFile","isDirectory","_onDrop","dt","dataTransfer","droppedFiles","stopEvent","directoryDrop","webkitGetAsEntry","entry","getAllFileInfo","hasErrors","currentFile","_enqueueFile","fileNames","_supportsRemove","_fileAction","_prepareTemplateData","templateData","totalSize","_prepareDefaultSingleFileEntryTemplate","fileSize","getTotalFilesSizeMessage","fileGroup","_prepareDefaultMultipleFileEntriesTemplate","filesHaveValidationErrors","totalFileSize","existingFileEntries","fileUid","fileList","removeEventArgs","_removeFileEntry","allCompletedFiles","allInvalidFiles","_hideActionButtons","fileElement","actionKey","skipClear","classDictionary","iconsClassDictionary","firstActionButton","_clearFileAction","_renderAction","_fileState","stateKey","states","uploading","uploaded","currentState","actionClass","actionText","clearEventArgs","_onFileProgress","percentComplete","progressPct","getFileEntry","_onUploadSuccess","fileInfo","XMLHttpRequest","_setUploadErrorState","_hideUploadProgress","_onUploadError","module","_decreasePosition","_autoRetryAfter","retries","performUpload","uploadPercentage","_updateUploadProgress","fileMetaData","totalChunks","_showActionButtons","actionsWrapper","uploadButton","_showHeaderUploadStatus","isUploading","headerUploadStatus","currentlyUploading","currentlyInvalid","currentlyFailed","currentlyPaused","failedUploads","headerUploadStatusIcon","onAbort","_userAgent","_supportsDrop","isChrome","isSafari","isWindowsSafari","_setupDropZone","dropEffect","bindDragEventWrappers","_bindDocumentDragEventWrappers","_setupCustomDropZone","removeUrl","_submitRemove","onSuccess","onError","removeField","dataFilter","normalizeJSON","traditional","xhrFields","hasLabel","inputFiles","filesContainErrors","relatedInput","getFileName","iframes","_frameId","prepareUpload","saveField","createFrame","registerFrame","createForm","frame","fileValidation","dataInput","onIframeLoad","cleanupFrame","unregisterFrame","started","isFileUploadStarted","processResponse","fakeXHR","tryParseJSON","jsonResult","statusText","stopFrameSubmit","removeUploadedFile","execCommand","cancelled","paused","$input","stripPath","getFileExtension","rawFiles","getFileInfo","rawFile","slashIndex","validationInfo","parseAllowedExtensions","validateFileExtension","validateFileSize","ext","parsedExt","validationErrors","shouldRemoveFileEntry","textStatus","onDragEnter","onDragLeave","hideInterval","lastDrag","sinceLastDrag","sourceElement","fileEntries","enqueueFiles","filesLength","webkitRelativePath","formData","createFormData","createXHR","populateFormData","FileReader","postFormData","removeFileEntry","onload","fileArrayBuffer","_appendBuffer","onerror","readAsArrayBuffer","_getCurrentChunk","buffer1","buffer2","byteLength","prevEntry","stopUploadRequest","_increaseChunkIndex","onRequestSuccess","onRequestError","onRequestProgress","setRequestHeader","send","FormData","chunk","serializedMetaData","raiseError","parseSuccess","_resetChunkIndex","cleanupFileEntry","uploadComplete","isUploadButtonVisible","abort","chunkIndex","uploadUid","_decreaseChunkIndex","oldPosition","methodToInvoke","_getChunker","mozSlice","webkitSlice","BREADCRUMB","breadcrumbStyles","textboxWrapper","delimiter","rootItem","rootLink","overflowIcon","focused","Breadcrumb","bindToLocation","navigational","rootIcon","delimiterIcon","rootTitle","_segments","_generateSegments","segments","_split","_path","previousDomItems","previousItems","_getItems","segment","isRoot","innerText","_edit","shouldRestoreValue","isEnter","isEsc","isNavigational","canNavigate","_wrapperKeydown","_wrapperFocus","_wrapperBlur","elementIsInput","isOnlyRoot","isLastSegment","showIcon","showText","renderDelimiter","lastSegment","_displayOverflowIcons","_shrinkItems","availableWidth","_showItem","overlayWidth","_stretchItems","trail","trimSlashesRegExp","APPLY","SEARCHBOXNS","NAMEFIELD","SIZEFIELD","TYPEFIELD","DEFAULTSORTORDER","EMPTYTILE","TOOLBARTMPL","concatPaths","sizeFormatter","suffix","filebrowser","_call","FileBrowser","_deleteClick","_addClick","_directoryKeyDown","_directoryBlur","uploadFile","orderByName","orderBySize","directoryNotFound","emptyFolder","deleteFile","invalidFileType","overwriteFile","fileTypes","toolbar","_selectedItem","fileUrl","encodeURIComponent","_toolbar","arrangeBy","showUpload","uploadUrl","showCreate","showDelete","kendoUpload","_fileUpload","searchBox","kendoSearchBox","_attachDropzoneEvents","_dropEnter","_dropLeave","_scrollHandler","_positionDropzone","_removeDropzone","_showMessage","createDirectory","_getFieldName","filterRegExp","fileNameField","sizeField","_createFile","_insertFileToList","_override","_tiles","_findFile","typeField","nameField","lastDirectoryIdx","_nameDirectory","_nameExists","directoryNames","_dblClick","_itemTmpl","_editTmpl","_listViewChange","folder","breadcrumbs","typeSortOrder","nameSortOrder","_navigation","navigation","kendoBreadcrumb","SearchBox","_updateValue","_toggleLabel","imagebrowser","ImageBrowser","_uploading","_loadImage","thumbnailUrl","alt","urlJoin","viewTop","viewBottom","excludedNodesRegExp","IMG","HREF","SHOW","LINK","IMAGE","CONTENT","CONTENTURL","CONTENTLOAD","ACTIVESTATE","HOVERSTATE","TABONTOP","NAVIGATABLEITEMS","KEYBOARDNAVIGATABLEITEMS","HOVERABLEITEMS","DEFAULTDISTANCE","itemWrapper","sprite","rendering","wrapperCssClass","textAttributes","contentAttributes","contentUrl","updateTabClasses","tabs","updateFirstLast","tabGroup","scrollButtonHtml","buttonClass","TabStrip","_animations","_contentUrls","contentUrls","_updateClasses","_tabPosition","_processContentUrls","_initialActivate","dataEncodedField","dataContentField","dataImageUrlField","dataUrlField","dataSpriteCssClass","dataContentUrlField","tabPosition","collapsible","_keyDownProxy","activateTab","animationSettings","hasCloseAnimation","neighbours","oldTab","isAnimationEnabled","contentAnimators","inRequest","_scrollableModeActive","_scrollTabsToItem","visibleContents","contentHolder","tabsHeight","isAjaxContent","showContentElement","showContent","ajaxRequest","oldMinHeight","ajaxSettings","halfWidth","fakeProgress","statusIcon","endState","oldProgressAnimation","ajaxOptions","request","progressUpload","evt","noProgress","lengthComputable","stopProgress","tab","inserted","_create","tabWrapper","_updateContentElements","contentElements","deactivateTab","_scrollPrevButton","_scrollNextButton","_toggleDisabled","referenceTab","referenceContent","fromIndex","newTabsCreated","_moveUrlItem","reload","_removeUrlItem","_endItem","_appendUrlItem","_itemClick","isAnchor","oldFocusedTab","renderItem","renderContent","_elementId","wrapperId","tabStripID","_getItem","selectedItems","endItem","wr","wrapperOffsetWidth","tabGroupScrollWidth","scrollPrevButton","scrollNextButton","_scrollableAllowed","_nowScrollingTabs","mouseDown","mouseUp","isRtlScrollDirection","_scrollTabsByDelta","_toggleScrollButtons","currentScrollOffset","itemOffset","tabGroupWidth","itemPosition","scrLeft","activeItem","activeTab","isInitialUpdate","contentId","tabId","currentContent","tabStrip","UndoRedoStack","stack","currentCommandIndex","undo","canUndo","redo","canRedo","util","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","EditorUtils","editorWrapperTemplate","buttonTemplate","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","registerTool","toolName","tool","toolOptions","Editor","defaultTools","registerFormat","formatName","cacheComments","comments","retrieveComments","supportedBrowser","toolGroups","basic","alignment","lists","indenting","formatPainter","links","tables","editorNS","toolbarContainer","toolbarOptions","Dom","tools","_registerHandler","_wrapTextarea","Toolbar","bindTo","heightStyle","expectedHeight","actualHeight","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","Clipboard","undoRedoStack","textarea","deserializedRoot","Serializer","htmlToDom","deserialization","getAllComments","_endTyping","_mouseup","_initializeImmutables","_initializePlaceholder","_togglePlaceholder","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","isResizable","kendoResizable","newSize","resizeend","getKendoResizable","_initializeElementResizing","ElementResizingFactory","_showElementResizeHandlesProxy","_showElementResizeHandles","_destroyElementResizing","elementResizing","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","editorWrap","editArea","_createContentElement","stylesheets","specifiedDomain","domain","domainScript","lang","editAreaTitle","frameBorder","hostname","contentDocument","decorateFrom","write","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","_finishUpdate","_deregisterHandlers","blurTrigger","mousedownTrigger","mouseover dragenter","htmlHeight","_cachedHeight","mouseout dragleave drop contextmenu","restoreHeight","preventPopupHide","nextChar","setStart","toolFromShortcut","keyPressCommand","_runPostContentKeyCommands","keypress","keyup","selectionCodes","_refreshInterval","selectNode","cut copy paste drop dragover","focusin","toolbarContainerElement","$head","head","immutables","Immutables","gecko","toolsFromShortcut","changesContent","_destroyResizings","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","overflowAnchor","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","units","cellSpacing","cellPadding","cellMargin","background","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","serialization","entities","semantic","scripts","pasteCleanup","keepNewLines","msAllFormatting","msConvertLists","msTags","none","dialogOptions","imageBrowser","fileBrowser","_focusOutside","_destroyUploadWidget","tempInput","_uploadWidget","finder","RangeUtils","textNodes","collapsed","startContainer","getFormat","isFormatted","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","selectedHtml","cloneContents","InsertHtmlCommand","toolById","managesUndoRedo","Tool","initialize","commandArguments","UndoTool","nodes","emptyElementContent","ctrl","emptyTableCellContent","PDFMixin","_drawPDF","drawDOM","saveAsPDF","exportPDF","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","whitespace","emptyspace","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","isDataNode","isAncestorOf","findClosestAncestor","rootElem","SHOW_COMMENT","curNode","getNodeLength","splitDataNode","newNode","denormalizedText","deleteData","attrEquals","blockParentOrBody","parentOfType","blockParents","blocks","windowFromDocument","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","encodableChars","entity","isBom","stripBom","stripBomNode","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isInline","isBr","compatMode","scrollingElement","toStart","windowHeight","elementTop","persistScrollTop","restoreScrollTop","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","editableParent","contentEditable","createEmptyNode","mergeAttributes","traverseCss","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","commonAncestor","minPathLength","ancestors","closestSplittableParent","editableParents","editableAncestor","closestEditable","closestEditableOfType","invert","filterFn","filterBy","ensureTrailingBreaks","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","colIndex","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","theadRows","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","pushHeaderId","_onlyUnique","_getNumberOfColumns","numberOfCols","_getNumberOfHeaderColumns","numberOfHeaderRows","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","supportsLeadingWhitespace","TD","toEditableHtml","_toEditableImmutables","immutable","_fillEmptyElements","_removeSystemElements","_resetOrderedLists","ols","ol","originalStart","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","k:script","skipEncoding","specifiedAttributes","semanticAttributes","textDecoration","font","strong","em","styleObj","script","styleAttr","$node","childNode","isEmptyBomNode","mapper","jqNode","textOnly","childrenCount","runCustom","SelectBox","_initSelectOverlay","autoSize","listWidth","_listWidth","selectBox","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","compareBoundaries","startAncestor","endAncestor","isInvalidRange","fromNode","_next","hasNext","traverse","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","adoptContainer","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","textOffset","isData","anchorNode","cursor","cursorNode","moveToElementText","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","toRangePoint","denormalizedOffset","Marker","addCaret","removeCaret","containerIndex","textNode","expand","isExpandable","rangeBoundary","_removeDeadMarkers","_normalizedIndex","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","editableTextNodes","immutableParent","partition","partitionRange","mapAll","mapped","getAll","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","serialized","deletingKey","updateToolOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","createDialog","kendoWindow","OVERFLOWANCHOR","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-list-roman-upper","k-i-list-roman-lower","k-i-import","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-table-position-left","k-i-table-position-center","k-i-table-position-right","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","k-i-copy-format","k-i-apply-format",".k-i-undo","k-i-redo","OverflowAnchorTool","overflowPopup","_initPopup","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","fonts","overflowFlaseTools","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","combobox","dropDown","isOpened","initializeTool","_toolName","inheritText","_appendShortcutSequence","editorElement","editorOffset","_getWindowWidth","_overlaps","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","localizedText","res","_nativeTools","currentTool","nativeTools","toolElement","newGroupName","toolConfig","groupPosition","endGroup","startGroup","updateGroups","popupElement","attachToolsEvents","enabledButtons","disabledButtons","dropdown","editorTools","focusableItems","currentContainer","_executeToolCommand","toolname","_immutablesContext","_updateImmutablesState","uiElement","trackImmutables","uiData","groupUi","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","groupWidth","ViewHtmlCommand","dialog","FormatCommand","FormatTool","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","formatNodes","formatNode","consolidate","outerMostInline","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","GreedyInlineFormatter","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","newRange","ColorTool","_widget","storedRange","_inputFocused","picker","fontWeight","fontStyle","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","UnlinkCommand","LinkCommand","_dialogTemplate","_initialText","_apply","linkUrl","_dialog","textInput","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","_detectEnd","blank","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","puntuationTraverser","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","indexOfRegExp","DomTextTraverser","_traverse","subText","edgeNode","BlockFormatFinder","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","immutalbeParent","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","isImmutable","containsAny","_parentLists","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","sections","lastSection","lastNodes","addLastSection","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","kendoSelectBox","getFormattingValue","_ancestor","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","showBrowser","applied","keyDown","_imageBrowser","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","_onUploadProgress","_onUploadSelect","_onUploadComplete","getKendoUpload","_removeLoadingOverlay","_initLoadingOverlay","uploadEvent","_iframeWrapper","postProcess","genericCommand","InsertHtmlTool","_selectBox","selectbox","defaultExportAsItems","ExportAsCommand","exportType","generateForm","exportAsOptions","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","displayName","_exec","indentDirection","IndentFormatter","parentList","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","suitableNodes","isOutdentable","listParentsCount","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","emptyParagraphContent","paragraph","heading","tableNode","rng","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","oldIE","kbrParent","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","_fileBrowser","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","THEAD","TBODY","TR","TH","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","insertedTable","PopupTool","TableWizardTool","TableWizardCommand","insertNewTable","twTool","InsertTableTool","firstCell","lastCell","cellWidth","cellHeight","tableFromLocation","_setTableSize","_valid","selectedRows","selectedColumns","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","lastTd","td","_adjustColgroups","colElements","colgroupElements","numberOfCells","colgroup","_associateHeaderIds","InsertRowCommand","cellCount","newRow","rowSpanIndex","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","DeleteRowCommand","rowParent","_handleRowSpanCells","adjacentCell","nextRow","firstRow","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","_insertImages","onpaste","beforePaste","clipboardNode","_decoreateClipboardNode","_moveToCaretPosition","clipboardRange","afterPaste","ondragover","ondrop","borderWidth","fontVariant","lineSpacing","nodeOffset","caretOffset","_caretOffset","translateX","translateY","-webkit-transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","closing","faceRe","family","stripEmptyAnchors","listData","startingSymbol","matchSymbol","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","bulletRgx","extractListLevels","msoListRegExp","blockChildren","lastMargin","levels","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","acceptedNameTags","isParentTable","listIndex","levelType","removeAttributes","borderStyles","addBorderStyles","attributeValues","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","removeTextNodes","trs","currentNode","longestRow","titles","removeFormatting","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","enumerator","buildText","getDefaultSeparators","htmlLines","cleaner","tdCleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","Event","removeTableContent","backspaceHandler","deleteSelection","startTyping","_removeBomSpan","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","_join","startImmutable","endImmutable","_moveMarker","_root","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","_getShortcutModifier","platform","mac","matchesKey","matchKey","toolKey","onEndTyping","stopTyping","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","inlineStyles","blockStyles","collectStyles","rangeNodes","populateStyles","nodeStyles","styleValue","styleKey","attributeKey","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","isEmptyInline","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","createdNode","topNode","CopyFormatTool","ApplyFormatTool","PERCENTAGE","PIXEL","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","ResizingUtils","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","inPercentages","inPixels","toPercentages","toPixels","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","LAST_CHILD","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","dataAttribute","detectElementBorderHovering","resizingInProgress","handleOptions","tableElement","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","COLATTR","handleWidth","borderOffset","tableInnerElement","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","rtlModifier","initialDeltaX","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","DRAG_START","DRAG_END","HALF_INSIDE","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_onDragStart","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","initialDeltaY","HandleDraggingStrategy","StrategyFactory","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","ELEMENT_RESIZING_CLASS","COLUMN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_onResizeHandleMouseOver","_onResizeHandleMouseOut","_hasRowsInPixels","styleWidth","parentWidth","ratioValue","ratioTotalValue","constrainedWidth","_setColumnsWidth","styleHeight","parentHeight","constrainedHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","HEADERS","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","tableProp","tableProperties","_lastInCollection","lastSelectedRow","cellProp","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","associatedCells","headersAttr","headersArray","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","tds","swapCell","widthUnit","heightUnit","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","TableWizardEditTool","numericTextBoxSettings","DEFAULT_NUMBER_OF_COLS_AND_ROWS","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","okHandler","collectDialogValues","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","cellView","accessibilityView","_addUnit","onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","storage","component","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","_destroyComponents"],"mappings":"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rR,MAAO,cACR,CACCqR,UAAW,mCACXrR,MAAO,aACR,CACCqR,UAAW,qCACXrR,MAAO,eACR,CACCqR,UAAW,uCACXrR,MAAO,iBACR,CACCqR,UAAW,sCACXrR,MAAO,gBACR,CACCqR,UAAW,qCACXrR,MAAO,eACR,CACCqR,UAAW,uCACXrR,MAAO,iBACR,CACCqR,UAAW,sCACXrR,MAAO,gBACR,CACCqR,UAAW,0BACXrR,MAAO,KAEX+5D,cAAe,YACfC,eAAgB,QAChBt9D,SAAU,4DACVwjG,cAAe,2EAGf4nI,EAAyC,CACzC1kN,WAAY,CAAC,CACT/R,UAAW,kCACXrR,MAAO,YACR,CACCqR,UAAW,oCACXrR,MAAO,cACR,CACCqR,UAAW,mCACXrR,MAAO,aACR,CACCqR,UAAW,qCACXrR,MAAO,eACR,CACCqR,UAAW,uCACXrR,MAAO,iBACR,CACCqR,UAAW,sCACXrR,MAAO,gBACR,CACCqR,UAAW,0BACXrR,MAAO,KAEX+5D,cAAe,YACfC,eAAgB,QAChBt9D,SAAU,4DACVwjG,cAAe,2EAGf6nI,EACA,+FACI,sCACI,qDACI,OACI,yDACA,iCACA,0CACJ,QACA,gCACI,6BACI,gEACJ,SACA,6BACI,qDACA,4EACJ,SACA,6BACI,kEACJ,SACA,6BACI,sDACA,6EACJ,SAEA,6BACI,oEACJ,SACA,6BACI,uDACJ,SAEA,6BACI,8DACJ,SACA,6BACI,oDACJ,SAEA,6BACI,6EACJ,SACA,6BACI,4DACJ,SACA,6BACI,6EACJ,SACA,6BACI,4DACJ,SACA,6BACI,wEACJ,SACA,6BACI,0DACJ,SACA,6BACI,kEACJ,SACA,6BACI,mCACJ,SACA,6BACI,iEACJ,SACA,6BACI,mJACJ,SACA,6BACI,oDACJ,SACA,6BACI,4IACJ,SACA,6BACI,kEACJ,SACA,6BACI,sDACA,uCACJ,SACA,6BACI,uEACJ,SACA,6BACI,uCACJ,SACA,yCACA,6BACI,yGACA,wGACJ,SACJ,SAEA,+BAEI,6BACI,uGACA,qGACJ,SAEA,6BACI,+DACJ,SACA,6BACI,oDACA,2EACJ,SACA,6BACI,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"}